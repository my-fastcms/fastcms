var L=Object.defineProperty;var v=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var z=(e,a,n)=>a in e?L(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,E=(e,a)=>{for(var n in a||(a={}))S.call(a,n)&&z(e,n,a[n]);if(v)for(var n of v(a))N.call(a,n)&&z(e,n,a[n]);return e};import{g as I,e as U,f as R,h as T}from"./index.468dc914.js";import{a0 as j,j as x,o as H,t as M,l as i,m as g,z as l,A as u,E as q,b as B,D as c,p as k,Y as f,X as D,Q,y as w,x as b}from"./vendor.07d41a1e.js";import{_ as X}from"./index.b48d3751.js";const Y={name:"articleManager",setup(){const e=j(),a=x({tagList:[],categoryList:[],tableData:{data:[],total:0,loading:!1,param:{status:"publish",pageNum:1,pageSize:10}}}),n=()=>{const o=a.tableData.param.categoryId;o!=null&&o.length>0&&(a.tableData.param.categoryId=o[o.length-1]),R(a.tableData.param).then(r=>{a.tableData.data=r.data.records,a.tableData.total=r.data.total}).catch(()=>{})},p=o=>{q.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u6587\u7AE0, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u5220\u9664",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{T(o.id).then(()=>{B.success("\u5220\u9664\u6210\u529F"),n()}).catch(r=>{B.error(r.message)})}).catch(()=>{})},C=o=>{e.push({path:"/article/write",query:{id:o.id}})},_=o=>{a.tableData.param.pageSize=o,n()},m=o=>{a.tableData.param.pageNum=o,n()},h=()=>{e.push({path:"/article/write"})};return H(()=>{n(),I().then(o=>{a.categoryList=o.data}),U().then(o=>{a.tagList=o.data})}),E({addArticle:h,onRowUpdate:C,onRowDel:p,onHandleSizeChange:_,onHandleCurrentChange:m,initTableData:n},M(a))}},$={class:"mb15"},G=b("\u65B0\u5EFA\u6587\u7AE0"),J=b("\u67E5\u8BE2"),K=["href"],O=b("\u4FEE\u6539"),P=b("\u5220\u9664");function W(e,a,n,p,C,_){const m=i("el-button"),h=i("el-input"),o=i("el-cascader"),r=i("el-option"),y=i("el-select"),s=i("el-table-column"),A=i("el-table"),F=i("el-pagination"),V=i("el-card");return c(),g("div",null,[l(V,{shadow:"hover"},{default:u(()=>[k("div",$,[l(m,{class:"mt15",size:"small",onClick:a[0]||(a[0]=t=>p.addArticle()),type:"primary",icon:"iconfont icon-shuxingtu"},{default:u(()=>[G]),_:1}),l(h,{size:"small",modelValue:e.tableData.param.title,"onUpdate:modelValue":a[1]||(a[1]=t=>e.tableData.param.title=t),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898","prefix-icon":"el-icon-search",style:{"max-width":"180px"},class:"ml10"},null,8,["modelValue"]),l(o,{size:"small",modelValue:e.tableData.param.categoryId,"onUpdate:modelValue":a[2]||(a[2]=t=>e.tableData.param.categoryId=t),options:e.categoryList,props:{checkStrictly:!0,label:"label",value:"id",children:"children"},placeholder:"\u5206\u7C7B",clearable:"",class:"ml10"},null,8,["modelValue","options"]),l(y,{size:"small",modelValue:e.tableData.param.tagId,"onUpdate:modelValue":a[3]||(a[3]=t=>e.tableData.param.tagId=t),clearable:"",placeholder:"\u6807\u7B7E",class:"ml10"},{default:u(()=>[(c(!0),g(f,null,D(e.tagList,t=>(c(),Q(r,{key:t.id,label:t.tagName,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(y,{size:"small",style:{"max-width":"180px"},modelValue:e.tableData.param.status,"onUpdate:modelValue":a[4]||(a[4]=t=>e.tableData.param.status=t),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",class:"ml10"},{default:u(()=>[l(r,{label:"\u53D1\u5E03",value:"publish"}),l(r,{label:"\u8349\u7A3F",value:"draft"}),l(r,{label:"\u5BA1\u6838",value:"audit"}),l(r,{label:"\u5220\u9664",value:"delete"})]),_:1},8,["modelValue"]),l(m,{size:"small",type:"primary",class:"ml10",onClick:p.initTableData},{default:u(()=>[J]),_:1},8,["onClick"])]),l(A,{data:e.tableData.data,stripe:"",style:{width:"100%"}},{default:u(()=>[l(s,{prop:"id",label:"ID","show-overflow-tooltip":""}),l(s,{prop:"title",label:"\u6807\u9898","show-overflow-tooltip":""},{default:u(t=>[k("a",{href:t.row.url,target:"_blank"},w(t.row.title),9,K)]),_:1}),l(s,{prop:"categoryList",label:"\u5206\u7C7B","show-overflow-tooltip":""},{default:u(t=>[(c(!0),g(f,null,D(t.row.categoryList,d=>(c(),g("span",{key:d.id},w(d.title)+",",1))),128))]),_:1}),l(s,{prop:"tagList",label:"\u6807\u7B7E","show-overflow-tooltip":""},{default:u(t=>[(c(!0),g(f,null,D(t.row.tagList,d=>(c(),g("span",{key:d.id},w(d.tagName)+",",1))),128))]),_:1}),l(s,{prop:"author",label:"\u4F5C\u8005","show-overflow-tooltip":""}),l(s,{prop:"statusStr",label:"\u72B6\u6001","show-overflow-tooltip":""}),l(s,{prop:"viewCount",label:"\u6D4F\u89C8\u6B21\u6570","show-overflow-tooltip":""}),l(s,{prop:"created",label:"\u521B\u5EFA\u65F6\u95F4","show-overflow-tooltip":""}),l(s,{prop:"path",label:"\u64CD\u4F5C",width:"90"},{default:u(t=>[l(m,{size:"mini",type:"text",onClick:d=>p.onRowUpdate(t.row)},{default:u(()=>[O]),_:2},1032,["onClick"]),l(m,{size:"mini",type:"text",onClick:d=>p.onRowDel(t.row)},{default:u(()=>[P]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(F,{onSizeChange:p.onHandleSizeChange,onCurrentChange:p.onHandleCurrentChange,class:"mt15","pager-count":5,"page-sizes":[10,20,30],"current-page":e.tableData.param.pageNum,"onUpdate:current-page":a[5]||(a[5]=t=>e.tableData.param.pageNum=t),background:"","page-size":e.tableData.param.pageSize,"onUpdate:page-size":a[6]||(a[6]=t=>e.tableData.param.pageSize=t),layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),_:1})])}var la=X(Y,[["render",W]]);export{la as default};
