var $=Object.defineProperty;var P=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var V=(e,o,a)=>o in e?$(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,k=(e,o)=>{for(var a in o||(o={}))q.call(o,a)&&V(e,a,o[a]);if(P)for(var a of P(o))T.call(o,a)&&V(e,a,o[a]);return e};import{H as j,M as R,a0 as U,j as D,J as B,o as E,t as A,l as f,m as z,p as t,y as h,z as s,A as r,b,D as K,q as S,x as L,G as M}from"./vendor.07d41a1e.js";import{_ as x,u as J,f as O,S as G}from"./index.589a3d30.js";import{g as H,r as Q}from"./index.c345faac.js";import{l as I}from"./index.34a00848.js";import{a as W}from"./index.360529d8.js";const X={name:"register",setup(){const{t:e}=j(),{proxy:o}=M(),a=J(),i=R(),y=U(),u=D({isShowPassword:!1,public_website_title:a.state.themeConfig.themeConfig.globalTitle,captcha:"",myForm:{nickName:"",username:"",password:"",repeatPassword:"",code:""},rules:{username:{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:"blur"},nickName:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",trigger:"blur"},password:{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"},repeatPassword:{required:!0,message:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801",trigger:"blur"},code:{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",trigger:"blur"}},loading:{registerIn:!1}}),m=B(()=>a.state.themeConfig.themeConfig),c=B(()=>O(new Date)),p=async()=>{H().then(l=>{u.captcha=l.data.image,u.captchaKey=l.data.codeUuid,G.set("ClientId",u.captchaKey)}).catch(()=>{})};E(()=>{p();let l=new Array;l.push("public_website_title");let d=I.stringify({configKeys:l},{arrayFormat:"repeat"});W(d).then(_=>{_.data.forEach(g=>{g.key=="public_website_title"&&g.jsonValue!=null&&(u.public_website_title=g.jsonValue)})})});const F=async()=>{new Promise(l=>{o.$refs.myRefForm.validate(d=>{d&&(l(d),w())})})},w=async()=>{Q(I.stringify(u.myForm)).then(()=>{C()}).catch(l=>{p(),b({showClose:!0,message:l.message?l.message:"\u7CFB\u7EDF\u9519\u8BEF",type:"error"})})},C=()=>{var d,_,g,v;let l=c.value;((d=i.query)==null?void 0:d.redirect)?y.push({path:(_=i.query)==null?void 0:_.redirect,query:Object.keys((g=i.query)==null?void 0:g.params).length>0?JSON.parse((v=i.query)==null?void 0:v.params):""}):y.push("/login"),setTimeout(()=>{u.loading.registerIn=!0;const N=e("message.registerInText");b.success(`${l}\uFF0C${N}`)},300)};return k({getThemeConfig:m,currentTime:c,confirmUserName:()=>{/[^a-z0-9_]/g.test(u.myForm.username)&&(u.myForm.username="",b({showClose:!0,message:"\u53EA\u80FD\u8F93\u5165\u82F1\u6587\u5B57\u6BCD\u6570\u5B57",type:"error"}))},onRegisterIn:F,toLogin:()=>{y.push("/login")},refreshCode:p},A(u))}},Y={class:"login-container"},Z={class:"login-logo"},ee={class:"login-content"},oe={class:"login-content-main"},se={class:"login-content-title"},te={class:"login-content-code"},ae=["src"],ne={class:"mt10"},re={class:"login-copyright"},le={class:"mb5 login-copyright-company"},ie={class:"login-copyright-msg"};function ue(e,o,a,i,y,u){const m=f("el-input"),c=f("el-form-item"),p=f("el-col"),F=f("el-row"),w=f("el-button"),C=f("el-form");return K(),z("div",Y,[t("div",Z,[t("span",null,h(i.getThemeConfig.globalViceTitle),1)]),t("div",ee,[t("div",oe,[t("h4",se,h(e.public_website_title),1),t("div",null,[s(C,{class:"login-content-form",model:e.myForm,rules:e.rules,ref:"myRefForm"},{default:r(()=>[s(c,{prop:"username"},{default:r(()=>[s(m,{type:"text",placeholder:e.$t("message.account.accountPlaceholder1"),"prefix-icon":"el-icon-user",modelValue:e.myForm.username,"onUpdate:modelValue":o[0]||(o[0]=n=>e.myForm.username=n),clearable:"",autocomplete:"off",onChange:i.confirmUserName},null,8,["placeholder","modelValue","onChange"])]),_:1}),s(c,{prop:"nickName"},{default:r(()=>[s(m,{type:"text",placeholder:e.$t("message.account.accountPlaceholder6"),"prefix-icon":"el-icon-user",modelValue:e.myForm.nickName,"onUpdate:modelValue":o[1]||(o[1]=n=>e.myForm.nickName=n),clearable:"",autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),s(c,{prop:"password"},{default:r(()=>[s(m,{type:e.isShowPassword?"text":"password",placeholder:e.$t("message.account.accountPlaceholder2"),"prefix-icon":"el-icon-lock",modelValue:e.myForm.password,"onUpdate:modelValue":o[3]||(o[3]=n=>e.myForm.password=n),autocomplete:"off"},{suffix:r(()=>[t("i",{class:S(["iconfont el-input__icon login-content-password",e.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:o[2]||(o[2]=n=>e.isShowPassword=!e.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),s(c,{prop:"repeatPassword"},{default:r(()=>[s(m,{type:e.isShowPassword?"text":"password",placeholder:e.$t("message.account.accountPlaceholder4"),"prefix-icon":"el-icon-lock",modelValue:e.myForm.repeatPassword,"onUpdate:modelValue":o[5]||(o[5]=n=>e.myForm.repeatPassword=n),autocomplete:"off"},{suffix:r(()=>[t("i",{class:S(["iconfont el-input__icon login-content-password",e.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:o[4]||(o[4]=n=>e.isShowPassword=!e.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),s(c,{prop:"code"},{default:r(()=>[s(F,{gutter:15},{default:r(()=>[s(p,{span:14},{default:r(()=>[s(m,{type:"text",maxlength:"5",placeholder:e.$t("message.account.accountPlaceholder3"),"prefix-icon":"el-icon-position",modelValue:e.myForm.code,"onUpdate:modelValue":o[6]||(o[6]=n=>e.myForm.code=n),clearable:"",autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),s(p,{span:10},{default:r(()=>[t("div",te,[t("img",{class:"login-content-code-img",alt:"fastcms",onClick:o[7]||(o[7]=(...n)=>i.refreshCode&&i.refreshCode(...n)),src:e.captcha},null,8,ae)])]),_:1})]),_:1})]),_:1}),s(c,null,{default:r(()=>[s(w,{type:"primary",class:"login-content-submit",round:"",onClick:i.onRegisterIn,loading:e.loading.registerIn},{default:r(()=>[t("span",null,h(e.$t("message.account.accountRegistBtnText")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model","rules"]),t("div",ne,[s(w,{type:"text",size:"small",onClick:i.toLogin},{default:r(()=>[L(h(e.$t("message.link.two5")),1)]),_:1},8,["onClick"])])])])]),t("div",re,[t("div",le,h(e.$t("message.copyright.one5")),1),t("div",ie,h(e.$t("message.copyright.two6")),1)])])}var ye=x(X,[["render",ue],["__scopeId","data-v-aad4185c"]]);export{ye as default};
