var v=Object.defineProperty;var h=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var b=(a,e,o)=>e in a?v(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o,_=(a,e)=>{for(var o in e||(e={}))E.call(e,o)&&b(a,o,e[o]);if(h)for(var o of h(e))y.call(e,o)&&b(a,o,e[o]);return a};import{g as B,d as F}from"./client.f4e5d85b.js";import{a0 as A,j as k,o as x,t as S,l as i,m as N,z as l,A as u,E as R,b as f,D as V,p as C,y as j,x as p}from"./vendor.07d41a1e.js";import{_ as T}from"./index.b48d3751.js";const U={name:"clientArticleManager",setup(){const a=A(),e=k({tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10}}}),o=()=>{B(e.tableData.param).then(t=>{e.tableData.data=t.data.records,e.tableData.total=t.data.total}).catch(()=>{})},r=t=>{R.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u6587\u7AE0, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u5220\u9664",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{F(t.id).then(()=>{f.success("\u5220\u9664\u6210\u529F"),o()}).catch(c=>{f.error(c.message)})}).catch(()=>{})},m=t=>{a.push({path:"/article/write",query:{id:t.id}})},g=t=>{e.tableData.param.pageSize=t,o()},s=t=>{e.tableData.param.pageNum=t,o()},d=()=>{a.push({path:"/article/write"})};return x(()=>{o()}),_({addArticle:d,onRowUpdate:m,onRowDel:r,onHandleSizeChange:g,onHandleCurrentChange:s,initTableData:o},S(e))}},H={class:"mb15"},M=p("\u65B0\u5EFA\u6587\u7AE0"),q=p("\u67E5\u8BE2"),I=["href"],L=p("\u4FEE\u6539"),$=p("\u5220\u9664");function G(a,e,o,r,m,g){const s=i("el-button"),d=i("el-input"),t=i("el-table-column"),c=i("el-table"),w=i("el-pagination"),D=i("el-card");return V(),N("div",null,[l(D,{shadow:"hover"},{default:u(()=>[C("div",H,[l(s,{class:"mt15",size:"small",onClick:e[0]||(e[0]=n=>r.addArticle()),type:"primary",icon:"iconfont icon-shuxingtu"},{default:u(()=>[M]),_:1}),l(d,{size:"small",modelValue:a.tableData.param.title,"onUpdate:modelValue":e[1]||(e[1]=n=>a.tableData.param.title=n),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898","prefix-icon":"el-icon-search",style:{"max-width":"180px"},class:"ml10"},null,8,["modelValue"]),l(s,{size:"small",type:"primary",class:"ml10",onClick:r.initTableData},{default:u(()=>[q]),_:1},8,["onClick"])]),l(c,{data:a.tableData.data,stripe:"",style:{width:"100%"}},{default:u(()=>[l(t,{prop:"id",label:"ID","show-overflow-tooltip":""}),l(t,{prop:"title",label:"\u6807\u9898","show-overflow-tooltip":""},{default:u(n=>[C("a",{href:n.row.url,target:"_blank"},j(n.row.title),9,I)]),_:1}),l(t,{prop:"author",label:"\u4F5C\u8005","show-overflow-tooltip":""}),l(t,{prop:"status",label:"\u72B6\u6001","show-overflow-tooltip":""}),l(t,{prop:"viewCount",label:"\u6D4F\u89C8\u6B21\u6570","show-overflow-tooltip":""}),l(t,{prop:"created",label:"\u521B\u5EFA\u65F6\u95F4","show-overflow-tooltip":""}),l(t,{prop:"path",label:"\u64CD\u4F5C",width:"90"},{default:u(n=>[l(s,{size:"mini",type:"text",onClick:z=>r.onRowUpdate(n.row)},{default:u(()=>[L]),_:2},1032,["onClick"]),l(s,{size:"mini",type:"text",onClick:z=>r.onRowDel(n.row)},{default:u(()=>[$]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(w,{onSizeChange:r.onHandleSizeChange,onCurrentChange:r.onHandleCurrentChange,class:"mt15","pager-count":5,"page-sizes":[10,20,30],"current-page":a.tableData.param.pageNum,"onUpdate:current-page":e[2]||(e[2]=n=>a.tableData.param.pageNum=n),background:"","page-size":a.tableData.param.pageSize,"onUpdate:page-size":e[3]||(e[3]=n=>a.tableData.param.pageSize=n),layout:"total, sizes, prev, pager, next, jumper",total:a.tableData.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),_:1})])}var Q=T(U,[["render",G]]);export{Q as default};
