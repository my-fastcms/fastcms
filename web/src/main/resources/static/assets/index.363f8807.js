var v=Object.defineProperty;var h=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var _=(e,a,o)=>a in e?v(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,b=(e,a)=>{for(var o in a||(a={}))E.call(a,o)&&_(e,o,a[o]);if(h)for(var o of h(a))x.call(a,o)&&_(e,o,a[o]);return e};import{a as y,b as B}from"./index.3fe6761a.js";import{j as F,a0 as k,o as S,t as N,l as i,m as R,z as n,A as s,E as j,b as f,D as A,p as w,y as H,x as p}from"./vendor.07d41a1e.js";import{_ as M}from"./index.b48d3751.js";const P={name:"pageManager",setup(){const e=F({tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10}}}),a=k(),o=()=>{y(e.tableData.param).then(t=>{e.tableData.data=t.data.records,e.tableData.total=t.data.total}).catch(()=>{})},u=t=>{j.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u9875\u9762, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u5220\u9664",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{B(t.id).then(()=>{f.success("\u5220\u9664\u6210\u529F"),o()}).catch(c=>{f.error(c.message)})}).catch(()=>{})},m=t=>{a.push({path:"/page/write",query:{id:t.id}})},g=t=>{e.tableData.param.pageSize=t,o()},r=t=>{e.tableData.param.pageNum=t,o()},d=()=>{a.push({path:"/page/write"})};return S(()=>{o()}),b({addPage:d,onRowUpdate:m,onRowDel:u,onHandleSizeChange:g,onHandleCurrentChange:r,initTableData:o},N(e))}},T={class:"mb15"},U=p("\u65B0\u5EFA\u9875\u9762"),V=p("\u67E5\u8BE2"),$=["href"],q=p("\u4FEE\u6539"),I=p("\u5220\u9664");function L(e,a,o,u,m,g){const r=i("el-button"),d=i("el-input"),t=i("el-table-column"),c=i("el-table"),C=i("el-pagination"),D=i("el-card");return A(),R("div",null,[n(D,{shadow:"hover"},{default:s(()=>[w("div",T,[n(r,{class:"mt15",size:"small",onClick:a[0]||(a[0]=l=>u.addPage()),type:"primary",icon:"iconfont icon-shuxingtu"},{default:s(()=>[U]),_:1}),n(d,{size:"small",placeholder:"\u8BF7\u8F93\u5165\u6807\u9898","prefix-icon":"el-icon-search",style:{"max-width":"180px"},class:"ml10"}),n(r,{size:"small",type:"primary",class:"ml10"},{default:s(()=>[V]),_:1})]),n(c,{data:e.tableData.data,stripe:"",style:{width:"100%"}},{default:s(()=>[n(t,{prop:"id",label:"ID","show-overflow-tooltip":""}),n(t,{prop:"title",label:"\u6807\u9898","show-overflow-tooltip":""},{default:s(l=>[w("a",{href:l.row.url,target:"_blank"},H(l.row.title),9,$)]),_:1}),n(t,{prop:"author",label:"\u4F5C\u8005","show-overflow-tooltip":""}),n(t,{prop:"status",label:"\u72B6\u6001","show-overflow-tooltip":""}),n(t,{prop:"viewCount",label:"\u6D4F\u89C8\u6B21\u6570","show-overflow-tooltip":""}),n(t,{prop:"created",label:"\u521B\u5EFA\u65F6\u95F4","show-overflow-tooltip":""}),n(t,{prop:"path",label:"\u64CD\u4F5C",width:"90"},{default:s(l=>[n(r,{size:"mini",type:"text",onClick:z=>u.onRowUpdate(l.row)},{default:s(()=>[q]),_:2},1032,["onClick"]),n(r,{size:"mini",type:"text",onClick:z=>u.onRowDel(l.row)},{default:s(()=>[I]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),n(C,{onSizeChange:u.onHandleSizeChange,onCurrentChange:u.onHandleCurrentChange,class:"mt15","pager-count":5,"page-sizes":[10,20,30],"current-page":e.tableData.param.pageNum,"onUpdate:current-page":a[1]||(a[1]=l=>e.tableData.param.pageNum=l),background:"","page-size":e.tableData.param.pageSize,"onUpdate:page-size":a[2]||(a[2]=l=>e.tableData.param.pageSize=l),layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),_:1})])}var Q=M(P,[["render",L]]);export{Q as default};
