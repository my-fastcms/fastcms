var S=Object.defineProperty;var w=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var k=(l,a,n)=>a in l?S(l,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[a]=n,v=(l,a)=>{for(var n in a||(a={}))N.call(a,n)&&k(l,n,a[n]);if(w)for(var n of w(a))R.call(a,n)&&k(l,n,a[n]);return l};import{r as y,M as j,j as H,o as O,t as q,l as m,m as T,z as e,A as u,b as U,D as V,Y as L,X as K,Q as I,G as z,x as h,p as M}from"./vendor.07d41a1e.js";import{A as G}from"./index.cae9994f.js";import{g as P,e as Q,k as W,l as X}from"./index.468dc914.js";import{l as Y}from"./index.34a00848.js";import{C as J}from"./index.1a97bf2c.js";import{_ as Z}from"./index.b48d3751.js";import"./index.30cc523d.js";import"./client.5fb9dd1e.js";const $={name:"articleWrite",components:{AttachDialog:G,ckeditor:J},setup(l,a){const n=y(),i=y(),A=y(),D=j(),{proxy:d}=z(),t=H({fileType:"image",fit:"fill",row:null,isShowDialog:!1,params:{},categories:[],tags:[],ruleForm:{title:"",commentEnable:!0,contentHtml:"",summary:"",seoKeywords:"",seoDescription:"",outLink:"",sortNum:0,thumbnail:"",suffix:"",status:"publish"},rules:{title:{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898",trigger:"blur"},contentHtml:{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u8BE6\u60C5",trigger:"blur"},thumbnail:{required:!0,message:"\u8BF7\u9009\u62E9\u7F29\u7565\u56FE",trigger:"blur"},summary:{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6458\u8981",trigger:"blur"},seoKeywords:{required:!0,message:"\u8BF7\u8F93\u5165SEO\u5173\u952E\u8BCD",trigger:"blur"},seoDescription:{required:!0,message:"\u8BF7\u8F93\u5165SEO\u63CF\u8FF0",trigger:"blur"},status:{required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u5E03\u72B6\u6001",trigger:"blur"}}}),s=()=>{P().then(r=>{t.categories=r.data}),Q().then(r=>{r.data.forEach(p=>{t.tags.push(p)})})},E=()=>{d.$refs.myRefForm.validate(r=>{if(r){let p=Y.stringify(t.ruleForm,{arrayFormat:"repeat"});W(p).then(c=>{t.ruleForm.id=c.data,U.success("\u4FDD\u5B58\u6210\u529F")}).catch(c=>{U({showClose:!0,message:c.message?c.message:"\u7CFB\u7EDF\u9519\u8BEF",type:"error"})})}})},f=r=>{X(r).then(p=>{t.ruleForm=p.data})},g=r=>{console.log(r)},_=()=>{n.value.openDialog(1)},B=()=>{i.value.openDialog(1)},F=r=>{t.ruleForm.thumbnail=r[0].filePath,t.ruleForm.thumbnailUrl=r[0].path},b=r=>{t.ruleForm.attachId=r[0].id,t.ruleForm.attachTitle=r[0].fileName};return O(()=>{t.params=D,s();let r=t.params.query.id;r&&f(r)}),v({thumbnailDialogRef:n,attachDialogRef:i,categoryCascaderRef:A,onSubmit:E,onThumbnailDialogOpen:_,onAttachlDialogOpen:B,getSelectThumbnail:F,getSelectAttach:b,getCategoryList:s,getArticleInfo:f,onEditorReady:g},q(t))}},ee={class:"container"},le=h("\u9009\u62E9\u56FE\u7247"),ue=M("div",{class:"sub-title"},"\u7ED3\u5408\u7F51\u7AD9\u6A21\u677F\u4F7F\u7528\uFF0C\u4E0D\u6B63\u786E\u586B\u5199\uFF0C\u8BBF\u95EE\u9875\u9762\u4F1A\u51FA\u73B0404",-1),ae=h("\u9009\u62E9\u9644\u4EF6"),te=h("\u4FDD \u5B58");function oe(l,a,n,i,A,D){const d=m("el-input"),t=m("el-form-item"),s=m("el-col"),E=m("ckeditor"),f=m("el-image"),g=m("el-link"),_=m("el-switch"),B=m("el-cascader"),F=m("el-option"),b=m("el-select"),r=m("el-row"),p=m("el-button"),c=m("el-form"),x=m("el-card"),C=m("AttachDialog");return V(),T("div",ee,[e(x,null,{default:u(()=>[e(c,{model:l.ruleForm,size:"small","label-width":"100px",rules:l.rules,ref:"myRefForm"},{default:u(()=>[e(r,{gutter:35},{default:u(()=>[e(s,{class:"mb20"},{default:u(()=>[e(t,{label:"\u6807\u9898",prop:"title"},{default:u(()=>[e(d,{modelValue:l.ruleForm.title,"onUpdate:modelValue":a[0]||(a[0]=o=>l.ruleForm.title=o),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{class:"mb20"},{default:u(()=>[e(t,{label:"\u6587\u7AE0\u8BE6\u60C5",prop:"contentHtml"},{default:u(()=>[e(E,{modelValue:l.ruleForm.contentHtml,"onUpdate:modelValue":a[1]||(a[1]=o=>l.ruleForm.contentHtml=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{class:"mb20"},{default:u(()=>[e(t,{label:"\u7F29\u7565\u56FE",prop:"thumbnail"},{default:u(()=>[e(f,{style:{width:"100px",height:"100px"},src:l.ruleForm.thumbnailUrl,fit:l.fit},null,8,["src","fit"])]),_:1}),e(t,null,{default:u(()=>[e(g,{type:"primary",onClick:i.onThumbnailDialogOpen},{default:u(()=>[le]),_:1},8,["onClick"])]),_:1})]),_:1}),e(s,{class:"mb20"},{default:u(()=>[e(t,{label:"\u6587\u7AE0\u6458\u8981",prop:"summary"},{default:u(()=>[e(d,{modelValue:l.ruleForm.summary,"onUpdate:modelValue":a[2]||(a[2]=o=>l.ruleForm.summary=o),type:"textarea",rows:2,placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6458\u8981",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(t,{label:"SEO\u5173\u952E\u8BCD",prop:"seoKeywords"},{default:u(()=>[e(d,{type:"textarea",rows:2,modelValue:l.ruleForm.seoKeywords,"onUpdate:modelValue":a[3]||(a[3]=o=>l.ruleForm.seoKeywords=o),placeholder:"\u8BF7\u8F93\u5165seo\u5173\u952E\u8BCD",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(t,{label:"SEO\u63CF\u8FF0",prop:"seoDescription"},{default:u(()=>[e(d,{type:"textarea",rows:2,modelValue:l.ruleForm.seoDescription,"onUpdate:modelValue":a[4]||(a[4]=o=>l.ruleForm.seoDescription=o),placeholder:"\u8BF7\u8F93\u5165SEO\u63CF\u8FF0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(t,{label:"\u6392\u5E8F",prop:"sortNum"},{default:u(()=>[e(d,{modelValue:l.ruleForm.sortNum,"onUpdate:modelValue":a[5]||(a[5]=o=>l.ruleForm.sortNum=o),type:"number",placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F\u5E8F\u53F7",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(t,{label:"\u5916\u94FE",prop:"outLink"},{default:u(()=>[e(d,{modelValue:l.ruleForm.outLink,"onUpdate:modelValue":a[6]||(a[6]=o=>l.ruleForm.outLink=o),placeholder:"\u8BF7\u8F93\u5165\u5916\u94FE",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(t,{label:"\u6A21\u677F",prop:"suffix"},{default:u(()=>[e(d,{modelValue:l.ruleForm.suffix,"onUpdate:modelValue":a[7]||(a[7]=o=>l.ruleForm.suffix=o),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6A21\u677F\u540E\u7F00",clearable:""},null,8,["modelValue"]),ue]),_:1})]),_:1}),e(s,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(t,{label:"\u5141\u8BB8\u8BC4\u8BBA",prop:"commentEnable"},{default:u(()=>[e(_,{modelValue:l.ruleForm.commentEnable,"onUpdate:modelValue":a[8]||(a[8]=o=>l.ruleForm.commentEnable=o),"active-color":"#13ce66"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(t,{label:"\u5206\u7C7B",prop:"categories"},{default:u(()=>[e(B,{ref:"categoryCascader",modelValue:l.ruleForm.articleCategory,"onUpdate:modelValue":a[9]||(a[9]=o=>l.ruleForm.articleCategory=o),options:l.categories,props:{multiple:!0,label:"label",value:"id",children:"children"},"collapse-tags":"",clearable:""},null,8,["modelValue","options"])]),_:1})]),_:1}),e(s,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(t,{label:"\u6807\u7B7E",prop:"tags"},{default:u(()=>[e(b,{modelValue:l.ruleForm.articleTag,"onUpdate:modelValue":a[10]||(a[10]=o=>l.ruleForm.articleTag=o),class:"w100",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"\u53EF\u76F4\u63A5\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},{default:u(()=>[(V(!0),T(L,null,K(l.tags,o=>(V(),I(F,{key:o.id,label:o.tagName,value:o.tagName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(t,{label:"\u9644\u4EF6",prop:"attachTitle"},{default:u(()=>[e(d,{modelValue:l.ruleForm.attachTitle,"onUpdate:modelValue":a[11]||(a[11]=o=>l.ruleForm.attachTitle=o),readonly:""},null,8,["modelValue"])]),_:1}),e(t,null,{default:u(()=>[e(g,{type:"primary",onClick:i.onAttachlDialogOpen},{default:u(()=>[ae]),_:1},8,["onClick"])]),_:1})]),_:1}),e(s,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(t,{label:"\u72B6\u6001",prop:"status"},{default:u(()=>[e(b,{modelValue:l.ruleForm.status,"onUpdate:modelValue":a[12]||(a[12]=o=>l.ruleForm.status=o),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",class:"w100"},{default:u(()=>[e(F,{label:"\u53D1\u5E03",value:"publish"}),e(F,{label:"\u8349\u7A3F",value:"draft"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:u(()=>[e(t,null,{default:u(()=>[e(p,{type:"primary",onClick:i.onSubmit,size:"small"},{default:u(()=>[te]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(C,{ref:"thumbnailDialogRef",onAttachHandler:i.getSelectThumbnail,fileType:l.fileType},null,8,["onAttachHandler","fileType"]),e(C,{ref:"attachDialogRef",onAttachHandler:i.getSelectAttach},null,8,["onAttachHandler"])])}var fe=Z($,[["render",oe]]);export{fe as default};
