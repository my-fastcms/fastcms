var N=Object.defineProperty;var P=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var V=(e,o,r)=>o in e?N(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,k=(e,o)=>{for(var r in o||(o={}))T.call(o,r)&&V(e,r,o[r]);if(P)for(var r of P(o))q.call(o,r)&&V(e,r,o[r]);return e};import{H as $,M as R,a0 as U,j as D,J as B,o as j,t as E,l as p,m as A,p as t,y as g,z as s,A as n,b as _,D as z,q as S,x as L,G as M}from"./vendor.07d41a1e.js";import{_ as x,u as J,f as K,S as O}from"./index.b48d3751.js";import{g as G,r as H}from"./index.261eb283.js";import{l as Q}from"./index.34a00848.js";const W={name:"register",setup(){const{t:e}=$(),{proxy:o}=M(),r=J(),l=R(),h=U(),i=D({isShowPassword:!1,captcha:"",myForm:{nickName:"",username:"",password:"",repeatPassword:"",code:""},rules:{username:{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:"blur"},nickName:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",trigger:"blur"},password:{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"},repeatPassword:{required:!0,message:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801",trigger:"blur"},code:{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",trigger:"blur"}},loading:{registerIn:!1}}),c=B(()=>r.state.themeConfig.themeConfig),u=B(()=>K(new Date)),d=async()=>{G().then(m=>{i.captcha=m.data.image,i.captchaKey=m.data.codeUuid,O.set("ClientId",i.captchaKey)}).catch(()=>{})};j(()=>{d()});const w=async()=>{new Promise(m=>{o.$refs.myRefForm.validate(f=>{f&&(m(f),y())})})},y=async()=>{H(Q.stringify(i.myForm)).then(()=>{F()}).catch(m=>{d(),_({showClose:!0,message:m.message?m.message:"\u7CFB\u7EDF\u9519\u8BEF",type:"error"})})},F=()=>{var f,C,v,b;let m=u.value;((f=l.query)==null?void 0:f.redirect)?h.push({path:(C=l.query)==null?void 0:C.redirect,query:Object.keys((v=l.query)==null?void 0:v.params).length>0?JSON.parse((b=l.query)==null?void 0:b.params):""}):h.push("/login"),setTimeout(()=>{i.loading.registerIn=!0;const I=e("message.registerInText");_.success(`${m}\uFF0C${I}`)},300)};return k({getThemeConfig:c,currentTime:u,confirmUserName:()=>{/[^a-z0-9_]/g.test(i.myForm.username)&&(i.myForm.username="",_({showClose:!0,message:"\u53EA\u80FD\u8F93\u5165\u82F1\u6587\u5B57\u6BCD\u6570\u5B57",type:"error"}))},onRegisterIn:w,toLogin:()=>{h.push("/login")},refreshCode:d},E(i))}},X={class:"login-container"},Y={class:"login-logo"},Z={class:"login-content"},ee={class:"login-content-main"},oe={class:"login-content-title"},se={class:"login-content-code"},te=["src"],ae={class:"mt10"},ne={class:"login-copyright"},re={class:"mb5 login-copyright-company"},le={class:"login-copyright-msg"};function ie(e,o,r,l,h,i){const c=p("el-input"),u=p("el-form-item"),d=p("el-col"),w=p("el-row"),y=p("el-button"),F=p("el-form");return z(),A("div",X,[t("div",Y,[t("span",null,g(l.getThemeConfig.globalViceTitle),1)]),t("div",Z,[t("div",ee,[t("h4",oe,g(l.getThemeConfig.globalTitle),1),t("div",null,[s(F,{class:"login-content-form",model:e.myForm,rules:e.rules,ref:"myRefForm"},{default:n(()=>[s(u,{prop:"username"},{default:n(()=>[s(c,{type:"text",placeholder:e.$t("message.account.accountPlaceholder1"),"prefix-icon":"el-icon-user",modelValue:e.myForm.username,"onUpdate:modelValue":o[0]||(o[0]=a=>e.myForm.username=a),clearable:"",autocomplete:"off",onChange:l.confirmUserName},null,8,["placeholder","modelValue","onChange"])]),_:1}),s(u,{prop:"nickName"},{default:n(()=>[s(c,{type:"text",placeholder:e.$t("message.account.accountPlaceholder6"),"prefix-icon":"el-icon-user",modelValue:e.myForm.nickName,"onUpdate:modelValue":o[1]||(o[1]=a=>e.myForm.nickName=a),clearable:"",autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),s(u,{prop:"password"},{default:n(()=>[s(c,{type:e.isShowPassword?"text":"password",placeholder:e.$t("message.account.accountPlaceholder2"),"prefix-icon":"el-icon-lock",modelValue:e.myForm.password,"onUpdate:modelValue":o[3]||(o[3]=a=>e.myForm.password=a),autocomplete:"off"},{suffix:n(()=>[t("i",{class:S(["iconfont el-input__icon login-content-password",e.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:o[2]||(o[2]=a=>e.isShowPassword=!e.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),s(u,{prop:"repeatPassword"},{default:n(()=>[s(c,{type:e.isShowPassword?"text":"password",placeholder:e.$t("message.account.accountPlaceholder4"),"prefix-icon":"el-icon-lock",modelValue:e.myForm.repeatPassword,"onUpdate:modelValue":o[5]||(o[5]=a=>e.myForm.repeatPassword=a),autocomplete:"off"},{suffix:n(()=>[t("i",{class:S(["iconfont el-input__icon login-content-password",e.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:o[4]||(o[4]=a=>e.isShowPassword=!e.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),s(u,{prop:"code"},{default:n(()=>[s(w,{gutter:15},{default:n(()=>[s(d,{span:14},{default:n(()=>[s(c,{type:"text",maxlength:"5",placeholder:e.$t("message.account.accountPlaceholder3"),"prefix-icon":"el-icon-position",modelValue:e.myForm.code,"onUpdate:modelValue":o[6]||(o[6]=a=>e.myForm.code=a),clearable:"",autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),s(d,{span:10},{default:n(()=>[t("div",se,[t("img",{class:"login-content-code-img",alt:"fastcms",onClick:o[7]||(o[7]=(...a)=>l.refreshCode&&l.refreshCode(...a)),src:e.captcha},null,8,te)])]),_:1})]),_:1})]),_:1}),s(u,null,{default:n(()=>[s(y,{type:"primary",class:"login-content-submit",round:"",onClick:l.onRegisterIn,loading:e.loading.registerIn},{default:n(()=>[t("span",null,g(e.$t("message.account.accountRegistBtnText")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model","rules"]),t("div",ae,[s(y,{type:"text",size:"small",onClick:l.toLogin},{default:n(()=>[L(g(e.$t("message.link.two5")),1)]),_:1},8,["onClick"])])])])]),t("div",ne,[t("div",re,g(e.$t("message.copyright.one5")),1),t("div",le,g(e.$t("message.copyright.two6")),1)])])}var fe=x(W,[["render",ie],["__scopeId","data-v-ab2cc61a"]]);export{fe as default};
