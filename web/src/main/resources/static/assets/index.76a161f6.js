var H_=Object.defineProperty,U_=Object.defineProperties;var W_=Object.getOwnPropertyDescriptors;var Fc=Object.getOwnPropertySymbols;var Ap=Object.prototype.hasOwnProperty,Ip=Object.prototype.propertyIsEnumerable;var Rp=(i,e,t)=>e in i?H_(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Se=(i,e)=>{for(var t in e||(e={}))Ap.call(e,t)&&Rp(i,t,e[t]);if(Fc)for(var t of Fc(e))Ip.call(e,t)&&Rp(i,t,e[t]);return i},$t=(i,e)=>U_(i,W_(e));var Io=(i,e)=>{var t={};for(var n in i)Ap.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&Fc)for(var n of Fc(i))e.indexOf(n)<0&&Ip.call(i,n)&&(t[n]=i[n]);return t};import{a9 as $_,j as j_,o as Mp,t as q_,l as nr,D as hs,Q as zc,A as Fi,p as Zs,z as vr,m as Wd,Y as Op,X as K_,y as G_,L as Y_,b as Np,x as $d,i as J_,r as Q_,P as X_}from"./vendor.a9aef9fe.js";import{g as Z_}from"./index.b1e1ef12.js";import{_ as Dp,S as e1}from"./index.5eb239a7.js";var Hc={editorObj:null,dialogObj:null};/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Bp(){return function i(){i.called=!0}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ro{constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=Bp(),this.off=Bp()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Bn=new Array(256).fill().map((i,e)=>("0"+e.toString(16)).slice(-2));function yr(){const i=Math.random()*4294967296>>>0,e=Math.random()*4294967296>>>0,t=Math.random()*4294967296>>>0,n=Math.random()*4294967296>>>0;return"e"+Bn[i>>0&255]+Bn[i>>8&255]+Bn[i>>16&255]+Bn[i>>24&255]+Bn[e>>0&255]+Bn[e>>8&255]+Bn[e>>16&255]+Bn[e>>24&255]+Bn[t>>0&255]+Bn[t>>8&255]+Bn[t>>16&255]+Bn[t>>24&255]+Bn[n>>0&255]+Bn[n>>8&255]+Bn[n>>16&255]+Bn[n>>24&255]}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fl={get(i){return typeof i!="number"?this[i]||this.normal:i},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const t1="https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html";class H extends Error{constructor(e,t,n){super(n1(e,n));this.name="CKEditorError",this.context=t,this.data=n}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;const n=new H(e.message,t);throw n.stack=e.stack,n}}function Vn(i,e){console.warn(...i1(i,e))}function Vp(i){return`
Read more: ${t1}#error-${i}`}function n1(i,e){const t=new WeakSet,n=(s,c)=>{if(typeof c=="object"&&c!==null){if(t.has(c))return`[object ${c.constructor.name}]`;t.add(c)}return c},r=e?` ${JSON.stringify(e,n)}`:"",o=Vp(i);return i+r+o}function i1(i,e){const t=Vp(i);return e?[i,e,t]:[i,t]}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const r1="31.1.0",Lp=typeof window=="object"?window:global;if(Lp.CKEDITOR_VERSION)throw new H("ckeditor-duplicated-modules",null);Lp.CKEDITOR_VERSION=r1;/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Mo=Symbol("listeningTo"),jd=Symbol("emitterId"),xt={on(i,e,t={}){this.listenTo(this,i,e,t)},once(i,e,t){let n=!1;const r=function(o,...s){n||(n=!0,o.off(),e.call(this,o,...s))};this.listenTo(this,i,r,t)},off(i,e){this.stopListening(this,i,e)},listenTo(i,e,t,n={}){let r,o;this[Mo]||(this[Mo]={});const s=this[Mo];qd(i)||Fp(i);const c=qd(i);(r=s[c])||(r=s[c]={emitter:i,callbacks:{}}),(o=r.callbacks[e])||(o=r.callbacks[e]=[]),o.push(t),l1(this,i,e,t,n)},stopListening(i,e,t){const n=this[Mo];let r=i&&qd(i);const o=n&&r&&n[r],s=o&&e&&o.callbacks[e];if(!(!n||i&&!o||e&&!s))if(t)Gd(this,i,e,t),s.indexOf(t)!==-1&&(s.length===1?delete o.callbacks[e]:Gd(this,i,e,t));else if(s){for(;t=s.pop();)Gd(this,i,e,t);delete o.callbacks[e]}else if(o){for(e in o.callbacks)this.stopListening(i,e);delete n[r]}else{for(r in n)this.stopListening(n[r].emitter);delete this[Mo]}},fire(i,...e){try{const t=i instanceof Ro?i:new Ro(this,i),n=t.name;let r=Hp(this,n);if(t.path.push(this),r){const o=[t,...e];r=Array.from(r);for(let s=0;s<r.length&&(r[s].callback.apply(this,o),t.off.called&&(delete t.off.called,this._removeEventListener(n,r[s].callback)),!t.stop.called);s++);}if(this._delegations){const o=this._delegations.get(n),s=this._delegations.get("*");o&&Up(o,t,e),s&&Up(s,t,e)}return t.return}catch(t){H.rethrowUnexpectedError(t,this)}},delegate(...i){return{to:(e,t)=>{this._delegations||(this._delegations=new Map),i.forEach(n=>{const r=this._delegations.get(n);r?r.set(e,t):this._delegations.set(n,new Map([[e,t]]))})}}},stopDelegating(i,e){if(!!this._delegations)if(!i)this._delegations.clear();else if(!e)this._delegations.delete(i);else{const t=this._delegations.get(i);t&&t.delete(e)}},_addEventListener(i,e,t){a1(this,i);const n=Kd(this,i),r=fl.get(t.priority),o={callback:e,priority:r};for(const s of n){let c=!1;for(let u=0;u<s.length;u++)if(s[u].priority<r){s.splice(u,0,o),c=!0;break}c||s.push(o)}},_removeEventListener(i,e){const t=Kd(this,i);for(const n of t)for(let r=0;r<n.length;r++)n[r].callback==e&&(n.splice(r,1),r--)}};function o1(i,e){return i[Mo]&&i[Mo][e]?i[Mo][e].emitter:null}function Fp(i,e){i[jd]||(i[jd]=e||yr())}function qd(i){return i[jd]}function zp(i){return i._events||Object.defineProperty(i,"_events",{value:{}}),i._events}function s1(){return{callbacks:[],childEvents:[]}}function a1(i,e){const t=zp(i);if(t[e])return;let n=e,r=null;const o=[];for(;n!==""&&!t[n];)t[n]=s1(),o.push(t[n]),r&&t[n].childEvents.push(r),r=n,n=n.substr(0,n.lastIndexOf(":"));if(n!==""){for(const s of o)s.callbacks=t[n].callbacks.slice();t[n].childEvents.push(r)}}function Kd(i,e){const t=zp(i)[e];if(!t)return[];let n=[t.callbacks];for(let r=0;r<t.childEvents.length;r++){const o=Kd(i,t.childEvents[r]);n=n.concat(o)}return n}function Hp(i,e){let t;return!i._events||!(t=i._events[e])||!t.callbacks.length?e.indexOf(":")>-1?Hp(i,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function Up(i,e,t){for(let[n,r]of i){r?typeof r=="function"&&(r=r(e.name)):r=e.name;const o=new Ro(e.source,r);o.path=[...e.path],n.fire(o,...t)}}function l1(i,e,t,n,r){e._addEventListener?e._addEventListener(t,n,r):i._addEventListener.call(e,t,n,r)}function Gd(i,e,t,n){e._removeEventListener?e._removeEventListener(t,n):i._removeEventListener.call(e,t,n)}var c1=typeof global=="object"&&global&&global.Object===Object&&global,Wp=c1,u1=typeof self=="object"&&self&&self.Object===Object&&self,d1=Wp||u1||Function("return this")(),ir=d1,h1=ir.Symbol,_r=h1,$p=Object.prototype,f1=$p.hasOwnProperty,m1=$p.toString,ml=_r?_r.toStringTag:void 0;function p1(i){var e=f1.call(i,ml),t=i[ml];try{i[ml]=void 0;var n=!0}catch{}var r=m1.call(i);return n&&(e?i[ml]=t:delete i[ml]),r}var g1=Object.prototype,b1=g1.toString;function w1(i){return b1.call(i)}var v1="[object Null]",y1="[object Undefined]",jp=_r?_r.toStringTag:void 0;function Oo(i){return i==null?i===void 0?y1:v1:jp&&jp in Object(i)?p1(i):w1(i)}function zi(i){return i!=null&&typeof i=="object"}var _1="[object Symbol]";function Uc(i){return typeof i=="symbol"||zi(i)&&Oo(i)==_1}function k1(i,e){for(var t=-1,n=i==null?0:i.length,r=Array(n);++t<n;)r[t]=e(i[t],t,i);return r}var E1=Array.isArray,Jn=E1,C1=1/0,qp=_r?_r.prototype:void 0,Kp=qp?qp.toString:void 0;function Gp(i){if(typeof i=="string")return i;if(Jn(i))return k1(i,Gp)+"";if(Uc(i))return Kp?Kp.call(i):"";var e=i+"";return e=="0"&&1/i==-C1?"-0":e}var T1=/\s/;function S1(i){for(var e=i.length;e--&&T1.test(i.charAt(e)););return e}var x1=/^\s+/;function P1(i){return i&&i.slice(0,S1(i)+1).replace(x1,"")}function Gt(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var Yp=0/0,A1=/^[-+]0x[0-9a-f]+$/i,I1=/^0b[01]+$/i,R1=/^0o[0-7]+$/i,M1=parseInt;function Jp(i){if(typeof i=="number")return i;if(Uc(i))return Yp;if(Gt(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=Gt(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=P1(i);var t=I1.test(i);return t||R1.test(i)?M1(i.slice(2),t?2:8):A1.test(i)?Yp:+i}function fs(i){return i}var O1="[object AsyncFunction]",N1="[object Function]",D1="[object GeneratorFunction]",B1="[object Proxy]";function ms(i){if(!Gt(i))return!1;var e=Oo(i);return e==N1||e==D1||e==O1||e==B1}var V1=ir["__core-js_shared__"],Yd=V1,Qp=function(){var i=/[^.]+$/.exec(Yd&&Yd.keys&&Yd.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function L1(i){return!!Qp&&Qp in i}var F1=Function.prototype,z1=F1.toString;function ps(i){if(i!=null){try{return z1.call(i)}catch{}try{return i+""}catch{}}return""}var H1=/[\\^$.*+?()[\]{}|]/g,U1=/^\[object .+?Constructor\]$/,W1=Function.prototype,$1=Object.prototype,j1=W1.toString,q1=$1.hasOwnProperty,K1=RegExp("^"+j1.call(q1).replace(H1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function G1(i){if(!Gt(i)||L1(i))return!1;var e=ms(i)?K1:U1;return e.test(ps(i))}function Y1(i,e){return i==null?void 0:i[e]}function gs(i,e){var t=Y1(i,e);return G1(t)?t:void 0}var J1=gs(ir,"WeakMap"),Jd=J1,Xp=Object.create,Q1=function(){function i(){}return function(e){if(!Gt(e))return{};if(Xp)return Xp(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),X1=Q1;function Z1(i,e,t){switch(t.length){case 0:return i.call(e);case 1:return i.call(e,t[0]);case 2:return i.call(e,t[0],t[1]);case 3:return i.call(e,t[0],t[1],t[2])}return i.apply(e,t)}function Zp(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var ek=800,tk=16,nk=Date.now;function ik(i){var e=0,t=0;return function(){var n=nk(),r=tk-(n-t);if(t=n,r>0){if(++e>=ek)return arguments[0]}else e=0;return i.apply(void 0,arguments)}}function rk(i){return function(){return i}}var ok=function(){try{var i=gs(Object,"defineProperty");return i({},"",{}),i}catch{}}(),Wc=ok,sk=Wc?function(i,e){return Wc(i,"toString",{configurable:!0,enumerable:!1,value:rk(e),writable:!0})}:fs,ak=sk,lk=ik(ak),ck=lk;function uk(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var dk=9007199254740991,hk=/^(?:0|[1-9]\d*)$/;function Qd(i,e){var t=typeof i;return e=e==null?dk:e,!!e&&(t=="number"||t!="symbol"&&hk.test(i))&&i>-1&&i%1==0&&i<e}function Xd(i,e,t){e=="__proto__"&&Wc?Wc(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}function pl(i,e){return i===e||i!==i&&e!==e}var fk=Object.prototype,mk=fk.hasOwnProperty;function Zd(i,e,t){var n=i[e];(!(mk.call(i,e)&&pl(n,t))||t===void 0&&!(e in i))&&Xd(i,e,t)}function ea(i,e,t,n){var r=!t;t||(t={});for(var o=-1,s=e.length;++o<s;){var c=e[o],u=n?n(t[c],i[c],c,t,i):void 0;u===void 0&&(u=i[c]),r?Xd(t,c,u):Zd(t,c,u)}return t}var eg=Math.max;function pk(i,e,t){return e=eg(e===void 0?i.length-1:e,0),function(){for(var n=arguments,r=-1,o=eg(n.length-e,0),s=Array(o);++r<o;)s[r]=n[e+r];r=-1;for(var c=Array(e+1);++r<e;)c[r]=n[r];return c[e]=t(s),Z1(i,this,c)}}function gk(i,e){return ck(pk(i,e,fs),i+"")}var bk=9007199254740991;function tg(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=bk}function $c(i){return i!=null&&tg(i.length)&&!ms(i)}function wk(i,e,t){if(!Gt(t))return!1;var n=typeof e;return(n=="number"?$c(t)&&Qd(e,t.length):n=="string"&&e in t)?pl(t[e],i):!1}function ng(i){return gk(function(e,t){var n=-1,r=t.length,o=r>1?t[r-1]:void 0,s=r>2?t[2]:void 0;for(o=i.length>3&&typeof o=="function"?(r--,o):void 0,s&&wk(t[0],t[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var c=t[n];c&&i(e,c,n,o)}return e})}var vk=Object.prototype;function eh(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||vk;return i===t}function yk(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var _k="[object Arguments]";function ig(i){return zi(i)&&Oo(i)==_k}var rg=Object.prototype,kk=rg.hasOwnProperty,Ek=rg.propertyIsEnumerable,Ck=ig(function(){return arguments}())?ig:function(i){return zi(i)&&kk.call(i,"callee")&&!Ek.call(i,"callee")},th=Ck;function Tk(){return!1}var og=typeof exports=="object"&&exports&&!exports.nodeType&&exports,sg=og&&typeof module=="object"&&module&&!module.nodeType&&module,Sk=sg&&sg.exports===og,ag=Sk?ir.Buffer:void 0,xk=ag?ag.isBuffer:void 0,Pk=xk||Tk,gl=Pk,Ak="[object Arguments]",Ik="[object Array]",Rk="[object Boolean]",Mk="[object Date]",Ok="[object Error]",Nk="[object Function]",Dk="[object Map]",Bk="[object Number]",Vk="[object Object]",Lk="[object RegExp]",Fk="[object Set]",zk="[object String]",Hk="[object WeakMap]",Uk="[object ArrayBuffer]",Wk="[object DataView]",$k="[object Float32Array]",jk="[object Float64Array]",qk="[object Int8Array]",Kk="[object Int16Array]",Gk="[object Int32Array]",Yk="[object Uint8Array]",Jk="[object Uint8ClampedArray]",Qk="[object Uint16Array]",Xk="[object Uint32Array]",Vt={};Vt[$k]=Vt[jk]=Vt[qk]=Vt[Kk]=Vt[Gk]=Vt[Yk]=Vt[Jk]=Vt[Qk]=Vt[Xk]=!0;Vt[Ak]=Vt[Ik]=Vt[Uk]=Vt[Rk]=Vt[Wk]=Vt[Mk]=Vt[Ok]=Vt[Nk]=Vt[Dk]=Vt[Bk]=Vt[Vk]=Vt[Lk]=Vt[Fk]=Vt[zk]=Vt[Hk]=!1;function Zk(i){return zi(i)&&tg(i.length)&&!!Vt[Oo(i)]}function nh(i){return function(e){return i(e)}}var lg=typeof exports=="object"&&exports&&!exports.nodeType&&exports,bl=lg&&typeof module=="object"&&module&&!module.nodeType&&module,eE=bl&&bl.exports===lg,ih=eE&&Wp.process,tE=function(){try{var i=bl&&bl.require&&bl.require("util").types;return i||ih&&ih.binding&&ih.binding("util")}catch{}}(),ta=tE,cg=ta&&ta.isTypedArray,nE=cg?nh(cg):Zk,rh=nE,iE=Object.prototype,rE=iE.hasOwnProperty;function ug(i,e){var t=Jn(i),n=!t&&th(i),r=!t&&!n&&gl(i),o=!t&&!n&&!r&&rh(i),s=t||n||r||o,c=s?yk(i.length,String):[],u=c.length;for(var h in i)(e||rE.call(i,h))&&!(s&&(h=="length"||r&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Qd(h,u)))&&c.push(h);return c}function dg(i,e){return function(t){return i(e(t))}}var oE=dg(Object.keys,Object),sE=oE,aE=Object.prototype,lE=aE.hasOwnProperty;function cE(i){if(!eh(i))return sE(i);var e=[];for(var t in Object(i))lE.call(i,t)&&t!="constructor"&&e.push(t);return e}function oh(i){return $c(i)?ug(i):cE(i)}function uE(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var dE=Object.prototype,hE=dE.hasOwnProperty;function fE(i){if(!Gt(i))return uE(i);var e=eh(i),t=[];for(var n in i)n=="constructor"&&(e||!hE.call(i,n))||t.push(n);return t}function na(i){return $c(i)?ug(i,!0):fE(i)}var mE=ng(function(i,e){ea(e,na(e),i)}),wl=mE,pE=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gE=/^\w*$/;function bE(i,e){if(Jn(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||Uc(i)?!0:gE.test(i)||!pE.test(i)||e!=null&&i in Object(e)}var wE=gs(Object,"create"),vl=wE;function vE(){this.__data__=vl?vl(null):{},this.size=0}function yE(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var _E="__lodash_hash_undefined__",kE=Object.prototype,EE=kE.hasOwnProperty;function CE(i){var e=this.__data__;if(vl){var t=e[i];return t===_E?void 0:t}return EE.call(e,i)?e[i]:void 0}var TE=Object.prototype,SE=TE.hasOwnProperty;function xE(i){var e=this.__data__;return vl?e[i]!==void 0:SE.call(e,i)}var PE="__lodash_hash_undefined__";function AE(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=vl&&e===void 0?PE:e,this}function bs(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}bs.prototype.clear=vE;bs.prototype.delete=yE;bs.prototype.get=CE;bs.prototype.has=xE;bs.prototype.set=AE;function IE(){this.__data__=[],this.size=0}function jc(i,e){for(var t=i.length;t--;)if(pl(i[t][0],e))return t;return-1}var RE=Array.prototype,ME=RE.splice;function OE(i){var e=this.__data__,t=jc(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():ME.call(e,t,1),--this.size,!0}function NE(i){var e=this.__data__,t=jc(e,i);return t<0?void 0:e[t][1]}function DE(i){return jc(this.__data__,i)>-1}function BE(i,e){var t=this.__data__,n=jc(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}function Jr(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Jr.prototype.clear=IE;Jr.prototype.delete=OE;Jr.prototype.get=NE;Jr.prototype.has=DE;Jr.prototype.set=BE;var VE=gs(ir,"Map"),yl=VE;function LE(){this.size=0,this.__data__={hash:new bs,map:new(yl||Jr),string:new bs}}function FE(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}function qc(i,e){var t=i.__data__;return FE(e)?t[typeof e=="string"?"string":"hash"]:t.map}function zE(i){var e=qc(this,i).delete(i);return this.size-=e?1:0,e}function HE(i){return qc(this,i).get(i)}function UE(i){return qc(this,i).has(i)}function WE(i,e){var t=qc(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}function Qr(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Qr.prototype.clear=LE;Qr.prototype.delete=zE;Qr.prototype.get=HE;Qr.prototype.has=UE;Qr.prototype.set=WE;var $E="Expected a function";function sh(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError($E);var t=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=t.cache;if(o.has(r))return o.get(r);var s=i.apply(this,n);return t.cache=o.set(r,s)||o,s};return t.cache=new(sh.Cache||Qr),t}sh.Cache=Qr;var jE=500;function qE(i){var e=sh(i,function(n){return t.size===jE&&t.clear(),n}),t=e.cache;return e}var KE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,GE=/\\(\\)?/g,YE=qE(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(KE,function(t,n,r,o){e.push(r?o.replace(GE,"$1"):n||t)}),e}),JE=YE;function ah(i){return i==null?"":Gp(i)}function lh(i,e){return Jn(i)?i:bE(i,e)?[i]:JE(ah(i))}var QE=1/0;function ch(i){if(typeof i=="string"||Uc(i))return i;var e=i+"";return e=="0"&&1/i==-QE?"-0":e}function hg(i,e){e=lh(e,i);for(var t=0,n=e.length;i!=null&&t<n;)i=i[ch(e[t++])];return t&&t==n?i:void 0}function Kc(i,e,t){var n=i==null?void 0:hg(i,e);return n===void 0?t:n}function fg(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}var XE=dg(Object.getPrototypeOf,Object),uh=XE,ZE="[object Object]",eC=Function.prototype,tC=Object.prototype,mg=eC.toString,nC=tC.hasOwnProperty,iC=mg.call(Object);function Hi(i){if(!zi(i)||Oo(i)!=ZE)return!1;var e=uh(i);if(e===null)return!0;var t=nC.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&mg.call(t)==iC}function pg(i,e,t){var n=-1,r=i.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(r);++n<r;)o[n]=i[n+e];return o}function rC(i,e,t){var n=i.length;return t=t===void 0?n:t,!e&&t>=n?i:pg(i,e,t)}var oC="\\ud800-\\udfff",sC="\\u0300-\\u036f",aC="\\ufe20-\\ufe2f",lC="\\u20d0-\\u20ff",cC=sC+aC+lC,uC="\\ufe0e\\ufe0f",dC="\\u200d",hC=RegExp("["+dC+oC+cC+uC+"]");function gg(i){return hC.test(i)}function fC(i){return i.split("")}var bg="\\ud800-\\udfff",mC="\\u0300-\\u036f",pC="\\ufe20-\\ufe2f",gC="\\u20d0-\\u20ff",bC=mC+pC+gC,wC="\\ufe0e\\ufe0f",vC="["+bg+"]",dh="["+bC+"]",hh="\\ud83c[\\udffb-\\udfff]",yC="(?:"+dh+"|"+hh+")",wg="[^"+bg+"]",vg="(?:\\ud83c[\\udde6-\\uddff]){2}",yg="[\\ud800-\\udbff][\\udc00-\\udfff]",_C="\\u200d",_g=yC+"?",kg="["+wC+"]?",kC="(?:"+_C+"(?:"+[wg,vg,yg].join("|")+")"+kg+_g+")*",EC=kg+_g+kC,CC="(?:"+[wg+dh+"?",dh,vg,yg,vC].join("|")+")",TC=RegExp(hh+"(?="+hh+")|"+CC+EC,"g");function SC(i){return i.match(TC)||[]}function xC(i){return gg(i)?SC(i):fC(i)}function PC(i){return function(e){e=ah(e);var t=gg(e)?xC(e):void 0,n=t?t[0]:e.charAt(0),r=t?rC(t,1).join(""):e.slice(1);return n[i]()+r}}var AC=PC("toUpperCase"),IC=AC;function RC(){this.__data__=new Jr,this.size=0}function MC(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}function OC(i){return this.__data__.get(i)}function NC(i){return this.__data__.has(i)}var DC=200;function BC(i,e){var t=this.__data__;if(t instanceof Jr){var n=t.__data__;if(!yl||n.length<DC-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new Qr(n)}return t.set(i,e),this.size=t.size,this}function kr(i){var e=this.__data__=new Jr(i);this.size=e.size}kr.prototype.clear=RC;kr.prototype.delete=MC;kr.prototype.get=OC;kr.prototype.has=NC;kr.prototype.set=BC;function VC(i,e){return i&&ea(e,oh(e),i)}function LC(i,e){return i&&ea(e,na(e),i)}var Eg=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Cg=Eg&&typeof module=="object"&&module&&!module.nodeType&&module,FC=Cg&&Cg.exports===Eg,Tg=FC?ir.Buffer:void 0,Sg=Tg?Tg.allocUnsafe:void 0;function xg(i,e){if(e)return i.slice();var t=i.length,n=Sg?Sg(t):new i.constructor(t);return i.copy(n),n}function zC(i,e){for(var t=-1,n=i==null?0:i.length,r=0,o=[];++t<n;){var s=i[t];e(s,t,i)&&(o[r++]=s)}return o}function Pg(){return[]}var HC=Object.prototype,UC=HC.propertyIsEnumerable,Ag=Object.getOwnPropertySymbols,WC=Ag?function(i){return i==null?[]:(i=Object(i),zC(Ag(i),function(e){return UC.call(i,e)}))}:Pg,fh=WC;function $C(i,e){return ea(i,fh(i),e)}var jC=Object.getOwnPropertySymbols,qC=jC?function(i){for(var e=[];i;)fg(e,fh(i)),i=uh(i);return e}:Pg,Ig=qC;function KC(i,e){return ea(i,Ig(i),e)}function Rg(i,e,t){var n=e(i);return Jn(i)?n:fg(n,t(i))}function mh(i){return Rg(i,oh,fh)}function GC(i){return Rg(i,na,Ig)}var YC=gs(ir,"DataView"),ph=YC,JC=gs(ir,"Promise"),gh=JC,QC=gs(ir,"Set"),bh=QC,Mg="[object Map]",XC="[object Object]",Og="[object Promise]",Ng="[object Set]",Dg="[object WeakMap]",Bg="[object DataView]",ZC=ps(ph),eT=ps(yl),tT=ps(gh),nT=ps(bh),iT=ps(Jd),ws=Oo;(ph&&ws(new ph(new ArrayBuffer(1)))!=Bg||yl&&ws(new yl)!=Mg||gh&&ws(gh.resolve())!=Og||bh&&ws(new bh)!=Ng||Jd&&ws(new Jd)!=Dg)&&(ws=function(i){var e=Oo(i),t=e==XC?i.constructor:void 0,n=t?ps(t):"";if(n)switch(n){case ZC:return Bg;case eT:return Mg;case tT:return Og;case nT:return Ng;case iT:return Dg}return e});var _l=ws,rT=Object.prototype,oT=rT.hasOwnProperty;function sT(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&oT.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var aT=ir.Uint8Array,Gc=aT;function wh(i){var e=new i.constructor(i.byteLength);return new Gc(e).set(new Gc(i)),e}function lT(i,e){var t=e?wh(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var cT=/\w*$/;function uT(i){var e=new i.constructor(i.source,cT.exec(i));return e.lastIndex=i.lastIndex,e}var Vg=_r?_r.prototype:void 0,Lg=Vg?Vg.valueOf:void 0;function dT(i){return Lg?Object(Lg.call(i)):{}}function Fg(i,e){var t=e?wh(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var hT="[object Boolean]",fT="[object Date]",mT="[object Map]",pT="[object Number]",gT="[object RegExp]",bT="[object Set]",wT="[object String]",vT="[object Symbol]",yT="[object ArrayBuffer]",_T="[object DataView]",kT="[object Float32Array]",ET="[object Float64Array]",CT="[object Int8Array]",TT="[object Int16Array]",ST="[object Int32Array]",xT="[object Uint8Array]",PT="[object Uint8ClampedArray]",AT="[object Uint16Array]",IT="[object Uint32Array]";function RT(i,e,t){var n=i.constructor;switch(e){case yT:return wh(i);case hT:case fT:return new n(+i);case _T:return lT(i,t);case kT:case ET:case CT:case TT:case ST:case xT:case PT:case AT:case IT:return Fg(i,t);case mT:return new n;case pT:case wT:return new n(i);case gT:return uT(i);case bT:return new n;case vT:return dT(i)}}function zg(i){return typeof i.constructor=="function"&&!eh(i)?X1(uh(i)):{}}var MT="[object Map]";function OT(i){return zi(i)&&_l(i)==MT}var Hg=ta&&ta.isMap,NT=Hg?nh(Hg):OT,DT=NT,BT="[object Set]";function VT(i){return zi(i)&&_l(i)==BT}var Ug=ta&&ta.isSet,LT=Ug?nh(Ug):VT,FT=LT,zT=1,HT=2,UT=4,Wg="[object Arguments]",WT="[object Array]",$T="[object Boolean]",jT="[object Date]",qT="[object Error]",$g="[object Function]",KT="[object GeneratorFunction]",GT="[object Map]",YT="[object Number]",jg="[object Object]",JT="[object RegExp]",QT="[object Set]",XT="[object String]",ZT="[object Symbol]",eS="[object WeakMap]",tS="[object ArrayBuffer]",nS="[object DataView]",iS="[object Float32Array]",rS="[object Float64Array]",oS="[object Int8Array]",sS="[object Int16Array]",aS="[object Int32Array]",lS="[object Uint8Array]",cS="[object Uint8ClampedArray]",uS="[object Uint16Array]",dS="[object Uint32Array]",Ot={};Ot[Wg]=Ot[WT]=Ot[tS]=Ot[nS]=Ot[$T]=Ot[jT]=Ot[iS]=Ot[rS]=Ot[oS]=Ot[sS]=Ot[aS]=Ot[GT]=Ot[YT]=Ot[jg]=Ot[JT]=Ot[QT]=Ot[XT]=Ot[ZT]=Ot[lS]=Ot[cS]=Ot[uS]=Ot[dS]=!0;Ot[qT]=Ot[$g]=Ot[eS]=!1;function ia(i,e,t,n,r,o){var s,c=e&zT,u=e&HT,h=e&UT;if(t&&(s=r?t(i,n,r,o):t(i)),s!==void 0)return s;if(!Gt(i))return i;var f=Jn(i);if(f){if(s=sT(i),!c)return Zp(i,s)}else{var p=_l(i),y=p==$g||p==KT;if(gl(i))return xg(i,c);if(p==jg||p==Wg||y&&!r){if(s=u||y?{}:zg(i),!c)return u?KC(i,LC(s,i)):$C(i,VC(s,i))}else{if(!Ot[p])return r?i:{};s=RT(i,p,c)}}o||(o=new kr);var T=o.get(i);if(T)return T;o.set(i,s),FT(i)?i.forEach(function(B){s.add(ia(B,e,t,B,i,o))}):DT(i)&&i.forEach(function(B,O){s.set(O,ia(B,e,t,O,i,o))});var A=h?u?GC:mh:u?na:oh,M=f?void 0:A(i);return uk(M||i,function(B,O){M&&(O=B,B=i[O]),Zd(s,O,ia(B,e,t,O,i,o))}),s}var hS=4;function qg(i){return ia(i,hS)}var fS=1,mS=4;function Er(i){return ia(i,fS|mS)}var pS=1,gS=4;function Kg(i,e){return e=typeof e=="function"?e:void 0,ia(i,pS|gS,e)}var bS="__lodash_hash_undefined__";function wS(i){return this.__data__.set(i,bS),this}function vS(i){return this.__data__.has(i)}function Yc(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new Qr;++e<t;)this.add(i[e])}Yc.prototype.add=Yc.prototype.push=wS;Yc.prototype.has=vS;function yS(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}function _S(i,e){return i.has(e)}var kS=1,ES=2;function Gg(i,e,t,n,r,o){var s=t&kS,c=i.length,u=e.length;if(c!=u&&!(s&&u>c))return!1;var h=o.get(i),f=o.get(e);if(h&&f)return h==e&&f==i;var p=-1,y=!0,T=t&ES?new Yc:void 0;for(o.set(i,e),o.set(e,i);++p<c;){var A=i[p],M=e[p];if(n)var B=s?n(M,A,p,e,i,o):n(A,M,p,i,e,o);if(B!==void 0){if(B)continue;y=!1;break}if(T){if(!yS(e,function(O,V){if(!_S(T,V)&&(A===O||r(A,O,t,n,o)))return T.push(V)})){y=!1;break}}else if(!(A===M||r(A,M,t,n,o))){y=!1;break}}return o.delete(i),o.delete(e),y}function CS(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}function TS(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var SS=1,xS=2,PS="[object Boolean]",AS="[object Date]",IS="[object Error]",RS="[object Map]",MS="[object Number]",OS="[object RegExp]",NS="[object Set]",DS="[object String]",BS="[object Symbol]",VS="[object ArrayBuffer]",LS="[object DataView]",Yg=_r?_r.prototype:void 0,vh=Yg?Yg.valueOf:void 0;function FS(i,e,t,n,r,o,s){switch(t){case LS:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case VS:return!(i.byteLength!=e.byteLength||!o(new Gc(i),new Gc(e)));case PS:case AS:case MS:return pl(+i,+e);case IS:return i.name==e.name&&i.message==e.message;case OS:case DS:return i==e+"";case RS:var c=CS;case NS:var u=n&SS;if(c||(c=TS),i.size!=e.size&&!u)return!1;var h=s.get(i);if(h)return h==e;n|=xS,s.set(i,e);var f=Gg(c(i),c(e),n,r,o,s);return s.delete(i),f;case BS:if(vh)return vh.call(i)==vh.call(e)}return!1}var zS=1,HS=Object.prototype,US=HS.hasOwnProperty;function WS(i,e,t,n,r,o){var s=t&zS,c=mh(i),u=c.length,h=mh(e),f=h.length;if(u!=f&&!s)return!1;for(var p=u;p--;){var y=c[p];if(!(s?y in e:US.call(e,y)))return!1}var T=o.get(i),A=o.get(e);if(T&&A)return T==e&&A==i;var M=!0;o.set(i,e),o.set(e,i);for(var B=s;++p<u;){y=c[p];var O=i[y],V=e[y];if(n)var F=s?n(V,O,y,e,i,o):n(O,V,y,i,e,o);if(!(F===void 0?O===V||r(O,V,t,n,o):F)){M=!1;break}B||(B=y=="constructor")}if(M&&!B){var Z=i.constructor,ae=e.constructor;Z!=ae&&"constructor"in i&&"constructor"in e&&!(typeof Z=="function"&&Z instanceof Z&&typeof ae=="function"&&ae instanceof ae)&&(M=!1)}return o.delete(i),o.delete(e),M}var $S=1,Jg="[object Arguments]",Qg="[object Array]",Jc="[object Object]",jS=Object.prototype,Xg=jS.hasOwnProperty;function qS(i,e,t,n,r,o){var s=Jn(i),c=Jn(e),u=s?Qg:_l(i),h=c?Qg:_l(e);u=u==Jg?Jc:u,h=h==Jg?Jc:h;var f=u==Jc,p=h==Jc,y=u==h;if(y&&gl(i)){if(!gl(e))return!1;s=!0,f=!1}if(y&&!f)return o||(o=new kr),s||rh(i)?Gg(i,e,t,n,r,o):FS(i,e,u,t,n,r,o);if(!(t&$S)){var T=f&&Xg.call(i,"__wrapped__"),A=p&&Xg.call(e,"__wrapped__");if(T||A){var M=T?i.value():i,B=A?e.value():e;return o||(o=new kr),r(M,B,t,n,o)}}return y?(o||(o=new kr),WS(i,e,t,n,r,o)):!1}function yh(i,e,t,n,r){return i===e?!0:i==null||e==null||!zi(i)&&!zi(e)?i!==i&&e!==e:qS(i,e,t,n,yh,r)}function KS(i){return function(e,t,n){for(var r=-1,o=Object(e),s=n(e),c=s.length;c--;){var u=s[i?c:++r];if(t(o[u],u,o)===!1)break}return e}}var GS=KS(),YS=GS,JS=function(){return ir.Date.now()},_h=JS,QS="Expected a function",XS=Math.max,ZS=Math.min;function Qc(i,e,t){var n,r,o,s,c,u,h=0,f=!1,p=!1,y=!0;if(typeof i!="function")throw new TypeError(QS);e=Jp(e)||0,Gt(t)&&(f=!!t.leading,p="maxWait"in t,o=p?XS(Jp(t.maxWait)||0,e):o,y="trailing"in t?!!t.trailing:y);function T(W){var se=n,te=r;return n=r=void 0,h=W,s=i.apply(te,se),s}function A(W){return h=W,c=setTimeout(O,e),f?T(W):s}function M(W){var se=W-u,te=W-h,ve=e-se;return p?ZS(ve,o-te):ve}function B(W){var se=W-u,te=W-h;return u===void 0||se>=e||se<0||p&&te>=o}function O(){var W=_h();if(B(W))return V(W);c=setTimeout(O,M(W))}function V(W){return c=void 0,y&&n?T(W):(n=r=void 0,s)}function F(){c!==void 0&&clearTimeout(c),h=0,n=u=r=c=void 0}function Z(){return c===void 0?s:V(_h())}function ae(){var W=_h(),se=B(W);if(n=arguments,r=this,u=W,se){if(c===void 0)return A(u);if(p)return clearTimeout(c),c=setTimeout(O,e),T(u)}return c===void 0&&(c=setTimeout(O,e)),s}return ae.cancel=F,ae.flush=Z,ae}function kh(i,e,t){(t!==void 0&&!pl(i[e],t)||t===void 0&&!(e in i))&&Xd(i,e,t)}function ex(i){return zi(i)&&$c(i)}function Eh(i,e){if(!(e==="constructor"&&typeof i[e]=="function")&&e!="__proto__")return i[e]}function tx(i){return ea(i,na(i))}function nx(i,e,t,n,r,o,s){var c=Eh(i,t),u=Eh(e,t),h=s.get(u);if(h){kh(i,t,h);return}var f=o?o(c,u,t+"",i,e,s):void 0,p=f===void 0;if(p){var y=Jn(u),T=!y&&gl(u),A=!y&&!T&&rh(u);f=u,y||T||A?Jn(c)?f=c:ex(c)?f=Zp(c):T?(p=!1,f=xg(u,!0)):A?(p=!1,f=Fg(u,!0)):f=[]:Hi(u)||th(u)?(f=c,th(c)?f=tx(c):(!Gt(c)||ms(c))&&(f=zg(u))):p=!1}p&&(s.set(u,f),r(f,u,n,o,s),s.delete(u)),kh(i,t,f)}function Zg(i,e,t,n,r){i!==e&&YS(e,function(o,s){if(r||(r=new kr),Gt(o))nx(i,e,s,t,Zg,n,r);else{var c=n?n(Eh(i,s),o,s+"",i,e,r):void 0;c===void 0&&(c=o),kh(i,s,c)}},na)}function ix(i){var e=i==null?0:i.length;return e?i[e-1]:void 0}var eb=/[\\^$.*+?()[\]{}|]/g,rx=RegExp(eb.source);function ox(i){return i=ah(i),i&&rx.test(i)?i.replace(eb,"\\$&"):i}var sx="[object String]";function tb(i){return typeof i=="string"||!Jn(i)&&zi(i)&&Oo(i)==sx}function ax(i,e){return e.length<2?i:hg(i,pg(e,0,-1))}function No(i){return zi(i)&&i.nodeType===1&&!Hi(i)}function nb(i,e){return yh(i,e)}function lx(i,e,t){t=typeof t=="function"?t:void 0;var n=t?t(i,e):void 0;return n===void 0?yh(i,e,void 0,t):!!n}var cx=ng(function(i,e,t){Zg(i,e,t)}),ib=cx;function ux(i,e){return e=lh(e,i),i=ax(i,e),i==null||delete i[ch(ix(e))]}function dx(i,e,t,n){if(!Gt(i))return i;e=lh(e,i);for(var r=-1,o=e.length,s=o-1,c=i;c!=null&&++r<o;){var u=ch(e[r]),h=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return i;if(r!=s){var f=c[u];h=n?n(f,u,c):void 0,h===void 0&&(h=Gt(f)?f:Qd(e[r+1])?[]:{})}Zd(c,u,h),c=c[u]}return i}function hx(i,e,t){return i==null?i:dx(i,e,t)}var fx="Expected a function";function rb(i,e,t){var n=!0,r=!0;if(typeof i!="function")throw new TypeError(fx);return Gt(t)&&(n="leading"in t?!!t.leading:n,r="trailing"in t?!!t.trailing:r),Qc(i,e,{leading:n,maxWait:e,trailing:r})}function mx(i,e){return i==null?!0:ux(i,e)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Xc=Symbol("observableProperties"),Zc=Symbol("boundObservables"),eu=Symbol("boundProperties"),ra=Symbol("decoratedMethods"),ob=Symbol("decoratedOriginal"),Pt={set(i,e){if(Gt(i)){Object.keys(i).forEach(n=>{this.set(n,i[n])},this);return}sb(this);const t=this[Xc];if(i in this&&!t.has(i))throw new H("observable-set-cannot-override",this);Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get(){return t.get(i)},set(n){const r=t.get(i);let o=this.fire("set:"+i,i,n,r);o===void 0&&(o=n),(r!==o||!t.has(i))&&(t.set(i,o),this.fire("change:"+i,i,o,r))}}),this[i]=e},bind(...i){if(!i.length||!ab(i))throw new H("observable-bind-wrong-properties",this);if(new Set(i).size!==i.length)throw new H("observable-bind-duplicate-properties",this);sb(this);const e=this[eu];i.forEach(n=>{if(e.has(n))throw new H("observable-bind-rebind",this)});const t=new Map;return i.forEach(n=>{const r={property:n,to:[]};e.set(n,r),t.set(n,r)}),{to:px,toMany:gx,_observable:this,_bindProperties:i,_to:[],_bindings:t}},unbind(...i){if(!this[Xc])return;const e=this[eu],t=this[Zc];if(i.length){if(!ab(i))throw new H("observable-unbind-wrong-properties",this);i.forEach(n=>{const r=e.get(n);if(!r)return;let o,s,c,u;r.to.forEach(h=>{o=h[0],s=h[1],c=t.get(o),u=c[s],u.delete(r),u.size||delete c[s],Object.keys(c).length||(t.delete(o),this.stopListening(o,"change"))}),e.delete(n)})}else t.forEach((n,r)=>{this.stopListening(r,"change")}),t.clear(),e.clear()},decorate(i){const e=this[i];if(!e)throw new H("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:i});this.on(i,(t,n)=>{t.return=e.apply(this,n)}),this[i]=function(...t){return this.fire(i,t)},this[i][ob]=e,this[ra]||(this[ra]=[]),this[ra].push(i)}};wl(Pt,xt);Pt.stopListening=function(i,e,t){if(!i&&this[ra]){for(const n of this[ra])this[n]=this[n][ob];delete this[ra]}xt.stopListening.call(this,i,e,t)};function sb(i){i[Xc]||(Object.defineProperty(i,Xc,{value:new Map}),Object.defineProperty(i,Zc,{value:new Map}),Object.defineProperty(i,eu,{value:new Map}))}function px(...i){const e=wx(...i),t=Array.from(this._bindings.keys()),n=t.length;if(!e.callback&&e.to.length>1)throw new H("observable-bind-to-no-callback",this);if(n>1&&e.callback)throw new H("observable-bind-to-extra-callback",this);e.to.forEach(r=>{if(r.properties.length&&r.properties.length!==n)throw new H("observable-bind-to-properties-length",this);r.properties.length||(r.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),_x(this._observable,this._to),yx(this),this._bindProperties.forEach(r=>{lb(this._observable,r)})}function gx(i,e,t){if(this._bindings.size>1)throw new H("observable-bind-to-many-not-one-binding",this);this.to(...bx(i,e),t)}function bx(i,e){const t=i.map(n=>[n,e]);return Array.prototype.concat.apply([],t)}function ab(i){return i.every(e=>typeof e=="string")}function wx(...i){if(!i.length)throw new H("observable-bind-to-parse-error",null);const e={to:[]};let t;return typeof i[i.length-1]=="function"&&(e.callback=i.pop()),i.forEach(n=>{if(typeof n=="string")t.properties.push(n);else if(typeof n=="object")t={observable:n,properties:[]},e.to.push(t);else throw new H("observable-bind-to-parse-error",null)}),e}function vx(i,e,t,n){const r=i[Zc],o=r.get(t),s=o||{};s[n]||(s[n]=new Set),s[n].add(e),o||r.set(t,s)}function yx(i){let e;i._bindings.forEach((t,n)=>{i._to.forEach(r=>{e=r.properties[t.callback?0:i._bindProperties.indexOf(n)],t.to.push([r.observable,e]),vx(i._observable,t,r.observable,e)})})}function lb(i,e){const n=i[eu].get(e);let r;n.callback?r=n.callback.apply(i,n.to.map(o=>o[0][o[1]])):(r=n.to[0],r=r[0][r[1]]),Object.prototype.hasOwnProperty.call(i,e)?i[e]=r:i.set(e,r)}function _x(i,e){e.forEach(t=>{const n=i[Zc];let r;n.get(t.observable)||i.listenTo(t.observable,"change",(o,s)=>{r=n.get(t.observable)[s],r&&r.forEach(c=>{lb(i,c.property)})})})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function je(i,...e){e.forEach(t=>{Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach(n=>{if(n in i.prototype)return;const r=Object.getOwnPropertyDescriptor(t,n);r.enumerable=!1,Object.defineProperty(i.prototype,n,r)})})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class be{constructor(e){this.editor=e,this.set("isEnabled",!0),this._disableStack=new Set}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",cb,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",cb),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}je(be,Pt);function cb(i){i.return=!1,i.stop()}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class at{constructor(e){this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this.affectsData=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"}),this.listenTo(e,"change:isReadOnly",(t,n,r)=>{r&&this.affectsData?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")})}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",ub,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",ub),this.refresh())}execute(){}destroy(){this.stopListening()}}je(at,Pt);function ub(i){i.return=!1,i.stop()}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class db extends at{constructor(e){super(e);this._childCommands=[]}refresh(){}execute(...e){const t=this._getFirstEnabledCommand();return t!=null&&t.execute(e)}registerChildCommand(e){this._childCommands.push(e),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){return this._childCommands.find(e=>e.isEnabled)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hb{constructor(e,t){this._config={},t&&this.define(fb(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){const n=!0;this._setToTarget(this._config,e,t,n)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,n,r=!1){if(Hi(t)){this._setObjectToTarget(e,t,r);return}const o=t.split(".");t=o.pop();for(const s of o)Hi(e[s])||(e[s]={}),e=e[s];if(Hi(n)){Hi(e[t])||(e[t]={}),e=e[t],this._setObjectToTarget(e,n,r);return}r&&typeof e[t]!="undefined"||(e[t]=n)}_getFromSource(e,t){const n=t.split(".");t=n.pop();for(const r of n){if(!Hi(e[r])){e=null;break}e=e[r]}return e?fb(e[t]):void 0}_setObjectToTarget(e,t,n){Object.keys(t).forEach(r=>{this._setToTarget(e,r,t[r],n)})}}function fb(i){return Kg(i,kx)}function kx(i){return No(i)?i:void 0}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ui(i){return!!(i&&i[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ci{constructor(e={},t={}){const n=Ui(e);if(n||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(const r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new H("collection-add-item-invalid-index",this);for(let n=0;n<e.length;n++){const r=e[n],o=this._getItemIdBeforeAdding(r),s=t+n;this._items.splice(s,0,r),this._itemMap.set(o,r),this.fire("add",r,s)}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new H("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const t=this._idProperty,n=e[t];return this._itemMap.has(n)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,this._items.indexOf(t)}remove(e){const[t,n]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:n}),t}map(e,t){return this._items.map(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new H("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(n=>new t(n))},using:t=>{typeof t=="function"?this._setUpBindToBinding(n=>t(n)):this._setUpBindToBinding(n=>n[t])}}}_setUpBindToBinding(e){const t=this._bindToCollection,n=(r,o,s)=>{const c=t._bindToCollection==this,u=t._bindToInternalToExternalMap.get(o);if(c&&u)this._bindToExternalToInternalMap.set(o,u),this._bindToInternalToExternalMap.set(u,o);else{const h=e(o);if(!h){this._skippedIndexesFromExternal.push(s);return}let f=s;for(const p of this._skippedIndexesFromExternal)s>p&&f--;for(const p of t._skippedIndexesFromExternal)f>=p&&f++;this._bindToExternalToInternalMap.set(o,h),this._bindToInternalToExternalMap.set(h,o),this.add(h,f);for(let p=0;p<t._skippedIndexesFromExternal.length;p++)f<=t._skippedIndexesFromExternal[p]&&t._skippedIndexesFromExternal[p]++}};for(const r of t)n(null,r,t.getIndex(r));this.listenTo(t,"add",n),this.listenTo(t,"remove",(r,o,s)=>{const c=this._bindToExternalToInternalMap.get(o);c&&this.remove(c),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((u,h)=>(s<h&&u.push(h-1),s>h&&u.push(h),u),[])})}_getItemIdBeforeAdding(e){const t=this._idProperty;let n;if(t in e){if(n=e[t],typeof n!="string")throw new H("collection-add-invalid-id",this);if(this.get(n))throw new H("collection-add-item-already-exists",this)}else e[t]=n=yr();return n}_remove(e){let t,n,r,o=!1;const s=this._idProperty;if(typeof e=="string"?(n=e,r=this._itemMap.get(n),o=!r,r&&(t=this._items.indexOf(r))):typeof e=="number"?(t=e,r=this._items[t],o=!r,r&&(n=r[s])):(r=e,n=r[s],t=this._items.indexOf(r),o=t==-1||!this._itemMap.get(n)),o)throw new H("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(n);const c=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(c),this.fire("remove",r,t),[r,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}je(Ci,xt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ch{constructor(e,t=[],n=[]){this._context=e,this._plugins=new Map,this._availablePlugins=new Map;for(const r of t)r.pluginName&&this._availablePlugins.set(r.pluginName,r);this._contextPlugins=new Map;for(const[r,o]of n)this._contextPlugins.set(r,o),this._contextPlugins.set(o,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let n=e;throw typeof e=="function"&&(n=e.pluginName||e.name),new H("plugincollection-plugin-not-loaded",this._context,{plugin:n})}return t}has(e){return this._plugins.has(e)}init(e,t=[],n=[]){const r=this,o=this._context;T(e),M(e);const s=e.filter(W=>!p(W,t)),c=[...A(s)];ae(c,n);const u=F(c);return Z(u,"init").then(()=>Z(u,"afterInit")).then(()=>u);function h(W){return typeof W=="function"}function f(W){return h(W)&&W.isContextPlugin}function p(W,se){return se.some(te=>te===W||y(W)===te||y(te)===W)}function y(W){return h(W)?W.pluginName||W.name:W}function T(W,se=new Set){W.forEach(te=>{!h(te)||se.has(te)||(se.add(te),te.pluginName&&!r._availablePlugins.has(te.pluginName)&&r._availablePlugins.set(te.pluginName,te),te.requires&&T(te.requires,se))})}function A(W,se=new Set){return W.map(te=>h(te)?te:r._availablePlugins.get(te)).reduce((te,ve)=>se.has(ve)?te:(se.add(ve),ve.requires&&(M(ve.requires,ve),A(ve.requires,se).forEach(ee=>te.add(ee))),te.add(ve)),new Set)}function M(W,se=null){W.map(te=>h(te)?te:r._availablePlugins.get(te)||te).forEach(te=>{B(te,se),O(te,se),V(te,se)})}function B(W,se){if(!h(W))throw se?new H("plugincollection-soft-required",o,{missingPlugin:W,requiredBy:y(se)}):new H("plugincollection-plugin-not-found",o,{plugin:W})}function O(W,se){if(!!f(se)&&!f(W))throw new H("plugincollection-context-required",o,{plugin:y(W),requiredBy:y(se)})}function V(W,se){if(!!se&&!!p(W,t))throw new H("plugincollection-required",o,{plugin:y(W),requiredBy:y(se)})}function F(W){return W.map(se=>{const te=r._contextPlugins.get(se)||new se(o);return r._add(se,te),te})}function Z(W,se){return W.reduce((te,ve)=>!ve[se]||r._contextPlugins.has(ve)?te:te.then(ve[se].bind(ve)),Promise.resolve())}function ae(W,se){for(const te of se){if(typeof te!="function")throw new H("plugincollection-replace-plugin-invalid-type",null,{pluginItem:te});const ve=te.pluginName;if(!ve)throw new H("plugincollection-replace-plugin-missing-name",null,{pluginItem:te});if(te.requires&&te.requires.length)throw new H("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:ve});const ee=r._availablePlugins.get(ve);if(!ee)throw new H("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:ve});const Oe=W.indexOf(ee);if(Oe===-1){if(r._contextPlugins.has(ee))return;throw new H("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:ve})}if(ee.requires&&ee.requires.length)throw new H("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:ve});W.splice(Oe,1,te),r._availablePlugins.set(ve,te)}}}destroy(){const e=[];for(const[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const n=e.pluginName;if(!!n){if(this._plugins.has(n))throw new H("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:e});this._plugins.set(n,t)}}}je(Ch,xt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yn(i){return Array.isArray(i)?i:[i]}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});function Ex(i,e,t=1){if(typeof t!="number")throw new H("translation-service-quantity-not-a-number",null,{quantity:t});const n=Tx();n===1&&(i=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);const r=e.id||e.string;if(n===0||!Cx(i,r))return t!==1?e.plural:e.string;const o=window.CKEDITOR_TRANSLATIONS[i].dictionary,s=window.CKEDITOR_TRANSLATIONS[i].getPluralForm||(u=>u===1?0:1);if(typeof o[r]=="string")return o[r];const c=Number(s(t));return o[r][c]}function Cx(i,e){return!!window.CKEDITOR_TRANSLATIONS[i]&&!!window.CKEDITOR_TRANSLATIONS[i].dictionary[e]}function Tx(){return Object.keys(window.CKEDITOR_TRANSLATIONS).length}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Sx=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function mb(i){return Sx.includes(i)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xx{constructor(e={}){this.uiLanguage=e.uiLanguage||"en",this.contentLanguage=e.contentLanguage||this.uiLanguage,this.uiLanguageDirection=mb(this.uiLanguage),this.contentLanguageDirection=mb(this.contentLanguage),this.t=(t,n)=>this._t(t,n)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=yn(t),typeof e=="string"&&(e={string:e});const r=!!e.plural?t[0]:1,o=Ex(this.uiLanguage,e,r);return Px(o,t)}}function Px(i,e){return i.replace(/%(\d+)/g,(t,n)=>n<e.length?e[n]:t)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ax{constructor(e){this.config=new hb(e,this.constructor.defaultConfig);const t=this.constructor.builtinPlugins;this.config.define("plugins",t),this.plugins=new Ch(this,t);const n=this.config.get("language")||{};this.locale=new xx({uiLanguage:typeof n=="string"?n:n.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new Ci,this._contextOwner=null}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const n of e.concat(t)){if(typeof n!="function")throw new H("context-initplugins-constructor-only",null,{Plugin:n});if(n.isContextPlugin!==!0)throw new H("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new H("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const n=new this(e);t(n.initPlugins().then(()=>n))})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kl{constructor(e){this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}je(kl,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ln(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)if(i[n]!=e[n])return n;return i.length==e.length?"same":i.length<e.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vs{constructor(e){this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new H("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){const n=this.getAncestors(t),r=e.getAncestors(t);let o=0;for(;n[o]==r[o]&&n[o];)o++;return o===0?null:n[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),n=e.getPath(),r=Ln(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire("change:"+e,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=qg(this);return delete e.parent,e}is(e){return e==="node"||e==="view:node"}}je(vs,xt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class It extends vs{constructor(e,t){super(e);this._textData=t}is(e){return e==="$text"||e==="view:$text"||e==="text"||e==="view:text"||e==="node"||e==="view:node"}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof It?this===e||this.data===e.data:!1}_clone(){return new It(this.document,this.data)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xr{constructor(e,t,n){if(this.textNode=e,t<0||t>e.data.length)throw new H("view-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.data.length)throw new H("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(e){return e==="$textProxy"||e==="view:$textProxy"||e==="textProxy"||e==="view:textProxy"}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let n=e.includeSelf?this.textNode:this.parent;for(;n!==null;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ix(i){const e=new Map;for(const t in i)e.set(t,i[t]);return e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zr(i){return Ui(i)?new Map(i):Ix(i)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cr{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const n of this._patterns){const r=pb(t,n);if(r)return{element:t,pattern:n,match:r}}return null}matchAll(...e){const t=[];for(const n of e)for(const r of this._patterns){const o=pb(n,r);o&&t.push({element:n,pattern:r,match:o})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}}function pb(i,e){if(typeof e=="function")return e(i);const t={};return e.name&&(t.name=Rx(e.name,i.name),!t.name)||e.attributes&&(t.attributes=Dx(e.attributes,i),!t.attributes)?null:e.classes&&(t.classes=Bx(e.classes,i),!t.classes)||e.styles&&(t.styles=Vx(e.styles,i),!t.styles)?!1:t}function Rx(i,e){return i instanceof RegExp?!!e.match(i):i===e}function Th(i,e,t){const n=Mx(i),r=Array.from(e),o=[];return n.forEach(([s,c])=>{r.forEach(u=>{Ox(s,u)&&Nx(c,u,t)&&o.push(u)})}),!n.length||o.length<n.length?null:o}function Mx(i){return Array.isArray(i)?i.map(e=>Hi(e)?((e.key===void 0||e.value===void 0)&&Vn("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):Hi(i)?Object.entries(i):[[i,!0]]}function Ox(i,e){return i===!0||i===e||i instanceof RegExp&&e.match(i)}function Nx(i,e,t){if(i===!0)return!0;const n=t(e);return i===n||i instanceof RegExp&&!!String(n).match(i)}function Dx(i,e){const t=new Set(e.getAttributeKeys());return Hi(i)?(i.style!==void 0&&Vn("matcher-pattern-deprecated-attributes-style-key",i),i.class!==void 0&&Vn("matcher-pattern-deprecated-attributes-class-key",i)):(t.delete("style"),t.delete("class")),Th(i,t,n=>e.getAttribute(n))}function Bx(i,e){return Th(i,e.getClassNames())}function Vx(i,e){return Th(i,e.getStyleNames(!0),t=>e.getStyle(t))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lx{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){const e=Object.entries(this._styles);return!Array.from(e).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=Array.from(zx(e).entries());for(const[n,r]of t)this._styleProcessor.toNormalizedForm(n,r,this._styles)}has(e){if(this.isEmpty)return!1;const n=this._styleProcessor.getReducedForm(e,this._styles).find(([r])=>r===e);return Array.isArray(n)}set(e,t){if(Gt(e))for(const[n,r]of Object.entries(e))this._styleProcessor.toNormalizedForm(n,r,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=Sh(e);mx(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!Gt(this._styles[e]))return this._styles[e];const n=this._styleProcessor.getReducedForm(e,this._styles).find(([r])=>r===e);if(Array.isArray(n))return n[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this._getStylesEntries().map(([n])=>n)}clear(){this._styles={}}_getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const n of t)e.push(...this._styleProcessor.getReducedForm(n,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const r=t.splice(0,t.length-1).join("."),o=Kc(this._styles,r);if(!o)return;!Array.from(Object.keys(o)).length&&this.remove(r)}}class Fx{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,n){if(Gt(t)){xh(n,Sh(e),t);return}if(this._normalizers.has(e)){const r=this._normalizers.get(e),{path:o,value:s}=r(t);xh(n,o,s)}else xh(n,e,t)}getNormalized(e,t){if(!e)return ib({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const n=this._extractors.get(e);if(typeof n=="string")return Kc(t,n);const r=n(e,t);if(r)return r}return Kc(t,Sh(e))}getReducedForm(e,t){const n=this.getNormalized(e,t);return n===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(n):[[e,n]]}getStyleNames(e){const t=Array.from(this._consumables.keys()).filter(r=>{const o=this.getNormalized(r,e);return o&&typeof o=="object"?Object.keys(o).length:o}),n=new Set([...t,...Object.keys(e)]);return Array.from(n.values())}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const n of t)this._mapStyleNames(n,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function zx(i){let e=null,t=0,n=0,r=null;const o=new Map;if(i==="")return o;i.charAt(i.length-1)!=";"&&(i=i+";");for(let s=0;s<i.length;s++){const c=i.charAt(s);if(e===null)switch(c){case":":r||(r=i.substr(t,s-t),n=s+1);break;case'"':case"'":e=c;break;case";":{const u=i.substr(n,s-n);r&&o.set(r.trim(),u.trim()),r=null,t=s+1;break}}else c===e&&(e=null)}return o}function Sh(i){return i.replace("-",".")}function xh(i,e,t){let n=t;Gt(t)&&(n=ib({},Kc(i,e),t)),hx(i,e,n)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wi extends vs{constructor(e,t,n,r){super(e);if(this.name=t,this._attrs=Hx(n),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");gb(this._classes,o),this._attrs.delete("class")}this._styles=new Lx(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style")),this._customProperties=new Map,this._isAllowedInsideAttributeElement=!1,this._unsafeAttributesToRender=[]}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}get isAllowedInsideAttributeElement(){return this._isAllowedInsideAttributeElement}is(e,t=null){return t?t===this.name&&(e==="element"||e==="view:element"):e==="element"||e==="view:element"||e==="node"||e==="view:node"}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof Wi))return!1;if(this===e)return!0;if(this.name!=e.name||this.isAllowedInsideAttributeElement!=e.isAllowedInsideAttributeElement||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,n]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==n)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e=!1){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new Cr(...e);let n=this.parent;for(;n;){if(t.match(n))return n;n=n.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),n=Array.from(this._attrs).map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(n==""?"":` ${n}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const t=[];if(e)for(const r of this.getChildren())t.push(r._clone(e));const n=new this.constructor(this.document,this.name,this._attrs,t);return n._classes=new Set(this._classes),n._styles.set(this._styles.getNormalized()),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._isAllowedInsideAttributeElement=this.isAllowedInsideAttributeElement,n}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let n=0;const r=Ux(this.document,t);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){t=String(t),this._fireChange("attributes",this),e=="class"?gb(this._classes,t):e=="style"?this._styles.setTo(t):this._attrs.set(e,t)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of yn(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of yn(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of yn(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}}function Hx(i){i=Zr(i);for(const[e,t]of i)t===null?i.delete(e):typeof t!="string"&&i.set(e,String(t));return i}function gb(i,e){const t=e.split(/\s+/);i.clear(),t.forEach(n=>i.add(n))}function Ux(i,e){return typeof e=="string"?[new It(i,e)]:(Ui(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new It(i,t):t instanceof Xr?new It(i,t.data):t))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tu extends Wi{constructor(e,t,n,r){super(e,t,n,r);this.getFillerOffset=bb}is(e,t=null){return t?t===this.name&&(e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"):e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"}}function bb(){const i=[...this.getChildren()],e=i[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of i)if(!t.is("uiElement"))return null;return this.childCount}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nu extends tu{constructor(e,t,n,r){super(e,t,n,r);this.set("isReadOnly",!1),this.set("isFocused",!1),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",o=>o&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}is(e,t=null){return t?t===this.name&&(e==="editableElement"||e==="view:editableElement"||e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"):e==="editableElement"||e==="view:editableElement"||e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"}destroy(){this.stopListening()}}je(nu,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const wb=Symbol("rootName");class Wx extends nu{constructor(e,t){super(e,t);this.rootName="main"}is(e,t=null){return t?t===this.name&&(e==="rootElement"||e==="view:rootElement"||e==="editableElement"||e==="view:editableElement"||e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"):e==="rootElement"||e==="view:rootElement"||e==="editableElement"||e==="view:editableElement"||e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"}get rootName(){return this.getCustomProperty(wb)}set rootName(e){this._setCustomProperty(wb,e)}set _name(e){this.name=e}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ys{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new H("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new H("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this.position=Ce._createAt(e.startPosition):this.position=Ce._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(e){let t,n,r;do r=this.position,{done:t,value:n}=this.next();while(!t&&e(n));t||(this.position=r)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,n=e.parent;if(n.parent===null&&e.offset===n.childCount)return{done:!0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};let r;if(n instanceof It){if(e.isAtEnd)return this.position=Ce._createAfter(n),this._next();r=n.data[e.offset]}else r=n.getChild(e.offset);if(r instanceof Wi)return this.shallow?e.offset++:e=new Ce(r,0),this.position=e,this._formatReturnValue("elementStart",r,t,e,1);if(r instanceof It){if(this.singleCharacters)return e=new Ce(r,0),this.position=e,this._next();{let o=r.data.length,s;return r==this._boundaryEndParent?(o=this.boundaries.end.offset,s=new Xr(r,0,o),e=Ce._createAfter(s)):(s=new Xr(r,0,r.data.length),e.offset++),this.position=e,this._formatReturnValue("text",s,t,e,o)}}else if(typeof r=="string"){let o;this.singleCharacters?o=1:o=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-e.offset;const s=new Xr(n,e.offset,o);return e.offset+=o,this.position=e,this._formatReturnValue("text",s,t,e,o)}else return e=Ce._createAfter(n),this.position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,t,e)}_previous(){let e=this.position.clone();const t=this.position,n=e.parent;if(n.parent===null&&e.offset===0)return{done:!0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};let r;if(n instanceof It){if(e.isAtStart)return this.position=Ce._createBefore(n),this._previous();r=n.data[e.offset-1]}else r=n.getChild(e.offset-1);if(r instanceof Wi)return this.shallow?(e.offset--,this.position=e,this._formatReturnValue("elementStart",r,t,e,1)):(e=new Ce(r,r.childCount),this.position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",r,t,e));if(r instanceof It){if(this.singleCharacters)return e=new Ce(r,r.data.length),this.position=e,this._previous();{let o=r.data.length,s;if(r==this._boundaryStartParent){const c=this.boundaries.start.offset;s=new Xr(r,c,r.data.length-c),o=s.data.length,e=Ce._createBefore(s)}else s=new Xr(r,0,r.data.length),e.offset--;return this.position=e,this._formatReturnValue("text",s,t,e,o)}}else if(typeof r=="string"){let o;if(this.singleCharacters)o=1;else{const c=n===this._boundaryStartParent?this.boundaries.start.offset:0;o=e.offset-c}e.offset-=o;const s=new Xr(n,e.offset,o);return this.position=e,this._formatReturnValue("text",s,t,e,o)}else return e=Ce._createBefore(n),this.position=e,this._formatReturnValue("elementStart",n,t,e,1)}_formatReturnValue(e,t,n,r,o){return t instanceof Xr&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(r=Ce._createAfter(t.textNode),this.position=r):n=Ce._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(r=Ce._createBefore(t.textNode),this.position=r):n=Ce._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:r,length:o}}}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ce{constructor(e,t){this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof nu);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const t=Ce._createAt(this),n=t.offset+e;return t.offset=n<0?0:n,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const n=new ys(t);return n.skip(e),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),n=e.getAncestors();let r=0;for(;t[r]==n[r]&&t[r];)r++;return r===0?null:t[r-1]}is(e){return e==="position"||e==="view:position"}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],n=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),n.push(e.offset);const r=Ln(t,n);switch(r){case"prefix":return"before";case"extension":return"after";default:return t[r]<n[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new ys(e)}clone(){return new Ce(this.parent,this.offset)}static _createAt(e,t){if(e instanceof Ce)return new this(e.parent,e.offset);{const n=e;if(t=="end")t=n.is("$text")?n.data.length:n.childCount;else{if(t=="before")return this._createBefore(n);if(t=="after")return this._createAfter(n);if(t!==0&&!t)throw new H("view-createpositionat-offset-required",n)}return new Ce(n,t)}}static _createAfter(e){if(e.is("$textProxy"))return new Ce(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new H("view-position-after-root",e,{root:e});return new Ce(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Ce(e.textNode,e.offsetInText);if(!e.parent)throw new H("view-position-before-root",e,{root:e});return new Ce(e.parent,e.index)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Je{constructor(e,t=null){this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new ys({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(iu,{direction:"backward"}),t=this.end.getLastMatchingPosition(iu);return e.parent.is("$text")&&e.isAtStart&&(e=Ce._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=Ce._createAfter(t.parent)),new Je(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(iu);if(e.isAfter(this.end)||e.isEqual(this.end))return new Je(e,e);let t=this.end.getLastMatchingPosition(iu,{direction:"backward"});const n=e.nodeAfter,r=t.nodeBefore;return n&&n.is("$text")&&(e=new Ce(n,0)),r&&r.is("$text")&&(t=new Ce(r,r.data.length)),new Je(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Je(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Je(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new Je(t,n)}return null}getWalker(e={}){return e.boundaries=this,new ys(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new Je(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new ys(e);for(const n of t)yield n.item}*getPositions(e={}){e.boundaries=this;const t=new ys(e);yield t.position;for(const n of t)yield n.nextPosition}is(e){return e==="range"||e==="view:range"}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,n,r){return new this(new Ce(e,t),new Ce(n,r))}static _createFromPositionAndShift(e,t){const n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(Ce._createBefore(e),t)}}function iu(i){return!!(i.item.is("attributeElement")||i.item.is("uiElement"))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ph(i){let e=0;for(const t of i)e++;return e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rr{constructor(e=null,t,n){this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(e,t,n)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let n=!1;for(const r of e._ranges)if(t.isEqual(r)){n=!0;break}if(!n)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=Ph(this.getRanges()),n=Ph(e.getRanges());if(t!=n)return!1;if(t==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let s of e.getRanges())if(s=s.getTrimmed(),r.start.isEqual(s.start)&&r.end.isEqual(s.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(e,t,n){if(e===null)this._setRanges([]),this._setFakeOptions(t);else if(e instanceof rr||e instanceof Ah)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof Je)this._setRanges([e],t&&t.backward),this._setFakeOptions(t);else if(e instanceof Ce)this._setRanges([new Je(e)]),this._setFakeOptions(t);else if(e instanceof vs){const r=!!n&&!!n.backward;let o;if(t===void 0)throw new H("view-selection-setto-required-second-parameter",this);t=="in"?o=Je._createIn(e):t=="on"?o=Je._createOn(e):o=new Je(Ce._createAt(e,t)),this._setRanges([o],r),this._setFakeOptions(n)}else if(Ui(e))this._setRanges(e,t&&t.backward),this._setFakeOptions(t);else throw new H("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new H("view-selection-setfocus-no-ranges",this);const n=Ce._createAt(e,t);if(n.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),n.compareWith(r)=="before"?this._addRange(new Je(n,r),!0):this._addRange(new Je(r,n)),this.fire("change")}is(e){return e==="selection"||e==="view:selection"}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const n of e)this._addRange(n);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof Je))throw new H("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new H("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new Je(e.start,e.end))}}je(rr,xt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ah{constructor(e=null,t,n){this._selection=new rr,this._selection.delegate("change").to(this),this._selection.setTo(e,t,n)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}is(e){return e==="selection"||e=="documentSelection"||e=="view:selection"||e=="view:documentSelection"}_setTo(e,t,n){this._selection.setTo(e,t,n)}_setFocus(e,t){this._selection.setFocus(e,t)}}je(Ah,xt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ru extends Ro{constructor(e,t,n){super(e,t);this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ih=Symbol("bubbling contexts"),$x={fire(i,...e){try{const t=i instanceof Ro?i:new Ro(this,i),n=Rh(this);if(!n.size)return;if(El(t,"capturing",this),oa(n,"$capture",t,...e))return t.return;const r=t.startRange||this.selection.getFirstRange(),o=r?r.getContainedElement():null,s=o?Boolean(vb(n,o)):!1;let c=o||jx(r);if(El(t,"atTarget",c),!s){if(oa(n,"$text",t,...e))return t.return;El(t,"bubbling",c)}for(;c;){if(c.is("rootElement")){if(oa(n,"$root",t,...e))return t.return}else if(c.is("element")&&oa(n,c.name,t,...e))return t.return;if(oa(n,c,t,...e))return t.return;c=c.parent,El(t,"bubbling",c)}return El(t,"bubbling",this),oa(n,"$document",t,...e),t.return}catch(t){H.rethrowUnexpectedError(t,this)}},_addEventListener(i,e,t){const n=yn(t.context||"$document"),r=Rh(this);for(const o of n){let s=r.get(o);s||(s=Object.create(xt),r.set(o,s)),this.listenTo(s,i,e,t)}},_removeEventListener(i,e){const t=Rh(this);for(const n of t.values())this.stopListening(n,i,e)}};function El(i,e,t){i instanceof ru&&(i._eventPhase=e,i._currentTarget=t)}function oa(i,e,t,...n){const r=typeof e=="string"?i.get(e):vb(i,e);return r?(r.fire(t,...n),t.stop.called):!1}function vb(i,e){for(const[t,n]of i)if(typeof t=="function"&&t(e))return n;return null}function Rh(i){return i[Ih]||(i[Ih]=new Map),i[Ih]}function jx(i){if(!i)return null;const e=i.start.parent,t=i.end.parent,n=e.getPath(),r=t.getPath();return n.length>r.length?e:t}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cl{constructor(e){this.selection=new Ah,this.roots=new Ci({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),this._postFixers=new Set}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.map(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(const n of this._postFixers)if(t=n(e),t)break;while(t)}}je(Cl,$x);je(Cl,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yb=10;class sa extends Wi{constructor(e,t,n,r){super(e,t,n,r);this.getFillerOffset=qx,this._priority=yb,this._id=null,this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new H("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}is(e,t=null){return t?t===this.name&&(e==="attributeElement"||e==="view:attributeElement"||e==="element"||e==="view:element"):e==="attributeElement"||e==="view:attributeElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}sa.DEFAULT_PRIORITY=yb;function qx(){if(Mh(this))return null;let i=this.parent;for(;i&&i.is("attributeElement");){if(Mh(i)>1)return null;i=i.parent}return!i||Mh(i)>1?null:this.childCount}function Mh(i){return Array.from(i.getChildren()).filter(e=>!e.is("uiElement")).length}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _b extends Wi{constructor(e,t,n,r){super(e,t,n,r);this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=Kx}is(e,t=null){return t?t===this.name&&(e==="emptyElement"||e==="view:emptyElement"||e==="element"||e==="view:element"):e==="emptyElement"||e==="view:emptyElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"}_insertChild(e,t){if(t&&(t instanceof vs||Array.from(t).length>0))throw new H("view-emptyelement-cannot-add",[this,t])}}function Kx(){return null}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _s=navigator.userAgent.toLowerCase(),At={isMac:kb(_s),isWindows:Gx(_s),isGecko:Yx(_s),isSafari:Jx(_s),isiOS:Qx(_s),isAndroid:Xx(_s),isBlink:Zx(_s),features:{isRegExpUnicodePropertySupported:eP()}};function kb(i){return i.indexOf("macintosh")>-1}function Gx(i){return i.indexOf("windows")>-1}function Yx(i){return!!i.match(/gecko\/\d+/)}function Jx(i){return i.indexOf(" applewebkit/")>-1&&i.indexOf("chrome")===-1}function Qx(i){return!!i.match(/iphone|ipad/i)||kb(i)&&navigator.maxTouchPoints>0}function Xx(i){return i.indexOf("android")>-1}function Zx(i){return i.indexOf("chrome/")>-1&&i.indexOf("edge/")<0}function eP(){let i=!1;try{i="\u0107".search(new RegExp("[\\p{L}]","u"))===0}catch{}return i}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tP={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21E7"},nP={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},ut=aP(),iP=Object.fromEntries(Object.entries(ut).map(([i,e])=>[e,i.charAt(0).toUpperCase()+i.slice(1)]));function Tr(i){let e;if(typeof i=="string"){if(e=ut[i.toLowerCase()],!e)throw new H("keyboard-unknown-key",null,{key:i})}else e=i.keyCode+(i.altKey?ut.alt:0)+(i.ctrlKey?ut.ctrl:0)+(i.shiftKey?ut.shift:0)+(i.metaKey?ut.cmd:0);return e}function Oh(i){return typeof i=="string"&&(i=lP(i)),i.map(e=>typeof e=="string"?oP(e):e).reduce((e,t)=>t+e,0)}function Eb(i){let e=Oh(i);return Object.entries(At.isMac?tP:nP).reduce((r,[o,s])=>((e&ut[o])!=0&&(e&=~ut[o],r+=s),r),"")+(e?iP[e]:"")}function rP(i){return i==ut.arrowright||i==ut.arrowleft||i==ut.arrowup||i==ut.arrowdown}function Nh(i,e){const t=e==="ltr";switch(i){case ut.arrowleft:return t?"left":"right";case ut.arrowright:return t?"right":"left";case ut.arrowup:return"up";case ut.arrowdown:return"down"}}function oP(i){if(i.endsWith("!"))return Tr(i.slice(0,-1));const e=Tr(i);return At.isMac&&e==ut.ctrl?ut.cmd:e}function sP(i,e){const t=Nh(i,e);return t==="down"||t==="right"}function aP(){const i={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const t=String.fromCharCode(e);i[t.toLowerCase()]=e}for(let e=48;e<=57;e++)i[e-48]=e;for(let e=112;e<=123;e++)i["f"+(e-111)]=e;for(const e of"`-=[];',./\\")i[e]=e.charCodeAt(0);return i}function lP(i){return i.split("+").map(e=>e.trim())}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dh extends Wi{constructor(e,t,n,r){super(e,t,n,r);this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=uP}is(e,t=null){return t?t===this.name&&(e==="uiElement"||e==="view:uiElement"||e==="element"||e==="view:element"):e==="uiElement"||e==="view:uiElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"}_insertChild(e,t){if(t&&(t instanceof vs||Array.from(t).length>0))throw new H("view-uielement-cannot-add",this)}render(e){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const n of this.getAttributeKeys())t.setAttribute(n,this.getAttribute(n));return t}}function cP(i){i.document.on("arrowKey",(e,t)=>dP(e,t,i.domConverter),{priority:"low"})}function uP(){return null}function dP(i,e,t){if(e.keyCode==ut.arrowright){const n=e.domTarget.ownerDocument.defaultView.getSelection(),r=n.rangeCount==1&&n.getRangeAt(0).collapsed;if(r||e.shiftKey){const o=n.focusNode,s=n.focusOffset,c=t.domPositionToView(o,s);if(c===null)return;let u=!1;const h=c.getLastMatchingPosition(f=>(f.item.is("uiElement")&&(u=!0),!!(f.item.is("uiElement")||f.item.is("attributeElement"))));if(u){const f=t.viewPositionToDom(h);r?n.collapse(f.parent,f.offset):n.extend(f.parent,f.offset)}}}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cb extends Wi{constructor(e,t,n,r){super(e,t,n,r);this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=hP}is(e,t=null){return t?t===this.name&&(e==="rawElement"||e==="view:rawElement"||e==="element"||e==="view:element"):e==="rawElement"||e==="view:rawElement"||e===this.name||e==="view:"+this.name||e==="element"||e==="view:element"||e==="node"||e==="view:node"}_insertChild(e,t){if(t&&(t instanceof vs||Array.from(t).length>0))throw new H("view-rawelement-cannot-add",[this,t])}}function hP(){return null}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ks{constructor(e,t){this.document=e,this._children=[],t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}is(e){return e==="documentFragment"||e==="view:documentFragment"}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let n=0;const r=fP(this.document,t);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}}je(ks,xt);function fP(i,e){return typeof e=="string"?[new It(i,e)]:(Ui(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new It(i,t):t instanceof Xr?new It(i,t.data):t))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tb{constructor(e){this.document=e,this._cloneGroups=new Map}setSelection(e,t,n){this.document.selection._setTo(e,t,n)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new ks(this.document,e)}createText(e){return new It(this.document,e)}createAttributeElement(e,t,n={}){const r=new sa(this.document,e,t);return typeof n.priority=="number"&&(r._priority=n.priority),n.id&&(r._id=n.id),n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createContainerElement(e,t,n={}){const r=new tu(this.document,e,t);return n.isAllowedInsideAttributeElement!==void 0&&(r._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createEditableElement(e,t,n={}){const r=new nu(this.document,e,t);return r._document=this.document,n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createEmptyElement(e,t,n={}){const r=new _b(this.document,e,t);return n.isAllowedInsideAttributeElement!==void 0&&(r._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createUIElement(e,t,n,r={}){const o=new Dh(this.document,e,t);return n&&(o.render=n),r.isAllowedInsideAttributeElement!==void 0&&(o._isAllowedInsideAttributeElement=r.isAllowedInsideAttributeElement),o}createRawElement(e,t,n,r={}){const o=new Cb(this.document,e,t);return o.render=n||(()=>{}),r.isAllowedInsideAttributeElement!==void 0&&(o._isAllowedInsideAttributeElement=r.isAllowedInsideAttributeElement),r.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),o}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){Hi(e)&&n===void 0&&(n=t),n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof Ce?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new H("view-writer-break-non-container-element",this.document);if(!t.parent)throw new H("view-writer-break-root",this.document);if(e.isAtStart)return Ce._createBefore(t);if(!e.isAtEnd){const n=t._clone(!1);this.insert(Ce._createAfter(t),n);const r=new Je(e,Ce._createAt(t,"end")),o=new Ce(n,0);this.move(r,o)}return Ce._createAfter(t)}mergeAttributes(e){const t=e.offset,n=e.parent;if(n.is("$text"))return e;if(n.is("attributeElement")&&n.childCount===0){const s=n.parent,c=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new Ce(s,c))}const r=n.getChild(t-1),o=n.getChild(t);if(!r||!o)return e;if(r.is("$text")&&o.is("$text"))return xb(r,o);if(r.is("attributeElement")&&o.is("attributeElement")&&r.isSimilar(o)){const s=r.childCount;return r._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new Ce(r,s))}return e}mergeContainers(e){const t=e.nodeBefore,n=e.nodeAfter;if(!t||!n||!t.is("containerElement")||!n.is("containerElement"))throw new H("view-writer-merge-containers-invalid-position",this.document);const r=t.getChild(t.childCount-1),o=r instanceof It?Ce._createAt(r,"end"):Ce._createAt(t,"end");return this.move(Je._createIn(n),Ce._createAt(t,"end")),this.remove(Je._createOn(n)),o}insert(e,t){t=Ui(t)?[...t]:[t],Pb(t,this.document);const n=t.reduce((s,c)=>{const u=s[s.length-1],h=!(c.is("uiElement")&&c.isAllowedInsideAttributeElement);return!u||u.breakAttributes!=h?s.push({breakAttributes:h,nodes:[c]}):u.nodes.push(c),s},[]);let r=null,o=e;for(const{nodes:s,breakAttributes:c}of n){const u=this._insertNodes(o,s,c);r||(r=u.start),o=u.end}return r?new Je(r,o):new Je(e)}remove(e){const t=e instanceof Je?e:Je._createOn(e);if(Tl(t,this.document),t.isCollapsed)return new ks(this.document);const{start:n,end:r}=this._breakAttributesRange(t,!0),o=n.parent,s=r.offset-n.offset,c=o._removeChildren(n.offset,s);for(const h of c)this._removeFromClonedElementsGroup(h);const u=this.mergeAttributes(n);return t.start=u,t.end=u.clone(),new ks(this.document,c)}clear(e,t){Tl(e,this.document);const n=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const r of n){const o=r.item;let s;if(o.is("element")&&t.isSimilar(o))s=Je._createOn(o);else if(!r.nextPosition.isAfter(e.start)&&o.is("$textProxy")){const c=o.getAncestors().find(u=>u.is("element")&&t.isSimilar(u));c&&(s=Je._createIn(c))}s&&(s.end.isAfter(e.end)&&(s.end=e.end),s.start.isBefore(e.start)&&(s.start=e.start),this.remove(s))}}move(e,t){let n;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const r=t.parent,o=r.childCount;e=this._breakAttributesRange(e,!0),n=this.remove(e),t.offset+=r.childCount-o}else n=this.remove(e);return this.insert(t,n)}wrap(e,t){if(!(t instanceof sa))throw new H("view-writer-wrap-invalid-attribute",this.document);if(Tl(e,this.document),e.isCollapsed){let n=e.start;n.parent.is("element")&&!mP(n.parent)&&(n=n.getLastMatchingPosition(o=>o.item.is("uiElement"))),n=this._wrapPosition(n,t);const r=this.document.selection;return r.isCollapsed&&r.getFirstPosition().isEqual(e.start)&&this.setSelection(n),new Je(n)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof sa))throw new H("view-writer-unwrap-invalid-attribute",this.document);if(Tl(e,this.document),e.isCollapsed)return e;const{start:n,end:r}=this._breakAttributesRange(e,!0),o=n.parent,s=this._unwrapChildren(o,n.offset,r.offset,t),c=this.mergeAttributes(s.start);c.isEqual(s.start)||s.end.offset--;const u=this.mergeAttributes(s.end);return new Je(c,u)}rename(e,t){const n=new tu(this.document,e,t.getAttributes());return this.insert(Ce._createAfter(t),n),this.move(Je._createIn(t),Ce._createAt(n,0)),this.remove(Je._createOn(t)),n}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return Ce._createAt(e,t)}createPositionAfter(e){return Ce._createAfter(e)}createPositionBefore(e){return Ce._createBefore(e)}createRange(e,t){return new Je(e,t)}createRangeOn(e){return Je._createOn(e)}createRangeIn(e){return Je._createIn(e)}createSelection(e,t,n){return new rr(e,t,n)}_insertNodes(e,t,n){let r;if(n?r=Bh(e):r=e.parent.is("$text")?e.parent.parent:e.parent,!r)throw new H("view-writer-invalid-position-container",this.document);let o;n?o=this._breakAttributes(e,!0):o=e.parent.is("$text")?Vh(e):e;const s=r._insertChild(o.offset,t);for(const f of t)this._addToClonedElementsGroup(f);const c=o.getShiftedBy(s),u=this.mergeAttributes(o);u.isEqual(o)||c.offset--;const h=this.mergeAttributes(c);return new Je(u,h)}_wrapChildren(e,t,n,r){let o=t;const s=[];for(;o<n;){const u=e.getChild(o),h=u.is("$text"),f=u.is("attributeElement"),p=u.isAllowedInsideAttributeElement;if(f&&this._wrapAttributeElement(r,u))s.push(new Ce(e,o));else if(h||p||f&&pP(r,u)){const y=r._clone();u._remove(),y._appendChild(u),e._insertChild(o,y),this._addToClonedElementsGroup(y),s.push(new Ce(e,o))}else f&&this._wrapChildren(u,0,u.childCount,r);o++}let c=0;for(const u of s){if(u.offset-=c,u.offset==t)continue;this.mergeAttributes(u).isEqual(u)||(c++,n--)}return Je._createFromParentsAndOffsets(e,t,e,n)}_unwrapChildren(e,t,n,r){let o=t;const s=[];for(;o<n;){const u=e.getChild(o);if(!u.is("attributeElement")){o++;continue}if(u.isSimilar(r)){const h=u.getChildren(),f=u.childCount;u._remove(),e._insertChild(o,h),this._removeFromClonedElementsGroup(u),s.push(new Ce(e,o),new Ce(e,o+f)),o+=f,n+=f-1;continue}if(this._unwrapAttributeElement(r,u)){s.push(new Ce(e,o),new Ce(e,o+1)),o++;continue}this._unwrapChildren(u,0,u.childCount,r),o++}let c=0;for(const u of s){if(u.offset-=c,u.offset==t||u.offset==n)continue;this.mergeAttributes(u).isEqual(u)||(c++,n--)}return Je._createFromParentsAndOffsets(e,t,e,n)}_wrapRange(e,t){const{start:n,end:r}=this._breakAttributesRange(e,!0),o=n.parent,s=this._wrapChildren(o,n.offset,r.offset,t),c=this.mergeAttributes(s.start);c.isEqual(s.start)||s.end.offset--;const u=this.mergeAttributes(s.end);return new Je(c,u)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return Sb(e.clone());e.parent.is("$text")&&(e=Vh(e));const n=this.createAttributeElement();n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,e.parent._insertChild(e.offset,n);const r=new Je(e,e.getShiftedBy(1));this.wrap(r,t);const o=new Ce(n.parent,n.index);n._remove();const s=o.nodeBefore,c=o.nodeAfter;return s instanceof It&&c instanceof It?xb(s,c):Sb(o)}_wrapAttributeElement(e,t){if(!Ab(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const n of e.getAttributeKeys())if(!(n==="class"||n==="style")&&t.hasAttribute(n)&&t.getAttribute(n)!==e.getAttribute(n))return!1;for(const n of e.getStyleNames())if(t.hasStyle(n)&&t.getStyle(n)!==e.getStyle(n))return!1;for(const n of e.getAttributeKeys())n==="class"||n==="style"||t.hasAttribute(n)||this.setAttribute(n,e.getAttribute(n),t);for(const n of e.getStyleNames())t.hasStyle(n)||this.setStyle(n,e.getStyle(n),t);for(const n of e.getClassNames())t.hasClass(n)||this.addClass(n,t);return!0}_unwrapAttributeElement(e,t){if(!Ab(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const n of e.getAttributeKeys())if(!(n==="class"||n==="style")&&(!t.hasAttribute(n)||t.getAttribute(n)!==e.getAttribute(n)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const n of e.getStyleNames())if(!t.hasStyle(n)||t.getStyle(n)!==e.getStyle(n))return!1;for(const n of e.getAttributeKeys())n==="class"||n==="style"||this.removeAttribute(n,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const n=e.start,r=e.end;if(Tl(e,this.document),e.isCollapsed){const u=this._breakAttributes(e.start,t);return new Je(u,u)}const o=this._breakAttributes(r,t),s=o.parent.childCount,c=this._breakAttributes(n,t);return o.offset+=o.parent.childCount-s,new Je(c,o)}_breakAttributes(e,t=!1){const n=e.offset,r=e.parent;if(e.parent.is("emptyElement"))throw new H("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new H("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new H("view-writer-cannot-break-raw-element",this.document);if(!t&&r.is("$text")&&Lh(r.parent)||Lh(r))return e.clone();if(r.is("$text"))return this._breakAttributes(Vh(e),t);const o=r.childCount;if(n==o){const s=new Ce(r.parent,r.index+1);return this._breakAttributes(s,t)}else if(n===0){const s=new Ce(r.parent,r.index);return this._breakAttributes(s,t)}else{const s=r.index+1,c=r._clone();r.parent._insertChild(s,c),this._addToClonedElementsGroup(c);const u=r.childCount-n,h=r._removeChildren(n,u);c._appendChild(h);const f=new Ce(r.parent,s);return this._breakAttributes(f,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const r of e.getChildren())this._addToClonedElementsGroup(r);const t=e.id;if(!t)return;let n=this._cloneGroups.get(t);n||(n=new Set,this._cloneGroups.set(t,n)),n.add(e),e._clonesGroup=n}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const r of e.getChildren())this._removeFromClonedElementsGroup(r);const t=e.id;if(!t)return;const n=this._cloneGroups.get(t);!n||n.delete(e)}}function mP(i){return Array.from(i.getChildren()).some(e=>!e.is("uiElement"))}function Bh(i){let e=i.parent;for(;!Lh(e);){if(!e)return;e=e.parent}return e}function pP(i,e){return i.priority<e.priority?!0:i.priority>e.priority?!1:i.getIdentity()<e.getIdentity()}function Sb(i){const e=i.nodeBefore;if(e&&e.is("$text"))return new Ce(e,e.data.length);const t=i.nodeAfter;return t&&t.is("$text")?new Ce(t,0):i}function Vh(i){if(i.offset==i.parent.data.length)return new Ce(i.parent.parent,i.parent.index+1);if(i.offset===0)return new Ce(i.parent.parent,i.parent.index);const e=i.parent.data.slice(i.offset);return i.parent._data=i.parent.data.slice(0,i.offset),i.parent.parent._insertChild(i.parent.index+1,new It(i.root.document,e)),new Ce(i.parent.parent,i.parent.index+1)}function xb(i,e){const t=i.data.length;return i._data+=e.data,e._remove(),new Ce(i,t)}function Pb(i,e){for(const t of i){if(!gP.some(n=>t instanceof n))throw new H("view-writer-insert-invalid-node-type",e);t.is("$text")||Pb(t.getChildren(),e)}}const gP=[It,sa,tu,_b,Cb,Dh];function Lh(i){return i&&(i.is("containerElement")||i.is("documentFragment"))}function Tl(i,e){const t=Bh(i.start),n=Bh(i.end);if(!t||!n||t!==n)throw new H("view-writer-invalid-range-container",e)}function Ab(i,e){return i.id===null&&e.id===null}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function An(i){return Object.prototype.toString.call(i)=="[object Text]"}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ib=i=>i.createTextNode("\xA0"),Rb=i=>{const e=i.createElement("span");return e.dataset.ckeFiller=!0,e.innerHTML="\xA0",e},Mb=i=>{const e=i.createElement("br");return e.dataset.ckeFiller=!0,e},Sr=7,ou="\u2060".repeat(Sr);function Ti(i){return An(i)&&i.data.substr(0,Sr)===ou}function su(i){return i.data.length==Sr&&Ti(i)}function Fh(i){return Ti(i)?i.data.slice(Sr):i.data}function bP(i){i.document.on("arrowKey",wP,{priority:"low"})}function wP(i,e){if(e.keyCode==ut.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const n=t.getRangeAt(0).startContainer,r=t.getRangeAt(0).startOffset;Ti(n)&&r<=Sr&&t.collapse(n,0)}}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ob(i,e,t,n=!1){t=t||function(o,s){return o===s},Array.isArray(i)||(i=Array.prototype.slice.call(i)),Array.isArray(e)||(e=Array.prototype.slice.call(e));const r=vP(i,e,t);return n?_P(r,e.length):yP(e,r)}function vP(i,e,t){const n=Nb(i,e,t);if(n===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const r=Db(i,n),o=Db(e,n),s=Nb(r,o,t),c=i.length-s,u=e.length-s;return{firstIndex:n,lastIndexOld:c,lastIndexNew:u}}function Nb(i,e,t){for(let n=0;n<Math.max(i.length,e.length);n++)if(i[n]===void 0||e[n]===void 0||!t(i[n],e[n]))return n;return-1}function Db(i,e){return i.slice(e).reverse()}function yP(i,e){const t=[],{firstIndex:n,lastIndexOld:r,lastIndexNew:o}=e;return o-n>0&&t.push({index:n,type:"insert",values:i.slice(n,o)}),r-n>0&&t.push({index:n+(o-n),type:"delete",howMany:r-n}),t}function _P(i,e){const{firstIndex:t,lastIndexOld:n,lastIndexNew:r}=i;if(t===-1)return Array(e).fill("equal");let o=[];return t>0&&(o=o.concat(Array(t).fill("equal"))),r-t>0&&(o=o.concat(Array(r-t).fill("insert"))),n-t>0&&(o=o.concat(Array(n-t).fill("delete"))),r<e&&(o=o.concat(Array(e-r).fill("equal"))),o}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Do(i,e,t){t=t||function(M,B){return M===B};const n=i.length,r=e.length;if(n>200||r>200||n+r>300)return Do.fastDiff(i,e,t,!0);let o,s;if(r<n){const M=i;i=e,e=M,o="delete",s="insert"}else o="insert",s="delete";const c=i.length,u=e.length,h=u-c,f={},p={};function y(M){const B=(p[M-1]!==void 0?p[M-1]:-1)+1,O=p[M+1]!==void 0?p[M+1]:-1,V=B>O?-1:1;f[M+V]&&(f[M]=f[M+V].slice(0)),f[M]||(f[M]=[]),f[M].push(B>O?o:s);let F=Math.max(B,O),Z=F-M;for(;Z<c&&F<u&&t(i[Z],e[F]);)Z++,F++,f[M].push("equal");return F}let T=0,A;do{for(A=-T;A<h;A++)p[A]=y(A);for(A=h+T;A>h;A--)p[A]=y(A);p[h]=y(h),T++}while(p[h]!==u);return f[h].slice(1)}Do.fastDiff=Ob;/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Bb(i,e,t){i.insertBefore(t,i.childNodes[e]||null)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Vb(i){const e=i.parentNode;e&&e.removeChild(i)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function aa(i){if(i){if(i.defaultView)return i instanceof i.defaultView.Document;if(i.ownerDocument&&i.ownerDocument.defaultView)return i instanceof i.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lb{constructor(e,t){this.domDocuments=new Set,this.domConverter=e,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),At.isBlink&&!At.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()}),this._inlineFiller=null,this._fakeSelectionContainer=null}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new H("view-renderer-unknown-type",this)}}render(){let e;const t=At.isBlink&&!At.isAndroid?!this.isSelecting:!0;for(const n of this.markedChildren)this._updateChildrenMappings(n);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller));for(const n of this.markedAttributes)this._updateAttrs(n);for(const n of this.markedChildren)this._updateChildren(n,{inlineFillerPosition:e});for(const n of this.markedTexts)!this.markedChildren.has(n.parent)&&this.domConverter.mapViewToDom(n.parent)&&this._updateText(n,{inlineFillerPosition:e});if(t)if(e){const n=this.domConverter.viewPositionToDom(e),r=n.parent.ownerDocument;Ti(n.parent)?this._inlineFiller=n.parent:this._inlineFiller=Fb(r,n.parent,n.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const n=Array.from(this.domConverter.mapViewToDom(e).childNodes),r=Array.from(this.domConverter.viewChildrenToDom(e,t.ownerDocument,{withChildren:!1})),o=this._diffNodeLists(n,r),s=this._findReplaceActions(o,n,r);if(s.indexOf("replace")!==-1){const c={equal:0,insert:0,delete:0};for(const u of s)if(u==="replace"){const h=c.equal+c.insert,f=c.equal+c.delete,p=e.getChild(h);p&&!(p.is("uiElement")||p.is("rawElement"))&&this._updateElementMappings(p,n[f]),Vb(r[h]),c.equal++}else c[u]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?Ce._createBefore(this.selection.getFirstPosition().parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&An(t.parent)&&Ti(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!Ti(e))throw new H("view-renderer-filler-was-lost",this);su(e)?e.remove():e.data=e.data.substr(Sr),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,n=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!kP(t)||n===t.getFillerOffset())return!1;const r=e.nodeBefore,o=e.nodeAfter;return!(r instanceof It||o instanceof It)}_updateText(e,t){const n=this.domConverter.findCorrespondingDomText(e),r=this.domConverter.viewToDom(e,n.ownerDocument),o=n.data;let s=r.data;const c=t.inlineFillerPosition;if(c&&c.parent==e.parent&&c.offset==e.index&&(s=ou+s),o!=s){const u=Ob(o,s);for(const h of u)h.type==="insert"?n.insertData(h.index,h.values.join("")):n.deleteData(h.index,h.howMany)}}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const n=Array.from(t.attributes).map(o=>o.name),r=e.getAttributeKeys();for(const o of r)this.domConverter.setDomElementAttribute(t,o,e.getAttribute(o),e);for(const o of n)e.hasAttribute(o)||this.domConverter.removeDomElementAttribute(t,o)}_updateChildren(e,t){const n=this.domConverter.mapViewToDom(e);if(!n)return;const r=t.inlineFillerPosition,o=this.domConverter.mapViewToDom(e).childNodes,s=Array.from(this.domConverter.viewChildrenToDom(e,n.ownerDocument,{bind:!0}));r&&r.parent===e&&Fb(n.ownerDocument,s,r.offset);const c=this._diffNodeLists(o,s);let u=0;const h=new Set;for(const f of c)f==="delete"?(h.add(o[u]),Vb(o[u])):f==="equal"&&u++;u=0;for(const f of c)f==="insert"?(Bb(n,u,s[u]),u++):f==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(s[u])),u++);for(const f of h)f.parentNode||this.domConverter.unbindDomElement(f)}_diffNodeLists(e,t){return e=TP(e,this._fakeSelectionContainer),Do(e,t,EP.bind(null,this.domConverter))}_findReplaceActions(e,t,n){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let r=[],o=[],s=[];const c={equal:0,insert:0,delete:0};for(const u of e)u==="insert"?s.push(n[c.equal+c.insert]):u==="delete"?o.push(t[c.equal+c.delete]):(r=r.concat(Do(o,s,zb).map(h=>h==="equal"?"replace":h)),r.push("equal"),o=[],s=[]),c[u]++;return r.concat(Do(o,s,zb).map(u=>u==="equal"?"replace":u))}_markDescendantTextToSync(e){if(!!e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(At.isBlink&&!At.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):(this._removeFakeSelection(),this._updateDomSelection(e)))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=SP(t));const n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!n.parentElement||n.parentElement!=e)&&e.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||"\xA0";const r=t.getSelection(),o=t.createRange();r.removeAllRanges(),o.selectNodeContents(n),r.addRange(o)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const n=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);t.collapse(n.parent,n.offset),t.extend(r.parent,r.offset),At.isGecko&&CP(r,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,n=e.ownerDocument.getSelection();return!t||t.parentElement!==e||n.anchorNode!==t&&!t.contains(n.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments)if(e.getSelection().rangeCount){const n=e.activeElement,r=this.domConverter.mapDomToView(n);n&&r&&e.getSelection().removeAllRanges()}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}je(Lb,Pt);function kP(i){if(i.getAttribute("contenteditable")=="false")return!1;const e=i.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function Fb(i,e,t){const n=e instanceof Array?e:e.childNodes,r=n[t];if(An(r))return r.data=ou+r.data,r;{const o=i.createTextNode(ou);return Array.isArray(e)?n.splice(t,0,o):Bb(e,t,o),o}}function zb(i,e){return aa(i)&&aa(e)&&!An(i)&&!An(e)&&i.nodeType!==Node.COMMENT_NODE&&e.nodeType!==Node.COMMENT_NODE&&i.tagName.toLowerCase()===e.tagName.toLowerCase()}function EP(i,e,t){return e===t?!0:An(e)&&An(t)?e.data===t.data:!!(i.isBlockFiller(e)&&i.isBlockFiller(t))}function CP(i,e){const t=i.parent;if(t.nodeType!=Node.ELEMENT_NODE||i.offset!=t.childNodes.length-1)return;const n=t.childNodes[i.offset];n&&n.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function TP(i,e){const t=Array.from(i);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function SP(i){const e=i.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="\xA0",e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var Ht={window,document};/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zh(i){let e=0;for(;i.previousSibling;)i=i.previousSibling,e++;return e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Hb(i){const e=[];for(;i&&i.nodeType!=Node.DOCUMENT_NODE;)e.unshift(i),i=i.parentNode;return e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xP=Mb(document),PP=Ib(document),AP=Rb(document),au="data-ck-unsafe-attribute-",Ub="data-ck-unsafe-element";class lu{constructor(e,t={}){this.document=e,this.renderingMode=t.renderingMode||"editing",this.blockFillerMode=t.blockFillerMode||(this.renderingMode==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new Cr,this._encounteredRawContentDomNodes=new WeakSet}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new rr(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const n of e.childNodes)this.unbindDomElement(n)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,n){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:n==="img"&&(e==="src"||e==="srcset")||n==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}const n=new DOMParser().parseFromString(t,"text/html"),r=n.createDocumentFragment(),o=n.body.childNodes;for(;o.length>0;)r.appendChild(o[0]);const s=n.createTreeWalker(r,NodeFilter.SHOW_ELEMENT),c=[];let u;for(;u=s.nextNode();)c.push(u);for(const h of c){for(const p of h.getAttributeNames())this.setDomElementAttribute(h,p,h.getAttribute(p));const f=h.tagName.toLowerCase();this._shouldRenameElement(f)&&(Vn("domconverter-unsafe-element-detected",{unsafeElement:h}),h.replaceWith(this._createReplacementDomElement(f,h)))}for(;e.firstChild;)e.firstChild.remove();e.append(r)}viewToDom(e,t,n={}){if(e.is("$text")){const r=this._processDataFromViewText(e);return t.createTextNode(r)}else{if(this.mapViewToDom(e))return this.mapViewToDom(e);let r;if(e.is("documentFragment"))r=t.createDocumentFragment(),n.bind&&this.bindDocumentFragments(r,e);else{if(e.is("uiElement"))return e.name==="$comment"?r=t.createComment(e.getCustomProperty("$rawContent")):r=e.render(t,this),n.bind&&this.bindElements(r,e),r;this._shouldRenameElement(e.name)?(Vn("domconverter-unsafe-element-detected",{unsafeElement:e}),r=this._createReplacementDomElement(e.name)):e.hasAttribute("xmlns")?r=t.createElementNS(e.getAttribute("xmlns"),e.name):r=t.createElement(e.name),e.is("rawElement")&&e.render(r,this),n.bind&&this.bindElements(r,e);for(const o of e.getAttributeKeys())this.setDomElementAttribute(r,o,e.getAttribute(o),e)}if(n.withChildren!==!1)for(const o of this.viewChildrenToDom(e,t,n))r.appendChild(o);return r}}setDomElementAttribute(e,t,n,r=null){const o=this.shouldRenderAttribute(t,n,e.tagName.toLowerCase())||r&&r.shouldRenderUnsafeAttribute(t);o||Vn("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:n}),e.hasAttribute(t)&&!o?e.removeAttribute(t):e.hasAttribute(au+t)&&o&&e.removeAttribute(au+t),e.setAttribute(o?t:au+t,n)}removeDomElementAttribute(e,t){t!=Ub&&(e.removeAttribute(t),e.removeAttribute(au+t))}*viewChildrenToDom(e,t,n={}){const r=e.getFillerOffset&&e.getFillerOffset();let o=0;for(const s of e.getChildren())r===o&&(yield this._getBlockFiller(t)),yield this.viewToDom(s,t,n),o++;r===o&&(yield this._getBlockFiller(t))}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),n=this.viewPositionToDom(e.end),r=document.createRange();return r.setStart(t.parent,t.offset),r.setEnd(n.parent,n.offset),r}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const n=this.findCorrespondingDomText(t);if(!n)return null;let r=e.offset;return Ti(n)&&(r+=Sr),{parent:n,offset:r}}else{let n,r,o;if(e.offset===0){if(n=this.mapViewToDom(t),!n)return null;o=n.childNodes[0]}else{const c=e.nodeBefore;if(r=c.is("$text")?this.findCorrespondingDomText(c):this.mapViewToDom(e.nodeBefore),!r)return null;n=r.parentNode,o=r.nextSibling}if(An(o)&&Ti(o))return{parent:o,offset:Sr};const s=r?zh(r)+1:0;return{parent:n,offset:s}}}domToView(e,t={}){if(this.isBlockFiller(e))return null;const n=this.getHostViewElement(e);if(n)return n;if(this.isComment(e)&&t.skipComments)return null;if(An(e)){if(su(e))return null;{const r=this._processDataFromDomText(e);return r===""?null:new It(this.document,r)}}else{if(this.mapDomToView(e))return this.mapDomToView(e);let r;if(this.isDocumentFragment(e))r=new ks(this.document),t.bind&&this.bindDocumentFragments(e,r);else{r=this._createViewElement(e,t),t.bind&&this.bindElements(e,r);const o=e.attributes;if(o)for(let s=o.length-1;s>=0;s--)r._setAttribute(o[s].name,o[s].value);if(this._isViewElementWithRawContent(r,t)||this.isComment(e)){const s=this.isComment(e)?e.data:e.innerHTML;return r._setCustomProperty("$rawContent",s),this._encounteredRawContentDomNodes.add(e),r}}if(t.withChildren!==!1)for(const o of this.domChildrenToView(e,t))r._appendChild(o);return r}}*domChildrenToView(e,t={}){for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n],o=this.domToView(r,t);o!==null&&(yield o)}}domSelectionToView(e){if(e.rangeCount===1){let r=e.getRangeAt(0).startContainer;An(r)&&(r=r.parentNode);const o=this.fakeSelectionToView(r);if(o)return o}const t=this.isDomSelectionBackward(e),n=[];for(let r=0;r<e.rangeCount;r++){const o=e.getRangeAt(r),s=this.domRangeToView(o);s&&n.push(s)}return new rr(n,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),n=this.domPositionToView(e.endContainer,e.endOffset);return t&&n?new Je(t,n):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,zh(e));const n=this.mapDomToView(e);if(n&&(n.is("uiElement")||n.is("rawElement")))return Ce._createBefore(n);if(An(e)){if(su(e))return this.domPositionToView(e.parentNode,zh(e));const r=this.findCorrespondingViewText(e);let o=t;return r?(Ti(e)&&(o-=Sr,o=o<0?0:o),new Ce(r,o)):null}else{if(t===0){const r=this.mapDomToView(e);if(r)return new Ce(r,0)}else{const r=e.childNodes[t-1],o=An(r)?this.findCorrespondingViewText(r):this.mapDomToView(r);if(o&&o.parent)return new Ce(o.parent,o.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(su(e))return null;const t=this.getHostViewElement(e);if(t)return t;const n=e.previousSibling;if(n){if(!this.isElement(n))return null;const r=this.mapDomToView(n);if(r)return r.nextSibling instanceof It?r.nextSibling:null}else{const r=this.mapDomToView(e.parentNode);if(r){const o=r.getChild(0);return o instanceof It?o:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:n,scrollY:r}=Ht.window,o=[];Wb(t,s=>{const{scrollLeft:c,scrollTop:u}=s;o.push([c,u])}),t.focus(),Wb(t,s=>{const[c,u]=o.shift();s.scrollLeft=c,s.scrollTop=u}),Ht.window.scrollTo(n,r)}}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isComment(e){return e&&e.nodeType==Node.COMMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(xP):e.tagName==="BR"&&$b(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(AP)||RP(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);const n=t.collapsed;return t.detach(),n}getHostViewElement(e){const t=Hb(e);for(t.pop();t.length;){const n=t.pop(),r=this._domToViewMapping.get(n);if(r&&(r.is("uiElement")||r.is("rawElement")))return r}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}_getBlockFiller(e){switch(this.blockFillerMode){case"nbsp":return Ib(e);case"markedNbsp":return Rb(e);case"br":return Mb(e)}}_isDomSelectionPositionCorrect(e,t){if(An(e)&&Ti(e)&&t<Sr||this.isElement(e)&&Ti(e.childNodes[t]))return!1;const n=this.mapDomToView(e);return!(n&&(n.is("uiElement")||n.is("rawElement")))}_processDataFromViewText(e){let t=e.data;if(e.getAncestors().some(n=>this.preElements.includes(n.name)))return t;if(t.charAt(0)==" "){const n=this._getTouchingInlineViewNode(e,!1);(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n)||!n)&&(t="\xA0"+t.substr(1))}if(t.charAt(t.length-1)==" "){const n=this._getTouchingInlineViewNode(e,!0),r=n&&n.is("$textProxy")&&n.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!n||r)&&(t=t.substr(0,t.length-1)+"\xA0")}return t.replace(/ {2}/g," \xA0")}_nodeEndsWithSpace(e){if(e.getAncestors().some(n=>this.preElements.includes(n.name)))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_processDataFromDomText(e){let t=e.data;if(IP(e,this.preElements))return Fh(e);t=t.replace(/[ \n\t\r]{1,}/g," ");const n=this._getTouchingInlineDomNode(e,!1),r=this._getTouchingInlineDomNode(e,!0),o=this._checkShouldLeftTrimDomText(e,n),s=this._checkShouldRightTrimDomText(e,r);o&&(t=t.replace(/^ /,"")),s&&(t=t.replace(/ $/,"")),t=Fh(new Text(t)),t=t.replace(/ \u00A0/g,"  ");const c=r&&this.isElement(r)&&r.tagName!="BR",u=r&&An(r)&&r.data.charAt(0)==" ";return(/( |\u00A0)\u00A0$/.test(t)||!r||c||u)&&(t=t.replace(/\u00A0$/," ")),(o||n&&this.isElement(n)&&n.tagName!="BR")&&(t=t.replace(/^\u00A0/," ")),t}_checkShouldLeftTrimDomText(e,t){return t?this.isElement(t)?t.tagName==="BR":this._encounteredRawContentDomNodes.has(e.previousSibling)?!1:/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1)):!0}_checkShouldRightTrimDomText(e,t){return t?!1:!Ti(e)}_getTouchingInlineViewNode(e,t){const n=new ys({startPosition:t?Ce._createAfter(e):Ce._createBefore(e),direction:t?"forward":"backward"});for(const r of n){if(r.item.is("element")&&this.inlineObjectElements.includes(r.item.name))return r.item;if(r.item.is("containerElement"))return null;if(r.item.is("element","br"))return null;if(r.item.is("$textProxy"))return r.item}return null}_getTouchingInlineDomNode(e,t){if(!e.parentNode)return null;const n=t?"firstChild":"lastChild",r=t?"nextSibling":"previousSibling";let o=!0;do if(!o&&e[n]?e=e[n]:e[r]?(e=e[r],o=!1):(e=e.parentNode,o=!0),!e||this._isBlockElement(e))return null;while(!(An(e)||e.tagName=="BR"||this._isInlineObjectElement(e)));return e}_isBlockElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isInlineObjectElement(e){return this.isElement(e)&&this.inlineObjectElements.includes(e.tagName.toLowerCase())}_createViewElement(e,t){if(this.isComment(e))return new Dh(this.document,"$comment");const n=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Wi(this.document,n)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){return this.renderingMode=="editing"&&e.toLowerCase()=="script"}_createReplacementDomElement(e,t=null){const n=document.createElement("span");if(n.setAttribute(Ub,e),t){for(;t.firstChild;)n.appendChild(t.firstChild);for(const r of t.getAttributeNames())n.setAttribute(r,t.getAttribute(r))}return n}}function IP(i,e){return Hb(i).some(n=>n.tagName&&e.includes(n.tagName.toLowerCase()))}function Wb(i,e){for(;i&&i!=Ht.document;)e(i),i=i.parentNode}function RP(i,e){return i.isEqualNode(PP)&&$b(i,e)&&i.parentNode.childNodes.length===1}function $b(i,e){const t=i.parentNode;return t&&t.tagName&&e.includes(t.tagName.toLowerCase())}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cu(i){const e=Object.prototype.toString.apply(i);return e=="[object Window]"||e=="[object global]"}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const la=wl({},xt,{listenTo(i,e,t,n={}){if(aa(i)||cu(i)){const r={capture:!!n.useCapture,passive:!!n.usePassive},o=this._getProxyEmitter(i,r)||new jb(i,r);this.listenTo(o,e,t,n)}else xt.listenTo.call(this,i,e,t,n)},stopListening(i,e,t){if(aa(i)||cu(i)){const n=this._getAllProxyEmitters(i);for(const r of n)this.stopListening(r,e,t)}else xt.stopListening.call(this,i,e,t)},_getProxyEmitter(i,e){return o1(this,qb(i,e))},_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(e=>this._getProxyEmitter(i,e)).filter(e=>!!e)}});class jb{constructor(e,t){Fp(this,qb(e,t)),this._domNode=e,this._options=t}}wl(jb.prototype,xt,{attach(i){if(this._domListeners&&this._domListeners[i])return;const e=this._createDomListener(i);this._domNode.addEventListener(i,e,this._options),this._domListeners||(this._domListeners={}),this._domListeners[i]=e},detach(i){let e;this._domListeners[i]&&(!(e=this._events[i])||!e.callbacks.length)&&this._domListeners[i].removeListener()},_addEventListener(i,e,t){this.attach(i),xt._addEventListener.call(this,i,e,t)},_removeEventListener(i,e){xt._removeEventListener.call(this,i,e),this.detach(i)},_createDomListener(i){const e=t=>{this.fire(i,t)};return e.removeListener=()=>{this._domNode.removeEventListener(i,e,this._options),delete this._domListeners[i]},e}});function MP(i){return i["data-ck-expando"]||(i["data-ck-expando"]=yr())}function qb(i,e){let t=MP(i);for(const n of Object.keys(e).sort())e[n]&&(t+="-"+n);return t}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eo{constructor(e){this.view=e,this.document=e.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}je(eo,la);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kb extends eo{constructor(e){super(e);this._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const t=this.domConverter,n=new Map,r=new Set;for(const h of e)if(h.type==="childList"){const f=t.mapDomToView(h.target);if(f&&(f.is("uiElement")||f.is("rawElement")))continue;f&&!this._isBogusBrMutation(h)&&r.add(f)}for(const h of e){const f=t.mapDomToView(h.target);if(!(f&&(f.is("uiElement")||f.is("rawElement")))&&h.type==="characterData"){const p=t.findCorrespondingViewText(h.target);p&&!r.has(p.parent)?n.set(p,{type:"text",oldText:p.data,newText:Fh(h.target),node:p}):!p&&Ti(h.target)&&r.add(t.mapDomToView(h.target.parentNode))}}const o=[];for(const h of n.values())this.renderer.markToSync("text",h.node),o.push(h);for(const h of r){const f=t.mapViewToDom(h),p=Array.from(h.getChildren()),y=Array.from(t.domChildrenToView(f,{withChildren:!1}));lx(p,y,u)||(this.renderer.markToSync("children",h),o.push({type:"children",oldChildren:p,newChildren:y,node:h}))}const s=e[0].target.ownerDocument.getSelection();let c=null;if(s&&s.anchorNode){const h=t.domPositionToView(s.anchorNode,s.anchorOffset),f=t.domPositionToView(s.focusNode,s.focusOffset);h&&f&&(c=new rr(h),c.setFocus(f))}o.length&&(this.document.fire("mutations",o,c),this.view.forceRender());function u(h,f){if(!Array.isArray(h))return h===f?!0:h.is("$text")&&f.is("$text")?h.data===f.data:!1}}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hh{constructor(e,t,n){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,wl(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bo extends eo{constructor(e){super(e);this.useCapture=!1}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(n=>{this.listenTo(e,n,(r,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture})})}fire(e,t,n){this.isEnabled&&this.document.fire(e,new Hh(this.view,t,n))}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OP extends Bo{constructor(e){super(e);this.domEventType=["keydown","keyup"]}onDomEvent(e){this.fire(e.type,e,{keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Tr(this)}})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NP extends eo{constructor(e){super(e);this._fireSelectionChangeDoneDebounced=Qc(t=>this.document.fire("selectionChangeDone",t),200)}observe(){const e=this.document;e.on("arrowKey",(t,n)=>{e.selection.isFake&&this.isEnabled&&n.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,n)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(n.keyCode)},{priority:"lowest"})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,n=new rr(t.getRanges(),{backward:t.isBackward,fake:!1});(e==ut.arrowleft||e==ut.arrowup)&&n.setTo(n.getFirstPosition()),(e==ut.arrowright||e==ut.arrowdown)&&n.setTo(n.getLastPosition());const r={oldSelection:t,newSelection:n,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DP extends eo{constructor(e){super(e);this.mutationObserver=e.getObserver(Kb),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Qc(t=>this.document.fire("selectionChangeDone",t),200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=Qc(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument,n=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},r=()=>{this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel()};this.listenTo(e,"selectstart",n,{priority:"highest"}),this.listenTo(e,"keydown",r,{priority:"highest"}),this.listenTo(e,"keyup",r,{priority:"highest"}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",r,{priority:"highest"}),this.listenTo(t,"selectionchange",(o,s)=>{this._handleSelectionChange(s,t),this._documentIsSelectingInactivityTimeoutDebounced()}),this._documents.add(t))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_handleSelectionChange(e,t){if(!this.isEnabled)return;const n=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(n.anchorNode))return;this.mutationObserver.flush();const r=this.domConverter.domSelectionToView(n);if(r.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,!(this.selection.isEqual(r)&&this.domConverter.isDomSelectionCorrect(n))&&!(++this._loopbackCounter>60))if(this.selection.isSimilar(r))this.view.forceRender();else{const o={oldSelection:this.selection,newSelection:r,domSelection:n};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}_clearInfiniteLoop(){this._loopbackCounter=0}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BP extends Bo{constructor(e){super(e);this.domEventType=["focus","blur"],this.useCapture=!0;const t=this.document;t.on("focus",()=>{t.isFocused=!0,this._renderTimeoutId=setTimeout(()=>e.change(()=>{}),50)}),t.on("blur",(n,r)=>{const o=t.selection.editableElement;(o===null||o===r.target)&&(t.isFocused=!1,e.change(()=>{}))})}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VP extends Bo{constructor(e){super(e);this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0}),t.on("compositionend",()=>{t.isComposing=!1})}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */class LP extends Bo{constructor(e){super(e);this.domEventType=["beforeinput"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FP{constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zP(i,e,t={},n=[]){const r=t&&t.xmlns,o=r?i.createElementNS(r,e):i.createElement(e);for(const s in t)o.setAttribute(s,t[s]);(tb(n)||!Ui(n))&&(n=[n]);for(let s of n)tb(s)&&(s=i.createTextNode(s)),o.appendChild(s);return o}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function HP(i){return i instanceof HTMLTextAreaElement?i.value:i.innerHTML}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function uu(i){return Object.prototype.toString.apply(i)=="[object Range]"}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Gb(i){const e=i.ownerDocument.defaultView.getComputedStyle(i);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Yb=["top","right","bottom","left","width","height"];class Et{constructor(e){const t=uu(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),No(e)||t)if(t){const n=Et.getDomRangeRects(e);du(this,Et.getBoundingRect(n))}else du(this,e.getBoundingClientRect());else if(cu(e)){const{innerWidth:n,innerHeight:r}=e;du(this,{top:0,right:n,bottom:r,left:0,width:n,height:r})}else du(this,e)}clone(){return new Et(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left)};return t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0?null:new Et(t)}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(!Jb(e)){let n=e.parentNode||e.commonAncestorContainer;for(;n&&!Jb(n);){const r=new Et(n),o=t.getIntersection(r);if(o)o.getArea()<t.getArea()&&(t=o);else return null;n=n.parentNode}}return t}isEqual(e){for(const t of Yb)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!!(t&&t.isEqual(e))}excludeScrollbarsAndBorders(){const e=this._source;let t,n,r;if(cu(e))t=e.innerWidth-e.document.documentElement.clientWidth,n=e.innerHeight-e.document.documentElement.clientHeight,r=e.getComputedStyle(e.document.documentElement).direction;else{const o=Gb(this._source);t=e.offsetWidth-e.clientWidth-o.left-o.right,n=e.offsetHeight-e.clientHeight-o.top-o.bottom,r=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,r==="ltr"?this.right-=t:this.left+=t,this.height-=n,this.bottom-=n,this}static getDomRangeRects(e){const t=[],n=Array.from(e.getClientRects());if(n.length)for(const r of n)t.push(new Et(r));else{let r=e.startContainer;An(r)&&(r=r.parentNode);const o=new Et(r.getBoundingClientRect());o.right=o.left,o.width=0,t.push(o)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY};let n=0;for(const r of e)n++,t.left=Math.min(t.left,r.left),t.top=Math.min(t.top,r.top),t.right=Math.max(t.right,r.right),t.bottom=Math.max(t.bottom,r.bottom);return n==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Et(t))}}function du(i,e){for(const t of Yb)i[t]=e[t]}function Jb(i){return No(i)?i===i.ownerDocument.body:!1}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Qb=100;class Ut{constructor(e,t){Ut._observerInstance||Ut._createObserver(),this._element=e,this._callback=t,Ut._addElementCallback(e,t),Ut._observerInstance.observe(e)}destroy(){Ut._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){Ut._elementCallbacks||(Ut._elementCallbacks=new Map);let n=Ut._elementCallbacks.get(e);n||(n=new Set,Ut._elementCallbacks.set(e,n)),n.add(t)}static _deleteElementCallback(e,t){const n=Ut._getElementCallbacks(e);n&&(n.delete(t),n.size||(Ut._elementCallbacks.delete(e),Ut._observerInstance.unobserve(e))),Ut._elementCallbacks&&!Ut._elementCallbacks.size&&(Ut._observerInstance=null,Ut._elementCallbacks=null)}static _getElementCallbacks(e){return Ut._elementCallbacks?Ut._elementCallbacks.get(e):null}static _createObserver(){let e;typeof Ht.window.ResizeObserver=="function"?e=Ht.window.ResizeObserver:e=Xb,Ut._observerInstance=new e(t=>{for(const n of t){const r=Ut._getElementCallbacks(n.target);if(r)for(const o of r)o(n)}})}}Ut._observerInstance=null;Ut._elementCallbacks=null;class Xb{constructor(e){this._callback=e,this._elements=new Set,this._previousRects=new Map,this._periodicCheckTimeout=null}observe(e){this._elements.add(e),this._checkElementRectsAndExecuteCallback(),this._elements.size===1&&this._startPeriodicCheck()}unobserve(e){this._elements.delete(e),this._previousRects.delete(e),this._elements.size||this._stopPeriodicCheck()}_startPeriodicCheck(){const e=()=>{this._checkElementRectsAndExecuteCallback(),this._periodicCheckTimeout=setTimeout(e,Qb)};this.listenTo(Ht.window,"resize",()=>{this._checkElementRectsAndExecuteCallback()}),this._periodicCheckTimeout=setTimeout(e,Qb)}_stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear()}_checkElementRectsAndExecuteCallback(){const e=[];for(const t of this._elements)this._hasRectChanged(t)&&e.push({target:t,contentRect:this._previousRects.get(t)});e.length&&this._callback(e)}_hasRectChanged(e){if(!e.ownerDocument.body.contains(e))return!1;const t=new Et(e),n=this._previousRects.get(e),r=!n||!n.isEqual(t);return this._previousRects.set(e,t),r}}je(Xb,la);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function UP(i,e){i instanceof HTMLTextAreaElement&&(i.value=e),i.innerHTML=e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Uh(i){return e=>e+i}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qn(i){const e=i.next();return e.done?null:e.value}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $i{constructor(){this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set,this._nextEventLoopTimeout=null}add(e){if(this._elements.has(e))throw new H("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>this._focus(e),{useCapture:!0}),this.listenTo(e,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(e),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}je($i,la);je($i,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class to{constructor(){this._listener=Object.create(la)}listenTo(e){this._listener.listenTo(e,"keydown",(t,n)=>{this._listener.fire("_keydown:"+Tr(n),n)})}set(e,t,n={}){const r=Oh(e),o=n.priority;this._listener.listenTo(this._listener,"_keydown:"+r,(s,c)=>{t(c,()=>{c.preventDefault(),c.stopPropagation(),s.stop()}),s.return=!0},{priority:o})}press(e){return!!this._listener.fire("_keydown:"+Tr(e),e)}destroy(){this._listener.stopListening()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WP extends eo{constructor(e){super(e);this.document.on("keydown",(t,n)=>{if(this.isEnabled&&rP(n.keyCode)){const r=new ru(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(r,n),r.stop.called&&t.stop()}})}observe(){}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const $P={};function Zb({target:i,viewportOffset:e=0}){const t=Wh(i);let n=t,r=null;for(;n;){let o;n==t?o=$h(i):o=$h(r),ew(o,()=>ow(i,n));const s=ow(i,n);if(qP(n,s,e),n.parent!=n){if(r=n.frameElement,n=n.parent,!r)return}else n=null}}function jP(i){const e=$h(i);ew(e,()=>new Et(i))}Object.assign($P,{scrollViewportToShowTarget:Zb,scrollAncestorsToShowTarget:jP});function qP(i,e,t){const n=e.clone().moveBy(0,t),r=e.clone().moveBy(0,-t),o=new Et(i).excludeScrollbarsAndBorders();if(![r,n].every(c=>o.contains(c))){let{scrollX:c,scrollY:u}=i;nw(r,o)?u-=o.top-e.top+t:tw(n,o)&&(u+=e.bottom-o.bottom+t),iw(e,o)?c-=o.left-e.left+t:rw(e,o)&&(c+=e.right-o.right+t),i.scrollTo(c,u)}}function ew(i,e){const t=Wh(i);let n,r;for(;i!=t.document.body;)r=e(),n=new Et(i).excludeScrollbarsAndBorders(),n.contains(r)||(nw(r,n)?i.scrollTop-=n.top-r.top:tw(r,n)&&(i.scrollTop+=r.bottom-n.bottom),iw(r,n)?i.scrollLeft-=n.left-r.left:rw(r,n)&&(i.scrollLeft+=r.right-n.right)),i=i.parentNode}function tw(i,e){return i.bottom>e.bottom}function nw(i,e){return i.top<e.top}function iw(i,e){return i.left<e.left}function rw(i,e){return i.right>e.right}function Wh(i){return uu(i)?i.startContainer.ownerDocument.defaultView:i.ownerDocument.defaultView}function $h(i){if(uu(i)){let e=i.commonAncestorContainer;return An(e)&&(e=e.parentNode),e}else return i.parentNode}function ow(i,e){const t=Wh(i),n=new Et(i);if(t===e)return n;{let r=t;for(;r!=e;){const o=r.frameElement,s=new Et(o).excludeScrollbarsAndBorders();n.moveBy(s.left,s.top),r=r.parent}}return n}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sw{constructor(e){this.document=new Cl(e),this.domConverter=new lu(this.document),this.domRoots=new Map,this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Lb(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting").to(this.document),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new Tb(this.document),this.addObserver(Kb),this.addObserver(DP),this.addObserver(BP),this.addObserver(OP),this.addObserver(NP),this.addObserver(VP),this.addObserver(WP),At.isAndroid&&this.addObserver(LP),bP(this),cP(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0})}attachDomRoot(e,t="main"){const n=this.document.getRoot(t);n._name=e.tagName.toLowerCase();const r={};for(const{name:s,value:c}of Array.from(e.attributes))r[s]=c,s==="class"?this._writer.addClass(c.split(" "),n):this._writer.setAttribute(s,c,n);this._initialDomRootAttributes.set(e,r);const o=()=>{this._writer.setAttribute("contenteditable",!n.isReadOnly,n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(e.ownerDocument),n.on("change:children",(s,c)=>this._renderer.markToSync("children",c)),n.on("change:attributes",(s,c)=>this._renderer.markToSync("attributes",c)),n.on("change:text",(s,c)=>this._renderer.markToSync("text",c)),n.on("change:isReadOnly",()=>this.change(o)),n.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const s of this._observers.values())s.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:r})=>t.removeAttribute(r));const n=this._initialDomRootAttributes.get(t);for(const r in n)t.setAttribute(r,n[r]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[n,r]of this.domRoots)t.observe(r,n);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection(){const e=this.document.selection.getFirstRange();e&&Zb({target:this.domConverter.viewRangeToDom(e),viewportOffset:20})}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new H("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){H.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return Ce._createAt(e,t)}createPositionAfter(e){return Ce._createAfter(e)}createPositionBefore(e){return Ce._createBefore(e)}createRange(e,t){return new Je(e,t)}createRangeOn(e){return Je._createOn(e)}createRangeIn(e){return Je._createIn(e)}createSelection(e,t,n){return new rr(e,t,n)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}je(sw,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Es{constructor(e){this.parent=null,this._attrs=Zr(e)}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new H("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new H("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){const n=this.getAncestors(t),r=e.getAncestors(t);let o=0;for(;n[o]==r[o]&&n[o];)o++;return o===0?null:n[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),n=e.getPath(),r=Ln(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,n)=>(t[n[0]]=n[1],t),{})),e}is(e){return e==="node"||e==="model:node"}_clone(){return new Es(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=Zr(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rt extends Es{constructor(e,t){super(t);this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}is(e){return e==="$text"||e==="model:$text"||e==="text"||e==="model:text"||e==="node"||e==="model:node"}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new Rt(this.data,this.getAttributes())}static fromJSON(e){return new Rt(e.data,e.attributes)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xr{constructor(e,t,n){if(this.textNode=e,t<0||t>e.offsetSize)throw new H("model-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.offsetSize)throw new H("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}is(e){return e==="$textProxy"||e==="model:$textProxy"||e==="textProxy"||e==="model:textProxy"}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ca{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return t==-1?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);return t===null?null:this._nodes.slice(0,t).reduce((n,r)=>n+r.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new H("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const n of this._nodes){if(e>=t&&e<t+n.offsetSize)return this.getNodeIndex(n);t+=n.offsetSize}if(t!=e)throw new H("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const n of t)if(!(n instanceof Es))throw new H("model-nodelist-insertnodes-not-node",this);this._nodes.splice(e,0,...t)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ct extends Es{constructor(e,t,n){super(t);this.name=e,this._children=new ca,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}is(e,t=null){return t?t===this.name&&(e==="element"||e==="model:element"):e==="element"||e==="model:element"||e==="node"||e==="model:node"}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const n of e)t=t.getChild(t.offsetToIndex(n));return t}findAncestor(e,t={includeSelf:!1}){let n=t.includeSelf?this:this.parent;for(;n;){if(n.name===e)return n;n=n.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map(n=>n._clone(!0)):null;return new Ct(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const n=KP(t);for(const r of n)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){const n=this._children._removeNodes(e,t);for(const r of n)r.parent=null;return n}static fromJSON(e){let t=null;if(e.children){t=[];for(const n of e.children)n.name?t.push(Ct.fromJSON(n)):t.push(Rt.fromJSON(n))}return new Ct(e.name,e.attributes,t)}}function KP(i){return typeof i=="string"?[new Rt(i)]:(Ui(i)||(i=[i]),Array.from(i).map(e=>typeof e=="string"?new Rt(e):e instanceof xr?new Rt(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class no{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new H("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new H("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this.position=e.startPosition.clone():this.position=fe._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(e){let t,n,r,o;do r=this.position,o=this._visitedParent,{done:t,value:n}=this.next();while(!t&&e(n));t||(this.position=r,this._visitedParent=o)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),n=this._visitedParent;if(n.parent===null&&t.offset===n.maxOffset)return{done:!0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};const r=t.parent,o=ua(t,r),s=o||jh(t,r,o);if(s instanceof Ct)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=s),this.position=t,Cs("elementStart",s,e,t,1);if(s instanceof Rt){let c;if(this.singleCharacters)c=1;else{let f=s.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<f&&(f=this.boundaries.end.offset),c=f-t.offset}const u=t.offset-s.startOffset,h=new xr(s,u,c);return t.offset+=c,this.position=t,Cs("text",h,e,t,c)}else return t.path.pop(),t.offset++,this.position=t,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():Cs("elementEnd",n,e,t)}_previous(){const e=this.position,t=this.position.clone(),n=this._visitedParent;if(n.parent===null&&t.offset===0)return{done:!0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};const r=t.parent,o=ua(t,r),s=o||aw(t,r,o);if(s instanceof Ct)return t.offset--,this.shallow?(this.position=t,Cs("elementStart",s,e,t,1)):(t.path.push(s.maxOffset),this.position=t,this._visitedParent=s,this.ignoreElementEnd?this._previous():Cs("elementEnd",s,e,t));if(s instanceof Rt){let c;if(this.singleCharacters)c=1;else{let f=s.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>f&&(f=this.boundaries.start.offset),c=t.offset-f}const u=t.offset-s.startOffset,h=new xr(s,u-c,c);return t.offset-=c,this.position=t,Cs("text",h,e,t,c)}else return t.path.pop(),this.position=t,this._visitedParent=n.parent,Cs("elementStart",n,e,t,1)}}function Cs(i,e,t,n,r){return{done:!1,value:{type:i,item:e,previousPosition:t,nextPosition:n,length:r}}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fe{constructor(e,t,n="toNone"){if(!e.is("element")&&!e.is("documentFragment"))throw new H("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new H("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChild(e.offsetToIndex(this.path[t])),!e)throw new H("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new H("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return ua(this,this.parent)}get nodeAfter(){const e=this.parent;return jh(this,e,ua(this,e))}get nodeBefore(){const e=this.parent;return aw(this,e,ua(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=Ln(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const n=new no(t);return n.skip(e),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=Ln(this.path,e.path),n=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,n)}getCommonAncestor(e){const t=this.getAncestors(),n=e.getAncestors();let r=0;for(;t[r]==n[r]&&t[r];)r++;return r===0?null:t[r-1]}getShiftedBy(e){const t=this.clone(),n=t.offset+e;return t.offset=n<0?0:n,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){let t=null,n=null;switch(this.compareWith(e)){case"same":return!0;case"before":t=fe._createAt(this),n=fe._createAt(e);break;case"after":t=fe._createAt(e),n=fe._createAt(this);break;default:return!1}let o=t.parent;for(;t.path.length+n.path.length;){if(t.isEqual(n))return!0;if(t.path.length>n.path.length){if(t.offset!==o.maxOffset)return!1;t.path=t.path.slice(0,-1),o=o.parent,t.offset++}else{if(n.offset!==0)return!1;n.path=n.path.slice(0,-1)}}}is(e){return e==="position"||e==="model:position"}hasSameParentAs(e){if(this.root!==e.root)return!1;const t=this.getParentPath(),n=e.getParentPath();return Ln(t,n)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=fe._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange,n=t.containsPosition(this)||t.start.isEqual(this);let r;return n?(r=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(r=r._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?r=fe._createAt(e.deletionPosition):r=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),r}_getTransformedByDeletion(e,t){const n=fe._createAt(this);if(this.root!=e.root)return n;if(Ln(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;n.offset-=t}}else if(Ln(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+t>this.path[r])return null;n.path[r]-=t}}return n}_getTransformedByInsertion(e,t){const n=fe._createAt(this);if(this.root!=e.root)return n;if(Ln(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(n.offset+=t);else if(Ln(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;e.offset<=this.path[r]&&(n.path[r]+=t)}return n}_getTransformedByMove(e,t,n){if(t=t._getTransformedByDeletion(e,n),e.isEqual(t))return fe._createAt(this);const r=this._getTransformedByDeletion(e,n);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(n).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):r._getTransformedByInsertion(t,n)}_getCombined(e,t){const n=e.path.length-1,r=fe._createAt(t);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[n]-e.offset,r.path=[...r.path,...this.path.slice(n+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,n="toNone"){if(e instanceof fe)return new fe(e.root,e.path,e.stickiness);{const r=e;if(t=="end")t=r.maxOffset;else{if(t=="before")return this._createBefore(r,n);if(t=="after")return this._createAfter(r,n);if(t!==0&&!t)throw new H("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new H("model-position-parent-incorrect",[this,e]);const o=r.getPath();return o.push(t),new this(r.root,o,n)}}static _createAfter(e,t){if(!e.parent)throw new H("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new H("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){const n=new fe(t.graveyard,e.path);return n.stickiness=e.stickiness,n}if(!t.getRoot(e.root))throw new H("model-position-fromjson-no-root",t,{rootName:e.root});return new fe(t.getRoot(e.root),e.path,e.stickiness)}}function ua(i,e){const t=e.getChild(e.offsetToIndex(i.offset));return t&&t.is("$text")&&t.startOffset<i.offset?t:null}function jh(i,e,t){return t!==null?null:e.getChild(e.offsetToIndex(i.offset))}function aw(i,e,t){return t!==null?null:e.getChild(e.offsetToIndex(i.offset)-1)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oe{constructor(e,t=null){this.start=fe._createAt(e),this.end=t?fe._createAt(t):fe._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new no({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),t=this.end.getParentPath();return Ln(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}containsItem(e){const t=fe._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}is(e){return e==="range"||e==="model:range"}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new oe(this.start,e.start)),this.containsPosition(e.end)&&t.push(new oe(e.end,this.end))):t.push(new oe(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new oe(t,n)}return null}getJoined(e,t=!1){let n=this.isIntersecting(e);if(n||(this.start.isBefore(e.start)?n=t?this.end.isTouching(e.start):this.end.isEqual(e.start):n=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!n)return null;let r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new oe(r,o)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,n=fe._createAt(this.start);let r=n.parent;for(;n.path.length>t+1;){const o=r.maxOffset-n.offset;o!==0&&e.push(new oe(n,n.getShiftedBy(o))),n.path=n.path.slice(0,-1),n.offset++,r=r.parent}for(;n.path.length<=this.end.path.length;){const o=this.end.path[n.path.length-1],s=o-n.offset;s!==0&&e.push(new oe(n,n.getShiftedBy(s))),n.offset=o,n.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new no(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new no(e);for(const n of t)yield n.item}*getPositions(e={}){e.boundaries=this;const t=new no(e);yield t.position;for(const n of t)yield n.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new oe(this.start,this.end)]}getTransformedByOperations(e){const t=[new oe(this.start,this.end)];for(const n of e)for(let r=0;r<t.length;r++){const o=t[r].getTransformedByOperation(n);t.splice(r,1,...o),r+=o.length-1}for(let n=0;n<t.length;n++){const r=t[n];for(let o=n+1;o<t.length;o++){const s=t[o];(r.containsRange(s)||s.containsRange(r)||r.isEqual(s))&&t.splice(o,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const n=e.sourcePosition,r=e.howMany,o=e.targetPosition;return this._getTransformedByMove(n,o,r,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let n=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(n=this.end.getShiftedBy(1)),t.root!=n.root&&(n=this.end.getShiftedBy(-1)),new oe(t,n)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new oe(this.start);let t=this.start._getTransformedByMergeOperation(e),n=this.end._getTransformedByMergeOperation(e);return t.root!=n.root&&(n=this.end.getShiftedBy(-1)),t.isAfter(n)?(e.sourcePosition.isBefore(e.targetPosition)?(t=fe._createAt(n),t.offset=0):(e.deletionPosition.isEqual(t)||(n=e.deletionPosition),t=e.targetPosition),new oe(t,n)):new oe(t,n)}_getTransformedByInsertion(e,t,n=!1){if(n&&this.containsPosition(e))return[new oe(this.start,e),new oe(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const r=new oe(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,t),r.end=r.end._getTransformedByInsertion(e,t),[r]}}_getTransformedByMove(e,t,n,r=!1){if(this.isCollapsed){const p=this.start._getTransformedByMove(e,t,n);return[new oe(p)]}const o=oe._createFromPositionAndShift(e,n),s=t._getTransformedByDeletion(e,n);if(this.containsPosition(t)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const p=this.start._getTransformedByMove(e,t,n),y=this.end._getTransformedByMove(e,t,n);return[new oe(p,y)]}let c;const u=this.getDifference(o);let h=null;const f=this.getIntersection(o);if(u.length==1?h=new oe(u[0].start._getTransformedByDeletion(e,n),u[0].end._getTransformedByDeletion(e,n)):u.length==2&&(h=new oe(this.start,this.end._getTransformedByDeletion(e,n))),h?c=h._getTransformedByInsertion(s,n,f!==null||r):c=[],f){const p=new oe(f.start._getCombined(o.start,s),f.end._getCombined(o.start,s));c.length==2?c.splice(1,0,p):c.push(p)}return c}_getTransformedByDeletion(e,t){let n=this.start._getTransformedByDeletion(e,t),r=this.end._getTransformedByDeletion(e,t);return n==null&&r==null?null:(n==null&&(n=e),r==null&&(r=e),new oe(n,r))}static _createFromPositionAndShift(e,t){const n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}static _createIn(e){return new this(fe._createAt(e,0),fe._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(fe._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new H("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const t=e[0];e.sort((o,s)=>o.start.isAfter(s.start)?1:-1);const n=e.indexOf(t),r=new this(t.start,t.end);if(n>0)for(let o=n-1;e[o].end.isEqual(r.start);o++)r.start=fe._createAt(e[o].start);for(let o=n+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=fe._createAt(e[o].end);return r}static fromJSON(e,t){return new this(fe.fromJSON(e.start,t),fe.fromJSON(e.end,t))}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qh{constructor(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;const n=this._modelToViewMapping.get(t.modelPosition.parent);t.viewPosition=this.findPositionIn(n,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;const n=this.findMappedViewAncestor(t.viewPosition),r=this._viewToModelMapping.get(n),o=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,n);t.modelPosition=fe._createAt(r,o)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e){const t=this.toModelElement(e);if(this._viewToModelMapping.delete(e),this._elementToMarkerNames.has(e))for(const n of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(n);this._modelToViewMapping.get(t)==e&&this._modelToViewMapping.delete(t)}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const n=this._markerNameToElements.get(t)||new Set;n.add(e);const r=this._elementToMarkerNames.get(e)||new Set;r.add(t),this._markerNameToElements.set(t,n),this._elementToMarkerNames.set(e,r)}unbindElementFromMarkerName(e,t){const n=this._markerNameToElements.get(t);n&&(n.delete(e),n.size==0&&this._markerNameToElements.delete(t));const r=this._elementToMarkerNames.get(e);r&&(r.delete(t),r.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new oe(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new Je(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={isPhantom:!1}){const n={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const n=new Set;for(const r of t)if(r.is("attributeElement"))for(const o of r.getElementsWithSameId())n.add(o);else n.add(r);return n}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,n){if(n!=e){const o=this._toModelOffset(e.parent,e.index,n),s=this._toModelOffset(e,t,e);return o+s}if(e.is("$text"))return t;let r=0;for(let o=0;o<t;o++)r+=this.getModelLength(e.getChild(o));return r}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(const n of e.getChildren())t+=this.getModelLength(n);return t}}findPositionIn(e,t){let n,r=0,o=0,s=0;if(e.is("$text"))return new Ce(e,t);for(;o<t;)n=e.getChild(s),r=this.getModelLength(n),o+=r,s++;return o==t?this._moveViewPositionToTextNode(new Ce(e,s)):this.findPositionIn(n,t-(o-r))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,n=e.nodeAfter;return t instanceof It?new Ce(t,t.data.length):n instanceof It?new Ce(n,0):e}}je(qh,xt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hu{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=fu(t),e instanceof xr&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=fu(t),e instanceof xr&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=fu(t),e instanceof xr&&(e=this._getSymbolForTextProxy(e));const n=this._consumable.get(e);if(n===void 0)return null;const r=n.get(t);return r===void 0?null:r}revert(e,t){t=fu(t),e instanceof xr&&(e=this._getSymbolForTextProxy(e));const n=this.test(e,t);return n===!1?(this._consumable.get(e).set(t,!0),!0):n===!0?!1:null}_getSymbolForTextProxy(e){let t=null;const n=this._textProxyRegistry.get(e.startOffset);if(n){const r=n.get(e.endOffset);r&&(t=r.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent)),t}_addSymbolForTextProxy(e,t,n){const r=Symbol("textProxySymbol");let o,s;return o=this._textProxyRegistry.get(e),o||(o=new Map,this._textProxyRegistry.set(e,o)),s=o.get(t),s||(s=new Map,o.set(t,s)),s.set(n,r),r}}function fu(i){const e=i.split(":");return e[0]=="addMarker"||e[0]=="removeMarker"?i:e.length>1?e[0]+":"+e[1]:e[0]}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kh{constructor(e){this.conversionApi=Object.assign({dispatcher:this},e),this._reconversionEventsMapping=new Map}convertChanges(e,t,n){for(const o of e.getMarkersToRemove())this.convertMarkerRemove(o.name,o.range,n);const r=this._mapChangesWithAutomaticReconversion(e);for(const o of r)o.type==="insert"?this.convertInsert(oe._createFromPositionAndShift(o.position,o.length),n):o.type==="remove"?this.convertRemove(o.position,o.length,o.name,n):o.type==="reconvert"?this.reconvertElement(o.element,n):this.convertAttribute(o.range,o.attributeKey,o.attributeOldValue,o.attributeNewValue,n);for(const o of this.conversionApi.mapper.flushUnboundMarkerNames()){const s=t.get(o).getRange();this.convertMarkerRemove(o,s,n),this.convertMarkerAdd(o,s,n)}for(const o of e.getMarkersToAdd())this.convertMarkerAdd(o.name,o.range,n)}convertInsert(e,t){this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(e);for(const n of Array.from(e).map(lw))this._convertInsertWithAttributes(n);this._clearConversionApi()}convertRemove(e,t,n,r){this.conversionApi.writer=r,this.fire("remove:"+n,{position:e,length:t},this.conversionApi),this._clearConversionApi()}convertAttribute(e,t,n,r,o){this.conversionApi.writer=o,this.conversionApi.consumable=this._createConsumableForRange(e,`attribute:${t}`);for(const s of e){const c=s.item,u=oe._createFromPositionAndShift(s.previousPosition,s.length),h={item:c,range:u,attributeKey:t,attributeOldValue:n,attributeNewValue:r};this._testAndFire(`attribute:${t}`,h)}this._clearConversionApi()}reconvertElement(e,t){const n=oe._createOn(e);this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(n);const r=this.conversionApi.mapper,o=r.toViewElement(e);t.remove(o),this._convertInsertWithAttributes({item:e,range:n});const s=r.toViewElement(e);for(const c of oe._createIn(e)){const{item:u}=c,h=JP(u,r);h?h.root!==s.root&&t.move(t.createRangeOn(h),r.toViewPosition(fe._createBefore(u))):this._convertInsertWithAttributes(lw(c))}r.unbindViewElement(o),this._clearConversionApi()}convertSelection(e,t,n){const r=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this.conversionApi.writer=n,this.conversionApi.consumable=this._createSelectionConsumable(e,r),this.fire("selection",{selection:e},this.conversionApi),!e.isCollapsed){this._clearConversionApi();return}for(const o of r){const s=o.getRange();if(!GP(e.getFirstPosition(),o,this.conversionApi.mapper))continue;const c={item:e,markerName:o.name,markerRange:s};this.conversionApi.consumable.test(e,"addMarker:"+o.name)&&this.fire("addMarker:"+o.name,c,this.conversionApi)}for(const o of e.getAttributeKeys()){const s={item:e,range:e.getFirstRange(),attributeKey:o,attributeOldValue:null,attributeNewValue:e.getAttribute(o)};this.conversionApi.consumable.test(e,"attribute:"+s.attributeKey)&&this.fire("attribute:"+s.attributeKey+":$text",s,this.conversionApi)}this._clearConversionApi()}convertMarkerAdd(e,t,n){if(t.root.rootName=="$graveyard")return;this.conversionApi.writer=n;const r="addMarker:"+e,o=new hu;if(o.add(t,r),this.conversionApi.consumable=o,this.fire(r,{markerName:e,markerRange:t},this.conversionApi),!o.test(t,r)){this._clearConversionApi();return}this.conversionApi.consumable=this._createConsumableForRange(t,r);for(const s of t.getItems()){if(!this.conversionApi.consumable.test(s,r))continue;const c={item:s,range:oe._createOn(s),markerName:e,markerRange:t};this.fire(r,c,this.conversionApi)}this._clearConversionApi()}convertMarkerRemove(e,t,n){t.root.rootName!="$graveyard"&&(this.conversionApi.writer=n,this.fire("removeMarker:"+e,{markerName:e,markerRange:t},this.conversionApi),this._clearConversionApi())}_mapReconversionTriggerEvent(e,t){this._reconversionEventsMapping.set(t,e)}_createInsertConsumable(e){const t=new hu;for(const n of e){const r=n.item;t.add(r,"insert");for(const o of r.getAttributeKeys())t.add(r,"attribute:"+o)}return t}_createConsumableForRange(e,t){const n=new hu;for(const r of e.getItems())n.add(r,t);return n}_createSelectionConsumable(e,t){const n=new hu;n.add(e,"selection");for(const r of t)n.add(e,"addMarker:"+r.name);for(const r of e.getAttributeKeys())n.add(e,"attribute:"+r);return n}_testAndFire(e,t){!this.conversionApi.consumable.test(t.item,e)||this.fire(YP(e,t),t,this.conversionApi)}_clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable}_convertInsertWithAttributes(e){this._testAndFire("insert",e);for(const t of e.item.getAttributeKeys())e.attributeKey=t,e.attributeOldValue=null,e.attributeNewValue=e.item.getAttribute(t),this._testAndFire(`attribute:${t}`,e)}_mapChangesWithAutomaticReconversion(e){const t=new Set,n=[];for(const r of e.getChanges()){const o=r.position||r.range.start,s=o.parent;if(ua(o,s)){n.push(r);continue}const u=r.type==="attribute"?jh(o,s,null):s;if(u.is("$text")){n.push(r);continue}let h;if(r.type==="attribute"?h=`attribute:${r.attributeKey}:${u.name}`:h=`${r.type}:${r.name}`,this._isReconvertTriggerEvent(h,u.name)){if(t.has(u))continue;t.add(u),n.push({type:"reconvert",element:u})}else n.push(r)}return n}_isReconvertTriggerEvent(e,t){return this._reconversionEventsMapping.get(e)===t}}je(Kh,xt);function GP(i,e,t){const n=e.getRange(),r=Array.from(i.getAncestors());return r.shift(),r.reverse(),!r.some(s=>{if(n.containsItem(s))return!!t.toViewElement(s).getCustomProperty("addHighlight")})}function YP(i,e){const t=e.item.name||"$text";return`${i}:${t}`}function lw(i){const e=i.item,t=oe._createFromPositionAndShift(i.previousPosition,i.length);return{item:e,range:t}}function JP(i,e){if(i.is("textProxy")){const n=e.toViewPosition(fe._createBefore(i)).parent;return n.is("$text")?n:null}return e.toViewElement(i)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class io{constructor(e,t,n){this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,e&&this.setTo(e,t,n)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let n=!1;for(const r of e._ranges)if(t.isEqual(r)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new oe(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new oe(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new oe(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(e,t,n){if(e===null)this._setRanges([]);else if(e instanceof io)this._setRanges(e.getRanges(),e.isBackward);else if(e&&typeof e.getRanges=="function")this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof oe)this._setRanges([e],!!t&&!!t.backward);else if(e instanceof fe)this._setRanges([new oe(e)]);else if(e instanceof Es){const r=!!n&&!!n.backward;let o;if(t=="in")o=oe._createIn(e);else if(t=="on")o=oe._createOn(e);else if(t!==void 0)o=new oe(fe._createAt(e,t));else throw new H("model-selection-setto-required-second-parameter",[this,e]);this._setRanges([o],r)}else if(Ui(e))this._setRanges(e,t&&!!t.backward);else throw new H("model-selection-setto-not-selectable",[this,e])}_setRanges(e,t=!1){e=Array.from(e);const n=e.some(r=>{if(!(r instanceof oe))throw new H("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(o=>!o.isEqual(r))});if(!(e.length===this._ranges.length&&!n)){this._removeAllRanges();for(const r of e)this._pushRange(r);this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0})}}setFocus(e,t){if(this.anchor===null)throw new H("model-selection-setfocus-no-ranges",[this,e]);const n=fe._createAt(e,t);if(n.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),n.compareWith(r)=="before"?(this._pushRange(new oe(n,r)),this._lastRangeBackward=!0):(this._pushRange(new oe(r,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}is(e){return e==="selection"||e==="model:selection"}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const n=uw(t.start,e);n&&Gh(n,t)&&(yield n);for(const o of t.getWalker()){const s=o.item;o.type=="elementEnd"&&QP(s,e,t)&&(yield s)}const r=uw(t.end,e);r&&!t.end.isTouching(fe._createAt(r,0))&&Gh(r,t)&&(yield r)}}containsEntireContent(e=this.anchor.root){const t=fe._createAt(e,0),n=fe._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new oe(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new H("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}je(io,xt);function cw(i,e){return e.has(i)?!1:(e.add(i),i.root.document.model.schema.isBlock(i)&&i.parent)}function QP(i,e,t){return cw(i,e)&&Gh(i,t)}function uw(i,e){const n=i.parent.root.document.model.schema,r=i.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;const s=r.find(c=>o?!1:(o=n.isLimit(c),!o&&cw(c,e)));return r.forEach(c=>e.add(c)),s}function Gh(i,e){const t=XP(i);return t?!e.containsRange(oe._createOn(t),!0):!0}function XP(i){const e=i.root.document.model.schema;let t=i.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pr extends oe{constructor(e,t){super(e,t);ZP.call(this)}detach(){this.stopListening()}is(e){return e==="liveRange"||e==="model:liveRange"||e=="range"||e==="model:range"}toRange(){return new oe(this.start,this.end)}static fromRange(e){return new Pr(e.start,e.end)}}function ZP(){this.listenTo(this.root.document.model,"applyOperation",(i,e)=>{const t=e[0];!t.isDocumentOperation||eA.call(this,t)},{priority:"low"})}function eA(i){const e=this.getTransformedByOperation(i),t=oe._createFromRanges(e),n=!t.isEqual(this),r=tA(this,i);let o=null;if(n){t.root.rootName=="$graveyard"&&(i.type=="remove"?o=i.sourcePosition:o=i.deletionPosition);const s=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",s,{deletionPosition:o})}else r&&this.fire("change:content",this.toRange(),{deletionPosition:o})}function tA(i,e){switch(e.type){case"insert":return i.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return i.containsPosition(e.sourcePosition)||i.start.isEqual(e.sourcePosition)||i.containsPosition(e.targetPosition);case"split":return i.containsPosition(e.splitPosition)||i.containsPosition(e.insertionPosition)}return!1}je(Pr,xt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Sl="selection:";class or{constructor(e){this._selection=new nA(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection._updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}is(e){return e==="selection"||e=="model:selection"||e=="documentSelection"||e=="model:documentSelection"}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(e,t,n){this._selection.setTo(e,t,n)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection._getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Sl+e}static _isStoreAttributeKey(e){return e.startsWith(Sl)}}je(or,xt);class nA extends io{constructor(e){super();this.markers=new Ci({idProperty:"name"}),this._model=e.model,this._document=e,this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this.listenTo(this._model,"applyOperation",(t,n)=>{const r=n[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{for(const t of this.getRanges())if(!this._document._validateSelectionRange(t))throw new H("document-selection-wrong-position",this,{range:t})}),this.listenTo(this._model.markers,"update",(t,n,r,o)=>{this._updateMarker(n,o)}),this.listenTo(this._document,"change",(t,n)=>{iA(this._model,n)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(e,t,n){super.setTo(e,t,n),this._updateAttributes(!0),this._updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this._updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=yr();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new H("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this._updateMarkers()}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=Pr.fromRange(e);return t.on("change:range",(n,r,o)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const s=this._ranges.indexOf(t);this._ranges.splice(s,1),t.detach()}}),t}_updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const s=r.getRange();for(const c of this.getRanges())s.containsRange(c,!c.isCollapsed)&&e.push(r)}const n=Array.from(this.markers);for(const r of e)this.markers.has(r)||(this.markers.add(r),t=!0);for(const r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),t=!0);t&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(e,t){const n=e.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let r=!1;const o=Array.from(this.markers),s=this.markers.has(e);if(!t)s&&(this.markers.remove(e),r=!0);else{let c=!1;for(const u of this.getRanges())if(t.containsRange(u,!u.isCollapsed)){c=!0;break}c&&!s?(this.markers.add(e),r=!0):!c&&s&&(this.markers.remove(e),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const t=Zr(this._getSurroundingAttributes()),n=Zr(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,s]of this._attributePriority)s=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(t);const r=[];for(const[o,s]of this.getAttributes())(!n.has(o)||n.get(o)!==s)&&r.push(o);for(const[o]of n)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,t,n=!0){const r=n?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,r),!0)}_removeAttribute(e,t=!0){const n=t?"normal":"low";return n=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,n),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const t=new Set;for(const[n,r]of this.getAttributes())e.get(n)!==r&&this._removeAttribute(n,!1);for(const[n,r]of e)this._setAttribute(n,r,!1)&&t.add(n);return t}*_getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(Sl)&&(yield[t.substr(Sl.length),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;let n=null;if(this.isCollapsed){const r=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(n=mu(r)),n||(n=mu(o)),!this.isGravityOverridden&&!n){let s=r;for(;s&&!t.isInline(s)&&!n;)s=s.previousSibling,n=mu(s)}if(!n){let s=o;for(;s&&!t.isInline(s)&&!n;)s=s.nextSibling,n=mu(s)}n||(n=this._getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&t.isObject(o.item))break;if(o.type=="text"){n=o.item.getAttributes();break}}}return n}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function mu(i){return i instanceof xr||i instanceof Rt?i.getAttributes():null}function iA(i,e){const t=i.document.differ;for(const n of t.getChanges()){if(n.type!="insert")continue;const r=n.position.parent;n.length===r.maxOffset&&i.enqueueChange(e,s=>{const c=Array.from(r.getAttributeKeys()).filter(u=>u.startsWith(Sl));for(const u of c)s.removeAttribute(u,r)})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dw{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rA extends dw{elementToElement(e){return this.add(_A(e))}attributeToElement(e){return this.add(kA(e))}attributeToAttribute(e){return this.add(EA(e))}markerToElement(e){return this.add(CA(e))}markerToHighlight(e){return this.add(SA(e))}markerToData(e){return this.add(TA(e))}}function hw(){return(i,e,t)=>{if(!t.consumable.consume(e.item,"insert"))return;const n=t.writer,r=t.mapper.toViewPosition(e.range.start),o=n.createText(e.item.data);n.insert(r,o)}}function oA(){return(i,e,t)=>{const n=t.mapper.toViewPosition(e.position),r=e.position.getShiftedBy(e.length),o=t.mapper.toViewPosition(r,{isPhantom:!0}),s=t.writer.createRange(n,o),c=t.writer.remove(s.getTrimmed());for(const u of t.writer.createRangeIn(c).getItems())t.mapper.unbindViewElement(u)}}function fw(i,e){const t=i.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function sA(){return(i,e,t)=>{const n=e.selection;if(n.isCollapsed||!t.consumable.consume(n,"selection"))return;const r=[];for(const o of n.getRanges()){const s=t.mapper.toViewRange(o);r.push(s)}t.writer.setSelection(r,{backward:n.isBackward})}}function aA(){return(i,e,t)=>{const n=e.selection;if(!n.isCollapsed||!t.consumable.consume(n,"selection"))return;const r=t.writer,o=n.getFirstPosition(),s=t.mapper.toViewPosition(o),c=r.breakAttributes(s);r.setSelection(c)}}function lA(){return(i,e,t)=>{const n=t.writer,r=n.document.selection;for(const o of r.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&t.writer.mergeAttributes(o.start);n.setSelection(null)}}function cA(i){return(e,t,n)=>{const r=i(t.attributeOldValue,n),o=i(t.attributeNewValue,n);if(!r&&!o||!n.consumable.consume(t.item,e.name))return;const s=n.writer,c=s.document.selection;if(t.item instanceof io||t.item instanceof or)s.wrap(c.getFirstRange(),o);else{let u=n.mapper.toViewRange(t.range);t.attributeOldValue!==null&&r&&(u=s.unwrap(u,r)),t.attributeNewValue!==null&&o&&s.wrap(u,o)}}}function uA(i){return(e,t,n)=>{const r=i(t.item,n);if(!r||!n.consumable.consume(t.item,"insert"))return;const o=n.mapper.toViewPosition(t.range.start);n.mapper.bindElements(t.item,r),n.writer.insert(o,r)}}function dA(i){return(e,t,n)=>{t.isOpening=!0;const r=i(t,n);t.isOpening=!1;const o=i(t,n);if(!r||!o)return;const s=t.markerRange;if(s.isCollapsed&&!n.consumable.consume(s,e.name))return;for(const h of s)if(!n.consumable.consume(h.item,e.name))return;const c=n.mapper,u=n.writer;u.insert(c.toViewPosition(s.start),r),n.mapper.bindElementToMarker(r,t.markerName),s.isCollapsed||(u.insert(c.toViewPosition(s.end),o),n.mapper.bindElementToMarker(o,t.markerName)),e.stop()}}function hA(){return(i,e,t)=>{const n=t.mapper.markerNameToElements(e.markerName);if(!!n){for(const r of n)t.mapper.unbindElementFromMarkerName(r,e.markerName),t.writer.clear(t.writer.createRangeOn(r),r);t.writer.clearClonedElementsGroup(e.markerName),i.stop()}}}function fA(i){return(e,t,n)=>{const r=i(t.markerName,n);if(!r)return;const o=t.markerRange;!n.consumable.consume(o,e.name)||(mw(o,!1,n,t,r),mw(o,!0,n,t,r),e.stop())}}function mw(i,e,t,n,r){const o=e?i.start:i.end,s=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,c=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(s||c){let h,f;e&&s||!e&&!c?(h=s,f=!0):(h=c,f=!1);const p=t.mapper.toViewElement(h);if(p){mA(p,e,f,t,n,r);return}}const u=t.mapper.toViewPosition(o);pA(u,e,t,n,r)}function mA(i,e,t,n,r,o){const s=`data-${o.group}-${e?"start":"end"}-${t?"before":"after"}`,c=i.hasAttribute(s)?i.getAttribute(s).split(","):[];c.unshift(o.name),n.writer.setAttribute(s,c.join(","),i),n.mapper.bindElementToMarker(i,r.markerName)}function pA(i,e,t,n,r){const o=`${r.group}-${e?"start":"end"}`,s=r.name?{name:r.name}:null,c=t.writer.createUIElement(o,s);t.writer.insert(i,c),t.mapper.bindElementToMarker(c,n.markerName)}function gA(i){return(e,t,n)=>{const r=i(t.markerName,n);if(!r)return;const o=n.mapper.markerNameToElements(t.markerName);if(!o)return;for(const c of o)n.mapper.unbindElementFromMarkerName(c,t.markerName),c.is("containerElement")?(s(`data-${r.group}-start-before`,c),s(`data-${r.group}-start-after`,c),s(`data-${r.group}-end-before`,c),s(`data-${r.group}-end-after`,c)):n.writer.clear(n.writer.createRangeOn(c),c);n.writer.clearClonedElementsGroup(t.markerName),e.stop();function s(c,u){if(u.hasAttribute(c)){const h=new Set(u.getAttribute(c).split(","));h.delete(r.name),h.size==0?n.writer.removeAttribute(c,u):n.writer.setAttribute(c,Array.from(h).join(","),u)}}}}function bA(i){return(e,t,n)=>{const r=i(t.attributeOldValue,n),o=i(t.attributeNewValue,n);if(!r&&!o||!n.consumable.consume(t.item,e.name))return;const s=n.mapper.toViewElement(t.item),c=n.writer;if(!s)throw new H("conversion-attribute-to-attribute-on-text",[t,n]);if(t.attributeOldValue!==null&&r)if(r.key=="class"){const u=yn(r.value);for(const h of u)c.removeClass(h,s)}else if(r.key=="style"){const u=Object.keys(r.value);for(const h of u)c.removeStyle(h,s)}else c.removeAttribute(r.key,s);if(t.attributeNewValue!==null&&o)if(o.key=="class"){const u=yn(o.value);for(const h of u)c.addClass(h,s)}else if(o.key=="style"){const u=Object.keys(o.value);for(const h of u)c.setStyle(h,o.value[h],s)}else c.setAttribute(o.key,o.value,s)}}function wA(i){return(e,t,n)=>{if(!t.item||!(t.item instanceof io||t.item instanceof or)&&!t.item.is("$textProxy"))return;const r=Yh(i,t,n);if(!r||!n.consumable.consume(t.item,e.name))return;const o=n.writer,s=fw(o,r),c=o.document.selection;if(t.item instanceof io||t.item instanceof or)o.wrap(c.getFirstRange(),s,c);else{const u=n.mapper.toViewRange(t.range),h=o.wrap(u,s);for(const f of h.getItems())if(f.is("attributeElement")&&f.isSimilar(s)){n.mapper.bindElementToMarker(f,t.markerName);break}}}}function vA(i){return(e,t,n)=>{if(!t.item||!(t.item instanceof Ct))return;const r=Yh(i,t,n);if(!r||!n.consumable.test(t.item,e.name))return;const o=n.mapper.toViewElement(t.item);if(o&&o.getCustomProperty("addHighlight")){n.consumable.consume(t.item,e.name);for(const s of oe._createIn(t.item))n.consumable.consume(s.item,e.name);o.getCustomProperty("addHighlight")(o,r,n.writer),n.mapper.bindElementToMarker(o,t.markerName)}}}function yA(i){return(e,t,n)=>{if(t.markerRange.isCollapsed)return;const r=Yh(i,t,n);if(!r)return;const o=fw(n.writer,r),s=n.mapper.markerNameToElements(t.markerName);if(!!s){for(const c of s)n.mapper.unbindElementFromMarkerName(c,t.markerName),c.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(c),o):c.getCustomProperty("removeHighlight")(c,r.id,n.writer);n.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function _A(i){return i=Er(i),i.view=pu(i.view,"container"),e=>{if(e.on("insert:"+i.model,uA(i.view),{priority:i.converterPriority||"normal"}),i.triggerBy){if(i.triggerBy.attributes)for(const t of i.triggerBy.attributes)e._mapReconversionTriggerEvent(i.model,`attribute:${t}:${i.model}`);if(i.triggerBy.children)for(const t of i.triggerBy.children)e._mapReconversionTriggerEvent(i.model,`insert:${t}`),e._mapReconversionTriggerEvent(i.model,`remove:${t}`)}}}function kA(i){i=Er(i);const e=i.model.key?i.model.key:i.model;let t="attribute:"+e;if(i.model.name&&(t+=":"+i.model.name),i.model.values)for(const r of i.model.values)i.view[r]=pu(i.view[r],"attribute");else i.view=pu(i.view,"attribute");const n=pw(i);return r=>{r.on(t,cA(n),{priority:i.converterPriority||"normal"})}}function EA(i){i=Er(i);const e=i.model.key?i.model.key:i.model;let t="attribute:"+e;if(i.model.name&&(t+=":"+i.model.name),i.model.values)for(const r of i.model.values)i.view[r]=gw(i.view[r]);else i.view=gw(i.view);const n=pw(i);return r=>{r.on(t,bA(n),{priority:i.converterPriority||"normal"})}}function CA(i){return i=Er(i),i.view=pu(i.view,"ui"),e=>{e.on("addMarker:"+i.model,dA(i.view),{priority:i.converterPriority||"normal"}),e.on("removeMarker:"+i.model,hA(i.view),{priority:i.converterPriority||"normal"})}}function TA(i){i=Er(i);const e=i.model;return i.view||(i.view=t=>({group:e,name:t.substr(i.model.length+1)})),t=>{t.on("addMarker:"+e,fA(i.view),{priority:i.converterPriority||"normal"}),t.on("removeMarker:"+e,gA(i.view),{priority:i.converterPriority||"normal"})}}function SA(i){return e=>{e.on("addMarker:"+i.model,wA(i.view),{priority:i.converterPriority||"normal"}),e.on("addMarker:"+i.model,vA(i.view),{priority:i.converterPriority||"normal"}),e.on("removeMarker:"+i.model,yA(i.view),{priority:i.converterPriority||"normal"})}}function pu(i,e){return typeof i=="function"?i:(t,n)=>xA(i,n,e)}function xA(i,e,t){typeof i=="string"&&(i={name:i});let n;const r=e.writer,o=Object.assign({},i.attributes);if(t=="container")n=r.createContainerElement(i.name,o);else if(t=="attribute"){const s={priority:i.priority||sa.DEFAULT_PRIORITY};n=r.createAttributeElement(i.name,o,s)}else n=r.createUIElement(i.name,o);if(i.styles){const s=Object.keys(i.styles);for(const c of s)r.setStyle(c,i.styles[c],n)}if(i.classes){const s=i.classes;if(typeof s=="string")r.addClass(s,n);else for(const c of s)r.addClass(c,n)}return n}function pw(i){return i.model.values?(e,t)=>{const n=i.view[e];return n?n(e,t):null}:i.view}function gw(i){return typeof i=="string"?e=>({key:i,value:e}):typeof i=="object"?i.value?()=>i:e=>({key:i.key,value:e}):i}function Yh(i,e,t){const n=typeof i=="function"?i(e,t):i;return n?(n.priority||(n.priority=10),n.id||(n.id=e.markerName),n):null}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bw(i){const{schema:e,document:t}=i.model;for(const n of t.getRootNames()){const r=t.getRoot(n);if(r.isEmpty&&!e.checkChild(r,"$text")&&e.checkChild(r,"paragraph"))return i.insertElement("paragraph",r),!0}return!1}function ww(i,e,t){const n=t.createContext(i);return!(!t.checkChild(n,"paragraph")||!t.checkChild(n.push("paragraph"),e))}function vw(i,e){const t=e.createElement("paragraph");return e.insert(t,i),e.createPositionAt(t,0)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PA extends dw{elementToElement(e){return this.add(_w(e))}elementToAttribute(e){return this.add(RA(e))}attributeToAttribute(e){return this.add(MA(e))}elementToMarker(e){return this.add(OA(e))}dataToMarker(e){return this.add(NA(e))}}function yw(){return(i,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){const{modelRange:n,modelCursor:r}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=n,e.modelCursor=r}}}function AA(){return(i,e,{schema:t,consumable:n,writer:r})=>{let o=e.modelCursor;if(!n.test(e.viewItem))return;if(!t.checkChild(o,"$text")){if(!ww(o,"$text",t))return;o=vw(o,r)}n.consume(e.viewItem);const s=r.createText(e.viewItem.data);r.insert(s,o),e.modelRange=r.createRange(o,o.getShiftedBy(s.offsetSize)),e.modelCursor=e.modelRange.end}}function IA(i,e){return(t,n)=>{const r=n.newSelection,o=[];for(const c of r.getRanges())o.push(e.toModelRange(c));const s=i.createSelection(o,{backward:r.isBackward});s.isEqual(i.document.selection)||i.change(c=>{c.setSelection(s)})}}function _w(i){i=Er(i);const e=Qh(i),t=Jh(i.view),n=t?"element:"+t:"element";return r=>{r.on(n,e,{priority:i.converterPriority||"normal"})}}function RA(i){i=Er(i),kw(i);const e=Ew(i,!1),t=Jh(i.view),n=t?"element:"+t:"element";return r=>{r.on(n,e,{priority:i.converterPriority||"low"})}}function MA(i){i=Er(i);let e=null;(typeof i.view=="string"||i.view.key)&&(e=VA(i)),kw(i,e);const t=Ew(i,!0);return n=>{n.on("element",t,{priority:i.converterPriority||"low"})}}function OA(i){return i=Er(i),zA(i),_w(i)}function NA(i){i=Er(i),i.model||(i.model=n=>n?i.view+":"+n:i.view);const e=Qh(Cw(i,"start")),t=Qh(Cw(i,"end"));return n=>{n.on("element:"+i.view+"-start",e,{priority:i.converterPriority||"normal"}),n.on("element:"+i.view+"-end",t,{priority:i.converterPriority||"normal"});const r=fl.get("low"),o=fl.get("highest"),s=fl.get(i.converterPriority)/o;n.on("element",DA(i),{priority:r+s})}}function DA(i){return(e,t,n)=>{const r=`data-${i.view}`;if(!n.consumable.test(t.viewItem,{attributes:r+"-end-after"})&&!n.consumable.test(t.viewItem,{attributes:r+"-start-after"})&&!n.consumable.test(t.viewItem,{attributes:r+"-end-before"})&&!n.consumable.test(t.viewItem,{attributes:r+"-start-before"}))return;t.modelRange||Object.assign(t,n.convertChildren(t.viewItem,t.modelCursor)),n.consumable.consume(t.viewItem,{attributes:r+"-end-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(r+"-end-after").split(",")),n.consumable.consume(t.viewItem,{attributes:r+"-start-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(r+"-start-after").split(",")),n.consumable.consume(t.viewItem,{attributes:r+"-end-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(r+"-end-before").split(",")),n.consumable.consume(t.viewItem,{attributes:r+"-start-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(r+"-start-before").split(","));function o(s,c){for(const u of c){const h=i.model(u,n),f=n.writer.createElement("$marker",{"data-name":h});n.writer.insert(f,s),t.modelCursor.isEqual(s)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(s,1),t.modelRange=t.modelRange._getTransformedByInsertion(s,1)[0]}}}}function Jh(i){return typeof i=="string"?i:typeof i=="object"&&typeof i.name=="string"?i.name:null}function Qh(i){const e=new Cr(i.view);return(t,n,r)=>{const o=e.match(n.viewItem);if(!o)return;const s=o.match;if(s.name=!0,!r.consumable.test(n.viewItem,s))return;const c=BA(i.model,n.viewItem,r);!c||!r.safeInsert(c,n.modelCursor)||(r.consumable.consume(n.viewItem,s),r.convertChildren(n.viewItem,c),r.updateConversionResult(c,n))}}function BA(i,e,t){return i instanceof Function?i(e,t):t.writer.createElement(i)}function VA(i){typeof i.view=="string"&&(i.view={key:i.view});const e=i.view.key;let t;if(e=="class"||e=="style")t={[e=="class"?"classes":"styles"]:i.view.value};else{const n=typeof i.view.value=="undefined"?/[\s\S]*/:i.view.value;t={attributes:{[e]:n}}}return i.view.name&&(t.name=i.view.name),i.view=t,e}function kw(i,e=null){const t=e===null?!0:o=>o.getAttribute(e),n=typeof i.model!="object"?i.model:i.model.key,r=typeof i.model!="object"||typeof i.model.value=="undefined"?t:i.model.value;i.model={key:n,value:r}}function Ew(i,e){const t=new Cr(i.view);return(n,r,o)=>{const s=t.match(r.viewItem);if(!s||(LA(i.view,r.viewItem)?s.match.name=!0:delete s.match.name,!o.consumable.test(r.viewItem,s.match)))return;const c=i.model.key,u=typeof i.model.value=="function"?i.model.value(r.viewItem,o):i.model.value;if(u===null)return;r.modelRange||Object.assign(r,o.convertChildren(r.viewItem,r.modelCursor)),FA(r.modelRange,{key:c,value:u},e,o)&&o.consumable.consume(r.viewItem,s.match)}}function LA(i,e){const t=typeof i=="function"?i(e):i;return typeof t=="object"&&!Jh(t)?!1:!t.classes&&!t.attributes&&!t.styles}function FA(i,e,t,n){let r=!1;for(const o of Array.from(i.getItems({shallow:t})))!n.schema.checkAttribute(o,e.key)||(r=!0,!o.hasAttribute(e.key)&&n.writer.setAttribute(e.key,e.value,o));return r}function zA(i){const e=i.model;i.model=(t,n)=>{const r=typeof e=="string"?e:e(t,n);return n.writer.createElement("$marker",{"data-name":r})}}function Cw(i,e){const t={};return t.view=i.view+"-"+e,t.model=(n,r)=>{const o=n.getAttribute("name"),s=i.model(o,r);return r.writer.createElement("$marker",{"data-name":s})},t}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tw{constructor(e,t){this.model=e,this.view=new sw(t),this.mapper=new qh,this.downcastDispatcher=new Kh({mapper:this.mapper,schema:e.schema});const n=this.model.document,r=n.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(n,"change",()=>{this.view.change(s=>{this.downcastDispatcher.convertChanges(n.differ,o,s),this.downcastDispatcher.convertSelection(r,o,s)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",IA(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",hw(),{priority:"lowest"}),this.downcastDispatcher.on("remove",oA(),{priority:"low"}),this.downcastDispatcher.on("selection",lA(),{priority:"high"}),this.downcastDispatcher.on("selection",sA(),{priority:"low"}),this.downcastDispatcher.on("selection",aA(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(s=>{if(s.rootName=="$graveyard")return null;const c=new Wx(this.view.document,s.name);return c.rootName=s.rootName,this.mapper.bindElements(s,c),c})}destroy(){this.view.destroy(),this.stopListening()}}je(Tw,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HA{constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const n=this.get(e);if(!n)throw new H("commandcollection-command-not-found",this,{commandName:e});return n.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xl{constructor(){this._consumables=new Map}add(e,t){let n;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?n=this._consumables.get(e):(n=new UA(e),this._consumables.set(e,n)),n.add(t)}test(e,t){const n=this._consumables.get(e);return n===void 0?null:e.is("$text")||e.is("documentFragment")?n:n.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){const n=this._consumables.get(e);n!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):n.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},n=e.getAttributeKeys();for(const s of n)s=="style"||s=="class"||t.attributes.push(s);const r=e.getClassNames();for(const s of r)t.classes.push(s);const o=e.getStyleNames();for(const s of o)t.styles.push(s);return t}static createFrom(e,t){if(t||(t=new xl(e)),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,xl.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const n of e.getChildren())t=xl.createFrom(n,t);return t}}class UA{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t in this._consumables)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t in this._consumables)if(t in e){const n=this._test(t,e[t]);if(n!==!0)return n}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t in this._consumables)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t in this._consumables)t in e&&this._revert(t,e[t])}_add(e,t){const n=Jn(t)?t:[t],r=this._consumables[e];for(const o of n){if(e==="attributes"&&(o==="class"||o==="style"))throw new H("viewconsumable-invalid-attribute",this);if(r.set(o,!0),e==="styles")for(const s of this.element.document.stylesProcessor.getRelatedStyles(o))r.set(s,!0)}}_test(e,t){const n=Jn(t)?t:[t],r=this._consumables[e];for(const o of n)if(e==="attributes"&&(o==="class"||o==="style")){const s=o=="class"?"classes":"styles",c=this._test(s,[...this._consumables[s].keys()]);if(c!==!0)return c}else{const s=r.get(o);if(s===void 0)return null;if(!s)return!1}return!0}_consume(e,t){const n=Jn(t)?t:[t],r=this._consumables[e];for(const o of n)if(e==="attributes"&&(o==="class"||o==="style")){const s=o=="class"?"classes":"styles";this._consume(s,[...this._consumables[s].keys()])}else if(r.set(o,!1),e=="styles")for(const s of this.element.document.stylesProcessor.getRelatedStyles(o))r.set(s,!1)}_revert(e,t){const n=Jn(t)?t:[t],r=this._consumables[e];for(const o of n)if(e==="attributes"&&(o==="class"||o==="style")){const s=o=="class"?"classes":"styles";this._revert(s,[...this._consumables[s].keys()])}else r.get(o)===!1&&r.set(o,!0)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sw{constructor(){this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new Ts(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new Ts(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new H("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new H("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:e.is&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){const t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){const t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){const t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){const t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){const t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(t,e):!1}checkAttribute(e,t){const n=this.getDefinition(e.last);return n?n.allowAttributes.includes(t):!1}checkMerge(e,t=null){if(e instanceof fe){const n=e.nodeBefore,r=e.nodeAfter;if(!(n instanceof Ct))throw new H("schema-check-merge-no-element-before",this);if(!(r instanceof Ct))throw new H("schema-check-merge-no-element-after",this);return this.checkMerge(n,r)}for(const n of t.getChildren())if(!this.checkChild(e,n))return!1;return!0}addChildCheck(e){this.on("checkChild",(t,[n,r])=>{if(!r)return;const o=e(n,r);typeof o=="boolean"&&(t.stop(),t.return=o)},{priority:"high"})}addAttributeCheck(e){this.on("checkAttribute",(t,[n,r])=>{const o=e(n,r);typeof o=="boolean"&&(t.stop(),t.return=o)},{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;for(e instanceof fe?t=e.parent:t=(e instanceof oe?[e]:Array.from(e.getRanges())).reduce((r,o)=>{const s=o.getCommonAncestor();return r?r.getCommonAncestor(s,{includeSelf:!0}):s},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const r=[...e.getFirstPosition().getAncestors(),new Rt("",e.getAttributes())];return this.checkAttribute(r,t)}else{const n=e.getRanges();for(const r of n)for(const o of r)if(this.checkAttribute(o.item,t))return!0}return!1}*getValidRanges(e,t){e=r2(e);for(const n of e)yield*this._getValidRangesForRange(n,t)}getNearestSelectionRange(e,t="both"){if(this.checkChild(e,"$text"))return new oe(e);let n,r;const o=e.getAncestors().reverse().find(s=>this.isLimit(s))||e.root;(t=="both"||t=="backward")&&(n=new no({boundaries:oe._createIn(o),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(r=new no({boundaries:oe._createIn(o),startPosition:e}));for(const s of i2(n,r)){const c=s.walker==n?"elementEnd":"elementStart",u=s.value;if(u.type==c&&this.isObject(u.item))return oe._createOn(u.item);if(this.checkChild(u.nextPosition,"$text"))return new oe(u.nextPosition)}return null}findAllowedParent(e,t){let n=e.parent;for(;n;){if(this.checkChild(n,t))return n;if(this.isLimit(n))return null;n=n.parent}return null}removeDisallowedAttributes(e,t){for(const n of e)if(n.is("$text"))xw(this,n,t);else{const o=oe._createIn(n).getPositions();for(const s of o){const c=s.nodeBefore||s.parent;xw(this,c,t)}}}createContext(e){return new Ts(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,n=Object.keys(t);for(const r of n)e[r]=WA(t[r],r);for(const r of n)$A(e,r);for(const r of n)jA(e,r);for(const r of n)qA(e,r);for(const r of n)KA(e,r),GA(e,r);for(const r of n)YA(e,r),JA(e,r),QA(e,r);this._compiledDefinitions=e}_checkContextMatch(e,t,n=t.length-1){const r=t.getItem(n);if(e.allowIn.includes(r.name)){if(n==0)return!0;{const o=this.getDefinition(r);return this._checkContextMatch(o,t,n-1)}}else return!1}*_getValidRangesForRange(e,t){let n=e.start,r=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(oe._createIn(o),t)),this.checkAttribute(o,t)||(n.isEqual(r)||(yield new oe(n,r)),n=fe._createAfter(o)),r=fe._createAfter(o);n.isEqual(r)||(yield new oe(n,r))}}je(Sw,Pt);class Ts{constructor(e){if(e instanceof Ts)return e;typeof e=="string"?e=[e]:Array.isArray(e)||(e=e.getAncestors({includeSelf:!0})),this._items=e.map(n2)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new Ts([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function WA(i,e){const t={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return XA(i,t),Ss(i,t,"allowIn"),Ss(i,t,"allowContentOf"),Ss(i,t,"allowWhere"),Ss(i,t,"allowAttributes"),Ss(i,t,"allowAttributesOf"),Ss(i,t,"allowChildren"),Ss(i,t,"inheritTypesFrom"),ZA(i,t),t}function $A(i,e){const t=i[e];for(const n of t.allowChildren){const r=i[n];!r||r.allowIn.push(e)}t.allowChildren.length=0}function jA(i,e){for(const t of i[e].allowContentOf)i[t]&&e2(i,t).forEach(r=>{r.allowIn.push(e)});delete i[e].allowContentOf}function qA(i,e){for(const t of i[e].allowWhere){const n=i[t];if(n){const r=n.allowIn;i[e].allowIn.push(...r)}}delete i[e].allowWhere}function KA(i,e){for(const t of i[e].allowAttributesOf){const n=i[t];if(n){const r=n.allowAttributes;i[e].allowAttributes.push(...r)}}delete i[e].allowAttributesOf}function GA(i,e){const t=i[e];for(const n of t.inheritTypesFrom){const r=i[n];if(r){const o=Object.keys(r).filter(s=>s.startsWith("is"));for(const s of o)s in t||(t[s]=r[s])}}delete t.inheritTypesFrom}function YA(i,e){const t=i[e],n=t.allowIn.filter(r=>i[r]);t.allowIn=Array.from(new Set(n))}function JA(i,e){const t=i[e];for(const n of t.allowIn)i[n].allowChildren.push(e)}function QA(i,e){const t=i[e];t.allowAttributes=Array.from(new Set(t.allowAttributes))}function XA(i,e){for(const t of i){const n=Object.keys(t).filter(r=>r.startsWith("is"));for(const r of n)e[r]=t[r]}}function Ss(i,e,t){for(const n of i)typeof n[t]=="string"?e[t].push(n[t]):Array.isArray(n[t])&&e[t].push(...n[t])}function ZA(i,e){for(const t of i){const n=t.inheritAllFrom;n&&(e.allowContentOf.push(n),e.allowWhere.push(n),e.allowAttributesOf.push(n),e.inheritTypesFrom.push(n))}}function e2(i,e){const t=i[e];return t2(i).filter(n=>n.allowIn.includes(t.name))}function t2(i){return Object.keys(i).map(e=>i[e])}function n2(i){return typeof i=="string"||i.is("documentFragment")?{name:typeof i=="string"?i:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:i.is("element")?i.name:"$text",*getAttributeKeys(){yield*i.getAttributeKeys()},getAttribute(e){return i.getAttribute(e)}}}function*i2(i,e){let t=!1;for(;!t;){if(t=!0,i){const n=i.next();n.done||(t=!1,yield{walker:i,value:n.value})}if(e){const n=e.next();n.done||(t=!1,yield{walker:e,value:n.value})}}}function*r2(i){for(const e of i)yield*e.getMinimalFlatRanges()}function xw(i,e,t){for(const n of e.getAttributeKeys())i.checkAttribute(e,n)||t.removeAttribute(n,e)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pw{constructor(e={}){this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this.conversionApi=Object.assign({},e),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.safeInsert=this._safeInsert.bind(this),this.conversionApi.updateConversionResult=this._updateConversionResult.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this)}convert(e,t,n=["$root"]){this.fire("viewCleanup",e),this._modelCursor=s2(n,t),this.conversionApi.writer=t,this.conversionApi.consumable=xl.createFrom(e),this.conversionApi.store={};const{modelRange:r}=this._convertItem(e,this._modelCursor),o=t.createDocumentFragment();if(r){this._removeEmptyElements();for(const s of Array.from(this._modelCursor.parent.getChildren()))t.append(s,o);o.markers=o2(o,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,t){const n=Object.assign({viewItem:e,modelCursor:t,modelRange:null});if(e.is("element")?this.fire("element:"+e.name,n,this.conversionApi):e.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof oe))throw new H("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(e,t){let n=t.is("position")?t:fe._createAt(t,0);const r=new oe(n);for(const o of Array.from(e.getChildren())){const s=this._convertItem(o,n);s.modelRange instanceof oe&&(r.end=s.modelRange.end,n=s.modelCursor)}return{modelRange:r,modelCursor:n}}_safeInsert(e,t){const n=this._splitToAllowedParent(e,t);return n?(this.conversionApi.writer.insert(e,n.position),!0):!1}_updateConversionResult(e,t){const n=this._getSplitParts(e),r=this.conversionApi.writer;t.modelRange||(t.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(n[n.length-1])));const o=this._cursorParents.get(e);o?t.modelCursor=r.createPositionAt(o,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){const{schema:n,writer:r}=this.conversionApi;let o=n.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return ww(t,e,n)?{position:vw(t,r)}:null;const s=this.conversionApi.writer.split(t,o),c=[];for(const h of s.range.getWalker())if(h.type=="elementEnd")c.push(h.item);else{const f=c.pop(),p=h.item;this._registerSplitPair(f,p)}const u=s.range.end.parent;return this._cursorParents.set(e,u),{position:s.position,cursorParent:u}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const n=this._splitParts.get(e);this._splitParts.set(t,n),n.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}je(Pw,xt);function o2(i,e){const t=new Set,n=new Map,r=oe._createIn(i).getItems();for(const o of r)o.name=="$marker"&&t.add(o);for(const o of t){const s=o.getAttribute("data-name"),c=e.createPositionBefore(o);n.has(s)?n.get(s).end=c.clone():n.set(s,new oe(c.clone())),e.remove(o)}return n}function s2(i,e){let t;for(const n of new Ts(i)){const r={};for(const s of n.getAttributeKeys())r[s]=n.getAttribute(s);const o=e.createElement(n.name,r);t&&e.append(o,t),t=fe._createAt(o,0)}return t}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class a2{getHtml(e){const n=document.implementation.createHTMLDocument("").createElement("div");return n.appendChild(e),n.innerHTML}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class l2{constructor(e){this.domParser=new DOMParser,this.domConverter=new lu(e,{renderingMode:"data"}),this.htmlWriter=new a2}toData(e){const t=this.domConverter.viewToDom(e,document);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t)}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){const t=this.domParser.parseFromString(e,"text/html"),n=t.createDocumentFragment();let r=t.firstChild;for(;!r.isSameNode(t.documentElement);){const s=r;r=r.nextSibling,s.nodeType==Node.COMMENT_NODE&&n.appendChild(s)}const o=t.body.childNodes;for(;o.length>0;)n.appendChild(o[0]);return n}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Aw{constructor(e,t){this.model=e,this.mapper=new qh,this.downcastDispatcher=new Kh({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",hw(),{priority:"lowest"}),this.upcastDispatcher=new Pw({schema:e.schema}),this.viewDocument=new Cl(t),this.stylesProcessor=t,this.htmlProcessor=new l2(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Tb(this.viewDocument),this.upcastDispatcher.on("text",AA(),{priority:"lowest"}),this.upcastDispatcher.on("element",yw(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",yw(),{priority:"lowest"}),this.decorate("init"),this.decorate("set"),this.decorate("get"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange("transparent",bw)},{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:n="empty"}=e;if(!this._checkIfRootsExists([t]))throw new H("datacontroller-get-non-existent-root",this);const r=this.model.document.getRoot(t);return n==="empty"&&!this.model.hasContent(r,{ignoreWhitespaces:!0})?"":this.stringify(r,e)}stringify(e,t={}){const n=this.toView(e,t);return this.processor.toData(n)}toView(e,t={}){const n=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();const o=oe._createIn(e),s=new ks(n);this.mapper.bindElements(e,s),this.downcastDispatcher.conversionApi.options=t,this.downcastDispatcher.convertInsert(o,r);const c=e.is("documentFragment")?Array.from(e.markers):c2(e);for(const[u,h]of c)this.downcastDispatcher.convertMarkerAdd(u,h,r);return delete this.downcastDispatcher.conversionApi.options,s}init(e){if(this.model.document.version)throw new H("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new H("datacontroller-init-non-existent-root",this);return this.model.enqueueChange("transparent",n=>{for(const r of Object.keys(t)){const o=this.model.document.getRoot(r);n.insert(this.parse(t[r],o),o,0)}}),Promise.resolve()}set(e,t={}){let n={};if(typeof e=="string"?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new H("datacontroller-set-non-existent-root",this);const r=t.batchType||"default";this.model.enqueueChange(r,o=>{o.setSelection(null),o.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const s of Object.keys(n)){const c=this.model.document.getRoot(s);o.remove(o.createRangeIn(c)),o.insert(this.parse(n[s],c),c,0)}})}parse(e,t="$root"){const n=this.processor.toView(e);return this.toModel(n,t)}toModel(e,t="$root"){return this.model.change(n=>this.upcastDispatcher.convert(e,n,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRootNames().includes(t))return!1;return!0}}je(Aw,Pt);function c2(i){const e=[],t=i.root.document;if(!t)return[];const n=oe._createIn(i);for(const r of t.model.markers){const o=r.getRange(),s=o.isCollapsed,c=o.start.isEqual(n.start)||o.end.isEqual(n.end);if(s&&c)e.push([r.name,o]);else{const u=n.getIntersection(o);u&&e.push([r.name,u])}}return e.sort(([r,o],[s,c])=>{if(o.end.compareWith(c.start)!=="after")return 1;if(o.start.compareWith(c.end)!=="before")return-1;switch(o.start.compareWith(c.start)){case"before":return 1;case"after":return-1;default:switch(o.end.compareWith(c.end)){case"before":return 1;case"after":return-1;default:return s.localeCompare(r)}}})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class u2{constructor(e,t){this._helpers=new Map,this._downcast=yn(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=yn(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const n=this._downcast.includes(t);if(!this._upcast.includes(t)&&!n)throw new H("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:n})}for(e){if(!this._helpers.has(e))throw new H("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:n}of Xh(e))this.for("upcast").elementToElement({model:t,view:n,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:n}of Xh(e))this.for("upcast").elementToAttribute({view:n,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:n}of Xh(e))this.for("upcast").attributeToAttribute({view:n,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:n}){if(this._helpers.has(e))throw new H("conversion-group-exists",this);const r=n?new rA(t):new PA(t);this._helpers.set(e,r)}}function*Xh(i){if(i.model.values)for(const e of i.model.values){const t={key:i.model.key,value:e},n=i.view[e],r=i.upcastAlso?i.upcastAlso[e]:void 0;yield*Iw(t,n,r)}else yield*Iw(i.model,i.view,i.upcastAlso)}function*Iw(i,e,t){if(yield{model:i,view:e},t)for(const n of yn(t))yield{model:i,view:n}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gu{constructor(e="default"){this.operations=[],this.type=e}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ji{constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e){return new this(e.baseVersion)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ro{constructor(e){this.markers=new Map,this._children=new ca,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}is(e){return e==="documentFragment"||e==="model:documentFragment"}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const n of e)t=t.getChild(t.offsetToIndex(n));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const n of e)n.name?t.push(Ct.fromJSON(n)):t.push(Rt.fromJSON(n));return new ro(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const n=d2(t);for(const r of n)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){const n=this._children._removeNodes(e,t);for(const r of n)r.parent=null;return n}}function d2(i){return typeof i=="string"?[new Rt(i)]:(Ui(i)||(i=[i]),Array.from(i).map(e=>typeof e=="string"?new Rt(e):e instanceof xr?new Rt(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zh(i,e){e=Mw(e);const t=e.reduce((o,s)=>o+s.offsetSize,0),n=i.parent;Il(i);const r=i.index;return n._insertChild(r,e),Al(n,r+e.length),Al(n,r),new oe(i,i.getShiftedBy(t))}function Rw(i){if(!i.isFlat)throw new H("operation-utils-remove-range-not-flat",this);const e=i.start.parent;Il(i.start),Il(i.end);const t=e._removeChildren(i.start.index,i.end.index-i.start.index);return Al(e,i.start.index),t}function Pl(i,e){if(!i.isFlat)throw new H("operation-utils-move-range-not-flat",this);const t=Rw(i);return e=e._getTransformedByDeletion(i.start,i.end.offset-i.start.offset),Zh(e,t)}function h2(i,e,t){Il(i.start),Il(i.end);for(const n of i.getItems({shallow:!0})){const r=n.is("$textProxy")?n.textNode:n;t!==null?r._setAttribute(e,t):r._removeAttribute(e),Al(r.parent,r.index)}Al(i.end.parent,i.end.index)}function Mw(i){const e=[];i instanceof Array||(i=[i]);for(let t=0;t<i.length;t++)if(typeof i[t]=="string")e.push(new Rt(i[t]));else if(i[t]instanceof xr)e.push(new Rt(i[t].data,i[t].getAttributes()));else if(i[t]instanceof ro||i[t]instanceof ca)for(const n of i[t])e.push(n);else i[t]instanceof Es&&e.push(i[t]);for(let t=1;t<e.length;t++){const n=e[t],r=e[t-1];n instanceof Rt&&r instanceof Rt&&Ow(n,r)&&(e.splice(t-1,2,new Rt(r.data+n.data,r.getAttributes())),t--)}return e}function Al(i,e){const t=i.getChild(e-1),n=i.getChild(e);if(t&&n&&t.is("$text")&&n.is("$text")&&Ow(t,n)){const r=new Rt(t.data+n.data,t.getAttributes());i._removeChildren(e-1,2),i._insertChild(e-1,r)}}function Il(i){const e=i.textNode,t=i.parent;if(e){const n=i.offset-e.startOffset,r=e.index;t._removeChildren(r,1);const o=new Rt(e.data.substr(0,n),e.getAttributes()),s=new Rt(e.data.substr(n),e.getAttributes());t._insertChild(r,[o,s])}}function Ow(i,e){const t=i.getAttributes(),n=e.getAttributes();for(const r of t){if(r[1]!==e.getAttribute(r[0]))return!1;n.next()}return n.next().done}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tn extends ji{constructor(e,t,n,r,o){super(o);this.range=e.clone(),this.key=t,this.oldValue=n===void 0?null:n,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}clone(){return new tn(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new tn(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new H("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!nb(e.getAttribute(this.key),this.oldValue))throw new H("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new H("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){nb(this.oldValue,this.newValue)||h2(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new tn(oe.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class f2 extends ji{constructor(e,t){super(null);this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new H("detach-operation-on-document-node",this)}_execute(){Rw(oe._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tt extends ji{constructor(e,t,n,r){super(r);this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,n=this.sourcePosition.offset,r=this.targetPosition.offset;if(n+this.howMany>e.maxOffset)throw new H("move-operation-nodes-do-not-exist",this);if(e===t&&n<r&&r<n+this.howMany)throw new H("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&Ln(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=n&&this.targetPosition.path[o]<n+this.howMany)throw new H("move-operation-node-into-itself",this)}}_execute(){Pl(oe._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const n=fe.fromJSON(e.sourcePosition,t),r=fe.fromJSON(e.targetPosition,t);return new this(n,e.howMany,r,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _n extends ji{constructor(e,t,n){super(n);this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new ca(Mw(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}clone(){const e=new ca([...this.nodes].map(n=>n._clone(!0))),t=new _n(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new fe(e,[0]);return new Tt(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new H("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new ca([...e].map(t=>t._clone(!0))),Zh(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const n=[];for(const o of e.nodes)o.name?n.push(Ct.fromJSON(o)):n.push(Rt.fromJSON(o));const r=new _n(fe.fromJSON(e.position,t),n,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class si extends ji{constructor(e,t,n,r,o,s){super(s);this.name=e,this.oldRange=t?t.clone():null,this.newRange=n?n.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}clone(){return new si(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new si(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){const e=this.newRange?"_set":"_remove";this._markers[e](this.name,this.newRange,!0,this.affectsData)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new si(e.name,e.oldRange?oe.fromJSON(e.oldRange,t):null,e.newRange?oe.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ai extends ji{constructor(e,t,n,r){super(r);this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=n}get type(){return"rename"}clone(){return new ai(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new ai(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof Ct){if(e.name!==this.oldName)throw new H("rename-operation-wrong-name",this)}else throw new H("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new ai(fe.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oo extends ji{constructor(e,t,n,r,o){super(o);this.root=e,this.key=t,this.oldValue=n,this.newValue=r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}clone(){return new oo(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new oo(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new H("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new H("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new H("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new H("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new oo(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cn extends ji{constructor(e,t,n,r,o){super(o);this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new fe(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new oe(this.sourcePosition,e)}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),n=new fe(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Nt(e,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new H("merge-operation-how-many-invalid",this)}else throw new H("merge-operation-target-position-invalid",this);else throw new H("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,t=oe._createIn(e);Pl(t,this.targetPosition),Pl(oe._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const n=fe.fromJSON(e.sourcePosition,t),r=fe.fromJSON(e.targetPosition,t),o=fe.fromJSON(e.graveyardPosition,t);return new this(n,e.howMany,r,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nt extends ji{constructor(e,t,n,r,o){super(o);this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=n,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new fe(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new oe(this.splitPosition,e)}clone(){return new this.constructor(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new fe(e,[0]);return new cn(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new H("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new H("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new H("split-operation-graveyard-position-invalid",this)}else throw new H("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)Pl(oe._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const n=e._clone();Zh(this.insertionPosition,n)}const t=new oe(fe._createAt(e,this.splitPosition.offset),fe._createAt(e,e.maxOffset));Pl(t,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new fe(e.root,t,"toPrevious")}static fromJSON(e,t){const n=fe.fromJSON(e.splitPosition,t),r=fe.fromJSON(e.insertionPosition,t),o=e.graveyardPosition?fe.fromJSON(e.graveyardPosition,t):null;return new this(n,e.howMany,r,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ef extends Ct{constructor(e,t,n="main"){super(t);this._document=e,this.rootName=n}get document(){return this._document}is(e,t){return t?t===this.name&&(e==="rootElement"||e==="model:rootElement"||e==="element"||e==="model:element"):e==="rootElement"||e==="model:rootElement"||e==="element"||e==="model:element"||e==="node"||e==="model:node"}toJSON(){return this.rootName}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class m2{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new Rt(e,t)}createElement(e,t){return new Ct(e,t)}createDocumentFragment(){return new ro}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,n=0){if(this._assertWriterUsedCorrectly(),e instanceof Rt&&e.data=="")return;const r=fe._createAt(t,n);if(e.parent)if(Bw(e.root,r.root)){this.move(oe._createOn(e),r);return}else{if(e.root.document)throw new H("model-writer-insert-forbidden-move",this);this.remove(e)}const o=r.root.document?r.root.document.version:null,s=new _n(r,e,o);if(e instanceof Rt&&(s.shouldReceiveAttributes=!0),this.batch.addOperation(s),this.model.applyOperation(s),e instanceof ro)for(const[c,u]of e.markers){const h=fe._createAt(u.root,0),p={range:new oe(u.start._getCombined(h,r),u.end._getCombined(h,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(c)?this.updateMarker(c,p):this.addMarker(c,p)}}insertText(e,t,n,r){t instanceof ro||t instanceof Ct||t instanceof fe?this.insert(this.createText(e),t,n):this.insert(this.createText(e,t),n,r)}insertElement(e,t,n,r){t instanceof ro||t instanceof Ct||t instanceof fe?this.insert(this.createElement(e),t,n):this.insert(this.createElement(e,t),n,r)}append(e,t){this.insert(e,t,"end")}appendText(e,t,n){t instanceof ro||t instanceof Ct?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),n,"end")}appendElement(e,t,n){t instanceof ro||t instanceof Ct?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),n,"end")}setAttribute(e,t,n){if(this._assertWriterUsedCorrectly(),n instanceof oe){const r=n.getMinimalFlatRanges();for(const o of r)Nw(this,e,t,o)}else Dw(this,e,t,n)}setAttributes(e,t){for(const[n,r]of Zr(e))this.setAttribute(n,r,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof oe){const n=t.getMinimalFlatRanges();for(const r of n)Nw(this,e,null,r)}else Dw(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=n=>{for(const r of n.getAttributeKeys())this.removeAttribute(r,n)};if(!(e instanceof oe))t(e);else for(const n of e.getItems())t(n)}move(e,t,n){if(this._assertWriterUsedCorrectly(),!(e instanceof oe))throw new H("writer-move-invalid-range",this);if(!e.isFlat)throw new H("writer-move-range-not-flat",this);const r=fe._createAt(t,n);if(r.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!Bw(e.root,r.root))throw new H("writer-move-different-document",this);const o=e.root.document?e.root.document.version:null,s=new Tt(e.start,e.end.offset-e.start.offset,r,o);this.batch.addOperation(s),this.model.applyOperation(s)}remove(e){this._assertWriterUsedCorrectly();const n=(e instanceof oe?e:oe._createOn(e)).getMinimalFlatRanges().reverse();for(const r of n)this._addOperationForAffectedMarkers("move",r),p2(r.start,r.end.offset-r.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,n=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof Ct))throw new H("writer-merge-no-element-before",this);if(!(n instanceof Ct))throw new H("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,n){return this.model.createPositionFromPath(e,t,n)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(e,t,n){return this.model.createSelection(e,t,n)}_mergeDetached(e){const t=e.nodeBefore,n=e.nodeAfter;this.move(oe._createIn(n),fe._createAt(t,"end")),this.remove(n)}_merge(e){const t=fe._createAt(e.nodeBefore,"end"),n=fe._createAt(e.nodeAfter,0),r=e.root.document.graveyard,o=new fe(r,[0]),s=e.root.document.version,c=new cn(n,e.nodeAfter.maxOffset,t,o,s);this.batch.addOperation(c),this.model.applyOperation(c)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Ct))throw new H("writer-rename-not-element-instance",this);const n=e.root.document?e.root.document.version:null,r=new ai(fe._createBefore(e),e.name,t,n);this.batch.addOperation(r),this.model.applyOperation(r)}split(e,t){this._assertWriterUsedCorrectly();let n=e.parent;if(!n.parent)throw new H("writer-split-element-no-parent",this);if(t||(t=n.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new H("writer-split-invalid-limit-element",this);let r,o;do{const s=n.root.document?n.root.document.version:null,c=n.maxOffset-e.offset,u=Nt.getInsertionPosition(e),h=new Nt(e,c,u,null,s);this.batch.addOperation(h),this.model.applyOperation(h),!r&&!o&&(r=n,o=e.parent.nextSibling),e=this.createPositionAfter(e.parent),n=e.parent}while(n!==t);return{position:e,range:new oe(fe._createAt(r,"end"),fe._createAt(o,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new H("writer-wrap-range-not-flat",this);const n=t instanceof Ct?t:new Ct(t);if(n.childCount>0)throw new H("writer-wrap-element-not-empty",this);if(n.parent!==null)throw new H("writer-wrap-element-attached",this);this.insert(n,e.start);const r=new oe(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(r,fe._createAt(n,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new H("writer-unwrap-element-no-parent",this);this.move(oe._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new H("writer-addmarker-no-usingoperation",this);const n=t.usingOperation,r=t.range,o=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new H("writer-addmarker-marker-exists",this);if(!r)throw new H("writer-addmarker-no-range",this);return n?(Rl(this,e,null,r,o),this.model.markers.get(e)):this.model.markers._set(e,r,n,o)}updateMarker(e,t){this._assertWriterUsedCorrectly();const n=typeof e=="string"?e:e.name,r=this.model.markers.get(n);if(!r)throw new H("writer-updatemarker-marker-not-exists",this);if(!t){this.model.markers._refresh(r);return}const o=typeof t.usingOperation=="boolean",s=typeof t.affectsData=="boolean",c=s?t.affectsData:r.affectsData;if(!o&&!t.range&&!s)throw new H("writer-updatemarker-wrong-options",this);const u=r.getRange(),h=t.range?t.range:u;if(o&&t.usingOperation!==r.managedUsingOperations){t.usingOperation?Rl(this,n,null,h,c):(Rl(this,n,u,null,c),this.model.markers._set(n,h,void 0,c));return}r.managedUsingOperations?Rl(this,n,u,h,c):this.model.markers._set(n,h,void 0,c)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new H("writer-removemarker-no-marker",this);const n=this.model.markers.get(t);if(!n.managedUsingOperations){this.model.markers._remove(t);return}const r=n.getRange();Rl(this,t,r,null,n.affectsData)}setSelection(e,t,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(e,t,n)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[n,r]of Zr(e))this._setSelectionAttribute(n,r)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const r=or._getStoreAttributeKey(e);this.setAttribute(r,t,n.anchor.parent)}n._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const n=or._getStoreAttributeKey(e);this.removeAttribute(n,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new H("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const r=n.getRange();let o=!1;if(e==="move")o=t.containsPosition(r.start)||t.start.isEqual(r.start)||t.containsPosition(r.end)||t.end.isEqual(r.end);else{const s=t.nodeBefore,c=t.nodeAfter,u=r.start.parent==s&&r.start.isAtEnd,h=r.end.parent==c&&r.end.offset==0,f=r.end.nodeAfter==c,p=r.start.nodeAfter==c;o=u||h||f||p}o&&this.updateMarker(n.name,{range:r})}}}function Nw(i,e,t,n){const r=i.model,o=r.document;let s=n.start,c,u,h;for(const p of n.getWalker({shallow:!0}))h=p.item.getAttribute(e),c&&u!=h&&(u!=t&&f(),s=c),c=p.nextPosition,u=h;c instanceof fe&&c!=s&&u!=t&&f();function f(){const p=new oe(s,c),y=p.root.document?o.version:null,T=new tn(p,e,u,t,y);i.batch.addOperation(T),r.applyOperation(T)}}function Dw(i,e,t,n){const r=i.model,o=r.document,s=n.getAttribute(e);let c,u;if(s!=t){if(n.root===n){const f=n.document?o.version:null;u=new oo(n,e,s,t,f)}else{c=new oe(fe._createBefore(n),i.createPositionAfter(n));const f=c.root.document?o.version:null;u=new tn(c,e,s,t,f)}i.batch.addOperation(u),r.applyOperation(u)}}function Rl(i,e,t,n,r){const o=i.model,s=o.document,c=new si(e,t,n,o.markers,r,s.version);i.batch.addOperation(c),o.applyOperation(c)}function p2(i,e,t,n){let r;if(i.root.document){const o=n.document,s=new fe(o.graveyard,[0]);r=new Tt(i,e,s,o.version)}else r=new f2(i,e);t.addOperation(r),n.applyOperation(r)}function Bw(i,e){return i===e||i instanceof ef&&e instanceof ef}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class g2{constructor(e){this._markerCollection=e,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0}refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize);const t=oe._createOn(e);for(const n of this._markerCollection.getMarkersIntersectingRange(t)){const r=n.getRange();this.bufferMarkerChange(n.name,r,r,n.affectsData)}this._cachedChanges=null}bufferOperation(e){switch(e.type){case"insert":{if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const t of e.range.getItems({shallow:!0}))this._isInInsertedElement(t.parent)||this._markAttribute(t);break}case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const t=this._isInInsertedElement(e.sourcePosition.parent),n=this._isInInsertedElement(e.targetPosition.parent);t||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),n||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const t=oe._createFromPositionAndShift(e.position,1);for(const n of this._markerCollection.getMarkersIntersectingRange(t)){const r=n.getRange();this.bufferMarkerChange(n.name,r,r,n.affectsData)}break}case"split":{const t=e.splitPosition.parent;this._isInInsertedElement(t)||this._markRemove(t,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break}case"merge":{const t=e.sourcePosition.parent;this._isInInsertedElement(t.parent)||this._markRemove(t.parent,t.startOffset,1);const n=e.graveyardPosition.parent;this._markInsert(n,e.graveyardPosition.offset,1);const r=e.targetPosition.parent;this._isInInsertedElement(r)||this._markInsert(r,e.targetPosition.offset,t.maxOffset);break}}this._cachedChanges=null}bufferMarkerChange(e,t,n,r){const o=this._changedMarkers.get(e);o?(o.newRange=n,o.affectsData=r,o.oldRange==null&&o.newRange==null&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{oldRange:t,newRange:n,affectsData:r})}getMarkersToRemove(){const e=[];for(const[t,n]of this._changedMarkers)n.oldRange!=null&&e.push({name:t,range:n.oldRange});return e}getMarkersToAdd(){const e=[];for(const[t,n]of this._changedMarkers)n.newRange!=null&&e.push({name:t,range:n.newRange});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(e=>({name:e[0],data:{oldRange:e[1].oldRange,newRange:e[1].newRange}}))}hasDataChanges(){for(const[,e]of this._changedMarkers)if(e.affectsData)return!0;return this._changesInElement.size>0}getChanges(e={includeChangesInGraveyard:!1}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const n of this._changesInElement.keys()){const r=this._changesInElement.get(n).sort((f,p)=>f.offset===p.offset?f.type!=p.type?f.type=="remove"?-1:1:0:f.offset<p.offset?-1:1),o=this._elementSnapshots.get(n),s=Vw(n.getChildren()),c=b2(o.length,r);let u=0,h=0;for(const f of c)if(f==="i")t.push(this._getInsertDiff(n,u,s[u].name)),u++;else if(f==="r")t.push(this._getRemoveDiff(n,u,o[h].name)),h++;else if(f==="a"){const p=s[u].attributes,y=o[h].attributes;let T;if(s[u].name=="$text")T=new oe(fe._createAt(n,u),fe._createAt(n,u+1));else{const A=n.offsetToIndex(u);T=new oe(fe._createAt(n,u),fe._createAt(n.getChild(A),0))}t.push(...this._getAttributesDiff(T,y,p)),u++,h++}else u++,h++}t.sort((n,r)=>n.position.root!=r.position.root?n.position.root.rootName<r.position.root.rootName?-1:1:n.position.isEqual(r.position)?n.changeCount-r.changeCount:n.position.isBefore(r.position)?-1:1);for(let n=1,r=0;n<t.length;n++){const o=t[r],s=t[n],c=o.type=="remove"&&s.type=="remove"&&o.name=="$text"&&s.name=="$text"&&o.position.isEqual(s.position),u=o.type=="insert"&&s.type=="insert"&&o.name=="$text"&&s.name=="$text"&&o.position.parent==s.position.parent&&o.position.offset+o.length==s.position.offset,h=o.type=="attribute"&&s.type=="attribute"&&o.position.parent==s.position.parent&&o.range.isFlat&&s.range.isFlat&&o.position.offset+o.length==s.position.offset&&o.attributeKey==s.attributeKey&&o.attributeOldValue==s.attributeOldValue&&o.attributeNewValue==s.attributeNewValue;c||u||h?(o.length++,h&&(o.range.end=o.range.end.getShiftedBy(1)),t[n]=null):r=n}t=t.filter(n=>n);for(const n of t)delete n.changeCount,n.type=="attribute"&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t.slice(),this._cachedChanges=t.filter(w2),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}_markInsert(e,t,n){const r={type:"insert",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r)}_markRemove(e,t,n){const r={type:"remove",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r),this._removeAllNestedChanges(e,t,n)}_markAttribute(e){const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);const n=this._getChangesForElement(e);this._handleChange(t,n),n.push(t);for(let r=0;r<n.length;r++)n[r].howMany<1&&(n.splice(r,1),r--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Vw(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const n of t){const r=e.offset+e.howMany,o=n.offset+n.howMany;if(e.type=="insert"&&(n.type=="insert"&&(e.offset<=n.offset?n.offset+=e.howMany:e.offset<o&&(n.howMany+=e.nodesToHandle,e.nodesToHandle=0)),n.type=="remove"&&e.offset<n.offset&&(n.offset+=e.howMany),n.type=="attribute")){if(e.offset<=n.offset)n.offset+=e.howMany;else if(e.offset<o){const s=n.howMany;n.howMany=e.offset-n.offset,t.unshift({type:"attribute",offset:r,howMany:s-n.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(n.type=="insert"){if(r<=n.offset)n.offset-=e.howMany;else if(r<=o)if(e.offset<n.offset){const s=r-n.offset;n.offset=e.offset,n.howMany-=s,e.nodesToHandle-=s}else n.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=n.offset)e.nodesToHandle-=n.howMany,n.howMany=0;else if(e.offset<o){const s=o-e.offset;n.howMany-=s,e.nodesToHandle-=s}}if(n.type=="remove"&&(r<=n.offset?n.offset-=e.howMany:e.offset<n.offset&&(e.nodesToHandle+=n.howMany,n.howMany=0)),n.type=="attribute"){if(r<=n.offset)n.offset-=e.howMany;else if(e.offset<n.offset){const s=r-n.offset;n.offset=e.offset,n.howMany-=s}else if(e.offset<o)if(r<=o){const s=n.howMany;n.howMany=e.offset-n.offset;const c=s-n.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:c,count:this._changeCount++})}else n.howMany-=o-e.offset}}if(e.type=="attribute"){if(n.type=="insert")if(e.offset<n.offset&&r>n.offset){if(r>o){const s={type:"attribute",offset:o,howMany:r-o,count:this._changeCount++};this._handleChange(s,t),t.push(s)}e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=n.offset&&e.offset<o&&(r>o?(e.nodesToHandle=r-o,e.offset=o):e.nodesToHandle=0);if(n.type=="remove"&&e.offset<n.offset&&r>n.offset){const s={type:"attribute",offset:n.offset,howMany:r-n.offset,count:this._changeCount++};this._handleChange(s,t),t.push(s),e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}n.type=="attribute"&&(e.offset>=n.offset&&r<=o?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=n.offset&&r>=o&&(n.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,n){return{type:"insert",position:fe._createAt(e,t),name:n,length:1,changeCount:this._changeCount++}}_getRemoveDiff(e,t,n){return{type:"remove",position:fe._createAt(e,t),name:n,length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,n){const r=[];n=new Map(n);for(const[o,s]of t){const c=n.has(o)?n.get(o):null;c!==s&&r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:s,attributeNewValue:c,changeCount:this._changeCount++}),n.delete(o)}for(const[o,s]of n)r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:s,changeCount:this._changeCount++});return r}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const n=this._changesInElement.get(t),r=e.startOffset;if(n){for(const o of n)if(o.type=="insert"&&r>=o.offset&&r<o.offset+o.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,n){const r=new oe(fe._createAt(e,t),fe._createAt(e,t+n));for(const o of r.getItems({shallow:!0}))o.is("element")&&(this._elementSnapshots.delete(o),this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}}function Vw(i){const e=[];for(const t of i)if(t.is("$text"))for(let n=0;n<t.data.length;n++)e.push({name:"$text",attributes:new Map(t.getAttributes())});else e.push({name:t.name,attributes:new Map(t.getAttributes())});return e}function b2(i,e){const t=[];let n=0,r=0;for(const o of e){if(o.offset>n){for(let s=0;s<o.offset-n;s++)t.push("e");r+=o.offset-n}if(o.type=="insert"){for(let s=0;s<o.howMany;s++)t.push("i");n=o.offset+o.howMany}else if(o.type=="remove"){for(let s=0;s<o.howMany;s++)t.push("r");n=o.offset,r+=o.howMany}else t.push(..."a".repeat(o.howMany).split("")),n=o.offset+o.howMany,r+=o.howMany}if(r<i)for(let o=0;o<i-r-n;o++)t.push("e");return t}function w2(i){const e=i.position&&i.position.root.rootName=="$graveyard",t=i.range&&i.range.root.rootName=="$graveyard";return!e&&!t}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class v2{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set}addOperation(e){this._operations.includes(e)||this._operations.push(e)}getOperations(e=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY){const n=[];for(const r of this._operations)r.baseVersion>=e&&r.baseVersion<t&&n.push(r);return n}getOperation(e){for(const t of this._operations)if(t.baseVersion==e)return t}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function y2(i){return!!i&&i.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(i)}function _2(i){return!!i&&i.length==1&&/[\ud800-\udbff]/.test(i)}function k2(i){return!!i&&i.length==1&&/[\udc00-\udfff]/.test(i)}function Lw(i,e){return _2(i.charAt(e-1))&&k2(i.charAt(e))}function Fw(i,e){return y2(i.charAt(e))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tf="$graveyard";class zw{constructor(e){this.model=e,this.version=0,this.history=new v2(this),this.selection=new or(this),this.roots=new Ci({idProperty:"rootName"}),this.differ=new g2(e.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",tf),this.listenTo(e,"applyOperation",(t,n)=>{const r=n[0];if(r.isDocumentOperation&&r.baseVersion!==this.version)throw new H("model-document-applyoperation-wrong-version",this,{operation:r})},{priority:"highest"}),this.listenTo(e,"applyOperation",(t,n)=>{const r=n[0];r.isDocumentOperation&&this.differ.bufferOperation(r)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,n)=>{const r=n[0];r.isDocumentOperation&&(this.version++,this.history.addOperation(r))},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,n,r,o)=>{this.differ.bufferMarkerChange(n.name,r,o,n.affectsData),r===null&&n.on("change",(s,c)=>{this.differ.bufferMarkerChange(n.name,c,n.getRange(),n.affectsData)})})}get graveyard(){return this.getRoot(tf)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new H("model-document-createroot-name-exists",this,{name:t});const n=new ef(this,e,t);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(){return Array.from(this.roots,e=>e.rootName).filter(e=>e!=tf)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=qg(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const e of this.roots)if(e!==this.graveyard)return e;return this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,n=t.schema,r=t.createPositionFromPath(e,[0]);return n.getNearestSelectionRange(r)||t.createRange(r)}_validateSelectionRange(e){return Hw(e.start)&&Hw(e.end)}_callPostFixers(e){let t=!1;do for(const n of this._postFixers)if(this.selection.refresh(),t=n(e),t)break;while(t)}}je(zw,xt);function Hw(i){const e=i.textNode;if(e){const t=e.data,n=i.offset-e.startOffset;return!Lw(t,n)&&!Fw(t,n)}return!0}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uw{constructor(){this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){const t=e instanceof da?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,n=!1,r=!1){const o=e instanceof da?e.name:e;if(o.includes(","))throw new H("markercollection-incorrect-marker-name",this);const s=this._markers.get(o);if(s){const h=s.getRange();let f=!1;return h.isEqual(t)||(s._attachLiveRange(Pr.fromRange(t)),f=!0),n!=s.managedUsingOperations&&(s._managedUsingOperations=n,f=!0),typeof r=="boolean"&&r!=s.affectsData&&(s._affectsData=r,f=!0),f&&this.fire("update:"+o,s,h,t),s}const c=Pr.fromRange(t),u=new da(o,c,n,r);return this._markers.set(o,u),this.fire("update:"+o,u,null,t),u}_remove(e){const t=e instanceof da?e.name:e,n=this._markers.get(t);return n?(this._markers.delete(t),this.fire("update:"+t,n,n.getRange(),null),this._destroyMarker(n),!0):!1}_refresh(e){const t=e instanceof da?e.name:e,n=this._markers.get(t);if(!n)throw new H("markercollection-refresh-marker-not-exists",this);const r=n.getRange();this.fire("update:"+t,n,r,r,n.managedUsingOperations,n.affectsData)}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}je(Uw,xt);class da{constructor(e,t,n,r){this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=n,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new H("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new H("marker-destroyed",this);return this._affectsData}getStart(){if(!this._liveRange)throw new H("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new H("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new H("marker-destroyed",this);return this._liveRange.toRange()}is(e){return e==="marker"||e==="model:marker"}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}je(da,xt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kn extends ji{get type(){return"noop"}clone(){return new kn(this.baseVersion)}getReversed(){return new kn(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const sr={};sr[tn.className]=tn;sr[_n.className]=_n;sr[si.className]=si;sr[Tt.className]=Tt;sr[kn.className]=kn;sr[ji.className]=ji;sr[ai.className]=ai;sr[oo.className]=oo;sr[Nt.className]=Nt;sr[cn.className]=cn;class E2{static fromJSON(e,t){return sr[e.__className].fromJSON(e,t)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class In extends fe{constructor(e,t,n="toNone"){super(e,t,n);if(!this.root.is("rootElement"))throw new H("model-liveposition-root-not-rootelement",e);C2.call(this)}detach(){this.stopListening()}is(e){return e==="livePosition"||e==="model:livePosition"||e=="position"||e==="model:position"}toPosition(){return new fe(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}function C2(){this.listenTo(this.root.document.model,"applyOperation",(i,e)=>{const t=e[0];!t.isDocumentOperation||T2.call(this,t)},{priority:"low"})}function T2(i){const e=this.getTransformedByOperation(i);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}je(In,xt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function S2(i,e,t,n){return i.change(r=>{let o;t?t instanceof io||t instanceof or?o=t:o=r.createSelection(t,n):o=i.document.selection,o.isCollapsed||i.deleteContent(o,{doNotAutoparagraph:!0});const s=new x2(i,r,o.anchor);let c;e.is("documentFragment")?c=e.getChildren():c=[e],s.handleNodes(c);const u=s.getSelectionRange();u&&(o instanceof or?r.setSelection(u):o.setTo(u));const h=s.getAffectedRange()||i.createRange(o.anchor);return s.destroy(),h})}class x2{constructor(e,t,n){this.model=e,this.writer=t,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(e);if(n.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new H("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this.nodeToSelect?oe._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new oe(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(this.schema.isObject(e)){this._handleObject(e);return}let t=this._checkAndAutoParagraphToAllowedPosition(e);if(!t&&(t=this._checkAndSplitToAllowedPosition(e),!t)){this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=In.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new H("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this.nodeToSelect=e:this.nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=In.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=In.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof Ct)||!this._canMergeLeft(e))return;const t=In._createBefore(e);t.stickiness="toNext";const n=In.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=In._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=In._createAt(t.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof Ct)||!this._canMergeRight(e))return;const t=In._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new H("insertcontent-invalid-insertion-position",this);this.position=fe._createAt(t.nodeBefore,"end");const n=In.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=In._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=In._createAt(t.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof Ct&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof Ct&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){const t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();const t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const n=this.position.parent;this.position=this.writer.createPositionBefore(n),n.isEmpty&&n.parent===t&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const n=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=n,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function P2(i,e,t={}){if(e.isCollapsed)return;const n=e.getFirstRange();if(n.root.rootName=="$graveyard")return;const r=i.schema;i.change(o=>{if(!t.doNotResetEntireContent&&V2(r,e)){B2(o,e);return}const[s,c]=A2(n);s.isTouching(c)||o.remove(o.createRange(s,c)),t.leaveUnmerged||(R2(o,s,c),r.removeDisallowedAttributes(s.parent.getChildren(),o)),qw(o,e,s),!t.doNotAutoparagraph&&N2(r,s)&&jw(o,s,e),s.detach(),c.detach()})}function A2(i){const e=i.root.document.model,t=i.start;let n=i.end;if(e.hasContent(i,{ignoreMarkers:!0})){const r=I2(n);if(r&&n.isTouching(e.createPositionAt(r,0))){const o=e.createSelection(i);e.modifySelection(o,{direction:"backward"});const s=o.getLastPosition(),c=e.createRange(s,n);e.hasContent(c,{ignoreMarkers:!0})||(n=s)}}return[In.fromPosition(t,"toPrevious"),In.fromPosition(n,"toNext")]}function I2(i){const e=i.parent,t=e.root.document.model.schema,n=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const r of n){if(t.isLimit(r))return null;if(t.isBlock(r))return r}}function R2(i,e,t){const n=i.model;if(!nf(i.model.schema,e,t))return;const[r,o]=O2(e,t);!r||!o||(!n.hasContent(r,{ignoreMarkers:!0})&&n.hasContent(o,{ignoreMarkers:!0})?$w(i,e,t,r.parent):Ww(i,e,t,r.parent))}function Ww(i,e,t,n){const r=e.parent,o=t.parent;if(!(r==n||o==n)){for(e=i.createPositionAfter(r),t=i.createPositionBefore(o),t.isEqual(e)||i.insert(o,e),i.merge(e);t.parent.isEmpty;){const s=t.parent;t=i.createPositionBefore(s),i.remove(s)}!nf(i.model.schema,e,t)||Ww(i,e,t,n)}}function $w(i,e,t,n){const r=e.parent,o=t.parent;if(!(r==n||o==n)){for(e=i.createPositionAfter(r),t=i.createPositionBefore(o),t.isEqual(e)||i.insert(r,t);e.parent.isEmpty;){const s=e.parent;e=i.createPositionBefore(s),i.remove(s)}t=i.createPositionBefore(o),M2(i,t),!!nf(i.model.schema,e,t)&&$w(i,e,t,n)}}function M2(i,e){const t=e.nodeBefore,n=e.nodeAfter;t.name!=n.name&&i.rename(t,n.name),i.clearAttributes(t),i.setAttributes(Object.fromEntries(n.getAttributes()),t),i.merge(e)}function nf(i,e,t){const n=e.parent,r=t.parent;return n==r||i.isLimit(n)||i.isLimit(r)?!1:D2(e,t,i)}function O2(i,e){const t=i.getAncestors(),n=e.getAncestors();let r=0;for(;t[r]&&t[r]==n[r];)r++;return[t[r],n[r]]}function N2(i,e){const t=i.checkChild(e,"$text"),n=i.checkChild(e,"paragraph");return!t&&n}function D2(i,e,t){const n=new oe(i,e);for(const r of n.getWalker())if(t.isLimit(r.item))return!1;return!0}function jw(i,e,t){const n=i.createElement("paragraph");i.insert(n,e),qw(i,t,i.createPositionAt(n,0))}function B2(i,e){const t=i.model.schema.getLimitElement(e);i.remove(i.createRangeIn(t)),jw(i,i.createPositionAt(t,0),e)}function V2(i,e){const t=i.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const n=e.getFirstRange();return n.start.parent==n.end.parent?!1:i.checkChild(t,"paragraph")}function qw(i,e,t){e instanceof or?i.setSelection(t):e.setTo(t)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Kw=' ,.?!:;"-()';function L2(i,e,t={}){const n=i.schema,r=t.direction!="backward",o=t.unit?t.unit:"character",s=e.focus,c=new no({boundaries:U2(s,r),singleCharacters:!0,direction:r?"forward":"backward"}),u={walker:c,schema:n,isForward:r,unit:o};let h;for(;h=c.next();){if(h.done)return;const f=F2(u,h.value);if(f){e instanceof or?i.change(p=>{p.setSelectionFocus(f)}):e.setFocus(f);return}}}function F2(i,e){const{isForward:t,walker:n,unit:r,schema:o}=i,{type:s,item:c,nextPosition:u}=e;if(s=="text")return i.unit==="word"?H2(n,t):z2(n,r);if(s==(t?"elementStart":"elementEnd")){if(o.isSelectable(c))return fe._createAt(c,t?"after":"before");if(o.checkChild(u,"$text"))return u}else{if(o.isLimit(c)){n.skip(()=>!0);return}if(o.checkChild(u,"$text"))return u}}function z2(i,e){const t=i.position.textNode;if(t){const n=t.data;let r=i.position.offset-t.startOffset;for(;Lw(n,r)||e=="character"&&Fw(n,r);)i.next(),r=i.position.offset-t.startOffset}return i.position}function H2(i,e){let t=i.position.textNode;if(t){let n=i.position.offset-t.startOffset;for(;!W2(t.data,n,e)&&!$2(t,n,e);){i.next();const r=e?i.position.nodeAfter:i.position.nodeBefore;if(r&&r.is("$text")){const o=r.data.charAt(e?0:r.data.length-1);Kw.includes(o)||(i.next(),t=i.position.textNode)}n=i.position.offset-t.startOffset}}return i.position}function U2(i,e){const t=i.root,n=fe._createAt(t,e?"end":0);return e?new oe(i,n):new oe(n,i)}function W2(i,e,t){const n=e+(t?0:-1);return Kw.includes(i.charAt(n))}function $2(i,e,t){return e===(t?i.endOffset:0)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function j2(i,e){return i.change(t=>{const n=t.createDocumentFragment(),r=e.getFirstRange();if(!r||r.isCollapsed)return n;const o=r.start.root,s=r.start.getCommonPath(r.end),c=o.getNodeByPath(s);let u;r.start.parent==r.end.parent?u=r:u=t.createRange(t.createPositionAt(c,r.start.path[s.length]),t.createPositionAt(c,r.end.path[s.length]+1));const h=u.end.offset-u.start.offset;for(const f of u.getItems({shallow:!0}))f.is("$textProxy")?t.appendText(f.data,f.getAttributes(),n):t.append(t.cloneElement(f,!0),n);if(u!=r){const f=r._getTransformedByMove(u.start,t.createPositionAt(n,0),h)[0],p=t.createRange(t.createPositionAt(n,0),f.start),y=t.createRange(f.end,t.createPositionAt(n,"end"));Gw(y,t),Gw(p,t)}return n})}function Gw(i,e){const t=[];Array.from(i.getItems({direction:"backward"})).map(n=>e.createRangeOn(n)).filter(n=>(n.start.isAfter(i.start)||n.start.isEqual(i.start))&&(n.end.isBefore(i.end)||n.end.isEqual(i.end))).forEach(n=>{t.push(n.start.parent),e.remove(n)}),t.forEach(n=>{let r=n;for(;r.parent&&r.isEmpty;){const o=e.createRangeOn(r);r=r.parent,e.remove(o)}})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function q2(i){i.document.registerPostFixer(e=>K2(e,i))}function K2(i,e){const t=e.document.selection,n=e.schema,r=[];let o=!1;for(const s of t.getRanges()){const c=G2(s,n);c&&!c.isEqual(s)?(r.push(c),o=!0):r.push(s)}o&&i.setSelection(X2(r),{backward:t.isBackward})}function G2(i,e){return i.isCollapsed?Y2(i,e):J2(i,e)}function Y2(i,e){const t=i.start,n=e.getNearestSelectionRange(t);if(!n){const o=t.getAncestors().reverse().find(s=>e.isObject(s));return o?oe._createOn(o):null}if(!n.isCollapsed)return n;const r=n.start;return t.isEqual(r)?null:new oe(r)}function J2(i,e){const{start:t,end:n}=i,r=e.checkChild(t,"$text"),o=e.checkChild(n,"$text"),s=e.getLimitElement(t),c=e.getLimitElement(n);if(s===c){if(r&&o)return null;if(Q2(t,n,e)){const p=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),T=n.nodeBefore&&e.isSelectable(n.nodeBefore)?null:e.getNearestSelectionRange(n,"backward"),A=p?p.start:t,M=T?T.end:n;return new oe(A,M)}}const u=s&&!s.is("rootElement"),h=c&&!c.is("rootElement");if(u||h){const f=t.nodeAfter&&n.nodeBefore&&t.nodeAfter.parent===n.nodeBefore.parent,p=u&&(!f||!Jw(t.nodeAfter,e)),y=h&&(!f||!Jw(n.nodeBefore,e));let T=t,A=n;return p&&(T=fe._createBefore(Yw(s,e))),y&&(A=fe._createAfter(Yw(c,e))),new oe(T,A)}return null}function Yw(i,e){let t=i,n=t;for(;e.isLimit(n)&&n.parent;)t=n,n=n.parent;return t}function Q2(i,e,t){const n=i.nodeAfter&&!t.isLimit(i.nodeAfter)||t.checkChild(i,"$text"),r=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return n||r}function X2(i){const e=[...i],t=new Set;let n=1;for(;n<e.length;){const o=e[n],s=e.slice(0,n);for(const[c,u]of s.entries())if(!t.has(c)){if(o.isEqual(u))t.add(c);else if(o.isIntersecting(u)){t.add(c),t.add(n);const h=o.getJoined(u);e.push(h)}}n++}return e.filter((o,s)=>!t.has(s))}function Jw(i,e){return i&&e.isSelectable(i)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qw{constructor(){this.markers=new Uw,this.document=new zw(this),this.schema=new Sw,this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((e,t)=>{if(t.name==="$marker")return!0}),q2(this),this.document.registerPostFixer(bw)}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new gu,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){H.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{typeof e=="string"?e=new gu(e):typeof e=="function"&&(t=e,e=new gu),this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(n){H.rethrowUnexpectedError(n,this)}}applyOperation(e){e._execute()}insertContent(e,t,n){return S2(this,e,t,n)}deleteContent(e,t){P2(this,e,t)}modifySelection(e,t){L2(this,e,t)}getSelectedContent(e){return j2(this,e)}hasContent(e,t={}){const n=e instanceof Ct?oe._createIn(e):e;if(n.isCollapsed)return!1;const{ignoreWhitespaces:r=!1,ignoreMarkers:o=!1}=t;if(!o){for(const s of this.markers.getMarkersIntersectingRange(n))if(s.affectsData)return!0}for(const s of n.getItems())if(this.schema.isContent(s))if(s.is("$textProxy"))if(r){if(s.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}createPositionFromPath(e,t,n){return new fe(e,t,n)}createPositionAt(e,t){return fe._createAt(e,t)}createPositionAfter(e){return fe._createAfter(e)}createPositionBefore(e){return fe._createBefore(e)}createRange(e,t){return new oe(e,t)}createRangeIn(e){return oe._createIn(e)}createRangeOn(e){return oe._createOn(e)}createSelection(e,t,n){return new io(e,t,n)}createBatch(e){return new gu(e)}createOperationFromJSON(e){return E2.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new m2(this,t);const n=this._pendingChanges[0].callback(this._currentWriter);e.push(n),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return this.fire("_afterChanges"),e}}je(Qw,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Z2 extends to{constructor(e){super();this.editor=e}set(e,t,n={}){if(typeof t=="string"){const r=t;t=(o,s)=>{this.editor.execute(r),s()}}super.set(e,t,n)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xw{constructor(e={}){const t=e.language||this.constructor.defaultConfig&&this.constructor.defaultConfig.language;this._context=e.context||new Ax({language:t}),this._context._addEditor(this,!e.context);const n=Array.from(this.constructor.builtinPlugins||[]);this.config=new hb(e,this.constructor.defaultConfig),this.config.define("plugins",n),this.config.define(this._context._getEditorConfig()),this.plugins=new Ch(this,n,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new HA,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.set("isReadOnly",!1),this.model=new Qw;const r=new Fx;this.data=new Aw(this.model,r),this.editing=new Tw(this.model,r),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new u2([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new Z2(this),this.keystrokes.listenTo(this.editing.view.document)}initPlugins(){const e=this.config,t=e.get("plugins"),n=e.get("removePlugins")||[],r=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(r),n,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(t=>this.once("ready",t))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(...e){try{return this.commands.execute(...e)}catch(t){H.rethrowUnexpectedError(t,this)}}focus(){this.editing.view.focus()}}je(Xw,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eI{constructor(e){this.editor=e,this._components=new Map}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(rf(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new H("componentfactory-item-missing",this,{name:e});return this._components.get(rf(e)).callback(this.editor.locale)}has(e){return this._components.has(rf(e))}}function rf(i){return String(i).toLowerCase()}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zw{constructor(e){this.editor=e,this.componentFactory=new eI(e),this.focusTracker=new $i,this.set("viewportOffset",this._readViewportOffsetFromConfig()),this._editableElementsMap=new Map,this.listenTo(e.editing.view.document,"layoutChanged",()=>this.update())}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null;this._editableElementsMap=new Map}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){const e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;const n=e.config.get("toolbar.viewportTopOffset");return n?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:n}):{top:0}}}je(Zw,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tI(i){if(!ms(i.updateSourceElement))throw new H("attachtoform-missing-elementapi-interface",i);const e=i.sourceElement;if(e&&e.tagName.toLowerCase()==="textarea"&&e.form){let t;const n=e.form,r=()=>i.updateSourceElement();ms(n.submit)&&(t=n.submit,n.submit=()=>{r(),t.apply(n)}),n.addEventListener("submit",r),i.on("destroy",()=>{n.removeEventListener("submit",r),t&&(n.submit=t)})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const nI={setData(i){this.data.set(i)},getData(i){return this.data.get(i)}};/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const iI={updateSourceElement(){if(!this.sourceElement)throw new H("editor-missing-sourceelement",this);UP(this.sourceElement,this.data.get())}};/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ev extends kl{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new Ci({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new H("pendingactions-add-invalid-message",this);const t=Object.create(Pt);return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}var rI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',oI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',sI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',aI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',lI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',cI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',uI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',dI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',hI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',fI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',mI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',pI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',gI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',bI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',wI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',vI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',yI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',_I='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',kI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',EI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',CI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',TI='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',SI='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>',xI='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>',PI='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>',AI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',II='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',RI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',tv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Fn={cancel:rI,caption:oI,check:sI,cog:aI,eraser:lI,lowVision:cI,image:uI,alignBottom:dI,alignMiddle:hI,alignTop:fI,alignLeft:mI,alignCenter:pI,alignRight:gI,alignJustify:bI,objectLeft:EI,objectCenter:vI,objectRight:CI,objectFullWidth:_I,objectInline:kI,objectBlockLeft:wI,objectBlockRight:yI,objectSizeFull:TI,objectSizeLarge:SI,objectSizeSmall:xI,objectSizeMedium:PI,pencil:AI,pilcrow:II,quote:RI,threeVerticalDots:tv};/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function of({emitter:i,activator:e,callback:t,contextElements:n}){i.listenTo(document,"mousedown",(r,o)=>{if(!e())return;const s=typeof o.composedPath=="function"?o.composedPath():[];for(const c of n)if(c.contains(o.target)||s.includes(c))return;t()})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sf(i){i.set("_isCssTransitionsDisabled",!1),i.disableCssTransitions=()=>{i._isCssTransitionsDisabled=!0},i.enableCssTransitions=()=>{i._isCssTransitionsDisabled=!1},i.extendTemplate({attributes:{class:[i.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function af({view:i}){i.listenTo(i.element,"submit",(e,t)=>{t.preventDefault(),i.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xs extends Ci{constructor(e=[]){super(e,{idProperty:"viewUid"});this.on("add",(t,n,r)=>{this._renderViewIntoCollectionParent(n,r)}),this.on("remove",(t,n)=>{n.element&&this._parentElement&&n.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!MI(e))throw new H("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(const n of this)for(const r of e)n.delegate(r).to(t);this.on("add",(n,r)=>{for(const o of e)r.delegate(o).to(t)}),this.on("remove",(n,r)=>{for(const o of e)r.stopDelegating(o,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}}function MI(i){return i.every(e=>typeof e=="string")}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rt{constructor(e){this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Ci,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,n)=>{n.locale=e}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Si.bind(this,this)}createCollection(e){const t=new xs(e);return this._viewCollections.add(t),t}registerChild(e){Ui(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){Ui(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new Si(e)}extendTemplate(e){Si.extend(this.template,e)}render(){if(this.isRendered)throw new H("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}je(rt,la);je(rt,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const OI="http://www.w3.org/1999/xhtml";class Si{constructor(e){Object.assign(this,ov(rv(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=uv(),this._renderNode({node:e,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new H("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(const n of t.children)wu(n)?yield n:lf(n)&&(yield*e(n))}yield*e(this)}static bind(e,t){return{to(n,r){return new NI({eventNameOrFunction:n,attribute:n,observable:e,emitter:t,callback:r})},if(n,r,o){return new nv({observable:e,emitter:t,attribute:n,valueIfTrue:r,callback:o})}}}static extend(e,t){if(e._isRendered)throw new H("template-extend-render",[this,e]);cv(e,ov(rv(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new H("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||OI,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),bu(this.text)?this._bindToObservable({schema:this.text,updater:BI(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){let t,n,r,o;if(!this.attributes)return;const s=e.node,c=e.revertData;for(t in this.attributes)if(r=s.getAttribute(t),n=this.attributes[t],c&&(c.attributes[t]=r),o=Gt(n[0])&&n[0].ns?n[0].ns:null,bu(n)){const u=o?n[0].value:n;c&&dv(t)&&u.unshift(r),this._bindToObservable({schema:u,updater:VI(s,t,o),data:e})}else t=="style"&&typeof n[0]!="string"?this._renderStyleAttribute(n[0],e):(c&&r&&dv(t)&&n.unshift(r),n=n.map(u=>u&&(u.value||u)).reduce((u,h)=>u.concat(h),[]).reduce(av,""),ha(n)||s.setAttributeNS(o,t,n))}_renderStyleAttribute(e,t){const n=t.node;for(const r in e){const o=e[r];bu(o)?this._bindToObservable({schema:[o],updater:LI(n,r),data:t}):n.style[r]=o}}_renderElementChildren(e){const t=e.node,n=e.intoFragment?document.createDocumentFragment():t,r=e.isApplying;let o=0;for(const s of this.children)if(cf(s)){if(!r){s.setParent(t);for(const c of s)n.appendChild(c.element)}}else if(wu(s))r||(s.isRendered||s.render(),n.appendChild(s.element));else if(aa(s))n.appendChild(s);else if(r){const c=e.revertData,u=uv();c.children.push(u),s._renderNode({node:n.childNodes[o++],isApplying:!0,revertData:u})}else n.appendChild(s.render());e.intoFragment&&t.appendChild(n)}_setUpListeners(e){if(!!this.eventListeners)for(const t in this.eventListeners){const n=this.eventListeners[t].map(r=>{const[o,s]=t.split("@");return r.activateDomEventListener(o,s,e)});e.revertData&&e.revertData.bindings.push(n)}}_bindToObservable({schema:e,updater:t,data:n}){const r=n.revertData;iv(e,t,n);const o=e.filter(s=>!ha(s)).filter(s=>s.observable).map(s=>s.activateAttributeListener(e,t,n));r&&r.bindings.push(o)}_revertTemplateFromNode(e,t){for(const n of t.bindings)for(const r of n)r();if(t.text){e.textContent=t.text;return}for(const n in t.attributes){const r=t.attributes[n];r===null?e.removeAttribute(n):e.setAttribute(n,r)}for(let n=0;n<t.children.length;++n)this._revertTemplateFromNode(e.childNodes[n],t.children[n])}}je(Si,xt);class Ml{constructor(e){Object.assign(this,e)}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,n){const r=()=>iv(e,t,n);return this.emitter.listenTo(this.observable,"change:"+this.attribute,r),()=>{this.emitter.stopListening(this.observable,"change:"+this.attribute,r)}}}class NI extends Ml{activateDomEventListener(e,t,n){const r=(o,s)=>{(!t||s.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(s):this.observable.fire(this.eventNameOrFunction,s))};return this.emitter.listenTo(n.node,e,r),()=>{this.emitter.stopListening(n.node,e,r)}}}class nv extends Ml{getValue(e){const t=super.getValue(e);return ha(t)?!1:this.valueIfTrue||!0}}function bu(i){return i?(i.value&&(i=i.value),Array.isArray(i)?i.some(bu):i instanceof Ml):!1}function DI(i,e){return i.map(t=>t instanceof Ml?t.getValue(e):t)}function iv(i,e,{node:t}){let n=DI(i,t);i.length==1&&i[0]instanceof nv?n=n[0]:n=n.reduce(av,""),ha(n)?e.remove():e.set(n)}function BI(i){return{set(e){i.textContent=e},remove(){i.textContent=""}}}function VI(i,e,t){return{set(n){i.setAttributeNS(t,e,n)},remove(){i.removeAttributeNS(t,e)}}}function LI(i,e){return{set(t){i.style[e]=t},remove(){i.style[e]=null}}}function rv(i){return Kg(i,t=>{if(t&&(t instanceof Ml||lf(t)||wu(t)||cf(t)))return t})}function ov(i){if(typeof i=="string"?i=HI(i):i.text&&UI(i),i.on&&(i.eventListeners=zI(i.on),delete i.on),!i.text){i.attributes&&FI(i.attributes);const e=[];if(i.children)if(cf(i.children))e.push(i.children);else for(const t of i.children)lf(t)||wu(t)||aa(t)?e.push(t):e.push(new Si(t));i.children=e}return i}function FI(i){for(const e in i)i[e].value&&(i[e].value=yn(i[e].value)),sv(i,e)}function zI(i){for(const e in i)sv(i,e);return i}function HI(i){return{text:[i]}}function UI(i){i.text=yn(i.text)}function sv(i,e){i[e]=yn(i[e])}function av(i,e){return ha(e)?i:ha(i)?e:`${i} ${e}`}function lv(i,e){for(const t in e)i[t]?i[t].push(...e[t]):i[t]=e[t]}function cv(i,e){if(e.attributes&&(i.attributes||(i.attributes={}),lv(i.attributes,e.attributes)),e.eventListeners&&(i.eventListeners||(i.eventListeners={}),lv(i.eventListeners,e.eventListeners)),e.text&&i.text.push(...e.text),e.children&&e.children.length){if(i.children.length!=e.children.length)throw new H("ui-template-extend-children-mismatch",i);let t=0;for(const n of e.children)cv(i.children[t++],n)}}function ha(i){return!i&&i!==0}function wu(i){return i instanceof rt}function lf(i){return i instanceof Si}function cf(i){return i instanceof xs}function uv(){return{children:[],bindings:[],attributes:{}}}function dv(i){return i=="class"||i=="style"}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WI extends xs{constructor(e,t=[]){super(t);this.locale=e}attachToDom(){this._bodyCollectionContainer=new Si({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=zP(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vu extends rt{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),n=t.getAttribute("viewBox");for(n&&(this.viewBox=n),this.element.innerHTML="";t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hv extends rt{constructor(e){super(e);this.set("text",""),this.set("position","s");const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",t.to("position",n=>"ck-tooltip_"+n),t.if("text","ck-hidden",n=>!n.trim())]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:t.to("text")}]}]})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dt extends rt{constructor(e){super(e);const t=this.bindTemplate,n=yr();this.set("class"),this.set("labelStyle"),this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.tooltipView=this._createTooltipView(),this.labelView=this._createLabelView(n),this.iconView=new vu,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this)),this.setTemplate({tag:"button",attributes:{class:["ck","ck-button",t.to("class"),t.if("isEnabled","ck-disabled",r=>!r),t.if("isVisible","ck-hidden",r=>!r),t.to("isOn",r=>r?"ck-on":"ck-off"),t.if("withText","ck-button_with-text"),t.if("withKeystroke","ck-button_with-keystroke")],type:t.to("type",r=>r||"button"),tabindex:t.to("tabindex"),"aria-labelledby":`ck-editor__aria-label_${n}`,"aria-disabled":t.if("isEnabled",!0,r=>!r),"aria-pressed":t.to("isOn",r=>this.isToggleable?String(r):!1)},children:this.children,on:{mousedown:t.to(r=>{r.preventDefault()}),click:t.to(r=>{this.isEnabled?this.fire("execute"):r.preventDefault()})}})}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}_createTooltipView(){const e=new hv;return e.bind("text").to(this,"_tooltipString"),e.bind("position").to(this,"tooltipPosition"),e}_createLabelView(e){const t=new rt,n=this.bindTemplate;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:n.to("labelStyle"),id:`ck-editor__aria-label_${e}`},children:[{text:this.bindTemplate.to("label")}]}),t}_createKeystrokeView(){const e=new rt;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>Eb(t))}]}),e}_getTooltipString(e,t,n){return e?typeof e=="string"?e:(n&&(n=Eb(n)),e instanceof Function?e(t,n):`${t}${n?` (${n})`:""}`):""}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uf extends Dt{constructor(e){super(e);this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new rt;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fa{constructor(e){if(Object.assign(this,e),e.actions&&e.keystrokeHandler)for(const t in e.actions){let n=e.actions[t];typeof n=="string"&&(n=[n]);for(const r of n)e.keystrokeHandler.set(r,(o,s)=>{this[t](),s()})}}get first(){return this.focusables.find(df)||null}get last(){return this.focusables.filter(df).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,n)=>{const r=t.element===this.focusTracker.focusedElement;return r&&(e=n),r}),e)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(e){e&&e.focus()}_getFocusableItem(e){const t=this.current,n=this.focusables.length;if(!n)return null;if(t===null)return this[e===1?"first":"last"];let r=(t+n+e)%n;do{const o=this.focusables.get(r);if(df(o))return o;r=(r+n+e)%n}while(r!==t);return null}}function df(i){return!!(i.focus&&Ht.window.getComputedStyle(i.element).display!="none")}var fv='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hf extends Dt{constructor(e){super(e);this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new vu;return e.content=fv,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mv extends rt{constructor(e){super(e);const t=this.bindTemplate;this.set("class"),this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(),this.arrowView=this._createArrowView(),this.keystrokes=new to,this.focusTracker=new $i,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",t.to("class"),t.if("isVisible","ck-hidden",n=>!n),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(){const e=new Dt;return e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}_createArrowView(){const e=new Dt,t=e.bindTemplate;return e.icon=fv,e.extendTemplate({attributes:{class:"ck-splitbutton__arrow","aria-haspopup":!0,"aria-expanded":t.to("isOn",n=>String(n))}}),e.bind("isEnabled").to(this),e.delegate("execute").to(this,"open"),e}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $I extends rt{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",n=>`ck-dropdown__panel_${n}`),t.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:t.to(n=>n.preventDefault())}})}focus(){this.children.length&&this.children.first.focus()}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function jI(i){return!i||!i.parentNode||i.offsetParent===Ht.document.body?null:i.offsetParent}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function pv({element:i,target:e,positions:t,limiter:n,fitInViewport:r,viewportOffsetConfig:o}){ms(e)&&(e=e()),ms(n)&&(n=n());const s=jI(i),c=new Et(i),u=new Et(e);let h;const f={targetRect:u,elementRect:c,positionedElementAncestor:s};if(!n&&!r)h=new ff(t[0],f);else{const p=n&&new Et(n).getVisible(),y=r&&qI(o);Object.assign(f,{limiterRect:p,viewportRect:y}),h=KI(t,f)||new ff(t[0],f)}return h}function qI(i){i=Object.assign({top:0,bottom:0,left:0,right:0},i);const e=new Et(Ht.window);return e.top+=i.top,e.height-=i.top,e.bottom-=i.bottom,e.height-=i.bottom,e}function KI(i,e){const{elementRect:t}=e,n=t.getArea(),r=i.map(c=>new ff(c,e)).filter(c=>!!c.name);let o=0,s=null;for(const c of r){const{_limiterIntersectionArea:u,_viewportIntersectionArea:h}=c;if(u===n)return c;const f=h**2+u**2;f>o&&(o=f,s=c)}return s}function GI(i,e){const t=gv(new Et(e)),n=Gb(e);let r=0,o=0;r-=t.left,o-=t.top,r+=e.scrollLeft,o+=e.scrollTop,r-=n.left,o-=n.top,i.moveBy(r,o)}function gv(i){const{scrollX:e,scrollY:t}=Ht.window;return i.clone().moveBy(e,t)}class ff{constructor(e,t){const n=e(t.targetRect,t.elementRect,t.viewportRect);if(!n)return;const{left:r,top:o,name:s,config:c}=n;Object.assign(this,{name:s,config:c}),this._positioningFunctionCorrdinates={left:r,top:o},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get _limiterIntersectionArea(){const e=this._options.limiterRect;if(e){const t=this._options.viewportRect;if(t){const n=e.getIntersection(t);if(n)return n.getIntersectionArea(this._rect)}else return e.getIntersectionArea(this._rect)}return 0}get _viewportIntersectionArea(){const e=this._options.viewportRect;return e?e.getIntersectionArea(this._rect):0}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCorrdinates.left,this._positioningFunctionCorrdinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=gv(this._rect),this._options.positionedElementAncestor&&GI(this._cachedAbsoluteRect,this._options.positionedElementAncestor),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ma extends rt{constructor(e,t,n){super(e);const r=this.bindTemplate;this.buttonView=t,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class"),this.set("id"),this.set("panelPosition","auto"),this.keystrokes=new to,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",o=>!o)],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[t,n]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"]}})}render(){super.render(),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",()=>{!this.isOpen||(this.panelPosition==="auto"?this.panelView.position=ma._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelView.position=this.panelPosition)}),this.keystrokes.listenTo(this.element);const e=(t,n)=>{this.isOpen&&(this.buttonView.focus(),this.isOpen=!1,n())};this.keystrokes.set("arrowdown",(t,n)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,n())}),this.keystrokes.set("arrowright",(t,n)=>{this.isOpen&&n()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:t,southEast:n,southWest:r,northEast:o,northWest:s,southMiddleEast:c,southMiddleWest:u,northMiddleEast:h,northMiddleWest:f}=ma.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[n,r,c,u,e,o,s,h,f,t]:[r,n,u,c,e,s,o,f,h,t]}}ma.defaultPanelPositions={south:(i,e)=>({top:i.bottom,left:i.left-(e.width-i.width)/2,name:"s"}),southEast:i=>({top:i.bottom,left:i.left,name:"se"}),southWest:(i,e)=>({top:i.bottom,left:i.left-e.width+i.width,name:"sw"}),southMiddleEast:(i,e)=>({top:i.bottom,left:i.left-(e.width-i.width)/4,name:"sme"}),southMiddleWest:(i,e)=>({top:i.bottom,left:i.left-(e.width-i.width)*3/4,name:"smw"}),north:(i,e)=>({top:i.top-e.height,left:i.left-(e.width-i.width)/2,name:"n"}),northEast:(i,e)=>({top:i.top-e.height,left:i.left,name:"ne"}),northWest:(i,e)=>({top:i.top-e.height,left:i.left-e.width+i.width,name:"nw"}),northMiddleEast:(i,e)=>({top:i.top-e.height,left:i.left-(e.width-i.width)/4,name:"nme"}),northMiddleWest:(i,e)=>({top:i.top-e.height,left:i.left-(e.width-i.width)*3/4,name:"nmw"})};ma._getOptimalPosition=pv;/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bv extends rt{constructor(e){super(e);this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YI extends rt{constructor(e){super(e);this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function JI(i){return i.bindTemplate.to(e=>{e.target===i.element&&e.preventDefault()})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wv(i){return Array.isArray(i)?{items:i,removeItems:[]}:i?Object.assign({items:[],removeItems:[]},i):{items:[],removeItems:[]}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mf extends rt{constructor(e,t){super(e);const n=this.bindTemplate,r=this.t;this.options=t||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new $i,this.keystrokes=new to,this.set("class"),this.set("isCompact",!1),this.itemsView=new QI(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new fa({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const s=["ck","ck-toolbar",n.to("class"),n.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&s.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:s,role:"toolbar","aria-label":n.to("ariaLabel"),style:{maxWidth:n.to("maxWidth")}},children:this.children,on:{mousedown:JI(this)}}),this._behavior=this.options.shouldGroupWhenFull?new ZI(this):new XI(this)}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t){const n=wv(e),r=n.items.filter((s,c,u)=>s==="|"?!0:n.removeItems.indexOf(s)!==-1?!1:s==="-"?this.options.shouldGroupWhenFull?(Vn("toolbarview-line-break-ignored-when-grouping-items",u),!1):!0:t.has(s)?!0:(Vn("toolbarview-item-unavailable",{name:s}),!1)),o=this._cleanSeparators(r).map(s=>s==="|"?new bv:s==="-"?new YI:t.create(s));this.items.addMany(o)}_cleanSeparators(e){const t=s=>s!=="-"&&s!=="|",n=e.length,r=e.findIndex(t),o=n-e.slice().reverse().findIndex(t);return e.slice(r,o).filter((s,c,u)=>t(s)?!0:!(c>0&&u[c-1]===s))}}class QI extends rt{constructor(e){super(e);this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class XI{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(n=>n),e.focusables.bindTo(e.items).using(n=>n),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class ZI{constructor(e){this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),e.children.on("add",this._updateFocusCycleableItems.bind(this)),e.children.on("remove",this._updateFocusCycleableItems.bind(this)),e.items.on("change",(t,n)=>{const r=n.index;for(const o of n.removed)r>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=r;o<r+n.added.length;o++){const s=n.added[o-r];o>this.ungroupedItems.length?this.groupedItems.add(s,o-this.ungroupedItems.length):this.ungroupedItems.add(s,o)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!this.viewElement.offsetParent){this.shouldUpdateGroupingOnNextResize=!0;return}const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,n=new Et(e.lastChild),r=new Et(e);if(!this.cachedPadding){const o=Ht.window.getComputedStyle(e),s=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[s])}return t==="ltr"?n.right>r.right-this.cachedPadding:n.left<r.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new Ut(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new bv),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,n=Vo(e);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",vv(n,[]),n.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:tv}),n.toolbarView.items.bindTo(this.groupedItems).using(r=>r),n}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eR extends rt{constructor(){super();this.items=this.createCollection(),this.focusTracker=new $i,this.keystrokes=new to,this._focusCycler=new fa({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:this.items})}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tR extends rt{constructor(e){super(e);this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item"]},children:this.children})}focus(){this.children.first.focus()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nR extends rt{constructor(e){super(e);this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Vo(i,e=hf){const t=new e(i),n=new $I(i),r=new ma(i,t,n);return t.bind("isEnabled").to(r),t instanceof hf?t.bind("isOn").to(r,"isOpen"):t.arrowView.bind("isOn").to(r,"isOpen"),iR(r),r}function vv(i,e){const t=i.locale,n=t.t,r=i.toolbarView=new mf(t);r.set("ariaLabel",n("Dropdown toolbar")),i.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),e.map(o=>r.items.add(o)),i.panelView.children.add(r),r.items.delegate("execute").to(i)}function pf(i,e){const t=i.locale,n=i.listView=new eR(t);n.items.bindTo(e).using(({type:r,model:o})=>{if(r==="separator")return new nR(t);if(r==="button"||r==="switchbutton"){const s=new tR(t);let c;return r==="button"?c=new Dt(t):c=new uf(t),c.bind(...Object.keys(o)).to(o),c.delegate("execute").to(s),s.children.add(c),s}}),i.panelView.children.add(n),n.items.delegate("execute").to(i)}function iR(i){rR(i),oR(i),sR(i)}function rR(i){i.on("render",()=>{of({emitter:i,activator:()=>i.isOpen,callback:()=>{i.isOpen=!1},contextElements:[i.element]})})}function oR(i){i.on("execute",e=>{e.source instanceof uf||(i.isOpen=!1)})}function sR(i){i.keystrokes.set("arrowdown",(e,t)=>{i.isOpen&&(i.panelView.focus(),t())}),i.keystrokes.set("arrowup",(e,t)=>{i.isOpen&&(i.panelView.focusLast(),t())})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aR extends rt{constructor(e){super(e);this.body=new WI(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yv extends rt{constructor(e){super(e);this.set("text"),this.set("for"),this.id=`ck-editor__label_${yr()}`;const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lR extends aR{constructor(e){super(e);this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,t=new yv;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cR extends rt{constructor(e,t,n){super(e);this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.name=null,this.set("isFocused",!1),this._editableElement=n,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?n(this):t(this);function t(r){e.change(o=>{const s=e.document.getRoot(r.name);o.addClass(r.isFocused?"ck-focused":"ck-blurred",s),o.removeClass(r.isFocused?"ck-blurred":"ck-focused",s)})}function n(r){e.once("change:isRenderingInProgress",(o,s,c)=>{c?n(r):t(r)})}}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uR extends cR{constructor(e,t,n){super(e,t,n);this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView,t=this.t;e.change(n=>{const r=e.document.getRoot(this.name);n.setAttribute("aria-label",t("Rich Text Editor, %0",this.name),r)})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dR extends rt{constructor(e){super(e);this.set("value"),this.set("id"),this.set("placeholder"),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById"),this.focusTracker=new $i,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{type:"text",class:["ck","ck-input","ck-input-text",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById")},on:{input:t.to((...n)=>{this.fire("input",...n),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,n)=>{this._setDomElementValue(n),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}_updateIsEmpty(){this.isEmpty=hR(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function hR(i){return!i.value}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gf extends rt{constructor(e,t){super(e);const n=`ck-labeled-field-view-${yr()}`,r=`ck-labeled-field-view-status-${yr()}`;this.fieldView=t(this,n,r),this.set("label"),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class"),this.set("placeholder"),this.labelView=this._createLabelView(n),this.statusView=this._createStatusView(r),this.bind("_statusText").to(this,"errorText",this,"infoText",(s,c)=>s||c);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",s=>!s),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:[this.fieldView,this.labelView]},this.statusView]})}_createLabelView(e){const t=new yv(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new rt(this.locale),n=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",r=>!r)],id:e,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),t}focus(){this.fieldView.focus()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bf(i,e,t){const n=new dR(i.locale);return n.set({id:e,ariaDescribedById:t}),n.bind("isReadOnly").to(i,"isEnabled",r=>!r),n.bind("hasError").to(i,"errorText",r=>!!r),n.on("input",()=>{i.errorText=null}),i.bind("isEmpty","isFocused","placeholder").to(n),n}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wf extends kl{static get pluginName(){return"Notification"}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=`show:${e.type}`+(e.namespace?`:${e.namespace}`:"");this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yu{constructor(e,t){t&&wl(this,t),e&&this.set(e)}}je(yu,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */const _v=Uh("px"),kv=Ht.document.body;class li extends rt{constructor(e){super(e);const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class"),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",n=>`ck-balloon-panel_${n}`),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",_v),left:t.to("left",_v)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){this.show();const t=li.defaultPositions,n=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast,t.viewportStickyNorth],limiter:kv,fitInViewport:!0},e),r=li._getOptimalPosition(n),o=parseInt(r.left),s=parseInt(r.top),{name:c,config:u={}}=r,{withArrow:h=!0}=u;Object.assign(this,{top:s,left:o,position:c,withArrow:h})}pin(e){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){this.attachTo(e);const t=vf(e.target),n=e.limiter?vf(e.limiter):kv;this.listenTo(Ht.document,"scroll",(r,o)=>{const s=o.target,c=t&&s.contains(t),u=n&&s.contains(n);(c||u||!t||!n)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(Ht.window,"resize",()=>{this.attachTo(e)})}_stopPinning(){this.stopListening(Ht.document,"scroll"),this.stopListening(Ht.window,"resize")}}function vf(i){return No(i)?i:uu(i)?i.commonAncestorContainer:typeof i=="function"?vf(i()):null}li.arrowHorizontalOffset=25;li.arrowVerticalOffset=10;li.stickyVerticalOffset=20;li._getOptimalPosition=pv;li.defaultPositions=fR();function fR({horizontalOffset:i=li.arrowHorizontalOffset,verticalOffset:e=li.arrowVerticalOffset,stickyVerticalOffset:t=li.stickyVerticalOffset,config:n}={}){return{northWestArrowSouthWest:(s,c)=>Se({top:r(s,c),left:s.left-i,name:"arrow_sw"},n&&{config:n}),northWestArrowSouthMiddleWest:(s,c)=>Se({top:r(s,c),left:s.left-c.width*.25-i,name:"arrow_smw"},n&&{config:n}),northWestArrowSouth:(s,c)=>Se({top:r(s,c),left:s.left-c.width/2,name:"arrow_s"},n&&{config:n}),northWestArrowSouthMiddleEast:(s,c)=>Se({top:r(s,c),left:s.left-c.width*.75+i,name:"arrow_sme"},n&&{config:n}),northWestArrowSouthEast:(s,c)=>Se({top:r(s,c),left:s.left-c.width+i,name:"arrow_se"},n&&{config:n}),northArrowSouthWest:(s,c)=>Se({top:r(s,c),left:s.left+s.width/2-i,name:"arrow_sw"},n&&{config:n}),northArrowSouthMiddleWest:(s,c)=>Se({top:r(s,c),left:s.left+s.width/2-c.width*.25-i,name:"arrow_smw"},n&&{config:n}),northArrowSouth:(s,c)=>Se({top:r(s,c),left:s.left+s.width/2-c.width/2,name:"arrow_s"},n&&{config:n}),northArrowSouthMiddleEast:(s,c)=>Se({top:r(s,c),left:s.left+s.width/2-c.width*.75+i,name:"arrow_sme"},n&&{config:n}),northArrowSouthEast:(s,c)=>Se({top:r(s,c),left:s.left+s.width/2-c.width+i,name:"arrow_se"},n&&{config:n}),northEastArrowSouthWest:(s,c)=>Se({top:r(s,c),left:s.right-i,name:"arrow_sw"},n&&{config:n}),northEastArrowSouthMiddleWest:(s,c)=>Se({top:r(s,c),left:s.right-c.width*.25-i,name:"arrow_smw"},n&&{config:n}),northEastArrowSouth:(s,c)=>Se({top:r(s,c),left:s.right-c.width/2,name:"arrow_s"},n&&{config:n}),northEastArrowSouthMiddleEast:(s,c)=>Se({top:r(s,c),left:s.right-c.width*.75+i,name:"arrow_sme"},n&&{config:n}),northEastArrowSouthEast:(s,c)=>Se({top:r(s,c),left:s.right-c.width+i,name:"arrow_se"},n&&{config:n}),southWestArrowNorthWest:(s,c)=>Se({top:o(s),left:s.left-i,name:"arrow_nw"},n&&{config:n}),southWestArrowNorthMiddleWest:(s,c)=>Se({top:o(s),left:s.left-c.width*.25-i,name:"arrow_nmw"},n&&{config:n}),southWestArrowNorth:(s,c)=>Se({top:o(s),left:s.left-c.width/2,name:"arrow_n"},n&&{config:n}),southWestArrowNorthMiddleEast:(s,c)=>Se({top:o(s),left:s.left-c.width*.75+i,name:"arrow_nme"},n&&{config:n}),southWestArrowNorthEast:(s,c)=>Se({top:o(s),left:s.left-c.width+i,name:"arrow_ne"},n&&{config:n}),southArrowNorthWest:(s,c)=>Se({top:o(s),left:s.left+s.width/2-i,name:"arrow_nw"},n&&{config:n}),southArrowNorthMiddleWest:(s,c)=>Se({top:o(s),left:s.left+s.width/2-c.width*.25-i,name:"arrow_nmw"},n&&{config:n}),southArrowNorth:(s,c)=>Se({top:o(s),left:s.left+s.width/2-c.width/2,name:"arrow_n"},n&&{config:n}),southArrowNorthMiddleEast:(s,c)=>Se({top:o(s),left:s.left+s.width/2-c.width*.75+i,name:"arrow_nme"},n&&{config:n}),southArrowNorthEast:(s,c)=>Se({top:o(s),left:s.left+s.width/2-c.width+i,name:"arrow_ne"},n&&{config:n}),southEastArrowNorthWest:(s,c)=>Se({top:o(s),left:s.right-i,name:"arrow_nw"},n&&{config:n}),southEastArrowNorthMiddleWest:(s,c)=>Se({top:o(s),left:s.right-c.width*.25-i,name:"arrow_nmw"},n&&{config:n}),southEastArrowNorth:(s,c)=>Se({top:o(s),left:s.right-c.width/2,name:"arrow_n"},n&&{config:n}),southEastArrowNorthMiddleEast:(s,c)=>Se({top:o(s),left:s.right-c.width*.75+i,name:"arrow_nme"},n&&{config:n}),southEastArrowNorthEast:(s,c)=>Se({top:o(s),left:s.right-c.width+i,name:"arrow_ne"},n&&{config:n}),viewportStickyNorth:(s,c,u)=>s.getIntersection(u)?{top:u.top+t,left:s.left+s.width/2-c.width/2,name:"arrowless",config:Se({withArrow:!1},n)}:null};function r(s,c){return s.top-c.height-e}function o(s){return s.bottom+e}}var mR='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',pR='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _u=Uh("px");class ku extends be{static get pluginName(){return"ContextualBalloon"}constructor(e){super(e);this.positionLimiter=()=>{const t=this.editor.editing.view,r=t.document.selection.editableElement;return r?t.domConverter.mapViewToDom(r.root):null},this.set("visibleView",null),this.view=new li(e.locale),e.ui.view.body.add(this.view),e.ui.focusTracker.add(this.view.element),this._viewToStack=new Map,this._idToStack=new Map,this.set("_numberOfStacks",0),this.set("_singleViewMode",!1),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}destroy(){super.destroy(),this.view.destroy(),this._rotatorView.destroy(),this._fakePanelsView.destroy()}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this.hasView(e.view))throw new H("contextualballoon-add-view-exist",[this,e]);const t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}const n=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),n.set(e.view,e),this._viewToStack.set(e.view,n),n===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new H("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new H("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(n=>n[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new gR(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(n,r)=>!r&&n>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(n,r)=>{if(r<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[o,r])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new bR(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,n)=>!n&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:n=!0,singleViewMode:r=!1}){this.view.class=t,this.view.withArrow=n,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}}class gR extends rt{constructor(e){super(e);const t=e.t,n=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new $i,this.buttonPrevView=this._createButtonView(t("Previous"),mR),this.buttonNextView=this._createButtonView(t("Next"),pR),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",n.to("isNavigationVisible",r=>r?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:n.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const n=new Dt(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n}}class bR extends rt{constructor(e,t){super(e);const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",n.to("numberOfPanels",r=>r?"":"ck-hidden")],style:{top:n.to("top",_u),left:n.to("left",_u),width:n.to("width",_u),height:n.to("height",_u)}},children:this.content}),this.on("change:numberOfPanels",(r,o,s,c)=>{s>c?this._addPanels(s-c):this._removePanels(c-s),this.updatePosition()})}_addPanels(e){for(;e--;){const t=new rt;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:t}=this._balloonPanelView,{width:n,height:r}=new Et(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:n,height:r})}}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ol=Uh("px");class wR extends rt{constructor(e){super(e);const t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheLimiter",!1),this.set("_hasViewportTopOffset",!1),this.content=this.createCollection(),this._contentPanelPlaceholder=new Si({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",n=>n?"block":"none"),height:t.to("isSticky",n=>n?Ol(this._panelRect.height):null)}}}).render(),this._contentPanel=new Si({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",n=>n?Ol(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_hasViewportTopOffset",n=>n?Ol(this.viewportTopOffset):null),bottom:t.to("_isStickyToTheLimiter",n=>n?Ol(this.limiterBottomOffset):null),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this._checkIfShouldBeSticky(),this.listenTo(Ht.window,"scroll",()=>{this._checkIfShouldBeSticky()}),this.listenTo(this,"change:isActive",()=>{this._checkIfShouldBeSticky()})}_checkIfShouldBeSticky(){const e=this._panelRect=this._contentPanel.getBoundingClientRect();let t;this.limiterElement?(t=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&t.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<t.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=t.bottom<e.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:Ol(-Ht.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vR({origin:i,originKeystrokeHandler:e,originFocusTracker:t,toolbar:n,beforeFocus:r,afterBlur:o}){t.add(n.element),e.set("Alt+F10",(s,c)=>{t.isFocused&&!n.focusTracker.isFocused&&(r&&r(),n.focus(),c())}),n.keystrokes.set("Esc",(s,c)=>{n.focusTracker.isFocused&&(i.focus(),o&&o(),c())})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Eu=new WeakMap;function Ev(i){const{view:e,element:t,text:n,isDirectHost:r=!0,keepOnFocus:o=!1}=i,s=e.document;Eu.has(s)||(Eu.set(s,new Map),s.registerPostFixer(c=>Cv(s,c))),Eu.get(s).set(t,{text:n,isDirectHost:r,keepOnFocus:o,hostElement:r?t:null}),e.change(c=>Cv(s,c))}function yR(i,e){return e.hasClass("ck-placeholder")?!1:(i.addClass("ck-placeholder",e),!0)}function _R(i,e){return e.hasClass("ck-placeholder")?(i.removeClass("ck-placeholder",e),!0):!1}function kR(i,e){if(!i.isAttached()||Array.from(i.getChildren()).some(s=>!s.is("uiElement")))return!1;if(e)return!0;const n=i.document;if(!n.isFocused)return!0;const o=n.selection.anchor;return o&&o.parent!==i}function Cv(i,e){const t=Eu.get(i),n=[];let r=!1;for(const[o,s]of t)s.isDirectHost&&(n.push(o),Tv(e,o,s)&&(r=!0));for(const[o,s]of t){if(s.isDirectHost)continue;const c=ER(o);!c||n.includes(c)||(s.hostElement=c,Tv(e,o,s)&&(r=!0))}return r}function Tv(i,e,t){const{text:n,isDirectHost:r,hostElement:o}=t;let s=!1;return o.getAttribute("data-placeholder")!==n&&(i.setAttribute("data-placeholder",n,o),s=!0),(r||e.childCount==1)&&kR(o,t.keepOnFocus)?yR(i,o)&&(s=!0):_R(i,o)&&(s=!0),s}function ER(i){if(i.childCount){const e=i.getChild(0);if(e.is("element")&&!e.is("uiElement"))return e}return null}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yf=new Map;function gt(i,e,t){let n=yf.get(i);n||(n=new Map,yf.set(i,n)),n.set(e,t)}function CR(i,e){const t=yf.get(i);return t&&t.has(e)?t.get(e):TR}function TR(i){return[i]}function Sv(i,e,t={}){const n=CR(i.constructor,e.constructor);try{return i=i.clone(),n(i,e,t)}catch(r){throw r}}function SR(i,e,t){i=i.slice(),e=e.slice();const n=new xR(t.document,t.useRelations,t.forceWeakRemove);n.setOriginalOperations(i),n.setOriginalOperations(e);const r=n.originalOperations;if(i.length==0||e.length==0)return{operationsA:i,operationsB:e,originalOperations:r};const o=new WeakMap;for(const u of i)o.set(u,0);const s={nextBaseVersionA:i[i.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:i.length,originalOperationsBCount:e.length};let c=0;for(;c<i.length;){const u=i[c],h=o.get(u);if(h==e.length){c++;continue}const f=e[h],p=Sv(u,f,n.getContext(u,f,!0)),y=Sv(f,u,n.getContext(f,u,!1));n.updateRelation(u,f),n.setOriginalOperations(p,u),n.setOriginalOperations(y,f);for(const T of p)o.set(T,h+y.length);i.splice(c,1,...p),e.splice(h,1,...y)}if(t.padWithNoOps){const u=i.length-s.originalOperationsACount,h=e.length-s.originalOperationsBCount;Pv(i,h-u),Pv(e,u-h)}return xv(i,s.nextBaseVersionB),xv(e,s.nextBaseVersionA),{operationsA:i,operationsB:e,originalOperations:r}}class xR{constructor(e,t,n=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(e,t=null){const n=t?this.originalOperations.get(t):null;for(const r of e)this.originalOperations.set(r,n||r)}updateRelation(e,t){switch(e.constructor){case Tt:{switch(t.constructor){case cn:{e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter");break}case Tt:{e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter");break}}break}case Nt:{switch(t.constructor){case cn:{e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");break}case Tt:if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const n=oe._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)){const r=n.end.offset-e.splitPosition.offset,o=e.splitPosition.offset-n.start.offset;this._setRelation(e,t,{howMany:r,offset:o})}}}break}case cn:{switch(t.constructor){case cn:{e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement");break}case Nt:e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource")}break}case si:{const n=e.newRange;if(!n)return;switch(t.constructor){case Tt:{const r=oe._createFromPositionAndShift(t.sourcePosition,t.howMany),o=r.containsPosition(n.start)||r.start.isEqual(n.start),s=r.containsPosition(n.end)||r.end.isEqual(n.end);(o||s)&&!r.containsRange(n)&&this._setRelation(e,t,{side:o?"left":"right",path:o?n.start.path.slice():n.end.path.slice()});break}case cn:{const r=n.start.isEqual(t.targetPosition),o=n.start.isEqual(t.deletionPosition),s=n.end.isEqual(t.deletionPosition),c=n.end.isEqual(t.sourcePosition);(r||o||s||c)&&this._setRelation(e,t,{wasInLeftElement:r,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:s,wasInRightElement:c});break}}break}}}getContext(e,t,n){return{aIsStrong:n,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const n=this.originalOperations.get(t),r=this._history.getUndoneOperation(n);if(!r)return null;const o=this.originalOperations.get(e),s=this._relations.get(o);return s&&s.get(r)||null}_setRelation(e,t,n){const r=this.originalOperations.get(e),o=this.originalOperations.get(t);let s=this._relations.get(r);s||(s=new Map,this._relations.set(r,s)),s.set(o,n)}}function xv(i,e){for(const t of i)t.baseVersion=e++}function Pv(i,e){for(let t=0;t<e;t++)i.push(new kn(0))}gt(tn,tn,(i,e,t)=>{if(i.key===e.key&&i.range.start.hasSameParentAs(e.range.start)){const n=i.range.getDifference(e.range).map(o=>new tn(o,i.key,i.oldValue,i.newValue,0)),r=i.range.getIntersection(e.range);return r&&t.aIsStrong&&n.push(new tn(r,e.key,e.newValue,i.newValue,0)),n.length==0?[new kn(0)]:n}else return[i]});gt(tn,_n,(i,e)=>{if(i.range.start.hasSameParentAs(e.position)&&i.range.containsPosition(e.position)){const n=i.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(r=>new tn(r,i.key,i.oldValue,i.newValue,i.baseVersion));if(e.shouldReceiveAttributes){const r=Av(e,i.key,i.oldValue);r&&n.unshift(r)}return n}return i.range=i.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[i]});function Av(i,e,t){const r=i.nodes.getNode(0).getAttribute(e);if(r==t)return null;const o=new oe(i.position,i.position.getShiftedBy(i.howMany));return new tn(o,e,r,t,0)}gt(tn,cn,(i,e)=>{const t=[];i.range.start.hasSameParentAs(e.deletionPosition)&&(i.range.containsPosition(e.deletionPosition)||i.range.start.isEqual(e.deletionPosition))&&t.push(oe._createFromPositionAndShift(e.graveyardPosition,1));const n=i.range._getTransformedByMergeOperation(e);return n.isCollapsed||t.push(n),t.map(r=>new tn(r,i.key,i.oldValue,i.newValue,i.baseVersion))});gt(tn,Tt,(i,e)=>PR(i.range,e).map(n=>new tn(n,i.key,i.oldValue,i.newValue,i.baseVersion)));function PR(i,e){const t=oe._createFromPositionAndShift(e.sourcePosition,e.howMany);let n=null,r=[];t.containsRange(i,!0)?n=i:i.start.hasSameParentAs(t.start)?(r=i.getDifference(t),n=i.getIntersection(t)):r=[i];const o=[];for(let s of r){s=s._getTransformedByDeletion(e.sourcePosition,e.howMany);const c=e.getMovedRangeStart(),u=s.start.hasSameParentAs(c);s=s._getTransformedByInsertion(c,e.howMany,u),o.push(...s)}return n&&o.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),o}gt(tn,Nt,(i,e)=>{if(i.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||i.range.end.offset++,[i];if(i.range.start.hasSameParentAs(e.splitPosition)&&i.range.containsPosition(e.splitPosition)){const t=i.clone();return t.range=new oe(e.moveTargetPosition.clone(),i.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),i.range.end=e.splitPosition.clone(),i.range.end.stickiness="toPrevious",[i,t]}return i.range=i.range._getTransformedBySplitOperation(e),[i]});gt(_n,tn,(i,e)=>{const t=[i];if(i.shouldReceiveAttributes&&i.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(i.position)){const n=Av(i,e.key,e.newValue);n&&t.push(n)}return t});gt(_n,_n,(i,e,t)=>i.position.isEqual(e.position)&&t.aIsStrong?[i]:(i.position=i.position._getTransformedByInsertOperation(e),[i]));gt(_n,Tt,(i,e)=>(i.position=i.position._getTransformedByMoveOperation(e),[i]));gt(_n,Nt,(i,e)=>(i.position=i.position._getTransformedBySplitOperation(e),[i]));gt(_n,cn,(i,e)=>(i.position=i.position._getTransformedByMergeOperation(e),[i]));gt(si,_n,(i,e)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByInsertOperation(e)[0]),i.newRange&&(i.newRange=i.newRange._getTransformedByInsertOperation(e)[0]),[i]));gt(si,si,(i,e,t)=>{if(i.name==e.name)if(t.aIsStrong)i.oldRange=e.newRange?e.newRange.clone():null;else return[new kn(0)];return[i]});gt(si,cn,(i,e)=>(i.oldRange&&(i.oldRange=i.oldRange._getTransformedByMergeOperation(e)),i.newRange&&(i.newRange=i.newRange._getTransformedByMergeOperation(e)),[i]));gt(si,Tt,(i,e,t)=>{if(i.oldRange&&(i.oldRange=oe._createFromRanges(i.oldRange._getTransformedByMoveOperation(e))),i.newRange){if(t.abRelation){const n=oe._createFromRanges(i.newRange._getTransformedByMoveOperation(e));if(t.abRelation.side=="left"&&e.targetPosition.isEqual(i.newRange.start))return i.newRange.start.path=t.abRelation.path,i.newRange.end=n.end,[i];if(t.abRelation.side=="right"&&e.targetPosition.isEqual(i.newRange.end))return i.newRange.start=n.start,i.newRange.end.path=t.abRelation.path,[i]}i.newRange=oe._createFromRanges(i.newRange._getTransformedByMoveOperation(e))}return[i]});gt(si,Nt,(i,e,t)=>{if(i.oldRange&&(i.oldRange=i.oldRange._getTransformedBySplitOperation(e)),i.newRange){if(t.abRelation){const n=i.newRange._getTransformedBySplitOperation(e);return i.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?i.newRange.start=fe._createAt(e.insertionPosition):i.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement&&(i.newRange.start=fe._createAt(e.moveTargetPosition)),i.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?i.newRange.end=fe._createAt(e.moveTargetPosition):i.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?i.newRange.end=fe._createAt(e.insertionPosition):i.newRange.end=n.end,[i]}i.newRange=i.newRange._getTransformedBySplitOperation(e)}return[i]});gt(cn,_n,(i,e)=>(i.sourcePosition.hasSameParentAs(e.position)&&(i.howMany+=e.howMany),i.sourcePosition=i.sourcePosition._getTransformedByInsertOperation(e),i.targetPosition=i.targetPosition._getTransformedByInsertOperation(e),[i]));gt(cn,cn,(i,e,t)=>{if(i.sourcePosition.isEqual(e.sourcePosition)&&i.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){const n=e.graveyardPosition.path.slice();return n.push(0),i.sourcePosition=new fe(e.graveyardPosition.root,n),i.howMany=0,[i]}else return[new kn(0)];if(i.sourcePosition.isEqual(e.sourcePosition)&&!i.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const n=i.targetPosition.root.rootName=="$graveyard",r=e.targetPosition.root.rootName=="$graveyard";if(r&&!n||!(n&&!r)&&t.aIsStrong){const u=e.targetPosition._getTransformedByMergeOperation(e),h=i.targetPosition._getTransformedByMergeOperation(e);return[new Tt(u,i.howMany,h,0)]}else return[new kn(0)]}return i.sourcePosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.sourcePosition=i.sourcePosition._getTransformedByMergeOperation(e),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),(!i.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(e)),[i]});gt(cn,Tt,(i,e,t)=>{const n=oe._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&i.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(i.sourcePosition)?[new kn(0)]:(i.sourcePosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.sourcePosition.hasSameParentAs(e.sourcePosition)&&(i.howMany-=e.howMany),i.sourcePosition=i.sourcePosition._getTransformedByMoveOperation(e),i.targetPosition=i.targetPosition._getTransformedByMoveOperation(e),i.graveyardPosition.isEqual(e.targetPosition)||(i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(e)),[i])});gt(cn,Nt,(i,e,t)=>{if(e.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),i.deletionPosition.isEqual(e.graveyardPosition)&&(i.howMany=e.howMany)),i.targetPosition.isEqual(e.splitPosition)){const n=e.howMany!=0,r=e.graveyardPosition&&i.deletionPosition.isEqual(e.graveyardPosition);if(n||r||t.abRelation=="mergeTargetNotMoved")return i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(e),[i]}if(i.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return i.howMany=0,i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i];if(t.abRelation=="mergeSameElement"||i.sourcePosition.offset>0)return i.sourcePosition=e.moveTargetPosition.clone(),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i]}return i.sourcePosition.hasSameParentAs(e.splitPosition)&&(i.howMany=e.splitPosition.offset),i.sourcePosition=i.sourcePosition._getTransformedBySplitOperation(e),i.targetPosition=i.targetPosition._getTransformedBySplitOperation(e),[i]});gt(Tt,_n,(i,e)=>{const n=oe._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByInsertOperation(e,!1)[0];return i.sourcePosition=n.start,i.howMany=n.end.offset-n.start.offset,i.targetPosition.isEqual(e.position)||(i.targetPosition=i.targetPosition._getTransformedByInsertOperation(e)),[i]});gt(Tt,Tt,(i,e,t)=>{const n=oe._createFromPositionAndShift(i.sourcePosition,i.howMany),r=oe._createFromPositionAndShift(e.sourcePosition,e.howMany);let o=t.aIsStrong,s=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?s=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(s=!1);let c;if(i.targetPosition.isEqual(e.targetPosition)&&s?c=i.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):c=i.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Iv(i,e)&&Iv(e,i))return[e.getReversed()];if(n.containsPosition(e.targetPosition)&&n.containsRange(r,!0))return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),pa([n],c);if(r.containsPosition(i.targetPosition)&&r.containsRange(n,!0))return n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),pa([n],c);const f=Ln(i.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(f=="prefix"||f=="extension")return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),pa([n],c);i.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?o=!0:i.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(o=!1);const p=[],y=n.getDifference(r);for(const A of y){A.start=A.start._getTransformedByDeletion(e.sourcePosition,e.howMany),A.end=A.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const M=Ln(A.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",B=A._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,M);p.push(...B)}const T=n.getIntersection(r);return T!==null&&o&&(T.start=T.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),T.end=T.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),p.length===0?p.push(T):p.length==1?r.start.isBefore(n.start)||r.start.isEqual(n.start)?p.unshift(T):p.push(T):p.splice(1,0,T)),p.length===0?[new kn(i.baseVersion)]:pa(p,c)});gt(Tt,Nt,(i,e,t)=>{let n=i.targetPosition.clone();(!i.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(n=i.targetPosition._getTransformedBySplitOperation(e));const r=oe._createFromPositionAndShift(i.sourcePosition,i.howMany);if(r.end.isEqual(e.insertionPosition))return e.graveyardPosition||i.howMany++,i.targetPosition=n,[i];if(r.start.hasSameParentAs(e.splitPosition)&&r.containsPosition(e.splitPosition)){let c=new oe(e.splitPosition,r.end);c=c._getTransformedBySplitOperation(e);const u=[new oe(r.start,e.splitPosition),c];return pa(u,n)}i.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(n=e.moveTargetPosition),i.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(n=i.targetPosition);const s=[r._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const c=r.start.isEqual(e.graveyardPosition)||r.containsPosition(e.graveyardPosition);i.howMany>1&&c&&!t.aWasUndone&&s.push(oe._createFromPositionAndShift(e.insertionPosition,1))}return pa(s,n)});gt(Tt,cn,(i,e,t)=>{const n=oe._createFromPositionAndShift(i.sourcePosition,i.howMany);if(e.deletionPosition.hasSameParentAs(i.sourcePosition)&&n.containsPosition(e.sourcePosition)){if(i.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const s=[];let c=e.graveyardPosition.clone(),u=e.targetPosition._getTransformedByMergeOperation(e);i.howMany>1&&(s.push(new Tt(i.sourcePosition,i.howMany-1,i.targetPosition,0)),c=c._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany-1),u=u._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany-1));const h=e.deletionPosition._getCombined(i.sourcePosition,i.targetPosition),f=new Tt(c,1,h,0),p=f.getMovedRangeStart().path.slice();p.push(0);const y=new fe(f.targetPosition.root,p);u=u._getTransformedByMove(c,h,1);const T=new Tt(u,e.howMany,y,0);return s.push(f),s.push(T),s}}else if(i.howMany==1)return t.bWasUndone?(i.sourcePosition=e.graveyardPosition.clone(),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),[i]):[new kn(0)]}const o=oe._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByMergeOperation(e);return i.sourcePosition=o.start,i.howMany=o.end.offset-o.start.offset,i.targetPosition=i.targetPosition._getTransformedByMergeOperation(e),[i]});gt(ai,_n,(i,e)=>(i.position=i.position._getTransformedByInsertOperation(e),[i]));gt(ai,cn,(i,e)=>i.position.isEqual(e.deletionPosition)?(i.position=e.graveyardPosition.clone(),i.position.stickiness="toNext",[i]):(i.position=i.position._getTransformedByMergeOperation(e),[i]));gt(ai,Tt,(i,e)=>(i.position=i.position._getTransformedByMoveOperation(e),[i]));gt(ai,ai,(i,e,t)=>{if(i.position.isEqual(e.position))if(t.aIsStrong)i.oldName=e.newName;else return[new kn(0)];return[i]});gt(ai,Nt,(i,e)=>{const t=i.position.path,n=e.splitPosition.getParentPath();if(Ln(t,n)=="same"&&!e.graveyardPosition){const r=new ai(i.position.getShiftedBy(1),i.oldName,i.newName,0);return[i,r]}return i.position=i.position._getTransformedBySplitOperation(e),[i]});gt(oo,oo,(i,e,t)=>{if(i.root===e.root&&i.key===e.key){if(!t.aIsStrong||i.newValue===e.newValue)return[new kn(0)];i.oldValue=e.newValue}return[i]});gt(Nt,_n,(i,e)=>(i.splitPosition.hasSameParentAs(e.position)&&i.splitPosition.offset<e.position.offset&&(i.howMany+=e.howMany),i.splitPosition=i.splitPosition._getTransformedByInsertOperation(e),i.insertionPosition=i.insertionPosition._getTransformedByInsertOperation(e),[i]));gt(Nt,cn,(i,e,t)=>{if(!i.graveyardPosition&&!t.bWasUndone&&i.splitPosition.hasSameParentAs(e.sourcePosition)){const n=e.graveyardPosition.path.slice();n.push(0);const r=new fe(e.graveyardPosition.root,n),o=Nt.getInsertionPosition(new fe(e.graveyardPosition.root,n)),s=new Nt(r,0,o,null,0);return i.splitPosition=i.splitPosition._getTransformedByMergeOperation(e),i.insertionPosition=Nt.getInsertionPosition(i.splitPosition),i.graveyardPosition=s.insertionPosition.clone(),i.graveyardPosition.stickiness="toNext",[s,i]}return i.splitPosition.hasSameParentAs(e.deletionPosition)&&!i.splitPosition.isAfter(e.deletionPosition)&&i.howMany--,i.splitPosition.hasSameParentAs(e.targetPosition)&&(i.howMany+=e.howMany),i.splitPosition=i.splitPosition._getTransformedByMergeOperation(e),i.insertionPosition=Nt.getInsertionPosition(i.splitPosition),i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedByMergeOperation(e)),[i]});gt(Nt,Tt,(i,e,t)=>{const n=oe._createFromPositionAndShift(e.sourcePosition,e.howMany);if(i.graveyardPosition){const o=n.start.isEqual(i.graveyardPosition)||n.containsPosition(i.graveyardPosition);if(!t.bWasUndone&&o){const s=i.splitPosition._getTransformedByMoveOperation(e),c=i.graveyardPosition._getTransformedByMoveOperation(e),u=c.path.slice();u.push(0);const h=new fe(c.root,u);return[new Tt(s,i.howMany,h,0)]}i.graveyardPosition=i.graveyardPosition._getTransformedByMoveOperation(e)}const r=i.splitPosition.isEqual(e.targetPosition);if(r&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return i.howMany+=e.howMany,i.splitPosition=i.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),i.insertionPosition=Nt.getInsertionPosition(i.splitPosition),[i];if(r&&t.abRelation&&t.abRelation.howMany){const{howMany:o,offset:s}=t.abRelation;return i.howMany+=o,i.splitPosition=i.splitPosition.getShiftedBy(s),[i]}if(i.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(i.splitPosition)){const o=e.howMany-(i.splitPosition.offset-e.sourcePosition.offset);return i.howMany-=o,i.splitPosition.hasSameParentAs(e.targetPosition)&&i.splitPosition.offset<e.targetPosition.offset&&(i.howMany+=e.howMany),i.splitPosition=e.sourcePosition.clone(),i.insertionPosition=Nt.getInsertionPosition(i.splitPosition),[i]}return e.sourcePosition.isEqual(e.targetPosition)||(i.splitPosition.hasSameParentAs(e.sourcePosition)&&i.splitPosition.offset<=e.sourcePosition.offset&&(i.howMany-=e.howMany),i.splitPosition.hasSameParentAs(e.targetPosition)&&i.splitPosition.offset<e.targetPosition.offset&&(i.howMany+=e.howMany)),i.splitPosition.stickiness="toNone",i.splitPosition=i.splitPosition._getTransformedByMoveOperation(e),i.splitPosition.stickiness="toNext",i.graveyardPosition?i.insertionPosition=i.insertionPosition._getTransformedByMoveOperation(e):i.insertionPosition=Nt.getInsertionPosition(i.splitPosition),[i]});gt(Nt,Nt,(i,e,t)=>{if(i.splitPosition.isEqual(e.splitPosition)){if(!i.graveyardPosition&&!e.graveyardPosition)return[new kn(0)];if(i.graveyardPosition&&e.graveyardPosition&&i.graveyardPosition.isEqual(e.graveyardPosition))return[new kn(0)];if(t.abRelation=="splitBefore")return i.howMany=0,i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(e),[i]}if(i.graveyardPosition&&e.graveyardPosition&&i.graveyardPosition.isEqual(e.graveyardPosition)){const n=i.splitPosition.root.rootName=="$graveyard",r=e.splitPosition.root.rootName=="$graveyard";if(r&&!n||!(n&&!r)&&t.aIsStrong){const u=[];return e.howMany&&u.push(new Tt(e.moveTargetPosition,e.howMany,e.splitPosition,0)),i.howMany&&u.push(new Tt(i.splitPosition,i.howMany,i.moveTargetPosition,0)),u}else return[new kn(0)]}if(i.graveyardPosition&&(i.graveyardPosition=i.graveyardPosition._getTransformedBySplitOperation(e)),i.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return i.howMany++,[i];if(e.splitPosition.isEqual(i.insertionPosition)&&t.baRelation=="splitBefore"){const n=e.insertionPosition.path.slice();n.push(0);const r=new fe(e.insertionPosition.root,n),o=new Tt(i.insertionPosition,1,r,0);return[i,o]}return i.splitPosition.hasSameParentAs(e.splitPosition)&&i.splitPosition.offset<e.splitPosition.offset&&(i.howMany-=e.howMany),i.splitPosition=i.splitPosition._getTransformedBySplitOperation(e),i.insertionPosition=Nt.getInsertionPosition(i.splitPosition),[i]});function Iv(i,e){return i.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function pa(i,e){const t=[];for(let n=0;n<i.length;n++){const r=i[n],o=new Tt(r.start,r.end.offset-r.start.offset,e,0);t.push(o);for(let s=n+1;s<i.length;s++)i[s]=i[s]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return t}class AR extends Bo{constructor(e){super(e);this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cu extends Bo{constructor(e){super(e);this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ga{constructor(e){this.document=e}createDocumentFragment(e){return new ks(this.document,e)}createElement(e,t,n){return new Wi(this.document,e,t,n)}createText(e){return new It(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,n){return n._insertChild(e,t)}removeChildren(e,t,n){return n._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const n=e.parent;if(n){const r=n.getChildIndex(e);return this.removeChildren(r,1,n),this.insertChild(r,t,n),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const n=t.getChildIndex(e);this.remove(e),this.insertChild(n,e.getChildren(),t)}}rename(e,t){const n=new Wi(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,n)?n:null}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){Hi(e)&&n===void 0&&(n=t),n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return Ce._createAt(e,t)}createPositionAfter(e){return Ce._createAfter(e)}createPositionBefore(e){return Ce._createBefore(e)}createRange(e,t){return new Je(e,t)}createRangeOn(e){return Je._createOn(e)}createRangeIn(e){return Je._createIn(e)}createSelection(e,t,n){return new rr(e,t,n)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IR extends Zw{constructor(e,t){super(e);this.view=t,this._toolbarConfig=wv(e.config.get("toolbar")),this._elementReplacer=new FP}get element(){return this.view.element}init(e){const t=this.editor,n=this.view,r=t.editing.view,o=n.editable,s=r.document.getRoot();o.name=s.rootName,n.render();const c=o.element;this.setEditableElement(o.name,c),this.focusTracker.add(c),n.editable.bind("isFocused").to(this.focusTracker),r.attachDomRoot(c),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){const e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.detachDomRoot(e.editable.name),e.destroy(),super.destroy()}_initToolbar(){const e=this.editor,t=this.view,n=e.editing.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,t.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:r})=>r),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),vR({origin:n,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:t.toolbar})}_initPlaceholder(){const e=this.editor,t=e.editing.view,n=t.document.getRoot(),r=e.sourceElement,o=e.config.get("placeholder")||r&&r.tagName.toLowerCase()==="textarea"&&r.getAttribute("placeholder");o&&Ev({view:t,element:n,text:o,isDirectHost:!1,keepOnFocus:!0})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RR extends lR{constructor(e,t,n={}){super(e);this.stickyPanel=new wR(e),this.toolbar=new mf(e,{shouldGroupWhenFull:n.shouldToolbarGroupWhenFull}),this.editable=new uR(e,t)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _f extends Xw{constructor(e,t){super(t);No(e)&&(this.sourceElement=e),this.model.document.createRoot();const n=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=new RR(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:n});this.ui=new IR(this,r),tI(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(n=>{const r=new this(e,t);n(r.initPlugins().then(()=>r.ui.init(No(e)?e:null)).then(()=>{if(!No(e)&&t.initialData)throw new H("editor-create-initial-data",null);const o=t.initialData!==void 0?t.initialData:MR(e);return r.data.init(o)}).then(()=>r.fire("ready")).then(()=>r))})}}je(_f,nI);je(_f,iI);function MR(i){return No(i)?HP(i):i}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OR{constructor(e){this.files=NR(e),this._native=e}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function NR(i){const e=Array.from(i.files||[]),t=Array.from(i.items||[]);return e.length?e:t.filter(n=>n.kind==="file").map(n=>n.getAsFile())}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kf extends Bo{constructor(e){super(e);const t=this.document;this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],this.listenTo(t,"paste",n("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",n("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",n("dragging"),{priority:"low"});function n(r){return(o,s)=>{s.preventDefault();const c=s.dropRange?[s.dropRange]:null,u=new Ro(t,r);t.fire(u,{dataTransfer:s.dataTransfer,method:o.name,targetRanges:c,target:s.target}),u.stop.called&&s.stopPropagation()}}}onDomEvent(e){const t={dataTransfer:new OR(e.clipboardData?e.clipboardData:e.dataTransfer)};(e.type=="drop"||e.type=="dragover")&&(t.dropRange=DR(this.view,e)),this.fire(e.type,e,t)}}function DR(i,e){const t=e.target.ownerDocument,n=e.clientX,r=e.clientY;let o;return t.caretRangeFromPoint&&t.caretRangeFromPoint(n,r)?o=t.caretRangeFromPoint(n,r):e.rangeParent&&(o=t.createRange(),o.setStart(e.rangeParent,e.rangeOffset),o.collapse(!0)),o?i.domConverter.domRangeToView(o):null}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function BR(i){return i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(i.includes("</p><p>")||i.includes("<br>"))&&(i=`<p>${i}</p>`),i}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function VR(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Rv=["figcaption","li"];function Mv(i){let e="";if(i.is("$text")||i.is("$textProxy"))e=i.data;else if(i.is("element","img")&&i.hasAttribute("alt"))e=i.getAttribute("alt");else if(i.is("element","br"))e=`
`;else{let t=null;for(const n of i.getChildren()){const r=Mv(n);t&&(t.is("containerElement")||n.is("containerElement"))&&(Rv.includes(t.name)||Rv.includes(n.name)?e+=`
`:e+=`

`),e+=r,t=n}}return e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ar extends be{static get pluginName(){return"ClipboardPipeline"}init(){this.editor.editing.view.addObserver(kf),this._setupPasteDrop(),this._setupCopyCut()}_setupPasteDrop(){const e=this.editor,t=e.model,n=e.editing.view,r=n.document;this.listenTo(r,"clipboardInput",o=>{e.isReadOnly&&o.stop()},{priority:"highest"}),this.listenTo(r,"clipboardInput",(o,s)=>{const c=s.dataTransfer;let u=s.content||"";u||(c.getData("text/html")?u=VR(c.getData("text/html")):c.getData("text/plain")&&(u=BR(c.getData("text/plain"))),u=this.editor.data.htmlProcessor.toView(u));const h=new Ro(this,"inputTransformation");this.fire(h,{content:u,dataTransfer:c,targetRanges:s.targetRanges,method:s.method}),h.stop.called&&o.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,s)=>{if(s.content.isEmpty)return;const u=this.editor.data.toModel(s.content,"$clipboardHolder");u.childCount!=0&&(o.stop(),t.change(()=>{this.fire("contentInsertion",{content:u,method:s.method,dataTransfer:s.dataTransfer,targetRanges:s.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,s)=>{s.resultRange=t.insertContent(s.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,r=e.editing.view.document;function o(s,c){const u=c.dataTransfer;c.preventDefault();const h=e.data.toView(e.model.getSelectedContent(t.selection));r.fire("clipboardOutput",{dataTransfer:u,content:h,method:s.name})}this.listenTo(r,"copy",o,{priority:"low"}),this.listenTo(r,"cut",(s,c)=>{e.isReadOnly?c.preventDefault():o(s,c)},{priority:"low"}),this.listenTo(r,"clipboardOutput",(s,c)=>{c.content.isEmpty||(c.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(c.content)),c.dataTransfer.setData("text/plain",Mv(c.content))),c.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function*Ov(i,e){for(const t of e)t&&i.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LR extends at{execute(){const e=this.editor.model,t=e.document;e.change(n=>{FR(this.editor.model,n,t.selection,e.schema),this.fire("afterExecute",{writer:n})})}}function FR(i,e,t,n){const r=t.isCollapsed,o=t.getFirstRange(),s=o.start.parent,c=o.end.parent;if(n.isLimit(s)||n.isLimit(c)){!r&&s==c&&i.deleteContent(t);return}if(r){const u=Ov(e.model.schema,t.getAttributes());Nv(e,o.start),e.setSelectionAttribute(u)}else{const u=!(o.start.isAtStart&&o.end.isAtEnd),h=s==c;i.deleteContent(t,{leaveUnmerged:u}),u&&(h?Nv(e,t.focus):e.setSelection(c,0))}}function Nv(i,e){i.split(e),i.setSelection(e.parent.nextSibling,0)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dv extends eo{constructor(e){super(e);const t=this.document;t.on("keydown",(n,r)=>{if(this.isEnabled&&r.keyCode==ut.enter){const o=new ru(t,"enter",t.selection.getFirstRange());t.fire(o,new Hh(t,r.domEvent,{isSoft:r.shiftKey})),o.stop.called&&n.stop()}})}observe(){}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tu extends be{static get pluginName(){return"Enter"}init(){const e=this.editor,t=e.editing.view,n=t.document;t.addObserver(Dv),e.commands.add("enter",new LR(e)),this.listenTo(n,"enter",(r,o)=>{o.preventDefault(),!o.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bv{constructor(e,t=20){this.model=e,this.size=0,this.limit=t,this.isLocked=!1,this._changeCallback=(n,r)=>{r.type!="transparent"&&r!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch()),this._batch}input(e){this.size+=e,this.size>=this.limit&&this._reset(!0)}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e){(!this.isLocked||e)&&(this._batch=null,this.size=0)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vv extends at{constructor(e,t){super(e);this.direction=t,this._buffer=new Bv(e.model,e.config.get("typing.undoStep"))}get buffer(){return this._buffer}execute(e={}){const t=this.editor.model,n=t.document;t.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();const o=r.createSelection(e.selection||n.selection),s=e.sequence||1,c=o.isCollapsed;if(o.isCollapsed&&t.modifySelection(o,{direction:this.direction,unit:e.unit}),this._shouldEntireContentBeReplacedWithParagraph(s)){this._replaceEntireContentWithParagraph(r);return}if(this._shouldReplaceFirstBlockWithParagraph(o,s)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let u=0;o.getFirstRange().getMinimalFlatRanges().forEach(h=>{u+=Ph(h.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(o,{doNotResetEntireContent:c,direction:this.direction}),this._buffer.input(u),r.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const t=this.editor.model,r=t.document.selection,o=t.schema.getLimitElement(r);if(!(r.isCollapsed&&r.containsEntireContent(o))||!t.schema.checkChild(o,"paragraph"))return!1;const c=o.getChild(0);return!(c&&c.name==="paragraph")}_replaceEntireContentWithParagraph(e){const t=this.editor.model,r=t.document.selection,o=t.schema.getLimitElement(r),s=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(s,o),e.setSelection(s,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const n=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;const r=e.getFirstPosition(),o=n.schema.getLimitElement(r),s=o.getChild(0);return!(r.parent!=s||!e.containsEntireContent(s)||!n.schema.checkChild(o,"paragraph")||s.name=="paragraph")}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zR(i,e){const t=[];let n=0,r;return i.forEach(c=>{c=="equal"?(o(),n++):c=="insert"?(s("insert")?r.values.push(e[n]):(o(),r={type:"insert",index:n,values:[e[n]]}),n++):s("delete")?r.howMany++:(o(),r={type:"delete",index:n,howMany:1})}),o(),t;function o(){r&&(t.push(r),r=null)}function s(c){return r&&r.type==c}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function HR(i){if(i.length==0)return!1;for(const e of i)if(e.type==="children"&&!Lv(e))return!0;return!1}function Lv(i){if(i.newChildren.length-i.oldChildren.length!=1)return;const e=Do(i.oldChildren,i.newChildren,UR),t=zR(e,i.newChildren);if(t.length>1)return;const n=t[0];if(!!(!!n.values[0]&&n.values[0].is("$text")))return n}function UR(i,e){return!!i&&i.is("$text")&&!!e&&e.is("$text")?i.data===e.data:i===e}function Fv(i,e){const t=e.selection,n=i.shiftKey&&i.keyCode===ut.delete,r=!t.isCollapsed;return n&&r}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WR extends eo{constructor(e){super(e);const t=e.document;let n=0;t.on("keyup",(o,s)=>{(s.keyCode==ut.delete||s.keyCode==ut.backspace)&&(n=0)}),t.on("keydown",(o,s)=>{if(At.isWindows&&Fv(s,t))return;const c={};if(s.keyCode==ut.delete)c.direction="forward",c.unit="character";else if(s.keyCode==ut.backspace)c.direction="backward",c.unit="codePoint";else return;const u=At.isMac?s.altKey:s.ctrlKey;c.unit=u?"word":c.unit,c.sequence=++n,r(o,s.domEvent,c)}),At.isAndroid&&t.on("beforeinput",(o,s)=>{if(s.domEvent.inputType!="deleteContentBackward")return;const c={unit:"codepoint",direction:"backward",sequence:1},u=s.domTarget.ownerDocument.defaultView.getSelection();u.anchorNode==u.focusNode&&u.anchorOffset+1!=u.focusOffset&&(c.selectionToRemove=e.domConverter.domSelectionToView(u)),r(o,s.domEvent,c)});function r(o,s,c){const u=new ru(t,"delete",t.selection.getFirstRange());t.fire(u,new Hh(t,s,c)),u.stop.called&&o.stop()}}observe(){}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lo extends be{static get pluginName(){return"Delete"}init(){const e=this.editor,t=e.editing.view,n=t.document,r=e.model.document;t.addObserver(WR),this._undoOnBackspace=!1;const o=new Vv(e,"forward");if(e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new Vv(e,"backward")),this.listenTo(n,"delete",(s,c)=>{const u={unit:c.unit,sequence:c.sequence};if(c.selectionToRemove){const h=e.model.createSelection(),f=[];for(const p of c.selectionToRemove.getRanges())f.push(e.editing.mapper.toModelRange(p));h.setTo(f),u.selection=h}e.execute(c.direction=="forward"?"deleteForward":"delete",u),c.preventDefault(),t.scrollToTheSelection()},{priority:"low"}),At.isAndroid){let s=null;this.listenTo(n,"delete",(c,u)=>{const h=u.domTarget.ownerDocument.defaultView.getSelection();s={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}},{priority:"lowest"}),this.listenTo(n,"keyup",(c,u)=>{if(s){const h=u.domTarget.ownerDocument.defaultView.getSelection();h.collapse(s.anchorNode,s.anchorOffset),h.extend(s.focusNode,s.focusOffset),s=null}})}this.editor.plugins.has("UndoEditing")&&(this.listenTo(n,"delete",(s,c)=>{this._undoOnBackspace&&c.direction=="backward"&&c.sequence==1&&c.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),c.preventDefault(),s.stop())},{context:"$capture"}),this.listenTo(r,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zv{constructor(){this._stack=[]}add(e,t){const n=this._stack,r=n[0];this._insertDescriptor(e);const o=n[0];r!==o&&!Ef(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:t})}remove(e,t){const n=this._stack,r=n[0];this._removeDescriptor(e);const o=n[0];r!==o&&!Ef(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:t})}_insertDescriptor(e){const t=this._stack,n=t.findIndex(o=>o.id===e.id);if(Ef(e,t[n]))return;n>-1&&t.splice(n,1);let r=0;for(;t[r]&&$R(t[r],e);)r++;t.splice(r,0,e)}_removeDescriptor(e){const t=this._stack,n=t.findIndex(r=>r.id===e);n>-1&&t.splice(n,1)}}je(zv,xt);function Ef(i,e){return i&&e&&i.priority==e.priority&&Su(i.classes)==Su(e.classes)}function $R(i,e){return i.priority>e.priority?!0:i.priority<e.priority?!1:Su(i.classes)>Su(e.classes)}function Su(i){return Array.isArray(i)?i.sort().join(","):i}var jR='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const qR="ck-widget",Hv="ck-widget_selected";function jt(i){return i.is("element")?!!i.getCustomProperty("widget"):!1}function Cf(i,e,t={}){if(!i.is("containerElement"))throw new H("widget-to-widget-wrong-element-type",null,{element:i});return e.setAttribute("contenteditable","false",i),e.addClass(qR,i),e.setCustomProperty("widget",!0,i),i.getFillerOffset=QR,t.label&&YR(i,t.label,e),t.hasSelectionHandle&&XR(i,e),Uv(i,e),i}function KR(i,e,t){if(e.classes&&t.addClass(yn(e.classes),i),e.attributes)for(const n in e.attributes)t.setAttribute(n,e.attributes[n],i)}function GR(i,e,t){if(e.classes&&t.removeClass(yn(e.classes),i),e.attributes)for(const n in e.attributes)t.removeAttribute(n,i)}function Uv(i,e,t=KR,n=GR){const r=new zv;r.on("change:top",(o,s)=>{s.oldDescriptor&&n(i,s.oldDescriptor,s.writer),s.newDescriptor&&t(i,s.newDescriptor,s.writer)}),e.setCustomProperty("addHighlight",(o,s,c)=>r.add(s,c),i),e.setCustomProperty("removeHighlight",(o,s,c)=>r.remove(s,c),i)}function YR(i,e,t){t.setCustomProperty("widgetLabel",e,i)}function JR(i){const e=i.getCustomProperty("widgetLabel");return e?typeof e=="function"?e():e:""}function Tf(i,e){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],i),e.setAttribute("contenteditable",i.isReadOnly?"false":"true",i),i.on("change:isReadOnly",(t,n,r)=>{e.setAttribute("contenteditable",r?"false":"true",i)}),i.on("change:isFocused",(t,n,r)=>{r?e.addClass("ck-editor__nested-editable_focused",i):e.removeClass("ck-editor__nested-editable_focused",i)}),Uv(i,e),i}function ba(i,e){const t=i.getSelectedElement();if(t){const r=As(i);if(r)return e.createRange(e.createPositionAt(t,r));if(e.schema.isObject(t)&&!e.schema.isInline(t))return e.createRangeOn(t)}const n=i.getSelectedBlocks().next().value;if(n){if(n.isEmpty)return e.createRange(e.createPositionAt(n,0));const r=e.createPositionAfter(n);return i.focus.isTouching(r)?e.createRange(r):e.createRange(e.createPositionBefore(n))}return e.createRange(i.focus)}function QR(){return null}function XR(i,e){const t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(n){const r=this.toDomElement(n),o=new vu;return o.set("content",jR),o.render(),r.appendChild(o.element),r});e.insert(e.createPositionAt(i,0),t),e.addClass(["ck-widget_with-selection-handle"],i)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const so="widget-type-around";function Ps(i,e,t){return i&&jt(i)&&!t.isInline(e)}function ZR(i){return i.closest(".ck-widget__type-around__button")}function e5(i){return i.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function t5(i,e){const t=i.closest(".ck-widget");return e.mapDomToView(t)}function As(i){return i.getAttribute(so)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function n5(i){let e=null;const t=i.model,n=i.editing.view,r=i.commands.get("input");At.isAndroid?n.document.on("beforeinput",(u,h)=>o(h),{priority:"lowest"}):n.document.on("keydown",(u,h)=>o(h),{priority:"lowest"}),n.document.on("compositionstart",s,{priority:"lowest"}),n.document.on("compositionend",()=>{e=t.createSelection(t.document.selection)},{priority:"lowest"});function o(u){if(At.isWindows&&Fv(u,n.document))return;const h=t.document,f=n.document.isComposing,p=e&&e.isEqual(h.selection);e=null,!!r.isEnabled&&($v(u)||h.selection.isCollapsed||f&&u.keyCode===229||!f&&u.keyCode===229&&p||c())}function s(){const u=t.document,h=u.selection.rangeCount===1?u.selection.getFirstRange().isFlat:!0;u.selection.isCollapsed||h||c()}function c(){const u=r.buffer;u.lock();const h=u.batch;r._batches.add(h),t.enqueueChange(h,()=>{t.deleteContent(t.document.selection)}),u.unlock()}}const Wv=[Tr("arrowUp"),Tr("arrowRight"),Tr("arrowDown"),Tr("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(let i=112;i<=135;i++)Wv.push(i);function $v(i){return i.ctrlKey||i.metaKey?!0:Wv.includes(i.keyCode)}var i5='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jv=["before","after"],r5=new DOMParser().parseFromString(i5,"image/svg+xml").firstChild,qv="ck-widget__type-around_disabled";class o5 extends be{static get pluginName(){return"WidgetTypeAround"}static get requires(){return[Tu,Lo]}constructor(e){super(e);this._currentFakeCaretModelElement=null}init(){const e=this.editor,t=e.editing.view;this.on("change:isEnabled",(n,r,o)=>{t.change(s=>{for(const c of t.document.roots)o?s.removeClass(qv,c):s.addClass(qv,c)}),o||e.model.change(s=>{s.removeSelectionAttribute(so)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableDeleteContentIntegration()}destroy(){this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const n=this.editor,r=n.editing.view;n.execute("insertParagraph",{position:n.model.createPositionAt(e,t)}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(e,t,n,r){this.listenTo(e,t,(...o)=>{this.isEnabled&&n(...o)},r)}_insertParagraphAccordingToFakeCaretPosition(){const n=this.editor.model.document.selection,r=As(n);if(!r)return!1;const o=n.getSelectedElement();return this._insertParagraph(o,r),!0}_enableTypeAroundUIInjection(){const e=this.editor,t=e.model.schema,n=e.locale.t,r={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,s,c)=>{const u=c.mapper.toViewElement(s.item);Ps(u,s.item,t)&&s5(c.writer,r,u)},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,t=e.model,n=t.document.selection,r=t.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(c,u)=>{this._handleArrowKeyPress(c,u)},{context:[jt,"$text"],priority:"high"}),this._listenToIfEnabled(n,"change:range",(c,u)=>{!u.directChange||e.model.change(h=>{h.removeSelectionAttribute(so)})}),this._listenToIfEnabled(t.document,"change:data",()=>{const c=n.getSelectedElement();if(c){const u=e.editing.mapper.toViewElement(c);if(Ps(u,c,r))return}e.model.change(u=>{u.removeSelectionAttribute(so)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(c,u,h)=>{const f=h.writer;if(this._currentFakeCaretModelElement){const A=h.mapper.toViewElement(this._currentFakeCaretModelElement);A&&(f.removeClass(jv.map(s),A),this._currentFakeCaretModelElement=null)}const p=u.selection.getSelectedElement();if(!p)return;const y=h.mapper.toViewElement(p);if(!Ps(y,p,r))return;const T=As(u.selection);!T||(f.addClass(s(T),y),this._currentFakeCaretModelElement=p)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(c,u,h)=>{h||e.model.change(f=>{f.removeSelectionAttribute(so)})});function s(c){return`ck-widget_type-around_show-fake-caret_${c}`}}_handleArrowKeyPress(e,t){const n=this.editor,r=n.model,o=r.document.selection,s=r.schema,c=n.editing.view,u=t.keyCode,h=sP(u,n.locale.contentLanguageDirection),f=c.document.selection.getSelectedElement(),p=n.editing.mapper.toModelElement(f);let y;Ps(f,p,s)?y=this._handleArrowKeyPressOnSelectedWidget(h):o.isCollapsed?y=this._handleArrowKeyPressWhenSelectionNextToAWidget(h):t.shiftKey||(y=this._handleArrowKeyPressWhenNonCollapsedSelection(h)),y&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const n=this.editor.model,r=n.document.selection,o=As(r);return n.change(s=>{if(o){if(!(o===(e?"after":"before")))return s.removeSelectionAttribute(so),!0}else return s.setSelectionAttribute(so,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const t=this.editor,n=t.model,r=n.schema,o=t.plugins.get("Widget"),s=o._getObjectElementNextToSelection(e),c=t.editing.mapper.toViewElement(s);return Ps(c,s,r)?(n.change(u=>{o._setSelectionOverElement(s),u.setSelectionAttribute(so,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const t=this.editor,n=t.model,r=n.schema,o=t.editing.mapper,s=n.document.selection,c=e?s.getLastPosition().nodeBefore:s.getFirstPosition().nodeAfter,u=o.toViewElement(c);return Ps(u,c,r)?(n.change(h=>{h.setSelection(c,"on"),h.setSelectionAttribute(so,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(n,r)=>{const o=ZR(r.domTarget);if(!o)return;const s=e5(o),c=t5(o,t.domConverter),u=e.editing.mapper.toModelElement(c);this._insertParagraph(u,s),r.preventDefault(),n.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,t=e.model.document.selection,n=e.editing.view;this._listenToIfEnabled(n.document,"enter",(r,o)=>{if(r.eventPhase!="atTarget")return;const s=t.getSelectedElement(),c=e.editing.mapper.toViewElement(s),u=e.model.schema;let h;this._insertParagraphAccordingToFakeCaretPosition()?h=!0:Ps(c,s,u)&&(this._insertParagraph(s,o.isSoft?"before":"after"),h=!0),h&&(o.preventDefault(),r.stop())},{context:jt})}_enableInsertingParagraphsOnTypingKeystroke(){const t=this.editor.editing.view,n=[ut.enter,ut.delete,ut.backspace];this._listenToIfEnabled(t.document,"keydown",(r,o)=>{!n.includes(o.keyCode)&&!$v(o)&&this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,t=e.editing.view,n=e.model,r=n.schema;this._listenToIfEnabled(t.document,"delete",(o,s)=>{if(o.eventPhase!="atTarget")return;const c=As(n.document.selection);if(!c)return;const u=s.direction,h=n.document.selection.getSelectedElement(),f=c==="before",p=u=="forward";if(f===p)e.execute("delete",{selection:n.createSelection(h,"on")});else{const T=r.getNearestSelectionRange(n.createPositionAt(h,c),u);if(T)if(!T.isCollapsed)n.change(A=>{A.setSelection(T),e.execute(p?"deleteForward":"delete")});else{const A=n.createSelection(T.start);if(n.modifySelection(A,{direction:u}),!A.focus.isEqual(T.start))n.change(M=>{M.setSelection(T),e.execute(p?"deleteForward":"delete")});else{const M=c5(r,T.start.parent);n.deleteContent(n.createSelection(M,"on"),{doNotAutoparagraph:!0})}}}s.preventDefault(),o.stop()},{context:jt})}_enableInsertContentIntegration(){const e=this.editor,t=this.editor.model,n=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(r,[o,s])=>{if(s&&!s.is("documentSelection"))return;const c=As(n);if(!!c)return r.stop(),t.change(u=>{const h=n.getSelectedElement(),f=t.createPositionAt(h,c),p=u.createSelection(f),y=t.insertContent(o,p);return u.setSelection(p),y})},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,n=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(r,[o])=>{if(o&&!o.is("documentSelection"))return;As(n)&&r.stop()},{priority:"high"})}}function s5(i,e,t){const n=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(r){const o=this.toDomElement(r);return a5(o,e),l5(o),o});i.insert(i.createPositionAt(t,"end"),n)}function a5(i,e){for(const t of jv){const n=new Si({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t]},children:[i.ownerDocument.importNode(r5,!0)]});i.appendChild(n.render())}}function l5(i){const e=new Si({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});i.appendChild(e.render())}function c5(i,e){let t=e;for(const n of e.getAncestors({parentFirst:!0})){if(n.childCount>1||i.isLimit(n))break;t=n}return t}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function u5(i){const e=i.model;return(t,n)=>{const r=n.keyCode==ut.arrowup,o=n.keyCode==ut.arrowdown,s=n.shiftKey,c=e.document.selection;if(!r&&!o)return;const u=o;if(s&&f5(c,u))return;const h=d5(i,c,u);if(!!h){if(h.isCollapsed){if(c.isCollapsed)return;if(s)return}(h.isCollapsed||h5(i,h,u))&&(e.change(f=>{const p=u?h.end:h.start;if(s){const y=e.createSelection(c.anchor);y.setFocus(p),f.setSelection(y)}else f.setSelection(p)}),t.stop(),n.preventDefault(),n.stopPropagation())}}}function d5(i,e,t){const n=i.model;if(t){const r=e.isCollapsed?e.focus:e.getLastPosition(),o=Kv(n,r,"forward");if(!o)return null;const s=n.createRange(r,o),c=Gv(n.schema,s,"backward");return c?n.createRange(r,c):null}else{const r=e.isCollapsed?e.focus:e.getFirstPosition(),o=Kv(n,r,"backward");if(!o)return null;const s=n.createRange(o,r),c=Gv(n.schema,s,"forward");return c?n.createRange(c,r):null}}function Kv(i,e,t){const n=i.schema,r=i.createRangeIn(e.root),o=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:s,item:c,type:u}of r.getWalker({startPosition:e,direction:t})){if(n.isLimit(c)&&!n.isInline(c))return s;if(u==o&&n.isBlock(c))return null}return null}function Gv(i,e,t){const n=t=="backward"?e.end:e.start;if(i.checkChild(n,"$text"))return n;for(const{nextPosition:r}of e.getWalker({direction:t}))if(i.checkChild(r,"$text"))return r;return null}function h5(i,e,t){const n=i.model,r=i.view.domConverter;if(t){const h=n.createSelection(e.start);n.modifySelection(h),!h.focus.isAtEnd&&!e.start.isEqual(h.focus)&&(e=n.createRange(h.focus,e.end))}const o=i.mapper.toViewRange(e),s=r.viewRangeToDom(o),c=Et.getDomRangeRects(s);let u;for(const h of c){if(u===void 0){u=Math.round(h.bottom);continue}if(Math.round(h.top)>=u)return!1;u=Math.max(u,Math.round(h.bottom))}return!0}function f5(i,e){return!i.isCollapsed&&i.isBackward==e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wa extends be{static get pluginName(){return"Widget"}static get requires(){return[o5,Lo]}init(){const e=this.editor,t=e.editing.view,n=t.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",(r,o,s)=>{const c=s.writer,u=o.selection;if(u.isCollapsed)return;const h=u.getSelectedElement();if(!h)return;const f=e.editing.mapper.toViewElement(h);!jt(f)||!s.consumable.consume(u,"selection")||c.setSelection(c.createRangeOn(f),{fake:!0,label:JR(f)})}),this.editor.editing.downcastDispatcher.on("selection",(r,o,s)=>{this._clearPreviouslySelectedWidgets(s.writer);const c=s.writer,u=c.document.selection;let h=null;for(const f of u.getRanges())for(const p of f){const y=p.item;jt(y)&&!p5(y,h)&&(c.addClass(Hv,y),this._previouslySelected.add(y),h=y)}},{priority:"low"}),t.addObserver(Cu),this.listenTo(n,"mousedown",(...r)=>this._onMousedown(...r)),this.listenTo(n,"arrowKey",(...r)=>{this._handleSelectionChangeOnArrowKeyPress(...r)},{context:[jt,"$text"]}),this.listenTo(n,"arrowKey",(...r)=>{this._preventDefaultOnArrowKeyPress(...r)},{context:"$root"}),this.listenTo(n,"arrowKey",u5(this.editor.editing),{context:"$text"}),this.listenTo(n,"delete",(r,o)=>{this._handleDelete(o.direction=="forward")&&(o.preventDefault(),r.stop())},{context:"$root"})}_onMousedown(e,t){const n=this.editor,r=n.editing.view,o=r.document;let s=t.target;if(m5(s)){if((At.isSafari||At.isGecko)&&t.domEvent.detail>=3){const u=n.editing.mapper,h=s.is("attributeElement")?s.findAncestor(p=>!p.is("attributeElement")):s,f=u.toModelElement(h);t.preventDefault(),this.editor.model.change(p=>{p.setSelection(f,"in")})}return}if(!jt(s)&&(s=s.findAncestor(jt),!s))return;At.isAndroid&&t.preventDefault(),o.isFocused||r.focus();const c=n.editing.mapper.toModelElement(s);this._setSelectionOverElement(c)}_handleSelectionChangeOnArrowKeyPress(e,t){const n=t.keyCode,r=this.editor.model,o=r.schema,s=r.document.selection,c=s.getSelectedElement(),u=Nh(n,this.editor.locale.contentLanguageDirection),h=u=="down"||u=="right",f=u=="up"||u=="down";if(c&&o.isObject(c)){const y=h?s.getLastPosition():s.getFirstPosition(),T=o.getNearestSelectionRange(y,h?"forward":"backward");T&&(r.change(A=>{A.setSelection(T)}),t.preventDefault(),e.stop());return}if(!s.isCollapsed&&!t.shiftKey){const y=s.getFirstPosition(),T=s.getLastPosition(),A=y.nodeAfter,M=T.nodeBefore;(A&&o.isObject(A)||M&&o.isObject(M))&&(r.change(B=>{B.setSelection(h?T:y)}),t.preventDefault(),e.stop());return}if(!s.isCollapsed)return;const p=this._getObjectElementNextToSelection(h);if(p&&o.isObject(p)){if(o.isInline(p)&&f)return;this._setSelectionOverElement(p),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){const n=this.editor.model,r=n.schema,o=n.document.selection.getSelectedElement();o&&r.isObject(o)&&(t.preventDefault(),e.stop())}_handleDelete(e){if(this.editor.isReadOnly)return;const n=this.editor.model.document.selection;if(!n.isCollapsed)return;const r=this._getObjectElementNextToSelection(e);if(r)return this.editor.model.change(o=>{let s=n.anchor.parent;for(;s.isEmpty;){const c=s;s=c.parent,o.remove(c)}this._setSelectionOverElement(r)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){const t=this.editor.model,n=t.schema,r=t.document.selection,o=t.createSelection(r);if(t.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(r))return null;const s=e?o.focus.nodeBefore:o.focus.nodeAfter;return!!s&&n.isObject(s)?s:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(Hv,t);this._previouslySelected.clear()}}function m5(i){for(;i;){if(i.is("editableElement")&&!i.is("rootElement"))return!0;if(jt(i))return!1;i=i.parent}return!1}function p5(i,e){return e?Array.from(i.getAncestors()).includes(e):!1}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class g5 extends be{static get pluginName(){return"DragDrop"}static get requires(){return[Ar,wa]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=rb(n=>this._updateDropMarker(n),40),this._removeDropMarkerDelayed=Qv(()=>this._removeDropMarker(),40),this._clearDraggableAttributesDelayed=Qv(()=>this._clearDraggableAttributes(),40),t.addObserver(kf),t.addObserver(Cu),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(n,r,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(n,r,o)=>{o||this._finalizeDragging(!1)}),At.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,t=e.model,n=t.document,r=e.editing.view,o=r.document;this.listenTo(o,"dragstart",(s,c)=>{const u=n.selection;if(c.target&&c.target.is("editableElement")){c.preventDefault();return}const h=c.target?Xv(c.target):null;if(h){const y=e.editing.mapper.toModelElement(h);this._draggedRange=Pr.fromRange(t.createRangeOn(y)),e.plugins.has("WidgetToolbarRepository")&&e.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop")}else if(!o.selection.isCollapsed){const y=o.selection.getSelectedElement();(!y||!jt(y))&&(this._draggedRange=Pr.fromRange(u.getFirstRange()))}if(!this._draggedRange){c.preventDefault();return}this._draggingUid=yr(),c.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",c.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const f=t.createSelection(this._draggedRange.toRange()),p=e.data.toView(t.getSelectedContent(f));o.fire("clipboardOutput",{dataTransfer:c.dataTransfer,content:p,method:s.name}),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(o,"dragend",(s,c)=>{this._finalizeDragging(!c.dataTransfer.isCanceled&&c.dataTransfer.dropEffect=="move")},{priority:"low"}),this.listenTo(o,"dragenter",()=>{!this.isEnabled||r.focus()}),this.listenTo(o,"dragleave",()=>{this._removeDropMarkerDelayed()}),this.listenTo(o,"dragging",(s,c)=>{if(!this.isEnabled){c.dataTransfer.dropEffect="none";return}this._removeDropMarkerDelayed.cancel();const u=Yv(e,c.targetRanges,c.target);this._draggedRange||(c.dataTransfer.dropEffect="copy"),At.isGecko||(c.dataTransfer.effectAllowed=="copy"?c.dataTransfer.dropEffect="copy":["all","copyMove"].includes(c.dataTransfer.effectAllowed)&&(c.dataTransfer.dropEffect="move")),u&&this._updateDropMarkerThrottled(u)},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,n=e.editing.view.document;this.listenTo(n,"clipboardInput",(r,o)=>{if(o.method!="drop")return;const s=Yv(e,o.targetRanges,o.target);if(this._removeDropMarker(),!s){this._finalizeDragging(!1),r.stop();return}if(this._draggedRange&&this._draggingUid!=o.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),Jv(o.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(s,!0)){this._finalizeDragging(!1),r.stop();return}o.targetRanges=[e.editing.mapper.toViewRange(s)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(Ar);e.on("contentInsertion",(t,n)=>{if(!this.isEnabled||n.method!=="drop")return;const r=n.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(r))},{priority:"high"}),e.on("contentInsertion",(t,n)=>{if(!this.isEnabled||n.method!=="drop")return;const r=Jv(n.dataTransfer)=="move",o=!n.resultRange||!n.resultRange.isCollapsed;this._finalizeDragging(o&&r)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,t=e.editing.view,n=t.document;this.listenTo(n,"mousedown",(r,o)=>{if(At.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let s=Xv(o.target);if(At.isBlink&&!e.isReadOnly&&!s&&!n.selection.isCollapsed){const c=n.selection.getSelectedElement();(!c||!jt(c))&&(s=n.selection.editableElement)}s&&(t.change(c=>{c.setAttribute("draggable","true",s)}),this._draggableElement=e.editing.mapper.toModelElement(s))}),this.listenTo(n,"mouseup",()=>{At.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_setupDropMarker(){const e=this.editor;e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:n})=>{if(!!e.model.schema.checkChild(t.markerRange.start,"$text"))return n.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(o){const s=this.toDomElement(o);return s.innerHTML="&NoBreak;<span></span>&NoBreak;",s})}})}_updateDropMarker(e){const t=this.editor,n=t.model.markers;t.model.change(r=>{n.has("drop-target")?n.get("drop-target").getRange().isEqual(e)||r.updateMarker("drop-target",{range:e}):r.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_removeDropMarker(){const e=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_finalizeDragging(e){const t=this.editor,n=t.model;this._removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",!!this._draggedRange&&(e&&this.isEnabled&&n.deleteContent(n.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}function Yv(i,e,t){const n=i.model,r=i.editing.mapper;let o=null;const s=e?e[0].start:null;if(t.is("uiElement")&&(t=t.parent),o=b5(i,t),o)return o;const c=_5(i,t),u=s?r.toModelPosition(s):null;return u?(o=v5(i,u,c),o||(o=n.schema.getNearestSelectionRange(u,At.isGecko?"forward":"backward"),o)?o:y5(i,u.parent)):w5(i,c)}function b5(i,e){const t=i.model,n=i.editing.mapper;if(jt(e))return t.createRangeOn(n.toModelElement(e));if(!e.is("editableElement")){const r=e.findAncestor(o=>jt(o)||o.is("editableElement"));if(jt(r))return t.createRangeOn(n.toModelElement(r))}return null}function w5(i,e){const t=i.model,n=t.schema,r=t.createPositionAt(e,0);return n.getNearestSelectionRange(r,"forward")}function v5(i,e,t){const n=i.model;if(!n.schema.checkChild(t,"$block"))return null;const r=n.createPositionAt(t,0),o=e.path.slice(0,r.path.length),c=n.createPositionFromPath(e.root,o).nodeAfter;return c&&n.schema.isObject(c)?n.createRangeOn(c):null}function y5(i,e){const t=i.model;for(;e;){if(t.schema.isObject(e))return t.createRangeOn(e);e=e.parent}}function _5(i,e){const t=i.editing.mapper,n=i.editing.view,r=t.toModelElement(e);if(r)return r;const o=n.createPositionBefore(e),s=t.findMappedViewAncestor(o);return t.toModelElement(s)}function Jv(i){return At.isGecko?i.dropEffect:["all","copyMove"].includes(i.effectAllowed)?"move":"copy"}function Qv(i,e){let t;function n(...r){n.cancel(),t=setTimeout(()=>i(...r),e)}return n.cancel=()=>{clearTimeout(t)},n}function Xv(i){if(i.is("editableElement"))return null;if(i.hasClass("ck-widget__selection-handle"))return i.findAncestor(jt);if(jt(i))return i;const e=i.findAncestor(t=>jt(t)||t.is("editableElement"));return jt(e)?e:null}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class k5 extends be{static get pluginName(){return"PastePlainText"}static get requires(){return[Ar]}init(){const e=this.editor,t=e.model,n=e.editing.view,r=n.document,o=t.document.selection;let s=!1;n.addObserver(kf),this.listenTo(r,"keydown",(c,u)=>{s=u.shiftKey}),e.plugins.get(Ar).on("contentInsertion",(c,u)=>{!s&&!E5(u.content,t.schema)||t.change(h=>{const f=Array.from(o.getAttributes()).filter(([y])=>t.schema.getAttributeProperties(y).isFormatting);o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0}),f.push(...o.getAttributes());const p=h.createRangeIn(u.content);for(const y of p.getItems())y.is("$textProxy")&&h.setAttributes(f,y)})})}}function E5(i,e){if(i.childCount>1)return!1;const t=i.getChild(0);return e.isObject(t)?!1:[...t.getAttributeKeys()].length==0}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zv extends be{static get pluginName(){return"Clipboard"}static get requires(){return[Ar,g5,k5]}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class C5 extends at{execute(){const e=this.editor.model,t=e.document;e.change(n=>{S5(e,n,t.selection),this.fire("afterExecute",{writer:n})})}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=T5(e.schema,t.selection)}}function T5(i,e){if(e.rangeCount>1)return!1;const t=e.anchor;if(!t||!i.checkChild(t,"softBreak"))return!1;const n=e.getFirstRange(),r=n.start.parent,o=n.end.parent;return!((Sf(r,i)||Sf(o,i))&&r!==o)}function S5(i,e,t){const n=t.isCollapsed,r=t.getFirstRange(),o=r.start.parent,s=r.end.parent,c=o==s;if(n){const u=Ov(i.schema,t.getAttributes());ey(i,e,r.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(u)}else{const u=!(r.start.isAtStart&&r.end.isAtEnd);i.deleteContent(t,{leaveUnmerged:u}),c?ey(i,e,t.focus):u&&e.setSelection(s,0)}}function ey(i,e,t){const n=e.createElement("softBreak");i.insertContent(n,t),e.setSelection(n,"after")}function Sf(i,e){return i.is("rootElement")?!1:e.isLimit(i)||Sf(i.parent,e)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class x5 extends be{static get pluginName(){return"ShiftEnter"}init(){const e=this.editor,t=e.model.schema,n=e.conversion,r=e.editing.view,o=r.document;t.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(s,{writer:c})=>c.createEmptyElement("br")}),r.addObserver(Dv),e.commands.add("shiftEnter",new C5(e)),this.listenTo(o,"enter",(s,c)=>{c.preventDefault(),!!c.isSoft&&(e.execute("shiftEnter"),r.scrollToTheSelection())},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P5 extends at{constructor(e){super(e);this.affectsData=!1}execute(){const e=this.editor.model,t=e.document.selection;let n=e.schema.getLimitElement(t);if(t.containsEntireContent(n)||!ty(e.schema,n))do if(n=n.parent,!n)return;while(!ty(e.schema,n));e.change(r=>{r.setSelection(n,"in")})}}function ty(i,e){return i.isLimit(e)&&(i.checkChild(e,"$text")||i.checkChild(e,"paragraph"))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const A5=Oh("Ctrl+A");class I5 extends be{static get pluginName(){return"SelectAllEditing"}init(){const e=this.editor,n=e.editing.view.document;e.commands.add("selectAll",new P5(e)),this.listenTo(n,"keydown",(r,o)=>{Tr(o)===A5&&(e.execute("selectAll"),o.preventDefault())})}}var R5='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M5 extends be{static get pluginName(){return"SelectAllUI"}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",t=>{const n=e.commands.get("selectAll"),r=new Dt(t),o=t.t;return r.set({label:o("Select all"),icon:R5,keystroke:"Ctrl+A",tooltip:!0}),r.bind("isOn","isEnabled").to(n,"value","isEnabled"),this.listenTo(r,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),r})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class O5 extends be{static get requires(){return[I5,M5]}static get pluginName(){return"SelectAll"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N5 extends at{constructor(e,t){super(e);this._buffer=new Bv(e.model,t),this._batches=new WeakSet}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,n=t.document,r=e.text||"",o=r.length,s=e.range?t.createSelection(e.range):n.selection,c=e.resultRange;t.enqueueChange(this._buffer.batch,u=>{this._buffer.lock(),this._batches.add(this._buffer.batch),t.deleteContent(s),r&&t.insertContent(u.createText(r,n.selection.getAttributes()),s),c?u.setSelection(c):s.is("documentSelection")||u.setSelection(s),this._buffer.unlock(),this._buffer.input(o)})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function D5(i){i.editing.view.document.on("mutations",(e,t,n)=>{new B5(i).handle(t,n)})}class B5{constructor(e){this.editor=e,this.editing=this.editor.editing}handle(e,t){if(HR(e))this._handleContainerChildrenMutations(e,t);else for(const n of e)this._handleTextMutation(n,t),this._handleTextNodeInsertion(n)}_handleContainerChildrenMutations(e,t){const n=V5(e);if(!n)return;const o=this.editor.editing.view.domConverter.mapViewToDom(n),s=new lu(this.editor.editing.view.document),c=this.editor.data.toModel(s.domToView(o)).getChild(0),u=this.editor.editing.mapper.toModelElement(n);if(!u)return;const h=Array.from(c.getChildren()),f=Array.from(u.getChildren()),p=h[h.length-1],y=f[f.length-1],T=p&&p.is("element","softBreak"),A=y&&!y.is("element","softBreak");T&&A&&h.pop();const M=this.editor.model.schema;if(!ny(h,M)||!ny(f,M))return;const B=h.map(ve=>ve.is("$text")?ve.data:"@").join("").replace(/\u00A0/g," "),O=f.map(ve=>ve.is("$text")?ve.data:"@").join("").replace(/\u00A0/g," ");if(O===B)return;const V=Do(O,B),{firstChangeAt:F,insertions:Z,deletions:ae}=iy(V);let W=null;t&&(W=this.editing.mapper.toModelRange(t.getFirstRange()));const se=B.substr(F,Z),te=this.editor.model.createRange(this.editor.model.createPositionAt(u,F),this.editor.model.createPositionAt(u,F+ae));this.editor.execute("input",{text:se,range:te,resultRange:W})}_handleTextMutation(e,t){if(e.type!="text")return;const n=e.newText.replace(/\u00A0/g," "),r=e.oldText.replace(/\u00A0/g," ");if(r===n)return;const o=Do(r,n),{firstChangeAt:s,insertions:c,deletions:u}=iy(o);let h=null;t&&(h=this.editing.mapper.toModelRange(t.getFirstRange()));const f=this.editing.view.createPositionAt(e.node,s),p=this.editing.mapper.toModelPosition(f),y=this.editor.model.createRange(p,p.getShiftedBy(u)),T=n.substr(s,c);this.editor.execute("input",{text:T,range:y,resultRange:h})}_handleTextNodeInsertion(e){if(e.type!="children")return;const t=Lv(e),n=this.editing.view.createPositionAt(e.node,t.index),r=this.editing.mapper.toModelPosition(n),o=t.values[0].data;this.editor.execute("input",{text:o.replace(/\u00A0/g," "),range:this.editor.model.createRange(r)})}}function V5(i){const e=i.map(t=>t.node).reduce((t,n)=>t.getCommonAncestor(n,{includeSelf:!0}));if(!!e)return e.getAncestors({includeSelf:!0,parentFirst:!0}).find(t=>t.is("containerElement")||t.is("rootElement"))}function ny(i,e){return i.every(t=>e.isInline(t))}function iy(i){let e=null,t=null;for(let o=0;o<i.length;o++)i[o]!="equal"&&(e=e===null?o:e,t=o);let n=0,r=0;for(let o=e;o<=t;o++)i[o]!="insert"&&n++,i[o]!="delete"&&r++;return{insertions:r,deletions:n,firstChangeAt:e}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ry extends be{static get pluginName(){return"Input"}init(){const e=this.editor,t=new N5(e,e.config.get("typing.undoStep")||20);e.commands.add("input",t),n5(e),D5(e)}isInput(e){return this.editor.commands.get("input")._batches.has(e)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class L5 extends be{static get requires(){return[ry,Lo]}static get pluginName(){return"Typing"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function oy(i,e){let t=i.start;return{text:Array.from(i.getItems()).reduce((r,o)=>o.is("$text")||o.is("$textProxy")?r+o.data:(t=e.createPositionAfter(o),""),""),range:e.createRange(t,i.end)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xf{constructor(e,t){this.model=e,this.testCallback=t,this.hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}_startListening(){const t=this.model.document;this.listenTo(t.selection,"change:range",(n,{directChange:r})=>{if(!!r){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this.hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(n,r)=>{r.type!="transparent"&&this._evaluateTextBeforeSelection("data",{batch:r})})}_evaluateTextBeforeSelection(e,t={}){const n=this.model,o=n.document.selection,s=n.createRange(n.createPositionAt(o.focus.parent,0),o.focus),{text:c,range:u}=oy(s,n),h=this.testCallback(c);if(!h&&this.hasMatch&&this.fire("unmatched"),this.hasMatch=!!h,h){const f=Object.assign(t,{text:c,range:u});typeof h=="object"&&Object.assign(f,h),this.fire(`matched:${e}`,f)}}}je(xf,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sy extends be{static get pluginName(){return"TwoStepCaretMovement"}constructor(e){super(e);this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,n=e.editing.view,r=e.locale,o=t.document.selection;this.listenTo(n.document,"arrowKey",(s,c)=>{if(!o.isCollapsed||c.shiftKey||c.altKey||c.ctrlKey)return;const u=c.keyCode==ut.arrowright,h=c.keyCode==ut.arrowleft;if(!u&&!h)return;const f=r.contentLanguageDirection;let p=!1;f==="ltr"&&u||f==="rtl"&&h?p=this._handleForwardMovement(c):p=this._handleBackwardMovement(c),p===!0&&s.stop()},{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(o,"change:range",(s,c)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}!this._isGravityOverridden||!c.directChange&&Pu(o.getFirstPosition(),this.attributes)||this._restoreGravity()})}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,r=this.editor.model.document.selection,o=r.getFirstPosition();if(this._isGravityOverridden||o.isAtStart&&Pf(r,t))return!1;if(Pu(o,t))return xu(e),this._overrideGravity(),!0}_handleBackwardMovement(e){const t=this.attributes,n=this.editor.model,r=n.document.selection,o=r.getFirstPosition();if(this._isGravityOverridden)return xu(e),this._restoreGravity(),Af(n,t,o),!0;if(o.isAtStart)return Pf(r,t)?(xu(e),Af(n,t,o),!0):!1;if(F5(o,t))return o.isAtEnd&&!Pf(r,t)&&Pu(o,t)?(xu(e),Af(n,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1)}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function Pf(i,e){for(const t of e)if(i.hasAttribute(t))return!0;return!1}function Af(i,e,t){const n=t.nodeBefore;i.change(r=>{n?r.setSelectionAttribute(n.getAttributes()):r.removeSelectionAttribute(e)})}function xu(i){i.preventDefault()}function F5(i,e){const t=i.getShiftedBy(-1);return Pu(t,e)}function Pu(i,e){const{nodeBefore:t,nodeAfter:n}=i;for(const r of e){const o=t?t.getAttribute(r):void 0;if((n?n.getAttribute(r):void 0)!==o)return!0}return!1}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const z5={copyright:{from:"(c)",to:"\xA9"},registeredTrademark:{from:"(r)",to:"\xAE"},trademark:{from:"(tm)",to:"\u2122"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"\xBD",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"\u2153",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"\u2154",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"\xBC",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"\xBE",null]},lessThanOrEqual:{from:"<=",to:"\u2264"},greaterThanOrEqual:{from:">=",to:"\u2265"},notEqual:{from:"!=",to:"\u2260"},arrowLeft:{from:"<-",to:"\u2190"},arrowRight:{from:"->",to:"\u2192"},horizontalEllipsis:{from:"...",to:"\u2026"},enDash:{from:/(^| )(--)( )$/,to:[null,"\u2013",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"\u2014",null]},quotesPrimary:{from:va('"'),to:[null,"\u201C",null,"\u201D"]},quotesSecondary:{from:va("'"),to:[null,"\u2018",null,"\u2019"]},quotesPrimaryEnGb:{from:va("'"),to:[null,"\u2018",null,"\u2019"]},quotesSecondaryEnGb:{from:va('"'),to:[null,"\u201C",null,"\u201D"]},quotesPrimaryPl:{from:va('"'),to:[null,"\u201E",null,"\u201D"]},quotesSecondaryPl:{from:va("'"),to:[null,"\u201A",null,"\u2019"]}},ay={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},H5=["symbols","mathematical","typography","quotes"];class U5 extends be{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}constructor(e){super(e);e.config.define("typing",{transformations:{include:H5}})}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const e=this.editor,t=e.model,n=e.plugins.get("Input"),r=e.plugins.get("Delete"),o=q5(e.config.get("typing.transformations")),s=h=>{for(const f of o)if(f.from.test(h))return{normalizedTransformation:f}},c=(h,f)=>{if(!n.isInput(f.batch))return;const{from:p,to:y}=f.normalizedTransformation,T=p.exec(f.text),A=y(T.slice(1)),M=f.range;let B=T.index;t.enqueueChange(O=>{for(let V=1;V<T.length;V++){const F=T[V],Z=A[V-1];if(Z==null){B+=F.length;continue}const ae=M.start.getShiftedBy(B),W=t.createRange(ae,ae.getShiftedBy(F.length)),se=j5(ae);t.insertContent(O.createText(Z,se),W),B+=Z.length}t.enqueueChange(()=>{r.requestUndoOnBackspace()})})},u=new xf(e.model,s);u.on("matched:data",c),u.bind("isEnabled").to(this)}}function W5(i){return typeof i=="string"?new RegExp(`(${ox(i)})$`):i}function $5(i){return typeof i=="string"?()=>[i]:i instanceof Array?()=>i:i}function j5(i){return(i.textNode?i.textNode:i.nodeAfter).getAttributes()}function va(i){return new RegExp(`(^|\\s)(${i})([^${i}]*)(${i})$`)}function q5(i){const e=i.extra||[],t=i.remove||[],n=o=>!t.includes(o),r=i.include.concat(e).filter(n);return K5(r).filter(n).map(o=>z5[o]||o).map(o=>({from:W5(o.from),to:$5(o.to)}))}function K5(i){const e=new Set;for(const t of i)if(ay[t])for(const n of ay[t])e.add(n);else e.add(t);return Array.from(e)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ya(i,e,t,n){return n.createRange(ly(i,e,t,!0,n),ly(i,e,t,!1,n))}function ly(i,e,t,n,r){let o=i.textNode||(n?i.nodeBefore:i.nodeAfter),s=null;for(;o&&o.getAttribute(e)==t;)s=o,o=n?o.previousSibling:o.nextSibling;return s?r.createPositionAt(s,n?"before":"after"):i}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function G5(i,e,t,n){const r=i.editing.view,o=new Set;r.document.registerPostFixer(s=>{const c=i.model.document.selection;let u=!1;if(c.hasAttribute(e)){const h=ya(c.getFirstPosition(),e,c.getAttribute(e),i.model),f=i.editing.mapper.toViewRange(h);for(const p of f.getItems())p.is("element",t)&&!p.hasClass(n)&&(s.addClass(n,p),o.add(p),u=!0)}return u}),i.conversion.for("editingDowncast").add(s=>{s.on("insert",c,{priority:"highest"}),s.on("remove",c,{priority:"highest"}),s.on("attribute",c,{priority:"highest"}),s.on("selection",c,{priority:"highest"});function c(){r.change(u=>{for(const h of o.values())u.removeClass(n,h),o.delete(h)})}})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cy extends at{constructor(e){super(e);this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this.listenTo(e.data,"set",(t,n)=>{n[1]=Se({},n[1]);const r=n[1];r.batchType||(r.batchType="transparent")},{priority:"high"}),this.listenTo(e.data,"set",(t,n)=>{n[1].batchType==="transparent"&&this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}addBatch(e){const t=this.editor.model.document.selection,n={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:n}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,n){const r=this.editor.model,o=r.document,s=[],c=e.map(h=>h.getTransformedByOperations(n)),u=c.flat();for(const h of c){const f=h.filter(p=>p.root!=o.graveyard).filter(p=>!J5(p,u));!f.length||(Y5(f),s.push(f[0]))}s.length&&r.change(h=>{h.setSelection(s,{backward:t})})}_undo(e,t){const n=this.editor.model,r=n.document;this._createdBatches.add(t);const o=e.operations.slice().filter(s=>s.isDocumentOperation);o.reverse();for(const s of o){const c=s.baseVersion+1,u=Array.from(r.history.getOperations(c)),f=SR([s.getReversed()],u,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(const p of f)t.addOperation(p),n.applyOperation(p),r.history.setOperationAsUndone(s,p)}}}function Y5(i){i.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<i.length;e++){const n=i[e-1].getJoined(i[e],!0);n&&(e--,i.splice(e,2,n))}}function J5(i,e){return e.some(t=>t!==i&&t.containsRange(i,!0))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Q5 extends cy{execute(e=null){const t=e?this._stack.findIndex(o=>o.batch==e):this._stack.length-1,n=this._stack.splice(t,1)[0],r=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(r,()=>{this._undo(n.batch,r);const o=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,o),this.fire("revert",n.batch,r)}),this.refresh()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class X5 extends cy{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(t,()=>{const r=e.batch.operations[e.batch.operations.length-1].baseVersion+1,o=this.editor.model.document.history.getOperations(r);this._restoreSelection(e.selection.ranges,e.selection.isBackward,o),this._undo(e.batch,t)}),this.refresh()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Z5 extends be{static get pluginName(){return"UndoEditing"}constructor(e){super(e);this._batchRegistry=new WeakSet}init(){const e=this.editor;this._undoCommand=new Q5(e),this._redoCommand=new X5(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(t,n)=>{const r=n[0];if(!r.isDocumentOperation)return;const o=r.batch,s=this._redoCommand._createdBatches.has(o),c=this._undoCommand._createdBatches.has(o);this._batchRegistry.has(o)||o.type=="transparent"&&!s&&!c||(s?this._undoCommand.addBatch(o):c||(this._undoCommand.addBatch(o),this._redoCommand.clearStack()),this._batchRegistry.add(o))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(t,n,r)=>{this._redoCommand.addBatch(r)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo")}}var uy='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',dy='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eM extends be{static get pluginName(){return"UndoUI"}init(){const e=this.editor,t=e.locale,n=e.t,r=t.uiLanguageDirection=="ltr"?uy:dy,o=t.uiLanguageDirection=="ltr"?dy:uy;this._addButton("undo",n("Undo"),"CTRL+Z",r),this._addButton("redo",n("Redo"),"CTRL+Y",o)}_addButton(e,t,n,r){const o=this.editor;o.ui.componentFactory.add(e,s=>{const c=o.commands.get(e),u=new Dt(s);return u.set({label:t,icon:r,keystroke:n,tooltip:!0}),u.bind("isEnabled").to(c,"isEnabled"),this.listenTo(u,"execute",()=>{o.execute(e),o.editing.view.focus()}),u})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hy extends be{static get requires(){return[Z5,eM]}static get pluginName(){return"Undo"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tM extends be{static get requires(){return[Zv,Tu,O5,x5,L5,hy]}static get pluginName(){return"Essentials"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fy{constructor(){const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const t=this._reader;return this.total=e.size,new Promise((n,r)=>{t.onload=()=>{const o=t.result;this._data=o,n(o)},t.onerror=()=>{r("error")},t.onabort=()=>{r("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}}je(fy,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ir extends be{static get pluginName(){return"FileRepository"}static get requires(){return[ev]}init(){this.loaders=new Ci,this.loaders.on("add",()=>this._updatePendingAction()),this.loaders.on("remove",()=>this._updatePendingAction()),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return Vn("filerepository-no-upload-adapter"),null;const t=new If(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(n=>{this._loadersMap.set(n,t)}).catch(()=>{}),t.on("change:uploaded",()=>{let n=0;for(const r of this.loaders)n+=r.uploaded;this.uploaded=n}),t.on("change:uploadTotal",()=>{let n=0;for(const r of this.loaders)r.uploadTotal&&(n+=r.uploadTotal);this.uploadTotal=n}),t}destroyLoader(e){const t=e instanceof If?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach((n,r)=>{n===t&&this._loadersMap.delete(r)})}_updatePendingAction(){const e=this.editor.plugins.get(ev);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,n=r=>`${t("Upload in progress")} ${parseInt(r)}%.`;this._pendingAction=e.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else e.remove(this._pendingAction),this._pendingAction=null}}je(Ir,Pt);class If{constructor(e,t){this.id=yr(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new fy,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(n,r)=>r?n/r*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new H("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new H("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const t={};return t.promise=new Promise((n,r)=>{t.rejecter=r,t.isFulfilled=!1,e.then(o=>{t.isFulfilled=!0,n(o)}).catch(o=>{t.isFulfilled=!0,r(o)})}),t}}je(If,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nM extends rt{constructor(e){super(e);this.buttonView=new Dt(e),this._fileInputView=new iM(e),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[this.buttonView,this._fileInputView]}),this.buttonView.on("execute",()=>{this._fileInputView.open()})}focus(){this.buttonView.focus()}}class iM extends rt{constructor(e){super(e);this.set("acceptedType"),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const my="ckCsrfToken",py=40,gy="abcdefghijklmnopqrstuvwxyz0123456789";function rM(){let i=oM(my);return(!i||i.length!=py)&&(i=aM(py),sM(my,i)),i}function oM(i){i=i.toLowerCase();const e=document.cookie.split(";");for(const t of e){const n=t.split("=");if(decodeURIComponent(n[0].trim().toLowerCase())===i)return decodeURIComponent(n[1])}return null}function sM(i,e){document.cookie=encodeURIComponent(i)+"="+encodeURIComponent(e)+";path=/"}function aM(i){let e="";const t=new Uint8Array(i);window.crypto.getRandomValues(t);for(let n=0;n<t.length;n++){const r=gy.charAt(t[n]%gy.length);e+=Math.random()>.5?r.toUpperCase():r}return e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lM extends be{static get requires(){return[Ir]}static get pluginName(){return"CKFinderUploadAdapter"}init(){const e=this.editor.config.get("ckfinder.uploadUrl");!e||(this.editor.plugins.get(Ir).createUploadAdapter=t=>new cM(t,e,this.editor.t))}}class cM{constructor(e,t,n){this.loader=e,this.url=t,this.t=n}upload(){return this.loader.file.then(e=>new Promise((t,n)=>{this._initRequest(),this._initListeners(t,n,e),this._sendRequest(e)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const e=this.xhr=new XMLHttpRequest;e.open("POST",this.url,!0),e.responseType="json"}_initListeners(e,t,n){const r=this.xhr,o=this.loader,c=this.t("Cannot upload file:")+` ${n.name}.`;r.addEventListener("error",()=>t(c)),r.addEventListener("abort",()=>t()),r.addEventListener("load",()=>{const u=r.response;if(!u||!u.uploaded)return t(u&&u.error&&u.error.message?u.error.message:c);e({default:u.url})}),r.upload&&r.upload.addEventListener("progress",u=>{u.lengthComputable&&(o.uploadTotal=u.total,o.uploaded=u.loaded)})}_sendRequest(e){const t=new FormData;t.append("upload",e),t.append("ckCsrfToken",rM()),this.xhr.send(t)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Fo(i,e,t,n){let r,o=null;typeof n=="function"?r=n:(o=i.commands.get(n),r=()=>{i.execute(n)}),i.model.document.on("change:data",(s,c)=>{if(o&&!o.isEnabled||!e.isEnabled)return;const u=Qn(i.model.document.selection.getRanges());if(!u.isCollapsed||c.type=="transparent")return;const h=Array.from(i.model.document.differ.getChanges()),f=h[0];if(h.length!=1||f.type!=="insert"||f.name!="$text"||f.length!=1)return;const p=f.position.parent;if(p.is("element","codeBlock")||p.is("element","listItem")&&typeof n!="function"&&!["numberedList","bulletedList","todoList"].includes(n)||o&&o.value===!0)return;const y=p.getChild(0),T=i.model.createRangeOn(y);if(!T.containsRange(u)&&!u.end.isEqual(T.end))return;const A=t.exec(y.data.substr(0,u.end.offset));!A||i.model.enqueueChange(M=>{const B=M.createPositionAt(p,0),O=M.createPositionAt(p,A[0].length),V=new Pr(B,O);if(r({match:A})!==!1){M.remove(V);const Z=i.model.document.selection.getFirstRange(),ae=M.createRangeIn(p);p.isEmpty&&!ae.isEqual(Z)&&!ae.containsRange(Z,!0)&&M.remove(p)}V.detach(),i.model.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _a(i,e,t,n){let r,o;t instanceof RegExp?r=t:o=t,o=o||(s=>{let c;const u=[],h=[];for(;(c=r.exec(s))!==null&&!(c&&c.length<4);){let{index:f,"1":p,"2":y,"3":T}=c;const A=p+y+T;f+=c[0].length-A.length;const M=[f,f+p.length],B=[f+p.length+y.length,f+p.length+y.length+T.length];u.push(M),u.push(B),h.push([f+p.length,f+p.length+y.length])}return{remove:u,format:h}}),i.model.document.on("change:data",(s,c)=>{if(c.type=="transparent"||!e.isEnabled)return;const u=i.model,h=u.document.selection;if(!h.isCollapsed)return;const f=Array.from(u.document.differ.getChanges()),p=f[0];if(f.length!=1||p.type!=="insert"||p.name!="$text"||p.length!=1)return;const y=h.focus,T=y.parent,{text:A,range:M}=uM(u.createRange(u.createPositionAt(T,0),y),u),B=o(A),O=by(M.start,B.format,u),V=by(M.start,B.remove,u);!(O.length&&V.length)||u.enqueueChange(F=>{if(n(F,O)!==!1){for(const ae of V.reverse())F.remove(ae);u.enqueueChange(()=>{i.plugins.get("Delete").requestUndoOnBackspace()})}})})}function by(i,e,t){return e.filter(n=>n[0]!==void 0&&n[1]!==void 0).map(n=>t.createRange(i.getShiftedBy(n[0]),i.getShiftedBy(n[1])))}function uM(i,e){let t=i.start;return{text:Array.from(i.getItems()).reduce((r,o)=>!(o.is("$text")||o.is("$textProxy"))||o.getAttribute("code")?(t=e.createPositionAfter(o),""):r+o.data,""),range:e.createRange(t,i.end)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dM extends be{static get requires(){return[Lo]}static get pluginName(){return"Autoformat"}afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats()}_addListAutoformats(){const e=this.editor.commands;e.get("bulletedList")&&Fo(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&Fo(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&Fo(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&Fo(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const e=this.editor.commands;if(e.get("bold")){const t=Au(this.editor,"bold");_a(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),_a(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(e.get("italic")){const t=Au(this.editor,"italic");_a(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),_a(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(e.get("code")){const t=Au(this.editor,"code");_a(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(e.get("strikethrough")){const t=Au(this.editor,"strikethrough");_a(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const e=this.editor.commands.get("heading");e&&e.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(t=>{const n=t[7],r=new RegExp(`^(#{${n}})\\s$`);Fo(this.editor,this,r,()=>{if(!e.isEnabled||e.value===t)return!1;this.editor.execute("heading",{value:t})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&Fo(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&Fo(e,this,/^```$/,()=>{if(t.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&Fo(this.editor,this,/^---$/,"horizontalLine")}}function Au(i,e){return(t,n)=>{if(!i.commands.get(e).isEnabled)return!1;const o=i.model.schema.getValidRanges(n,e);for(const s of o)t.setAttribute(e,!0,s);t.removeSelectionAttribute(e)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wy extends at{constructor(e,t){super(e);this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,r=t.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;t.change(s=>{if(r.isCollapsed)o?s.setSelectionAttribute(this.attributeKey,!0):s.removeSelectionAttribute(this.attributeKey);else{const c=t.schema.getValidRanges(r.getRanges(),this.attributeKey);for(const u of c)o?s.setAttribute(this.attributeKey,o,u):s.removeAttribute(this.attributeKey,u)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,n=e.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);for(const r of n.getRanges())for(const o of r.getItems())if(t.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ka="bold";class hM extends be{static get pluginName(){return"BoldEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:ka}),e.model.schema.setAttributeProperties(ka,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:ka,view:"strong",upcastAlso:["b",t=>{const n=t.getStyle("font-weight");if(!n)return null;if(n=="bold"||Number(n)>=600)return{name:!0,styles:["font-weight"]}}]}),e.commands.add(ka,new wy(e,ka)),e.keystrokes.set("CTRL+B",ka)}}var fM='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Rf="bold";class mM extends be{static get pluginName(){return"BoldUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Rf,n=>{const r=e.commands.get(Rf),o=new Dt(n);return o.set({label:t("Bold"),icon:fM,keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(Rf),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pM extends be{static get requires(){return[hM,mM]}static get pluginName(){return"Bold"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ea="italic";class gM extends be{static get pluginName(){return"ItalicEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Ea}),e.model.schema.setAttributeProperties(Ea,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Ea,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(Ea,new wy(e,Ea)),e.keystrokes.set("CTRL+I",Ea)}}var bM='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Mf="italic";class wM extends be{static get pluginName(){return"ItalicUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Mf,n=>{const r=e.commands.get(Mf),o=new Dt(n);return o.set({label:t("Italic"),icon:bM,keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(Mf),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vM extends be{static get requires(){return[gM,wM]}static get pluginName(){return"Italic"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yM extends at{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,n=t.schema,r=t.document.selection,o=Array.from(r.getSelectedBlocks()),s=e.forceValue===void 0?!this.value:e.forceValue;t.change(c=>{if(!s)this._removeQuote(c,o.filter(Iu));else{const u=o.filter(h=>Iu(h)||yy(n,h));this._applyQuote(c,u)}})}_getValue(){const e=this.editor.model.document.selection,t=Qn(e.getSelectedBlocks());return!!(t&&Iu(t))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,n=Qn(e.getSelectedBlocks());return n?yy(t,n):!1}_removeQuote(e,t){vy(e,t).reverse().forEach(n=>{if(n.start.isAtStart&&n.end.isAtEnd){e.unwrap(n.start.parent);return}if(n.start.isAtStart){const o=e.createPositionBefore(n.start.parent);e.move(n,o);return}n.end.isAtEnd||e.split(n.end);const r=e.createPositionAfter(n.end.parent);e.move(n,r)})}_applyQuote(e,t){const n=[];vy(e,t).reverse().forEach(r=>{let o=Iu(r.start);o||(o=e.createElement("blockQuote"),e.wrap(r,o)),n.push(o)}),n.reverse().reduce((r,o)=>r.nextSibling==o?(e.merge(e.createPositionAfter(r)),r):o)}}function Iu(i){return i.parent.name=="blockQuote"?i.parent:null}function vy(i,e){let t,n=0;const r=[];for(;n<e.length;){const o=e[n],s=e[n+1];t||(t=i.createPositionBefore(o)),(!s||o.nextSibling!=s)&&(r.push(i.createRange(t,i.createPositionAfter(o))),t=null),n++}return r}function yy(i,e){const t=i.checkChild(e.parent,"blockQuote"),n=i.checkChild(["$root","blockQuote"],e);return t&&n}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _M extends be{static get pluginName(){return"BlockQuoteEditing"}static get requires(){return[Tu,Lo]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new yM(e)),t.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(s=>{const c=e.model.document.differ.getChanges();for(const u of c)if(u.type=="insert"){const h=u.position.nodeAfter;if(!h)continue;if(h.is("element","blockQuote")&&h.isEmpty)return s.remove(h),!0;if(h.is("element","blockQuote")&&!t.checkChild(u.position,h))return s.unwrap(h),!0;if(h.is("element")){const f=s.createRangeIn(h);for(const p of f.getItems())if(p.is("element","blockQuote")&&!t.checkChild(s.createPositionBefore(p),p))return s.unwrap(p),!0}}else if(u.type=="remove"){const h=u.position.parent;if(h.is("element","blockQuote")&&h.isEmpty)return s.remove(h),!0}return!1});const n=this.editor.editing.view.document,r=e.model.document.selection,o=e.commands.get("blockQuote");this.listenTo(n,"enter",(s,c)=>{if(!r.isCollapsed||!o.value)return;r.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),c.preventDefault(),s.stop())},{context:"blockquote"}),this.listenTo(n,"delete",(s,c)=>{if(c.direction!="backward"||!r.isCollapsed||!o.value)return;const u=r.getLastPosition().parent;u.isEmpty&&!u.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),c.preventDefault(),s.stop())},{context:"blockquote"})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kM extends be{static get pluginName(){return"BlockQuoteUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add("blockQuote",n=>{const r=e.commands.get("blockQuote"),o=new Dt(n);return o.set({label:t("Block quote"),icon:Fn.quote,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute("blockQuote"),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EM extends be{static get requires(){return[_M,kM]}static get pluginName(){return"BlockQuote"}}var CM='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TM extends be{static get pluginName(){return"CKFinderUI"}init(){const e=this.editor,t=e.ui.componentFactory,n=e.t;t.add("ckfinder",r=>{const o=e.commands.get("ckfinder"),s=new Dt(r);return s.set({label:n("Insert image or file"),icon:CM,tooltip:!0}),s.bind("isEnabled").to(o),s.on("execute",()=>{e.execute("ckfinder"),e.editing.view.focus()}),s})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SM extends at{constructor(e){super(e);this.stopListening(this.editor.model.document,"change"),this.listenTo(this.editor.model.document,"change",()=>this.refresh(),{priority:"low"})}refresh(){const e=this.editor.commands.get("insertImage"),t=this.editor.commands.get("link");this.isEnabled=e.isEnabled||t.isEnabled}execute(){const e=this.editor,t=this.editor.config.get("ckfinder.openerMethod")||"modal";if(t!="popup"&&t!="modal")throw new H("ckfinder-unknown-openermethod",e);const n=this.editor.config.get("ckfinder.options")||{};n.chooseFiles=!0;const r=n.onInit;n.language||(n.language=e.locale.uiLanguage),n.onInit=o=>{r&&r(o),o.on("files:choose",s=>{const c=s.data.files.toArray(),u=c.filter(p=>!p.isImage()),h=c.filter(p=>p.isImage());for(const p of u)e.execute("link",p.getUrl());const f=[];for(const p of h){const y=p.getUrl();f.push(y||o.request("file:getProxyUrl",{file:p}))}f.length&&_y(e,f)}),o.on("file:choose:resizedImage",s=>{const c=s.data.resizedUrl;if(!c){const u=e.plugins.get("Notification"),h=e.locale.t;u.showWarning(h("Could not obtain resized image URL."),{title:h("Selecting resized image failed"),namespace:"ckfinder"});return}_y(e,[c])})},window.CKFinder[t](n)}}function _y(i,e){if(!i.commands.get("insertImage").isEnabled){const n=i.plugins.get("Notification"),r=i.locale.t;n.showWarning(r("Could not insert image at the current position."),{title:r("Inserting image failed"),namespace:"ckfinder"});return}i.execute("insertImage",{source:e})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xM extends be{static get pluginName(){return"CKFinderEditing"}static get requires(){return[wf,"LinkEditing"]}init(){const e=this.editor;if(!e.plugins.has("ImageBlockEditing")&&!e.plugins.has("ImageInlineEditing"))throw new H("ckfinder-missing-image-plugin",e);e.commands.add("ckfinder",new SM(e))}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PM extends be{static get pluginName(){return"CKFinder"}static get requires(){return["Link","CKFinderUploadAdapter",xM,TM]}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AM extends be{static get pluginName(){return"CloudServicesUploadAdapter"}static get requires(){return["CloudServices",Ir]}init(){const e=this.editor,t=e.plugins.get("CloudServices"),n=t.token,r=t.uploadUrl;!n||(this._uploadGateway=e.plugins.get("CloudServicesCore").createUploadGateway(n,r),e.plugins.get(Ir).createUploadAdapter=o=>new IM(this._uploadGateway,o))}}class IM{constructor(e,t){this.uploadGateway=e,this.loader=t}upload(){return this.loader.file.then(e=>(this.fileUploader=this.uploadGateway.upload(e),this.fileUploader.on("progress",(t,n)=>{this.loader.uploadTotal=n.total,this.loader.uploaded=n.uploaded}),this.fileUploader.send()))}abort(){this.fileUploader.abort()}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RM extends be{static get requires(){return[AM,"ImageUpload"]}init(){const e=this.editor;!e.plugins.has("ImageBlockEditing")&&!e.plugins.has("ImageInlineEditing")&&Vn("easy-image-image-feature-missing",e)}static get pluginName(){return"EasyImage"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MM extends at{refresh(){const e=this.editor.model,t=e.document,n=Qn(t.selection.getSelectedBlocks());this.value=!!n&&n.is("element","paragraph"),this.isEnabled=!!n&&ky(n,e.schema)}execute(e={}){const t=this.editor.model,n=t.document;t.change(r=>{const o=(e.selection||n.selection).getSelectedBlocks();for(const s of o)!s.is("element","paragraph")&&ky(s,t.schema)&&r.rename(s,"paragraph")})}}function ky(i,e){return e.checkChild(i.parent,"paragraph")&&!e.isObject(i)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OM extends at{execute(e){const t=this.editor.model;let n=e.position;t.change(r=>{const o=r.createElement("paragraph");if(!t.schema.checkChild(n.parent,o)){const s=t.schema.findAllowedParent(n,o);if(!s)return;n=r.split(n,s).position}t.insertContent(o,n),r.setSelection(o,"in")})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nl extends be{static get pluginName(){return"Paragraph"}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new MM(e)),e.commands.add("insertParagraph",new OM(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(n,{writer:r})=>!Nl.paragraphLikeElements.has(n.name)||n.isEmpty?null:r.createElement("paragraph"),view:/.+/,converterPriority:"low"})}}Nl.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NM extends at{constructor(e,t){super(e);this.modelElements=t}refresh(){const e=Qn(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>Ey(e,t,this.editor.model.schema))}execute(e){const t=this.editor.model,n=t.document,r=e.value;t.change(o=>{const s=Array.from(n.selection.getSelectedBlocks()).filter(c=>Ey(c,r,t.schema));for(const c of s)c.is("element",r)||o.rename(c,r)})}}function Ey(i,e,t){return t.checkChild(i.parent,e)&&!t.isObject(i)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Of="paragraph";class DM extends be{static get pluginName(){return"HeadingEditing"}constructor(e){super(e);e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Nl]}init(){const e=this.editor,t=e.config.get("heading.options"),n=[];for(const r of t)r.model!==Of&&(e.model.schema.register(r.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(r),n.push(r.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new NM(e,n))}afterInit(){const e=this.editor,t=e.commands.get("enter"),n=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(r,o)=>{const s=e.model.document.selection.getFirstPosition().parent;n.some(u=>s.is("element",u.model))&&!s.is("element",Of)&&s.childCount===0&&o.writer.rename(s,Of)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:fl.get("low")+1})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function BM(i){const e=i.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return i.config.get("heading.options").map(n=>{const r=t[n.title];return r&&r!=n.title&&(n.title=r),n})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VM extends be{static get pluginName(){return"HeadingUI"}init(){const e=this.editor,t=e.t,n=BM(e),r=t("Choose heading"),o=t("Heading");e.ui.componentFactory.add("heading",s=>{const c={},u=new Ci,h=e.commands.get("heading"),f=e.commands.get("paragraph"),p=[h];for(const T of n){const A={type:"button",model:new yu({label:T.title,class:T.class,withText:!0})};T.model==="paragraph"?(A.model.bind("isOn").to(f,"value"),A.model.set("commandName","paragraph"),p.push(f)):(A.model.bind("isOn").to(h,"value",M=>M===T.model),A.model.set({commandName:"heading",commandValue:T.model})),u.add(A),c[T.model]=T.title}const y=Vo(s);return pf(y,u),y.buttonView.set({isOn:!1,withText:!0,tooltip:o}),y.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),y.bind("isEnabled").toMany(p,"isEnabled",(...T)=>T.some(A=>A)),y.buttonView.bind("label").to(h,"value",f,"value",(T,A)=>{const M=T||A&&"paragraph";return c[M]?c[M]:r}),this.listenTo(y,"execute",T=>{e.execute(T.source.commandName,T.source.commandValue?{value:T.source.commandValue}:void 0),e.editing.view.focus()}),y})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LM extends be{static get requires(){return[DM,VM]}static get pluginName(){return"Heading"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ru extends be{static get requires(){return[ku]}static get pluginName(){return"WidgetToolbarRepository"}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const t=e.plugins.get("BalloonToolbar");this.listenTo(t,"show",n=>{FM(e.editing.view.document.selection)&&n.stop()},{priority:"high"})}this._toolbarDefinitions=new Map,this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:n,getRelatedElement:r,balloonClassName:o="ck-toolbar-container"}){if(!n.length){Vn("widget-toolbar-no-items",{toolbarId:e});return}const s=this.editor,c=s.t,u=new mf(s.locale);if(u.ariaLabel=t||c("Widget toolbar"),this._toolbarDefinitions.has(e))throw new H("widget-toolbar-duplicated",this,{toolbarId:e});u.fillFromConfig(n,s.ui.componentFactory),this._toolbarDefinitions.set(e,{view:u,getRelatedElement:r,balloonClassName:o})}_updateToolbarsVisibility(){let e=0,t=null,n=null;for(const r of this._toolbarDefinitions.values()){const o=r.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(r)&&this._hideToolbar(r);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(r)&&this._hideToolbar(r);else{const s=o.getAncestors().length;s>e&&(e=s,t=o,n=r)}}n&&this._showToolbar(n,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?Cy(this.editor,t):this._isToolbarInBalloon(e)||(this._balloon.add({view:e.view,position:Ty(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const n of this._toolbarDefinitions.values())if(this._isToolbarVisible(n)){const r=n.getRelatedElement(this.editor.editing.view.document.selection);Cy(this.editor,r)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function Cy(i,e){const t=i.plugins.get("ContextualBalloon"),n=Ty(i,e);t.updatePosition(n)}function Ty(i,e){const t=i.editing.view,n=li.defaultPositions;return{target:t.domConverter.mapViewToDom(e),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}function FM(i){const e=i.getSelectedElement();return!!(e&&jt(e))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sy{constructor(e){this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}begin(e,t,n){const r=new Et(t);this.activeHandlePosition=WM(e),this._referenceCoordinates=HM(t,$M(this.activeHandlePosition)),this.originalWidth=r.width,this.originalHeight=r.height,this.aspectRatio=r.width/r.height;const o=n.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this.originalWidthPercents=parseFloat(o):this.originalWidthPercents=zM(n,r)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}je(Sy,Pt);function zM(i,e){const t=i.parentElement,n=parseFloat(t.ownerDocument.defaultView.getComputedStyle(t).width);return e.width/n*100}function HM(i,e){const t=new Et(i),n=e.split("-"),r={x:n[1]=="right"?t.right:t.left,y:n[0]=="bottom"?t.bottom:t.top};return r.x+=i.ownerDocument.defaultView.scrollX,r.y+=i.ownerDocument.defaultView.scrollY,r}function UM(i){return`ck-widget__resizer__handle-${i}`}function WM(i){const e=["top-left","top-right","bottom-right","bottom-left"];for(const t of e)if(i.classList.contains(UM(t)))return t}function $M(i){const e=i.split("-"),t={top:"bottom",bottom:"top",left:"right",right:"left"};return`${t[e[0]]}-${t[e[1]]}`}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jM extends rt{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:e.if("_isVisible","none",t=>!t)}},children:[{text:e.to("_label")}]})}_bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(n,r)=>n!==null&&r!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(n,r,o)=>e.unit==="px"?`${n}\xD7${r}`:`${o}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(n,r,o)=>r<50||o<50?"above-center":n)}_dismiss(){this.unbind(),this._isVisible=!1}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nf{constructor(e){this._options=e,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),t.stop())},{priority:"high"}),this.on("change:isEnabled",()=>{this.isEnabled&&this.redraw()})}attach(){const e=this,t=this._options.viewElement;this._options.editor.editing.view.change(r=>{const o=r.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(s){const c=this.toDomElement(s);return e._appendHandles(c),e._appendSizeUI(c),e.on("change:isEnabled",(u,h,f)=>{c.style.display=f?"":"none"}),c.style.display=e.isEnabled?"":"none",c});r.insert(r.createPositionAt(t,"end"),o),r.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=o})}begin(e){this.state=new Sy(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const t=this._proposeNewSize(e);this._options.editor.editing.view.change(c=>{const u=this._options.unit||"%",h=(u==="%"?t.widthPercents:t.width)+u;c.setStyle("width",h,this._options.viewElement)});const r=this._getHandleHost(),o=new Et(r);t.handleHostWidth=Math.round(o.width),t.handleHostHeight=Math.round(o.height);const s=new Et(r);t.width=Math.round(s.width),t.height=Math.round(s.height),this.redraw(o),this.state.update(t)}commit(){const e=this._options.unit||"%",t=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const t=this._domResizerWrapper;if(!GM(t))return;const n=t.parentElement,r=this._getHandleHost(),o=this._viewResizerWrapper,s=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let c;if(n.isSameNode(r)){const u=e||new Et(r);c=[u.width+"px",u.height+"px",void 0,void 0]}else c=[r.offsetWidth+"px",r.offsetHeight+"px",r.offsetLeft+"px",r.offsetTop+"px"];Ln(s,c)!=="same"&&this._options.editor.editing.view.change(u=>{u.setStyle({width:c[0],height:c[1],left:c[2],top:c[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const t=this.state,n=KM(e),r=this._options.isCentered?this._options.isCentered(this):!0,o={x:t._referenceCoordinates.x-(n.x+t.originalWidth),y:n.y-t.originalHeight-t._referenceCoordinates.y};r&&t.activeHandlePosition.endsWith("-right")&&(o.x=n.x-(t._referenceCoordinates.x+t.originalWidth)),r&&(o.x*=2);const s={width:Math.abs(t.originalWidth+o.x),height:Math.abs(t.originalHeight+o.y)};s.dominant=s.width/t.aspectRatio>s.height?"width":"height",s.max=s[s.dominant];const c={width:s.width,height:s.height};return s.dominant=="width"?c.height=c.width/t.aspectRatio:c.width=c.height*t.aspectRatio,{width:Math.round(c.width),height:Math.round(c.height),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*c.width*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const n of t)e.appendChild(new Si({tag:"div",attributes:{class:`ck-widget__resizer__handle ${qM(n)}`}}).render())}_appendSizeUI(e){this._sizeView=new jM,this._sizeView.render(),e.appendChild(this._sizeView.element)}}je(Nf,Pt);function qM(i){return`ck-widget__resizer__handle-${i}`}function KM(i){return{x:i.pageX,y:i.pageY}}function GM(i){return i&&i.ownerDocument&&i.ownerDocument.contains(i)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mu extends be{static get pluginName(){return"WidgetResize"}init(){const e=this.editor.editing,t=Ht.window.document;this.set("visibleResizer",null),this.set("_activeResizer",null),this._resizers=new Map,e.view.addObserver(Cu),this._observer=Object.create(la),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this));const n=()=>{this.visibleResizer&&this.visibleResizer.redraw()};this._redrawFocusedResizerThrottled=rb(n,200),this.on("change:visibleResizer",n),this.editor.ui.on("update",this._redrawFocusedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[o,s]of this._resizers)o.isAttached()||(this._resizers.delete(o),s.destroy())},{priority:"lowest"}),this._observer.listenTo(Ht.window,"resize",this._redrawFocusedResizerThrottled);const r=this.editor.editing.view.document.selection;r.on("change",()=>{const o=r.getSelectedElement();this.visibleResizer=this.getResizerByViewElement(o)||null})}destroy(){this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawFocusedResizerThrottled.cancel()}attachTo(e){const t=new Nf(e),n=this.editor.plugins;if(t.attach(),n.has("WidgetToolbarRepository")){const s=n.get("WidgetToolbarRepository");t.on("begin",()=>{s.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{s.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{s.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==t&&(this.visibleResizer=t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){const n=t.domTarget;!Nf.isResizeHandle(n)||(this._activeResizer=this._getResizerByHandle(n),this._activeResizer&&(this._activeResizer.begin(n),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}je(Mu,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YM extends at{refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled&&n.hasAttribute("alt")?this.value=n.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor,n=t.plugins.get("ImageUtils"),r=t.model,o=n.getClosestSelectedImageElement(r.document.selection);r.change(s=>{s.setAttribute("alt",e.newValue,o)})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Df(i,e){const t=i.createEmptyElement("img"),n=e==="imageBlock"?i.createContainerElement("figure",{class:"image"}):i.createContainerElement("span",{class:"image-inline"},{isAllowedInsideAttributeElement:!0});return i.insert(i.createPositionAt(n,0),t),n}function xy(i,e){if(i.plugins.has("ImageInlineEditing")!==i.plugins.has("ImageBlockEditing"))return{name:"img"};const t=i.plugins.get("ImageUtils");return n=>!t.isInlineImageView(n)||(n.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==e?null:{name:!0}}function Bf(i,e){const t=Qn(e.getSelectedBlocks());return!t||i.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ar extends be{static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,n=null){const r=this.editor,o=r.model,s=o.document.selection;n=Py(r,t||s,n),e=Se(Se({},Object.fromEntries(s.getAttributes())),e);for(const c in e)o.schema.checkAttribute(n,c)||delete e[c];return o.change(c=>{const u=c.createElement(n,e);return!t&&n!="imageInline"&&(t=ba(s,o)),o.insertContent(u,t),u.parent?(c.setSelection(u,"on"),u):null})}getClosestSelectedImageWidget(e){const t=e.getSelectedElement();if(t&&this.isImageWidget(t))return t;let n=e.getFirstPosition().parent;for(;n;){if(n.is("element")&&this.isImageWidget(n))return n;n=n.parent}return null}getClosestSelectedImageElement(e){const t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}isImageAllowed(){const t=this.editor.model.document.selection;return JM(this.editor,t)&&QM(t)}toImageWidget(e,t,n){return t.setCustomProperty("image",!0,e),Cf(e,t,{label:()=>{const s=this.findViewImgElement(e).getAttribute("alt");return s?`${s} ${n}`:n}})}isImageWidget(e){return!!e.getCustomProperty("image")&&jt(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(const{item:n}of t.createRangeIn(e))if(this.isInlineImageView(n))return n}}function JM(i,e){if(Py(i,e)=="imageBlock"){const n=XM(e,i.model);if(i.model.schema.checkChild(n,"imageBlock"))return!0}else if(i.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function QM(i){return[...i.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}function XM(i,e){const n=ba(i,e).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}function Py(i,e,t){const n=i.model.schema,r=i.config.get("image.insert.type");return i.plugins.has("ImageBlockEditing")?i.plugins.has("ImageInlineEditing")?t||(r==="inline"?"imageInline":r==="block"?"imageBlock":e.is("selection")?Bf(n,e):n.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZM extends be{static get requires(){return[ar]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new YM(this.editor))}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eO extends rt{constructor(e){super(e);const t=this.locale.t;this.focusTracker=new $i,this.keystrokes=new to,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),Fn.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),Fn.cancel,"ck-button-cancel","cancel"),this._focusables=new xs,this._focusCycler=new fa({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]}),sf(this)}render(){super.render(),this.keystrokes.listenTo(this.element),af({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,n,r){const o=new Dt(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),r&&o.delegate("execute").to(this,r),o}_createLabeledInputView(){const e=this.locale.t,t=new gf(this.locale,bf);return t.label=e("Text alternative"),t}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tO(i){const e=i.plugins.get("ContextualBalloon");if(i.plugins.get("ImageUtils").getClosestSelectedImageWidget(i.editing.view.document.selection)){const t=Ay(i);e.updatePosition(t)}}function Ay(i){const e=i.editing.view,t=li.defaultPositions,n=i.plugins.get("ImageUtils");return{target:e.domConverter.viewToDom(n.getClosestSelectedImageWidget(e.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nO extends be{static get requires(){return[ku]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton(),this._createForm()}destroy(){super.destroy(),this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",n=>{const r=e.commands.get("imageTextAlternative"),o=new Dt(n);return o.set({label:t("Change image text alternative"),icon:Fn.lowVision,tooltip:!0}),o.bind("isEnabled").to(r,"isEnabled"),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,n=e.editing.view.document,r=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new eO(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(o,s)=>{this._hideForm(!0),s()}),this.listenTo(e.ui,"update",()=>{r.getClosestSelectedImageWidget(n.selection)?this._isVisible&&tO(e):this._hideForm(!0)}),of({emitter:this._form,activator:()=>this._isVisible,contextElements:[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;const e=this.editor,t=e.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:Ay(e)}),n.fieldView.value=n.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e){!this._isInBalloon||(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return this._balloon.visibleView===this._form}get _isInBalloon(){return this._balloon.hasView(this._form)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Iy extends be{static get requires(){return[ZM,nO]}static get pluginName(){return"ImageTextAlternative"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function iO(i){return t=>{t.on("element:figure",e)};function e(t,n,r){if(!r.consumable.test(n.viewItem,{name:!0,classes:"image"}))return;const o=i.findViewImgElement(n.viewItem);if(!o||!r.consumable.test(o,{name:!0}))return;r.consumable.consume(n.viewItem,{name:!0,classes:"image"});const s=r.convertItem(o,n.modelCursor),c=Qn(s.modelRange.getItems());if(!c){r.consumable.revert(n.viewItem,{name:!0,classes:"image"});return}r.convertChildren(n.viewItem,c),r.updateConversionResult(c,n)}}function Ry(i,e){return n=>{n.on(`attribute:srcset:${e}`,t)};function t(n,r,o){if(!o.consumable.consume(r.item,n.name))return;const s=o.writer,c=o.mapper.toViewElement(r.item),u=i.findViewImgElement(c);if(r.attributeNewValue===null){const h=r.attributeOldValue;h.data&&(s.removeAttribute("srcset",u),s.removeAttribute("sizes",u),h.width&&s.removeAttribute("width",u))}else{const h=r.attributeNewValue;h.data&&(s.setAttribute("srcset",h.data,u),s.setAttribute("sizes","100vw",u),h.width&&s.setAttribute("width",h.width,u))}}}function Ou(i,e,t){return r=>{r.on(`attribute:${t}:${e}`,n)};function n(r,o,s){if(!s.consumable.consume(o.item,r.name))return;const c=s.writer,u=s.mapper.toViewElement(o.item),h=i.findViewImgElement(u);c.setAttribute(o.attributeKey,o.attributeNewValue||"",h)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class My extends eo{observe(e){this.listenTo(e,"load",(t,n)=>{const r=n.target;this.checkShouldIgnoreEventFromTarget(r)||r.tagName=="IMG"&&this._fireEvents(n)},{useCapture:!0})}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rO extends at{constructor(e){super(e);const t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||t==="block"&&Vn("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||t==="inline"&&Vn("image-inline-plugin-required")}refresh(){this.isEnabled=this.editor.plugins.get("ImageUtils").isImageAllowed()}execute(e){const t=yn(e.source),n=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());t.forEach((s,c)=>{const u=n.getSelectedElement();if(typeof s=="string"&&(s={src:s}),c&&u&&r.isImage(u)){const h=this.editor.model.createPositionAfter(u);r.insertImage(Se(Se({},s),o),h)}else r.insertImage(Se(Se({},s),o))})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oy extends be{static get requires(){return[ar]}static get pluginName(){return"ImageEditing"}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(My),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:r=>{const o={data:r.getAttribute("srcset")};return r.hasAttribute("width")&&(o.width=r.getAttribute("width")),o}}});const n=new rO(e);e.commands.add("insertImage",n),e.commands.add("imageInsert",n)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ny extends at{constructor(e,t){super(e);this._modelElementName=t}refresh(){const t=this.editor.plugins.get("ImageUtils"),n=t.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=t.isInlineImage(n):this.isEnabled=t.isBlockImage(n)}execute(){const e=this.editor,t=this.editor.model,n=e.plugins.get("ImageUtils"),r=n.getClosestSelectedImageElement(t.document.selection),o=Object.fromEntries(r.getAttributes());return!o.src&&!o.uploadId?null:t.change(s=>{const c=Array.from(t.markers).filter(f=>f.getRange().containsItem(r)),u=n.insertImage(o,t.createSelection(r,"on"),this._modelElementName);if(!u)return null;const h=s.createRangeOn(u);for(const f of c){const p=f.getRange(),y=p.root.rootName!="$graveyard"?p.getJoined(h,!0):h;s.updateMarker(f,{range:y})}return{oldElement:r,newElement:u}})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dy extends be{static get requires(){return[Oy,ar,Ar]}static get pluginName(){return"ImageBlockEditing"}init(){const e=this.editor;e.model.schema.register("imageBlock",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new Ny(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,n=e.conversion,r=e.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageBlock",view:(o,{writer:s})=>Df(s,"imageBlock")}),n.for("editingDowncast").elementToElement({model:"imageBlock",view:(o,{writer:s})=>r.toImageWidget(Df(s,"imageBlock"),s,t("image widget"))}),n.for("downcast").add(Ou(r,"imageBlock","src")).add(Ou(r,"imageBlock","alt")).add(Ry(r,"imageBlock")),n.for("upcast").elementToElement({view:xy(e,"imageBlock"),model:(o,{writer:s})=>s.createElement("imageBlock",o.hasAttribute("src")?{src:o.getAttribute("src")}:null)}).add(iO(r))}_setupClipboardIntegration(){const e=this.editor,t=e.model,n=e.editing.view,r=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",(o,s)=>{const c=Array.from(s.content.getChildren());let u;if(!c.every(r.isInlineImageView))return;s.targetRanges?u=e.editing.mapper.toModelRange(s.targetRanges[0]):u=t.document.selection.getFirstRange();const h=t.createSelection(u);if(Bf(t.schema,h)==="imageBlock"){const f=new ga(n.document),p=c.map(y=>f.createElement("figure",{class:"image"},y));s.content=f.createDocumentFragment(p)}})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oO extends be{static get requires(){return[Dy,wa,Iy]}static get pluginName(){return"ImageBlock"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sO extends be{static get requires(){return[Oy,ar,Ar]}static get pluginName(){return"ImageInlineEditing"}init(){const e=this.editor,t=e.model.schema;t.register("imageInline",{isObject:!0,isInline:!0,allowWhere:"$text",allowAttributesOf:"$text",allowAttributes:["alt","src","srcset"]}),t.addChildCheck((n,r)=>{if(n.endsWith("caption")&&r.name==="imageInline")return!1}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new Ny(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,n=e.conversion,r=e.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:(o,{writer:s})=>s.createEmptyElement("img")}),n.for("editingDowncast").elementToElement({model:"imageInline",view:(o,{writer:s})=>r.toImageWidget(Df(s,"imageInline"),s,t("image widget"))}),n.for("downcast").add(Ou(r,"imageInline","src")).add(Ou(r,"imageInline","alt")).add(Ry(r,"imageInline")),n.for("upcast").elementToElement({view:xy(e,"imageInline"),model:(o,{writer:s})=>s.createElement("imageInline",o.hasAttribute("src")?{src:o.getAttribute("src")}:null)})}_setupClipboardIntegration(){const e=this.editor,t=e.model,n=e.editing.view,r=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",(o,s)=>{const c=Array.from(s.content.getChildren());let u;if(!c.every(r.isBlockImageView))return;s.targetRanges?u=e.editing.mapper.toModelRange(s.targetRanges[0]):u=t.document.selection.getFirstRange();const h=t.createSelection(u);if(Bf(t.schema,h)==="imageInline"){const f=new ga(n.document),p=c.map(y=>y.childCount===1?(Array.from(y.getAttributes()).forEach(T=>f.setAttribute(...T,r.findViewImgElement(y))),y.getChild(0)):y);s.content=f.createDocumentFragment(p)}})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aO extends be{static get requires(){return[sO,wa,Iy]}static get pluginName(){return"ImageInline"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lO extends be{static get requires(){return[oO,aO]}static get pluginName(){return"Image"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Vf(i){for(const e of i.getChildren())if(!!e&&e.is("element","caption"))return e;return null}function Lf(i,e){const t=e.getFirstPosition().findAncestor("caption");return t&&i.isBlockImage(t.parent)?t:null}function cO(i,e){return e.name=="figcaption"&&i.isBlockImageView(e.parent)?{name:!0}:null}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uO extends at{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils");if(!e.plugins.has(Dy)){this.isEnabled=!1,this.value=!1;return}const n=e.model.document.selection,r=n.getSelectedElement();if(!r){const o=Lf(t,n);this.isEnabled=!!o,this.value=!!o;return}this.isEnabled=this.editor.plugins.get("ImageUtils").isImage(r),this.isEnabled?this.value=!!Vf(r):this.value=!1}execute(e={}){const{focusCaptionOnShow:t}=e;this.editor.model.change(n=>{this.value?this._hideImageCaption(n):this._showImageCaption(n,t)})}_showImageCaption(e,t){const r=this.editor.model.document.selection,o=this.editor.plugins.get("ImageCaptionEditing");let s=r.getSelectedElement();const c=o._getSavedCaption(s);this.editor.plugins.get("ImageUtils").isInlineImage(s)&&(this.editor.execute("imageTypeBlock"),s=r.getSelectedElement());const u=c||e.createElement("caption");e.append(u,s),t&&e.setSelection(u,"in")}_hideImageCaption(e){const t=this.editor,n=t.model.document.selection,r=t.plugins.get("ImageCaptionEditing"),o=t.plugins.get("ImageUtils");let s=n.getSelectedElement(),c;s?c=Vf(s):(c=Lf(o,n),s=c.parent),r._saveCaption(s,c),e.setSelection(s,"on"),e.remove(c)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dO extends be{static get requires(){return[ar]}static get pluginName(){return"ImageCaptionEditing"}constructor(e){super(e);this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new uO(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration()}_setupConversion(){const e=this.editor,t=e.editing.view,n=e.plugins.get("ImageUtils"),r=e.t;e.conversion.for("upcast").elementToElement({view:o=>cO(n,o),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(o,{writer:s})=>n.isBlockImage(o.parent)?s.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(o,{writer:s})=>{if(!n.isBlockImage(o.parent))return null;const c=s.createEditableElement("figcaption");return s.setCustomProperty("imageCaption",!0,c),Ev({view:t,element:c,text:r("Enter image caption"),keepOnFocus:!0}),Tf(c,s)}}),e.editing.mapper.on("modelToViewPosition",By(t)),e.data.mapper.on("modelToViewPosition",By(t))}_setupImageTypeCommandsIntegration(){const e=this.editor,t=e.plugins.get("ImageUtils"),n=e.commands.get("imageTypeInline"),r=e.commands.get("imageTypeBlock"),o=s=>{if(!s.return)return;const{oldElement:c,newElement:u}=s.return;if(!c)return;if(t.isBlockImage(c)){const f=Vf(c);if(f){this._saveCaption(u,f);return}}const h=this._getSavedCaption(c);h&&this._saveCaption(u,h)};n&&this.listenTo(n,"execute",o,{priority:"low"}),r&&this.listenTo(r,"execute",o,{priority:"low"})}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?Ct.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}}function By(i){return(e,t)=>{const n=t.modelPosition,r=n.parent;if(!r.is("element","imageBlock"))return;const o=t.mapper.toViewElement(r);t.viewPosition=i.createPositionAt(o,n.offset+1)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hO extends be{static get requires(){return[ar]}static get pluginName(){return"ImageCaptionUI"}init(){const e=this.editor,t=e.editing.view,n=e.plugins.get("ImageUtils"),r=e.t;e.ui.componentFactory.add("toggleImageCaption",o=>{const s=e.commands.get("toggleImageCaption"),c=new Dt(o);return c.set({icon:Fn.caption,tooltip:!0,isToggleable:!0}),c.bind("isOn","isEnabled").to(s,"value","isEnabled"),c.bind("label").to(s,"value",u=>r(u?"Toggle caption off":"Toggle caption on")),this.listenTo(c,"execute",()=>{e.execute("toggleImageCaption",{focusCaptionOnShow:!0});const u=Lf(n,e.model.document.selection);if(u){const h=e.editing.mapper.toViewElement(u);t.scrollToTheSelection(),t.change(f=>{f.addClass("image__caption_highlighted",h)})}}),c})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fO extends be{static get requires(){return[dO,hO]}static get pluginName(){return"ImageCaption"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mO extends at{constructor(e,t){super(e);this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(n=>{if(n.isDefault)for(const r of n.modelElements)this._defaultStyles[r]=n.name;return[n.name,n]}))}refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled?n.hasAttribute("imageStyle")?this.value=n.getAttribute("imageStyle"):this.value=this._defaultStyles[n.name]:this.value=!1}execute(e={}){const t=this.editor,n=t.model,r=t.plugins.get("ImageUtils");n.change(o=>{const s=e.value;let c=r.getClosestSelectedImageElement(n.document.selection);s&&this.shouldConvertImageType(s,c)&&(this.editor.execute(r.isBlockImage(c)?"imageTypeInline":"imageTypeBlock"),c=r.getClosestSelectedImageElement(n.document.selection)),!s||this._styles.get(s).isDefault?o.removeAttribute("imageStyle",c):o.setAttribute("imageStyle",s,c)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{objectFullWidth:pO,objectInline:Vy,objectLeft:Ly,objectRight:Ff,objectCenter:zf,objectBlockLeft:Fy,objectBlockRight:zy}=Fn,Nu={inline:{name:"inline",title:"In line",icon:Vy,modelElements:["imageInline"],isDefault:!0},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:Ly,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"},alignBlockLeft:{name:"alignBlockLeft",title:"Left aligned image",icon:Fy,modelElements:["imageBlock"],className:"image-style-block-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:zf,modelElements:["imageBlock"],className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:Ff,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"},alignBlockRight:{name:"alignBlockRight",title:"Right aligned image",icon:zy,modelElements:["imageBlock"],className:"image-style-block-align-right"},block:{name:"block",title:"Centered image",icon:zf,modelElements:["imageBlock"],isDefault:!0},side:{name:"side",title:"Side image",icon:Ff,modelElements:["imageBlock"],className:"image-style-side"}},Hy={full:pO,left:Fy,right:zy,center:zf,inlineLeft:Ly,inlineRight:Ff,inline:Vy},Uy=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function gO(i){return(i.configuredStyles.options||[]).map(n=>vO(n)).filter(n=>yO(n,i))}function bO(i,e){return i&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:i?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}}function wO(i){return i.has("ImageBlockEditing")&&i.has("ImageInlineEditing")?[...Uy]:[]}function vO(i){return typeof i=="string"?Nu[i]?i=Se({},Nu[i]):i={name:i}:i=_O(Nu[i.name],i),typeof i.icon=="string"&&(i.icon=Hy[i.icon]||i.icon),i}function yO(i,{isBlockPluginLoaded:e,isInlinePluginLoaded:t}){const{modelElements:n,name:r}=i;if(!n||!n.length||!r)return Wy({style:i}),!1;{const o=[e?"imageBlock":null,t?"imageInline":null];if(!n.some(s=>o.includes(s)))return Vn("image-style-missing-dependency",{style:i,missingPlugins:n.map(s=>s==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function _O(i,e){const t=Se({},e);for(const n in i)Object.prototype.hasOwnProperty.call(e,n)||(t[n]=i[n]);return t}function Wy(i){Vn("image-style-configuration-definition-invalid",i)}var Hf={normalizeStyles:gO,getDefaultStylesConfiguration:bO,getDefaultDropdownDefinitions:wO,warnInvalidStyle:Wy,DEFAULT_OPTIONS:Nu,DEFAULT_ICONS:Hy,DEFAULT_DROPDOWN_DEFINITIONS:Uy};/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kO(i){return(e,t,n)=>{if(!n.consumable.consume(t.item,e.name))return;const r=$y(t.attributeNewValue,i),o=$y(t.attributeOldValue,i),s=n.mapper.toViewElement(t.item),c=n.writer;o&&c.removeClass(o.className,s),r&&c.addClass(r.className,s)}}function EO(i){const e={imageInline:i.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:i.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,n,r)=>{if(!n.modelRange)return;const o=n.viewItem,s=Qn(n.modelRange.getItems());if(!!s&&!!r.schema.checkAttribute(s,"imageStyle"))for(const c of e[s.name])r.consumable.consume(o,{classes:c.className})&&r.writer.setAttribute("imageStyle",c.name,s)}}function $y(i,e){for(const t of e)if(t.name===i)return t}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jy extends be{static get pluginName(){return"ImageStyleEditing"}static get requires(){return[ar]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:t}=Hf,n=this.editor,r=n.plugins.has("ImageBlockEditing"),o=n.plugins.has("ImageInlineEditing");n.config.define("image.styles",t(r,o)),this.normalizedStyles=e({configuredStyles:n.config.get("image.styles"),isBlockPluginLoaded:r,isInlinePluginLoaded:o}),this._setupConversion(r,o),this._setupPostFixer(),n.commands.add("imageStyle",new mO(n,this.normalizedStyles))}_setupConversion(e,t){const n=this.editor,r=n.model.schema,o=kO(this.normalizedStyles),s=EO(this.normalizedStyles);n.editing.downcastDispatcher.on("attribute:imageStyle",o),n.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(r.extend("imageBlock",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:figure",s,{priority:"low"})),t&&(r.extend("imageInline",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:img",s,{priority:"low"}))}_setupPostFixer(){const e=this.editor,t=e.model.document,n=e.plugins.get(ar),r=new Map(this.normalizedStyles.map(o=>[o.name,o]));t.registerPostFixer(o=>{let s=!1;for(const c of t.differ.getChanges())if(c.type=="insert"||c.type=="attribute"&&c.attributeKey=="imageStyle"){let u=c.type=="insert"?c.position.nodeAfter:c.range.start.nodeAfter;if(u&&u.is("element","paragraph")&&u.childCount>0&&(u=u.getChild(0)),!n.isImage(u))continue;const h=u.getAttribute("imageStyle");if(!h)continue;const f=r.get(h);(!f||!f.modelElements.includes(u.name))&&(o.removeAttribute("imageStyle",u),s=!0)}return s})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CO extends be{static get requires(){return[jy]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){const e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],n=qy(e.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles);for(const o of n)this._createButton(o);const r=qy([...t.filter(Gt),...Hf.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(const o of r)this._createDropdown(o,n)}_createDropdown(e,t){const n=this.editor.ui.componentFactory;n.add(e.name,r=>{let o;const{defaultItem:s,items:c,title:u}=e,h=c.filter(y=>t.find(({name:T})=>Ky(T)===y)).map(y=>{const T=n.create(y);return y===s&&(o=T),T});c.length!==h.length&&Hf.warnInvalidStyle({dropdown:e});const f=Vo(r,mv),p=f.buttonView;return vv(f,h),p.set({label:Gy(u,o.label),class:null,tooltip:!0}),p.bind("icon").toMany(h,"isOn",(...y)=>{const T=y.findIndex(fs);return T<0?o.icon:h[T].icon}),p.bind("label").toMany(h,"isOn",(...y)=>{const T=y.findIndex(fs);return Gy(u,T<0?o.label:h[T].label)}),p.bind("isOn").toMany(h,"isOn",(...y)=>y.some(fs)),p.bind("class").toMany(h,"isOn",(...y)=>y.some(fs)?"ck-splitbutton_flatten":null),p.on("execute",()=>{h.some(({isOn:y})=>y)?f.isOpen=!f.isOpen:o.fire("execute")}),f.bind("isEnabled").toMany(h,"isEnabled",(...y)=>y.some(fs)),f})}_createButton(e){const t=e.name;this.editor.ui.componentFactory.add(Ky(t),n=>{const r=this.editor.commands.get("imageStyle"),o=new Dt(n);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",s=>s===t),o.on("execute",this._executeCommand.bind(this,t)),o})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function qy(i,e){for(const t of i)e[t.title]&&(t.title=e[t.title]);return i}function Ky(i){return`imageStyle:${i}`}function Gy(i,e){return(i?i+": ":"")+e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TO extends be{static get requires(){return[jy,CO]}static get pluginName(){return"ImageStyle"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SO extends be{static get requires(){return[Ru,ar]}static get pluginName(){return"ImageToolbar"}afterInit(){const e=this.editor,t=e.t,n=e.plugins.get(Ru),r=e.plugins.get("ImageUtils");n.register("image",{ariaLabel:t("Image toolbar"),items:xO(e.config.get("image.toolbar")||[]),getRelatedElement:o=>r.getClosestSelectedImageWidget(o)})}}function xO(i){return i.map(e=>Gt(e)?e.name:e)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yy(i){const e=i.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function PO(i){return new Promise((e,t)=>{const n=i.getAttribute("src");fetch(n).then(r=>r.blob()).then(r=>{const o=Jy(r,n),c=`image.${o.replace("image/","")}`,u=new File([r],c,{type:o});e(u)}).catch(r=>r&&r.name==="TypeError"?IO(n).then(e).catch(t):t(r))})}function AO(i,e){return!i.isInlineImageView(e)||!e.getAttribute("src")?!1:e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||e.getAttribute("src").match(/^blob:/g)}function Jy(i,e){return i.type?i.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function IO(i){return RO(i).then(e=>{const t=Jy(e,i),r=`image.${t.replace("image/","")}`;return new File([e],r,{type:t})})}function RO(i){return new Promise((e,t)=>{const n=Ht.document.createElement("img");n.addEventListener("load",()=>{const r=Ht.document.createElement("canvas");r.width=n.width,r.height=n.height,r.getContext("2d").drawImage(n,0,0),r.toBlob(s=>s?e(s):t())}),n.addEventListener("error",()=>t()),n.src=i})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MO extends be{static get pluginName(){return"ImageUploadUI"}init(){const e=this.editor,t=e.t,n=r=>{const o=new nM(r),s=e.commands.get("uploadImage"),c=e.config.get("image.upload.types"),u=Yy(c);return o.set({acceptedType:c.map(h=>`image/${h}`).join(","),allowMultipleFiles:!0}),o.buttonView.set({label:t("Insert image"),icon:Fn.image,tooltip:!0}),o.buttonView.bind("isEnabled").to(s),o.on("done",(h,f)=>{const p=Array.from(f).filter(y=>u.test(y.type));p.length&&e.execute("uploadImage",{file:p})}),o};e.ui.componentFactory.add("uploadImage",n),e.ui.componentFactory.add("imageUpload",n)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OO extends be{static get pluginName(){return"ImageUploadProgress"}constructor(e){super(e);this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",(...t)=>this.uploadStatusChange(...t)),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",(...t)=>this.uploadStatusChange(...t))}uploadStatusChange(e,t,n){const r=this.editor,o=t.item,s=o.getAttribute("uploadId");if(!n.consumable.consume(t.item,e.name))return;const c=r.plugins.get("ImageUtils"),u=r.plugins.get(Ir),h=s?t.attributeNewValue:null,f=this.placeholder,p=r.editing.mapper.toViewElement(o),y=n.writer;if(h=="reading"){Qy(p,y),Xy(c,f,p,y);return}if(h=="uploading"){const T=u.loaders.get(s);Qy(p,y),T?(Zy(p,y),DO(p,y,T,r.editing.view),zO(c,p,y,T)):Xy(c,f,p,y);return}h=="complete"&&u.loaders.get(s)&&VO(p,y,r.editing.view),BO(p,y),Zy(p,y),NO(p,y)}}function Qy(i,e){i.hasClass("ck-appear")||e.addClass("ck-appear",i)}function NO(i,e){e.removeClass("ck-appear",i)}function Xy(i,e,t,n){t.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",t);const r=i.findViewImgElement(t);r.getAttribute("src")!==e&&n.setAttribute("src",e,r),e0(t,"placeholder")||n.insert(n.createPositionAfter(r),FO(n))}function Zy(i,e){i.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",i),t0(i,e,"placeholder")}function DO(i,e,t,n){const r=LO(e);e.insert(e.createPositionAt(i,"end"),r),t.on("change:uploadedPercent",(o,s,c)=>{n.change(u=>{u.setStyle("width",c+"%",r)})})}function BO(i,e){t0(i,e,"progressBar")}function VO(i,e,t){const n=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(i,"end"),n),setTimeout(()=>{t.change(r=>r.remove(r.createRangeOn(n)))},3e3)}function LO(i){const e=i.createUIElement("div",{class:"ck-progress-bar"});return i.setCustomProperty("progressBar",!0,e),e}function FO(i){const e=i.createUIElement("div",{class:"ck-upload-placeholder-loader"});return i.setCustomProperty("placeholder",!0,e),e}function e0(i,e){for(const t of i.getChildren())if(t.getCustomProperty(e))return t}function t0(i,e,t){const n=e0(i,t);n&&e.remove(e.createRangeOn(n))}function zO(i,e,t,n){if(n.data){const r=i.findViewImgElement(e);t.setAttribute("src",n.data,r)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HO extends at{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),n=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(n)}execute(e){const t=yn(e.file),n=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());t.forEach((s,c)=>{const u=n.getSelectedElement();if(c&&u&&r.isImage(u)){const h=this.editor.model.createPositionAfter(u);this._uploadImage(s,o,h)}else this._uploadImage(s,o)})}_uploadImage(e,t,n){const r=this.editor,s=r.plugins.get(Ir).createLoader(e),c=r.plugins.get("ImageUtils");!s||c.insertImage($t(Se({},t),{uploadId:s.id}),n)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UO extends be{static get requires(){return[Ir,wf,Ar,ar]}static get pluginName(){return"ImageUploadEditing"}constructor(e){super(e);e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const e=this.editor,t=e.model.document,n=e.conversion,r=e.plugins.get(Ir),o=e.plugins.get("ImageUtils"),s=Yy(e.config.get("image.upload.types")),c=new HO(e);e.commands.add("uploadImage",c),e.commands.add("imageUpload",c),n.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",(u,h)=>{if(WO(h.dataTransfer))return;const f=Array.from(h.dataTransfer.files).filter(p=>p?s.test(p.type):!1);!f.length||(u.stop(),e.model.change(p=>{h.targetRanges&&p.setSelection(h.targetRanges.map(y=>e.editing.mapper.toModelRange(y))),e.model.enqueueChange("default",()=>{e.execute("uploadImage",{file:f})})}))}),this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",(u,h)=>{const f=Array.from(e.editing.view.createRangeIn(h.content)).filter(y=>AO(o,y.item)&&!y.item.getAttribute("uploadProcessed")).map(y=>({promise:PO(y.item),imageElement:y.item}));if(!f.length)return;const p=new ga(e.editing.view.document);for(const y of f){p.setAttribute("uploadProcessed",!0,y.imageElement);const T=r.createLoader(y.promise);T&&(p.setAttribute("src","",y.imageElement),p.setAttribute("uploadId",T.id,y.imageElement))}}),e.editing.view.document.on("dragover",(u,h)=>{h.preventDefault()}),t.on("change",()=>{const u=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),h=new Set;for(const f of u)if(f.type=="insert"&&f.name!="$text"){const p=f.position.nodeAfter,y=f.position.root.rootName=="$graveyard";for(const T of $O(e,p)){const A=T.getAttribute("uploadId");if(!A)continue;const M=r.loaders.get(A);!M||(y?h.has(A)||M.abort():(h.add(A),this._uploadImageElements.set(A,T),M.status=="idle"&&this._readAndUpload(M)))}}}),this.on("uploadComplete",(u,{imageElement:h,data:f})=>{const p=f.urls?f.urls:f;this.editor.model.change(y=>{y.setAttribute("src",p.default,h),this._parseAndSetSrcsetAttributeOnImage(p,h,y)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(e){const t=this.editor,n=t.model,r=t.locale.t,o=t.plugins.get(Ir),s=t.plugins.get(wf),c=t.plugins.get("ImageUtils"),u=this._uploadImageElements;return n.enqueueChange("transparent",f=>{f.setAttribute("uploadStatus","reading",u.get(e.id))}),e.read().then(()=>{const f=e.upload(),p=u.get(e.id);if(At.isSafari){const y=t.editing.mapper.toViewElement(p),T=c.findViewImgElement(y);t.editing.view.once("render",()=>{if(!T.parent)return;const A=t.editing.view.domConverter.mapViewToDom(T.parent);if(!A)return;const M=A.style.display;A.style.display="none",A._ckHack=A.offsetHeight,A.style.display=M})}return n.enqueueChange("transparent",y=>{y.setAttribute("uploadStatus","uploading",p)}),f}).then(f=>{n.enqueueChange("transparent",p=>{const y=u.get(e.id);p.setAttribute("uploadStatus","complete",y),this.fire("uploadComplete",{data:f,imageElement:y})}),h()}).catch(f=>{if(e.status!=="error"&&e.status!=="aborted")throw f;e.status=="error"&&f&&s.showWarning(f,{title:r("Upload failed"),namespace:"upload"}),n.enqueueChange("transparent",p=>{p.remove(u.get(e.id))}),h()});function h(){n.enqueueChange("transparent",f=>{const p=u.get(e.id);f.removeAttribute("uploadId",p),f.removeAttribute("uploadStatus",p),u.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,n){let r=0;const o=Object.keys(e).filter(s=>{const c=parseInt(s,10);if(!isNaN(c))return r=Math.max(r,c),!0}).map(s=>`${e[s]} ${s}w`).join(", ");o!=""&&n.setAttribute("srcset",{data:o,width:r},t)}}function WO(i){return Array.from(i.types).includes("text/html")&&i.getData("text/html")!==""}function $O(i,e){const t=i.plugins.get("ImageUtils");return Array.from(i.model.createRangeOn(e)).filter(n=>t.isImage(n.item)).map(n=>n.item)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jO extends be{static get pluginName(){return"ImageUpload"}static get requires(){return[UO,MO,OO]}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qO extends at{refresh(){const e=this.editor,n=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!n,!n||!n.hasAttribute("width")?this.value=null:this.value={width:n.getAttribute("width"),height:null}}execute(e){const t=this.editor,n=t.model,o=t.plugins.get("ImageUtils").getClosestSelectedImageElement(n.document.selection);this.value={width:e.width,height:null},o&&n.change(s=>{s.setAttribute("width",e.width,o)})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class n0 extends be{static get requires(){return[ar]}static get pluginName(){return"ImageResizeEditing"}constructor(e){super(e);e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const e=this.editor,t=new qO(e);this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:"width"}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:"width"})}_registerConverters(e){const t=this.editor;t.conversion.for("downcast").add(n=>n.on(`attribute:width:${e}`,(r,o,s)=>{if(!s.consumable.consume(o.item,r.name))return;const c=s.writer,u=s.mapper.toViewElement(o.item);o.attributeNewValue!==null?(c.setStyle("width",o.attributeNewValue,u),c.addClass("image_resized",u)):(c.removeStyle("width",u),c.removeClass("image_resized",u))})),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"width",value:n=>n.getStyle("width")}})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Uf={small:Fn.objectSizeSmall,medium:Fn.objectSizeMedium,large:Fn.objectSizeLarge,original:Fn.objectSizeFull};class KO extends be{static get requires(){return[n0]}static get pluginName(){return"ImageResizeButtons"}constructor(e){super(e);this._resizeUnit=e.config.get("image.resizeUnit")}init(){const e=this.editor,t=e.config.get("image.resizeOptions"),n=e.commands.get("resizeImage");this.bind("isEnabled").to(n);for(const r of t)this._registerImageResizeButton(r);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){const t=this.editor,{name:n,value:r,icon:o}=e,s=r?r+this._resizeUnit:null;t.ui.componentFactory.add(n,c=>{const u=new Dt(c),h=t.commands.get("resizeImage"),f=this._getOptionLabelValue(e,!0);if(!Uf[o])throw new H("imageresizebuttons-missing-icon",t,e);return u.set({label:f,icon:Uf[o],tooltip:f,isToggleable:!0}),u.bind("isEnabled").to(this),u.bind("isOn").to(h,"value",i0(s)),this.listenTo(u,"execute",()=>{t.execute("resizeImage",{width:s})}),u})}_registerImageResizeDropdown(e){const t=this.editor,n=t.t,r=e.find(s=>!s.value),o=s=>{const c=t.commands.get("resizeImage"),u=Vo(s,hf),h=u.buttonView;return h.set({tooltip:n("Resize image"),commandValue:r.value,icon:Uf.medium,isToggleable:!0,label:this._getOptionLabelValue(r),withText:!0,class:"ck-resize-image-button"}),h.bind("label").to(c,"value",f=>f&&f.width?f.width:this._getOptionLabelValue(r)),u.bind("isOn").to(c),u.bind("isEnabled").to(this),pf(u,this._getResizeDropdownListItemDefinitions(e,c)),u.listView.ariaLabel=n("Image resize list"),this.listenTo(u,"execute",f=>{t.execute(f.source.commandName,{width:f.source.commandValue}),t.editing.view.focus()}),u};t.ui.componentFactory.add("resizeImage",o),t.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,t){const n=this.editor.t;return e.label?e.label:t?e.value?n("Resize image to %0",e.value+this._resizeUnit):n("Resize image to the original size"):e.value?e.value+this._resizeUnit:n("Original")}_getResizeDropdownListItemDefinitions(e,t){const n=new Ci;return e.map(r=>{const o=r.value?r.value+this._resizeUnit:null,s={type:"button",model:new yu({commandName:"resizeImage",commandValue:o,label:this._getOptionLabelValue(r),withText:!0,icon:null})};s.model.bind("isOn").to(t,"value",i0(o)),n.add(s)}),n}}function i0(i){return e=>i===null&&e===i?!0:e&&e.width===i}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const GO="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",YO=/(image|image-inline)/,Wf="image_resized";class JO extends be{static get requires(){return[Mu]}static get pluginName(){return"ImageResizeHandles"}init(){const e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,t=e.editing.view;t.addObserver(My),this.listenTo(t.document,"imageLoaded",(n,r)=>{if(!r.target.matches(GO))return;const o=e.editing.view.domConverter,c=o.domToView(r.target).findAncestor({classes:YO});let u=this.editor.plugins.get(Mu).getResizerByViewElement(c);if(u){u.redraw();return}const h=e.editing.mapper,f=h.toModelElement(c);u=e.plugins.get(Mu).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:f,viewElement:c,editor:e,getHandleHost(p){return p.querySelector("img")},getResizeHost(){return o.viewToDom(h.toViewElement(f.parent))},isCentered(){const p=f.getAttribute("imageStyle");return!p||p=="block"||p=="alignCenter"},onCommit(p){t.change(y=>{y.removeClass(Wf,c)}),e.execute("resizeImage",{width:p})}}),u.on("updateSize",()=>{c.hasClass(Wf)||t.change(p=>{p.addClass(Wf,c)})}),u.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QO extends be{static get requires(){return[n0,JO,KO]}static get pluginName(){return"ImageResize"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XO extends be{static get pluginName(){return"IndentEditing"}init(){const e=this.editor;e.commands.add("indent",new db(e)),e.commands.add("outdent",new db(e))}}var r0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',o0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZO extends be{static get pluginName(){return"IndentUI"}init(){const e=this.editor,t=e.locale,n=e.t,r=t.uiLanguageDirection=="ltr"?r0:o0,o=t.uiLanguageDirection=="ltr"?o0:r0;this._defineButton("indent",n("Increase indent"),r),this._defineButton("outdent",n("Decrease indent"),o)}_defineButton(e,t,n){const r=this.editor;r.ui.componentFactory.add(e,o=>{const s=r.commands.get(e),c=new Dt(o);return c.set({label:t,icon:n,tooltip:!0}),c.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(c,"execute",()=>{r.execute(e),r.editing.view.focus()}),c})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eN extends be{static get pluginName(){return"Indent"}static get requires(){return[XO,ZO]}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */class tN{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,n,r)=>{if(!r.consumable.test(n.item,"attribute:linkHref"))return;const o=r.writer,s=o.document.selection;for(const c of this._definitions){const u=o.createAttributeElement("a",c.attributes,{priority:5});c.classes&&o.addClass(c.classes,u);for(const h in c.styles)o.setStyle(h,c.styles[h],u);o.setCustomProperty("link",!0,u),c.callback(n.attributeNewValue)?n.item.is("selection")?o.wrap(s.getFirstRange(),u):o.wrap(r.mapper.toViewRange(n.range),u):o.unwrap(r.mapper.toViewRange(n.range),u)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,n,{writer:r,mapper:o})=>{const s=o.toViewElement(n.item),c=Array.from(s.getChildren()).find(u=>u.name==="a");for(const u of this._definitions){const h=Zr(u.attributes);if(u.callback(n.attributeNewValue)){for(const[f,p]of h)f==="class"?r.addClass(p,c):r.setAttribute(f,p,c);u.classes&&r.addClass(u.classes,c);for(const f in u.styles)r.setStyle(f,u.styles[f],c)}else{for(const[f,p]of h)f==="class"?r.removeClass(p,c):r.removeAttribute(f,c);u.classes&&r.removeClass(u.classes,c);for(const f in u.styles)r.removeStyle(f,c)}}})}}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const nN=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,iN=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,rN=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,oN=/^((\w+:(\/{2,})?)|(\W))/i,$f="Ctrl+K";function sN(i){return i.is("attributeElement")&&!!i.getCustomProperty("link")}function s0(i,{writer:e}){const t=e.createAttributeElement("a",{href:i},{priority:5});return e.setCustomProperty("link",!0,t),t}function a0(i){return i=String(i),aN(i)?i:"#"}function aN(i){return i.replace(nN,"").match(iN)}function lN(i,e){const t={"Open in a new tab":i("Open in a new tab"),Downloadable:i("Downloadable")};return e.forEach(n=>(n.label&&t[n.label]&&(n.label=t[n.label]),n)),e}function cN(i){const e=[];if(i)for(const[t,n]of Object.entries(i)){const r=Object.assign({},n,{id:`link${IC(t)}`});e.push(r)}return e}function jf(i,e){return i?e.checkAttribute(i.name,"linkHref"):!1}function uN(i){return rN.test(i)}function l0(i,e){const t=uN(i)?"mailto:":e,n=!!t&&!oN.test(i);return i&&n?t+i:i}function c0(i){window.open(i,"_blank","noopener")}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dN extends at{constructor(e){super(e);this.manualDecorators=new Ci,this.automaticDecorators=new tN}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,n=t.getSelectedElement()||Qn(t.getSelectedBlocks());jf(n,e.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(n,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const r of this.manualDecorators)r.value=this._getDecoratorStateFromModel(r.id)}execute(e,t={}){const n=this.editor.model,r=n.document.selection,o=[],s=[];for(const c in t)t[c]?o.push(c):s.push(c);n.change(c=>{if(r.isCollapsed){const u=r.getFirstPosition();if(r.hasAttribute("linkHref")){const h=ya(u,"linkHref",r.getAttribute("linkHref"),n);c.setAttribute("linkHref",e,h),o.forEach(f=>{c.setAttribute(f,!0,h)}),s.forEach(f=>{c.removeAttribute(f,h)}),c.setSelection(c.createPositionAfter(h.end.nodeBefore))}else if(e!==""){const h=Zr(r.getAttributes());h.set("linkHref",e),o.forEach(p=>{h.set(p,!0)});const{end:f}=n.insertContent(c.createText(e,h),u);c.setSelection(f)}["linkHref",...o,...s].forEach(h=>{c.removeSelectionAttribute(h)})}else{const u=n.schema.getValidRanges(r.getRanges(),"linkHref"),h=[];for(const p of r.getSelectedBlocks())n.schema.checkAttribute(p,"linkHref")&&h.push(c.createRangeOn(p));const f=h.slice();for(const p of u)this._isRangeToUpdate(p,h)&&f.push(p);for(const p of f)c.setAttribute("linkHref",e,p),o.forEach(y=>{c.setAttribute(y,!0,p)}),s.forEach(y=>{c.removeAttribute(y,p)})}})}_getDecoratorStateFromModel(e){const t=this.editor.model,n=t.document.selection,r=n.getSelectedElement();return jf(r,t.schema)?r.getAttribute(e):n.getAttribute(e)}_isRangeToUpdate(e,t){for(const n of t)if(n.containsRange(e))return!1;return!0}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hN extends at{refresh(){const e=this.editor.model,t=e.document.selection,n=t.getSelectedElement();jf(n,e.schema)?this.isEnabled=e.schema.checkAttribute(n,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,n=t.document.selection,r=e.commands.get("link");t.change(o=>{const s=n.isCollapsed?[ya(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),t)]:t.schema.getValidRanges(n.getRanges(),"linkHref");for(const c of s)if(o.removeAttribute("linkHref",c),r)for(const u of r.manualDecorators)o.removeAttribute(u.id,c)})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class u0{constructor({id:e,label:t,attributes:n,classes:r,styles:o,defaultValue:s}){this.id=e,this.set("value"),this.defaultValue=s,this.label=t,this.attributes=n,this.classes=r,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}je(u0,Pt);/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fN="ck-link_selected",d0="automatic",mN="manual",pN=/^(https?:)?\/\//;class gN extends be{static get pluginName(){return"LinkEditing"}static get requires(){return[sy,ry,Ar]}constructor(e){super(e);e.config.define("link",{addTargetToExternalLinks:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:s0}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(r,o)=>s0(a0(r),o)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:r=>r.getAttribute("href")}}),e.commands.add("link",new dN(e)),e.commands.add("unlink",new hN(e));const t=lN(e.t,cN(e.config.get("link.decorators")));this._enableAutomaticDecorators(t.filter(r=>r.mode===d0)),this._enableManualDecorators(t.filter(r=>r.mode===mN)),e.plugins.get(sy).registerAttribute("linkHref"),G5(e,"linkHref","a",fN),this._enableLinkOpen(),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink()}_enableAutomaticDecorators(e){const t=this.editor,r=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&r.add({id:"linkIsExternal",mode:d0,callback:o=>pN.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),r.add(e),r.length&&t.conversion.for("downcast").add(r.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,r=t.commands.get("link").manualDecorators;e.forEach(o=>{t.model.schema.extend("$text",{allowAttributes:o.id}),o=new u0(o),r.add(o),t.conversion.for("downcast").attributeToElement({model:o.id,view:(s,{writer:c})=>{if(s){const u=c.createAttributeElement("a",o.attributes,{priority:5});o.classes&&c.addClass(o.classes,u);for(const h in o.styles)c.setStyle(h,o.styles[h],u);return c.setCustomProperty("link",!0,u),u}}}),t.conversion.for("upcast").elementToAttribute({view:Se({name:"a"},o._createPattern()),model:{key:o.id}})})}_enableLinkOpen(){const e=this.editor,n=e.editing.view.document,r=e.model.document;this.listenTo(n,"click",(o,s)=>{if(!(At.isMac?s.domEvent.metaKey:s.domEvent.ctrlKey))return;let u=s.domTarget;if(u.tagName.toLowerCase()!="a"&&(u=u.closest("a")),!u)return;const h=u.getAttribute("href");!h||(o.stop(),s.preventDefault(),c0(h))},{context:"$capture"}),this.listenTo(n,"enter",(o,s)=>{const c=r.selection,u=c.getSelectedElement(),h=u?u.getAttribute("linkHref"):c.getAttribute("linkHref");!(h&&s.domEvent.altKey)||(o.stop(),c0(h))},{context:"a"})}_enableInsertContentSelectionAttributesFixer(){const t=this.editor.model,n=t.document.selection;this.listenTo(t,"insertContent",()=>{const r=n.anchor.nodeBefore,o=n.anchor.nodeAfter;!n.hasAttribute("linkHref")||!r||!r.hasAttribute("linkHref")||o&&o.hasAttribute("linkHref")||t.change(s=>{qf(s,Kf(t.schema))})},{priority:"low"})}_enableClickingAfterLink(){const e=this.editor,t=e.model;e.editing.view.addObserver(Cu);let n=!1;this.listenTo(e.editing.view.document,"mousedown",()=>{n=!0}),this.listenTo(e.editing.view.document,"selectionChange",()=>{if(!n)return;n=!1;const r=t.document.selection;if(!r.isCollapsed||!r.hasAttribute("linkHref"))return;const o=r.getFirstPosition(),s=ya(o,"linkHref",r.getAttribute("linkHref"),t);(o.isTouching(s.start)||o.isTouching(s.end))&&t.change(c=>{qf(c,Kf(t.schema))})})}_enableTypingOverLink(){const e=this.editor,t=e.editing.view;let n,r;this.listenTo(t.document,"delete",()=>{r=!0},{priority:"high"}),this.listenTo(e.model,"deleteContent",()=>{const o=e.model.document.selection;if(!o.isCollapsed){if(r){r=!1;return}!h0(e)||bN(e.model)&&(n=o.getAttributes())}},{priority:"high"}),this.listenTo(e.model,"insertContent",(o,[s])=>{r=!1,!!h0(e)&&(!n||(e.model.change(c=>{for(const[u,h]of n)c.setAttribute(u,h,s)}),n=null))},{priority:"high"})}_handleDeleteContentAfterLink(){const e=this.editor,t=e.model,n=t.document.selection,r=e.editing.view;let o=!1,s=!1;this.listenTo(r.document,"delete",(c,u)=>{s=u.domEvent.keyCode===ut.backspace},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{o=!1;const c=n.getFirstPosition(),u=n.getAttribute("linkHref");if(!u)return;const h=ya(c,"linkHref",u,t);o=h.containsPosition(c)||h.end.isEqual(c)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{!s||(s=!1,!o&&e.model.enqueueChange(c=>{qf(c,Kf(t.schema))}))},{priority:"low"})}}function qf(i,e){i.removeSelectionAttribute("linkHref");for(const t of e)i.removeSelectionAttribute(t)}function bN(i){const e=i.document.selection,t=e.getFirstPosition(),n=e.getLastPosition(),r=t.nodeAfter;if(!r||!r.is("$text")||!r.hasAttribute("linkHref"))return!1;const o=n.textNode||n.nodeBefore;return r===o?!0:ya(t,"linkHref",r.getAttribute("linkHref"),i).containsRange(i.createRange(t,n),!0)}function h0(i){return i.plugins.get("Input").isInput(i.model.change(t=>t.batch))}function Kf(i){return i.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wN extends rt{constructor(e,t){super(e);const n=e.t;this.focusTracker=new $i,this.keystrokes=new to,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(n("Save"),Fn.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(n("Cancel"),Fn.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusables=new xs,this._focusCycler=new fa({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const r=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&r.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:r,tabindex:"-1"},children:this.children}),sf(this)}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),af({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const e=this.locale.t,t=new gf(this.locale,bf);return t.label=e("Link URL"),t}_createButton(e,t,n,r){const o=new Dt(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),r&&o.delegate("execute").to(this,r),o}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const n of e.manualDecorators){const r=new uf(this.locale);r.set({name:n.id,label:n.label,withText:!0}),r.bind("isOn").toMany([n,e],"value",(o,s)=>s===void 0&&o===void 0?n.defaultValue:o),r.on("execute",()=>{n.set("value",!r.isOn)}),t.add(r)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const n=new rt;n.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(r=>({tag:"li",children:[r],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(n)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}}var vN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yN extends rt{constructor(e){super(e);const t=e.t;this.focusTracker=new $i,this.keystrokes=new to,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(t("Unlink"),vN,"unlink"),this.editButtonView=this._createButton(t("Edit link"),Fn.pencil,"edit"),this.set("href"),this._focusables=new xs,this._focusCycler=new fa({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,n){const r=new Dt(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.delegate("execute").to(this,n),r}_createPreviewButton(){const e=new Dt(this.locale),t=this.bindTemplate,n=this.t;return e.set({withText:!0,tooltip:n("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",r=>r&&a0(r)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",r=>r||n("This link has no URL")),e.bind("isEnabled").to(this,"href",r=>!!r),e.template.tag="a",e.template.eventListeners={},e}}var _N='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Rr="link-ui";class kN extends be{static get requires(){return[ku]}static get pluginName(){return"LinkUI"}init(){const e=this.editor;e.editing.view.addObserver(AR),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=e.plugins.get(ku),this._createToolbarLinkButton(),this._enableUserBalloonInteractions(),e.conversion.for("editingDowncast").markerToHighlight({model:Rr,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Rr,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}destroy(){super.destroy(),this.formView.destroy()}_createActionsView(){const e=this.editor,t=new yN(e.locale),n=e.commands.get("link"),r=e.commands.get("unlink");return t.bind("href").to(n,"value"),t.editButtonView.bind("isEnabled").to(n),t.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(o,s)=>{this._hideUI(),s()}),t.keystrokes.set($f,(o,s)=>{this._addFormView(),s()}),t}_createFormView(){const e=this.editor,t=e.commands.get("link"),n=e.config.get("link.defaultProtocol"),r=new wN(e.locale,t);return r.urlInputView.fieldView.bind("value").to(t,"value"),r.urlInputView.bind("isReadOnly").to(t,"isEnabled",o=>!o),r.saveButtonView.bind("isEnabled").to(t),this.listenTo(r,"submit",()=>{const{value:o}=r.urlInputView.fieldView.element,s=l0(o,n);e.execute("link",s,r.getDecoratorSwitchesState()),this._closeFormView()}),this.listenTo(r,"cancel",()=>{this._closeFormView()}),r.keystrokes.set("Esc",(o,s)=>{this._closeFormView(),s()}),r}_createToolbarLinkButton(){const e=this.editor,t=e.commands.get("link"),n=e.t;e.keystrokes.set($f,(r,o)=>{o(),t.isEnabled&&this._showUI(!0)}),e.ui.componentFactory.add("link",r=>{const o=new Dt(r);return o.isEnabled=!0,o.label=n("Link"),o.icon=_N,o.keystroke=$f,o.tooltip=!0,o.isToggleable=!0,o.bind("isEnabled").to(t,"isEnabled"),o.bind("isOn").to(t,"value",s=>!!s),this.listenTo(o,"execute",()=>this._showUI(!0)),o})}_enableUserBalloonInteractions(){const e=this.editor.editing.view.document;this.listenTo(e,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),this.editor.keystrokes.set("Tab",(t,n)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),n())},{priority:"high"}),this.editor.keystrokes.set("Esc",(t,n)=>{this._isUIVisible&&(this._hideUI(),n())}),of({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=t.value||""}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let n=this._getSelectedLinkElement(),r=s();const o=()=>{const c=this._getSelectedLinkElement(),u=s();n&&!c||!n&&u!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),n=c,r=u};function s(){return t.selection.focus.getAncestors().reverse().find(c=>c.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return this._balloon.hasView(this.formView)}get _areActionsInPanel(){return this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){return this._balloon.visibleView==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=this.editor.model,n=e.document;let r=null;if(t.markers.has(Rr)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(Rr)),s=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));r=e.domConverter.viewRangeToDom(s)}else r=()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(n.selection.getFirstRange())};return{target:r}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,n=t.getSelectedElement();if(t.isCollapsed||n&&jt(n))return Gf(t.getFirstPosition());{const r=t.getFirstRange().getTrimmed(),o=Gf(r.start),s=Gf(r.end);return!o||o!=s?null:e.createRangeIn(o).getTrimmed().isEqual(r)?o:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const n=e.document.selection.getFirstRange();if(e.markers.has(Rr))t.updateMarker(Rr,{range:n});else if(n.start.isAtEnd){const r=n.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:n});t.addMarker(Rr,{usingOperation:!1,affectsData:!1,range:t.createRange(r,n.end)})}else t.addMarker(Rr,{usingOperation:!1,affectsData:!1,range:n})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(Rr)&&e.change(t=>{t.removeMarker(Rr)})}}function Gf(i){return i.getAncestors().find(e=>sN(e))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const EN=4,CN=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),TN=2;class SN extends be{static get requires(){return[Lo]}static get pluginName(){return"AutoLink"}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling()}_enableTypingHandling(){const e=this.editor,t=new xf(e.model,r=>{if(!xN(r))return;const o=f0(r.substr(0,r.length-1));if(o)return{url:o}}),n=e.plugins.get("Input");t.on("matched:data",(r,o)=>{const{batch:s,range:c,url:u}=o;if(!n.isInput(s))return;const h=c.end.getShiftedBy(-1),f=h.getShiftedBy(-u.length),p=e.model.createRange(f,h);this._applyAutoLink(u,p)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,n=e.commands.get("enter");!n||n.on("execute",()=>{const r=t.document.selection.getFirstPosition();if(!r.parent.previousSibling)return;const o=t.createRangeIn(r.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,n=e.commands.get("shiftEnter");!n||n.on("execute",()=>{const r=t.document.selection.getFirstPosition(),o=t.createRange(t.createPositionAt(r.parent,0),r.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:n,range:r}=oy(e,t),o=f0(n);if(o){const s=t.createRange(r.end.getShiftedBy(-o.length),r.end);this._applyAutoLink(o,s)}}_applyAutoLink(e,t){const n=this.editor.model,r=this.editor.plugins.get("Delete");!this.isEnabled||!PN(t,n)||n.enqueueChange(o=>{const s=this.editor.config.get("link.defaultProtocol"),c=l0(e,s);o.setAttribute("linkHref",c,t),n.enqueueChange(()=>{r.requestUndoOnBackspace()})})}}function xN(i){return i.length>EN&&i[i.length-1]===" "&&i[i.length-2]!==" "}function f0(i){const e=CN.exec(i);return e?e[TN]:null}function PN(i,e){return e.schema.checkAttributeInSelection(e.createSelection(i),"linkHref")}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AN extends be{static get requires(){return[gN,kN,SN]}static get pluginName(){return"Link"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class m0 extends at{constructor(e,t){super(e);this.type=t}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,n=t.document,r=Array.from(n.selection.getSelectedBlocks()).filter(s=>g0(s,t.schema)),o=e.forceValue!==void 0?!e.forceValue:this.value;t.change(s=>{if(o){let c=r[r.length-1].nextSibling,u=Number.POSITIVE_INFINITY,h=[];for(;c&&c.name=="listItem"&&c.getAttribute("listIndent")!==0;){const f=c.getAttribute("listIndent");f<u&&(u=f);const p=f-u;h.push({element:c,listIndent:p}),c=c.nextSibling}h=h.reverse();for(const f of h)s.setAttribute("listIndent",f.listIndent,f.element)}if(!o){let c=Number.POSITIVE_INFINITY;for(const u of r)u.is("element","listItem")&&u.getAttribute("listIndent")<c&&(c=u.getAttribute("listIndent"));c=c===0?1:c,p0(r,!0,c),p0(r,!1,c)}for(const c of r.reverse())o&&c.name=="listItem"?s.rename(c,"paragraph"):!o&&c.name!="listItem"?(s.setAttributes({listType:this.type,listIndent:0},c),s.rename(c,"listItem")):!o&&c.name=="listItem"&&c.getAttribute("listType")!=this.type&&s.setAttribute("listType",this.type,c);this.fire("_executeCleanup",r)})}_getValue(){const e=Qn(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is("element","listItem")&&e.getAttribute("listType")==this.type}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,n=Qn(e.getSelectedBlocks());return n?g0(n,t):!1}}function p0(i,e,t){const n=e?i[0]:i[i.length-1];if(n.is("element","listItem")){let r=n[e?"previousSibling":"nextSibling"],o=n.getAttribute("listIndent");for(;r&&r.is("element","listItem")&&r.getAttribute("listIndent")>=t;)o>r.getAttribute("listIndent")&&(o=r.getAttribute("listIndent")),r.getAttribute("listIndent")==o&&i[e?"unshift":"push"](r),r=r[e?"previousSibling":"nextSibling"]}}function g0(i,e){return e.checkChild(i.parent,"listItem")&&!e.isObject(i)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class b0 extends at{constructor(e,t){super(e);this._indentBy=t=="forward"?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=e.document;let n=Array.from(t.selection.getSelectedBlocks());e.change(r=>{const o=n[n.length-1];let s=o.nextSibling;for(;s&&s.name=="listItem"&&s.getAttribute("listIndent")>o.getAttribute("listIndent");)n.push(s),s=s.nextSibling;this._indentBy<0&&(n=n.reverse());for(const c of n){const u=c.getAttribute("listIndent")+this._indentBy;u<0?r.rename(c,"paragraph"):r.setAttribute("listIndent",u,c)}this.fire("_executeCleanup",n)})}_checkEnabled(){const e=Qn(this.editor.model.document.selection.getSelectedBlocks());if(!e||!e.is("element","listItem"))return!1;if(this._indentBy>0){const t=e.getAttribute("listIndent"),n=e.getAttribute("listType");let r=e.previousSibling;for(;r&&r.is("element","listItem")&&r.getAttribute("listIndent")>=t;){if(r.getAttribute("listIndent")==t)return r.getAttribute("listType")==n;r=r.previousSibling}return!1}return!0}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function IN(i){const e=i.createContainerElement("li");return e.getFillerOffset=ON,e}function RN(i,e){const t=e.mapper,n=e.writer,r=i.getAttribute("listType")=="numbered"?"ol":"ul",o=IN(n),s=n.createContainerElement(r,null);return n.insert(n.createPositionAt(s,0),o),t.bindElements(i,o),o}function w0(i,e,t,n){const r=e.parent,o=t.mapper,s=t.writer;let c=o.toViewPosition(n.createPositionBefore(i));const u=y0(i.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:i.getAttribute("listIndent")}),h=i.previousSibling;if(u&&u.getAttribute("listIndent")==i.getAttribute("listIndent")){const f=o.toViewElement(u);c=s.breakContainer(s.createPositionAfter(f))}else if(h&&h.name=="listItem"){c=o.toViewPosition(n.createPositionAt(h,"end"));const f=o.findMappedViewAncestor(c),p=MN(f);p?c=s.createPositionBefore(p):c=s.createPositionAt(f,"end")}else c=o.toViewPosition(n.createPositionBefore(i));if(c=v0(c),s.insert(c,r),h&&h.name=="listItem"){const f=o.toViewElement(h),y=s.createRange(s.createPositionAt(f,0),c).getWalker({ignoreElementEnd:!0});for(const T of y)if(T.item.is("element","li")){const A=s.breakContainer(s.createPositionBefore(T.item)),M=T.item.parent,B=s.createPositionAt(e,"end");qi(s,B.nodeBefore,B.nodeAfter),s.move(s.createRangeOn(M),B),y.position=A}}else{const f=r.nextSibling;if(f&&(f.is("element","ul")||f.is("element","ol"))){let p=null;for(const y of f.getChildren()){const T=o.toModelElement(y);if(T&&T.getAttribute("listIndent")>i.getAttribute("listIndent"))p=y;else break}p&&(s.breakContainer(s.createPositionAfter(p)),s.move(s.createRangeOn(p.parent),s.createPositionAt(e,"end")))}}qi(s,r,r.nextSibling),qi(s,r.previousSibling,r)}function qi(i,e,t){return!e||!t||e.name!="ul"&&e.name!="ol"||e.name!=t.name||e.getAttribute("class")!==t.getAttribute("class")?null:i.mergeContainers(i.createPositionAfter(e))}function v0(i){return i.getLastMatchingPosition(e=>e.item.is("uiElement"))}function y0(i,e){const t=!!e.sameIndent,n=!!e.smallerIndent,r=e.listIndent;let o=i;for(;o&&o.name=="listItem";){const s=o.getAttribute("listIndent");if(t&&r==s||n&&r>s)return o;e.direction==="forward"?o=o.nextSibling:o=o.previousSibling}return null}function _0(i,e,t,n){i.ui.componentFactory.add(e,r=>{const o=i.commands.get(e),s=new Dt(r);return s.set({label:t,icon:n,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.on("execute",()=>{i.execute(e),i.editing.view.focus()}),s})}function MN(i){for(const e of i.getChildren())if(e.name=="ul"||e.name=="ol")return e;return null}function ON(){const i=!this.isEmpty&&(this.getChild(0).name=="ul"||this.getChild(0).name=="ol");return this.isEmpty||i?0:bb.call(this)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function k0(i){return(e,t,n)=>{const r=n.consumable;if(!r.test(t.item,"insert")||!r.test(t.item,"attribute:listType")||!r.test(t.item,"attribute:listIndent"))return;r.consume(t.item,"insert"),r.consume(t.item,"attribute:listType"),r.consume(t.item,"attribute:listIndent");const o=t.item,s=RN(o,n);w0(o,s,n,i)}}function NN(i){return(e,t,n)=>{const s=n.mapper.toViewPosition(t.position).getLastMatchingPosition(T=>!T.item.is("element","li")).nodeAfter,c=n.writer;c.breakContainer(c.createPositionBefore(s)),c.breakContainer(c.createPositionAfter(s));const u=s.parent,h=u.previousSibling,f=c.createRangeOn(u),p=c.remove(f);h&&h.nextSibling&&qi(c,h,h.nextSibling);const y=n.mapper.toModelElement(s);S0(y.getAttribute("listIndent")+1,t.position,f.start,s,n,i);for(const T of c.createRangeIn(p).getItems())n.mapper.unbindViewElement(T);e.stop()}}function DN(i,e,t){if(!t.consumable.consume(e.item,"attribute:listType"))return;const n=t.mapper.toViewElement(e.item),r=t.writer;r.breakContainer(r.createPositionBefore(n)),r.breakContainer(r.createPositionAfter(n));const o=n.parent,s=e.attributeNewValue=="numbered"?"ol":"ul";r.rename(s,o)}function BN(i,e,t){const r=t.mapper.toViewElement(e.item).parent,o=t.writer;qi(o,r,r.nextSibling),qi(o,r.previousSibling,r);for(const s of e.item.getChildren())t.consumable.consume(s,"insert")}function VN(i){return(e,t,n)=>{if(!n.consumable.consume(t.item,"attribute:listIndent"))return;const r=n.mapper.toViewElement(t.item),o=n.writer;o.breakContainer(o.createPositionBefore(r)),o.breakContainer(o.createPositionAfter(r));const s=r.parent,c=s.previousSibling,u=o.createRangeOn(s);o.remove(u),c&&c.nextSibling&&qi(o,c,c.nextSibling),S0(t.attributeOldValue+1,t.range.start,u.start,r,n,i),w0(t.item,r,n,i);for(const h of t.item.getChildren())n.consumable.consume(h,"insert")}}function E0(i,e,t){if(e.item.name!="listItem"){let n=t.mapper.toViewPosition(e.range.start);const r=t.writer,o=[];for(;(n.parent.name=="ul"||n.parent.name=="ol")&&(n=r.breakContainer(n),n.parent.name=="li");){const s=n,c=r.createPositionAt(n.parent,"end");if(!s.isEqual(c)){const u=r.remove(r.createRange(s,c));o.push(u)}n=r.createPositionAfter(n.parent)}if(o.length>0){for(let s=0;s<o.length;s++){const c=n.nodeBefore;if(n=r.insert(n,o[s]).end,s>0){const h=qi(r,c,c.nextSibling);h&&h.parent==c&&n.offset--}}qi(r,n.nodeBefore,n.nodeAfter)}}}function LN(i,e,t){const n=t.mapper.toViewPosition(e.position),r=n.nodeBefore,o=n.nodeAfter;qi(t.writer,r,o)}function FN(i,e,t){if(t.consumable.consume(e.viewItem,{name:!0})){const n=t.writer,r=n.createElement("listItem"),o=qN(e.viewItem);n.setAttribute("listIndent",o,r);const s=e.viewItem.parent&&e.viewItem.parent.name=="ol"?"numbered":"bulleted";if(n.setAttribute("listType",s,r),!t.safeInsert(r,e.modelCursor))return;const c=$N(r,e.viewItem.getChildren(),t);e.modelRange=n.createRange(e.modelCursor,c),t.updateConversionResult(r,e)}}function C0(i,e,t){if(t.consumable.test(e.viewItem,{name:!0})){const n=Array.from(e.viewItem.getChildren());for(const r of n)!(r.is("element","li")||Ca(r))&&r._remove()}}function zN(i,e,t){if(t.consumable.test(e.viewItem,{name:!0})){if(e.viewItem.childCount===0)return;const n=[...e.viewItem.getChildren()];let r=!1;for(const o of n)r&&!Ca(o)&&o._remove(),Ca(o)&&(r=!0)}}function T0(i){return(e,t)=>{if(t.isPhantom)return;const n=t.modelPosition.nodeBefore;if(n&&n.is("element","listItem")){const r=t.mapper.toViewElement(n),o=r.getAncestors().find(Ca),s=i.createPositionAt(r,0).getWalker();for(const c of s)if(c.type=="elementStart"&&c.item.is("element","li")){t.viewPosition=c.previousPosition;break}else if(c.type=="elementEnd"&&c.item==o){t.viewPosition=c.nextPosition;break}}}}function HN(i){return(e,t)=>{const n=t.viewPosition,r=n.parent,o=t.mapper;if(r.name=="ul"||r.name=="ol"){if(n.isAtEnd){const s=o.toModelElement(n.nodeBefore),c=o.getModelLength(n.nodeBefore);t.modelPosition=i.createPositionBefore(s).getShiftedBy(c)}else{const s=o.toModelElement(n.nodeAfter);t.modelPosition=i.createPositionBefore(s)}e.stop()}else if(r.name=="li"&&n.nodeBefore&&(n.nodeBefore.name=="ul"||n.nodeBefore.name=="ol")){const s=o.toModelElement(r);let c=1,u=n.nodeBefore;for(;u&&Ca(u);)c+=o.getModelLength(u),u=u.previousSibling;t.modelPosition=i.createPositionBefore(s).getShiftedBy(c),e.stop()}}}function UN(i,e){const t=i.document.differ.getChanges(),n=new Map;let r=!1;for(const u of t)if(u.type=="insert"&&u.name=="listItem")o(u.position);else if(u.type=="insert"&&u.name!="listItem"){if(u.name!="$text"){const f=u.position.nodeAfter;f.hasAttribute("listIndent")&&(e.removeAttribute("listIndent",f),r=!0),f.hasAttribute("listType")&&(e.removeAttribute("listType",f),r=!0),f.hasAttribute("listStyle")&&(e.removeAttribute("listStyle",f),r=!0);for(const p of Array.from(i.createRangeIn(f)).filter(y=>y.item.is("element","listItem")))o(p.previousPosition)}const h=u.position.getShiftedBy(u.length);o(h)}else u.type=="remove"&&u.name=="listItem"?o(u.position):(u.type=="attribute"&&u.attributeKey=="listIndent"||u.type=="attribute"&&u.attributeKey=="listType")&&o(u.range.start);for(const u of n.values())s(u),c(u);return r;function o(u){const h=u.nodeBefore;if(!h||!h.is("element","listItem")){const f=u.nodeAfter;f&&f.is("element","listItem")&&n.set(f,f)}else{let f=h;if(n.has(f))return;for(let p=f.previousSibling;p&&p.is("element","listItem");p=f.previousSibling)if(f=p,n.has(f))return;n.set(h,f)}}function s(u){let h=0,f=null;for(;u&&u.is("element","listItem");){const p=u.getAttribute("listIndent");if(p>h){let y;f===null?(f=p-h,y=h):(f>p&&(f=p),y=p-f),e.setAttribute("listIndent",y,u),r=!0}else f=null,h=u.getAttribute("listIndent")+1;u=u.nextSibling}}function c(u){let h=[],f=null;for(;u&&u.is("element","listItem");){const p=u.getAttribute("listIndent");if(f&&f.getAttribute("listIndent")>p&&(h=h.slice(0,p+1)),p!=0)if(h[p]){const y=h[p];u.getAttribute("listType")!=y&&(e.setAttribute("listType",y,u),r=!0)}else h[p]=u.getAttribute("listType");f=u,u=u.nextSibling}}}function WN(i,[e,t]){let n=e.is("documentFragment")?e.getChild(0):e,r;if(t?r=this.createSelection(t):r=this.document.selection,n&&n.is("element","listItem")){const o=r.getFirstPosition();let s=null;if(o.parent.is("element","listItem")?s=o.parent:o.nodeBefore&&o.nodeBefore.is("element","listItem")&&(s=o.nodeBefore),s){const c=s.getAttribute("listIndent");if(c>0)for(;n&&n.is("element","listItem");)n._setAttribute("listIndent",n.getAttribute("listIndent")+c),n=n.nextSibling}}}function $N(i,e,t){const{writer:n,schema:r}=t;let o=n.createPositionAfter(i);for(const s of e)if(s.name=="ul"||s.name=="ol")o=t.convertItem(s,o).modelCursor;else{const c=t.convertItem(s,n.createPositionAt(i,"end")),u=c.modelRange.start.nodeAfter;u&&u.is("element")&&!r.checkChild(i,u.name)&&(c.modelCursor.parent.is("element","listItem")?i=c.modelCursor.parent:i=jN(c.modelCursor),o=n.createPositionAfter(i))}return o}function jN(i){const e=new no({startPosition:i});let t;do t=e.next();while(!t.value.item.is("element","listItem"));return t.value.item}function S0(i,e,t,n,r,o){const s=y0(e.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:i,foo:"b"}),c=r.mapper,u=r.writer,h=s?s.getAttribute("listIndent"):null;let f;if(!s)f=t;else if(h==i){const p=c.toViewElement(s).parent;f=u.createPositionAfter(p)}else{const p=o.createPositionAt(s,"end");f=c.toViewPosition(p)}f=v0(f);for(const p of[...n.getChildren()])Ca(p)&&(f=u.move(u.createRangeOn(p),f).end,qi(u,p,p.nextSibling),qi(u,p.previousSibling,p))}function Ca(i){return i.is("element","ol")||i.is("element","ul")}function qN(i){let e=0,t=i.parent;for(;t;){if(t.is("element","li"))e++;else{const n=t.previousSibling;n&&n.is("element","li")&&e++}t=t.parent}return e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KN extends be{static get pluginName(){return"ListEditing"}static get requires(){return[Tu,Lo]}init(){const e=this.editor;e.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});const t=e.data,n=e.editing;e.model.document.registerPostFixer(s=>UN(e.model,s)),n.mapper.registerViewToModelLength("li",Yf),t.mapper.registerViewToModelLength("li",Yf),n.mapper.on("modelToViewPosition",T0(n.view)),n.mapper.on("viewToModelPosition",HN(e.model)),t.mapper.on("modelToViewPosition",T0(n.view)),e.conversion.for("editingDowncast").add(s=>{s.on("insert",E0,{priority:"high"}),s.on("insert:listItem",k0(e.model)),s.on("attribute:listType:listItem",DN,{priority:"high"}),s.on("attribute:listType:listItem",BN,{priority:"low"}),s.on("attribute:listIndent:listItem",VN(e.model)),s.on("remove:listItem",NN(e.model)),s.on("remove",LN,{priority:"low"})}),e.conversion.for("dataDowncast").add(s=>{s.on("insert",E0,{priority:"high"}),s.on("insert:listItem",k0(e.model))}),e.conversion.for("upcast").add(s=>{s.on("element:ul",C0,{priority:"high"}),s.on("element:ol",C0,{priority:"high"}),s.on("element:li",zN,{priority:"high"}),s.on("element:li",FN)}),e.model.on("insertContent",WN,{priority:"high"}),e.commands.add("numberedList",new m0(e,"numbered")),e.commands.add("bulletedList",new m0(e,"bulleted")),e.commands.add("indentList",new b0(e,"forward")),e.commands.add("outdentList",new b0(e,"backward"));const r=n.view.document;this.listenTo(r,"enter",(s,c)=>{const u=this.editor.model.document,h=u.selection.getLastPosition().parent;u.selection.isCollapsed&&h.name=="listItem"&&h.isEmpty&&(this.editor.execute("outdentList"),c.preventDefault(),s.stop())},{context:"li"}),this.listenTo(r,"delete",(s,c)=>{if(c.direction!=="backward")return;const u=this.editor.model.document.selection;if(!u.isCollapsed)return;const h=u.getFirstPosition();if(!h.isAtStart)return;const f=h.parent;f.name!=="listItem"||f.previousSibling&&f.previousSibling.name==="listItem"||(this.editor.execute("outdentList"),c.preventDefault(),s.stop())},{context:"li"});const o=s=>(c,u)=>{this.editor.commands.get(s).isEnabled&&(this.editor.execute(s),u())};e.keystrokes.set("Tab",o("indentList")),e.keystrokes.set("Shift+Tab",o("outdentList"))}afterInit(){const e=this.editor.commands,t=e.get("indent"),n=e.get("outdent");t&&t.registerChildCommand(e.get("indentList")),n&&n.registerChildCommand(e.get("outdentList"))}}function Yf(i){let e=1;for(const t of i.getChildren())if(t.name=="ul"||t.name=="ol")for(const n of t.getChildren())e+=Yf(n);return e}var GN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',YN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JN extends be{static get pluginName(){return"ListUI"}init(){const e=this.editor.t;_0(this.editor,"numberedList",e("Numbered List"),GN),_0(this.editor,"bulletedList",e("Bulleted List"),YN)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QN extends be{static get requires(){return[KN,JN]}static get pluginName(){return"List"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function x0(i,e){return n=>{n.on("attribute:url:media",t)};function t(n,r,o){if(!o.consumable.consume(r.item,n.name))return;const s=r.attributeNewValue,c=o.writer,u=o.mapper.toViewElement(r.item),h=[...u.getChildren()].find(p=>p.getCustomProperty("media-content"));c.remove(h);const f=i.getMediaViewElement(c,s,e);c.insert(c.createPositionAt(u,0),f)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function XN(i,e,t){return e.setCustomProperty("media",!0,i),Cf(i,e,{label:t})}function P0(i,e,t,n){const r=i.createContainerElement("figure",{class:"media"});return i.insert(i.createPositionAt(r,0),e.getMediaViewElement(i,t,n)),r}function A0(i){const e=i.getSelectedElement();return e&&e.is("element","media")?e:null}function I0(i,e,t){i.change(n=>{const r=n.createElement("media",{url:e});i.insertContent(r,t),n.setSelection(r,"on")})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZN extends at{refresh(){const e=this.editor.model,t=e.document.selection,n=A0(t);this.value=n?n.getAttribute("url"):null,this.isEnabled=tD(t)||eD(t,e)}execute(e){const t=this.editor.model,n=t.document.selection,r=A0(n);r?t.change(o=>{o.setAttribute("url",e,r)}):I0(t,e,ba(n,t))}}function eD(i,e){let n=ba(i,e).start.parent;return n.isEmpty&&!e.schema.isLimit(n)&&(n=n.parent),e.schema.checkChild(n,"media")}function tD(i){const e=i.getSelectedElement();return!!e&&e.name==="media"}var nD='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const iD="0 0 64 42";class rD{constructor(e,t){const n=t.providers,r=t.extraProviders||[],o=new Set(t.removeProviders),s=n.concat(r).filter(c=>{const u=c.name;return u?!o.has(u):(Vn("media-embed-no-provider-name",{provider:c}),!1)});this.locale=e,this.providerDefinitions=s}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,n){return this._getMedia(t).getViewElement(e,n)}_getMedia(e){if(!e)return new R0(this.locale);e=e.trim();for(const t of this.providerDefinitions){const n=t.html,r=yn(t.url);for(const o of r){const s=this._getUrlMatches(e,o);if(s)return new R0(this.locale,e,s,n)}}return null}_getUrlMatches(e,t){let n=e.match(t);if(n)return n;let r=e.replace(/^https?:\/\//,"");return n=r.match(t),n||(r=r.replace(/^www\./,""),n=r.match(t),n)?n:null}}class R0{constructor(e,t,n,r){this.url=this._getValidUrl(t),this._t=e.t,this._match=n,this._previewRenderer=r}getViewElement(e,t){const n={};let r;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),t.renderForEditingView&&(n.class="ck-media__wrapper");const o=this._getPreviewHtml(t);r=e.createRawElement("div",n,(s,c)=>{c.setContentOf(s,o)})}else this.url&&(n.url=this.url),r=e.createEmptyElement(t.elementName,n);return e.setCustomProperty("media-content",!0,r),r}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new hv,t=new vu;return e.text=this._t("Open media in new tab"),t.content=nD,t.viewBox=iD,new Si({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]},e]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Du extends be{static get pluginName(){return"MediaEmbedEditing"}constructor(e){super(e);e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new rD(e.locale,e.config.get("mediaEmbed"))}init(){const e=this.editor,t=e.model.schema,n=e.t,r=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),s=e.config.get("mediaEmbed.elementName"),c=this.registry;e.commands.add("mediaEmbed",new ZN(e)),t.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),r.for("dataDowncast").elementToElement({model:"media",view:(u,{writer:h})=>{const f=u.getAttribute("url");return P0(h,c,f,{elementName:s,renderMediaPreview:f&&o})}}),r.for("dataDowncast").add(x0(c,{elementName:s,renderMediaPreview:o})),r.for("editingDowncast").elementToElement({model:"media",view:(u,{writer:h})=>{const f=u.getAttribute("url"),p=P0(h,c,f,{elementName:s,renderForEditingView:!0});return XN(p,h,n("media widget"))}}),r.for("editingDowncast").add(x0(c,{elementName:s,renderForEditingView:!0})),r.for("upcast").elementToElement({view:u=>["oembed",s].includes(u.name)&&u.getAttribute("url")?{name:!0}:null,model:(u,{writer:h})=>{const f=u.getAttribute("url");if(c.hasMedia(f))return h.createElement("media",{url:f})}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(u,{writer:h})=>{const f=u.getAttribute("data-oembed-url");if(c.hasMedia(f))return h.createElement("media",{url:f})}}).add(u=>{u.on("element:figure",h);function h(f,p,y){if(!y.consumable.consume(p.viewItem,{name:!0,classes:"media"}))return;const{modelRange:T,modelCursor:A}=y.convertChildren(p.viewItem,p.modelCursor);p.modelRange=T,p.modelCursor=A,Qn(T.getItems())||y.consumable.revert(p.viewItem,{name:!0,classes:"media"})}})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const oD=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class sD extends be{static get requires(){return[Zv,Lo,hy]}static get pluginName(){return"AutoMediaEmbed"}constructor(e){super(e);this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document;this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",()=>{const n=t.selection.getFirstRange(),r=In.fromPosition(n.start);r.stickiness="toPrevious";const o=In.fromPosition(n.end);o.stickiness="toNext",t.once("change:data",()=>{this._embedMediaBetweenPositions(r,o),r.detach(),o.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(Ht.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){const n=this.editor,r=n.plugins.get(Du).registry,o=new Pr(e,t),s=o.getWalker({ignoreElementEnd:!0});let c="";for(const h of s)h.item.is("$textProxy")&&(c+=h.item.data);if(c=c.trim(),!c.match(oD)){o.detach();return}if(!r.hasMedia(c)){o.detach();return}if(!n.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=In.fromPosition(e),this._timeoutId=Ht.window.setTimeout(()=>{n.model.change(h=>{this._timeoutId=null,h.remove(o),o.detach();let f;this._positionToInsert.root.rootName!=="$graveyard"&&(f=this._positionToInsert),I0(n.model,c,f),this._positionToInsert.detach(),this._positionToInsert=null}),n.plugins.get("Delete").requestUndoOnBackspace()},100)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aD extends rt{constructor(e,t){super(t);const n=t.t;this.focusTracker=new $i,this.keystrokes=new to,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(n("Save"),Fn.check,"ck-button-save"),this.saveButtonView.type="submit",this.saveButtonView.bind("isEnabled").to(this,"mediaURLInputValue",r=>!!r),this.cancelButtonView=this._createButton(n("Cancel"),Fn.cancel,"ck-button-cancel","cancel"),this._focusables=new xs,this._focusCycler=new fa({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]}),sf(this)}render(){super.render(),af({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element);const t=n=>n.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t),this.listenTo(this.urlInputView.element,"selectstart",(n,r)=>{r.stopPropagation()},{priority:"high"})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.element.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new gf(this.locale,bf),n=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,n.on("input",()=>{t.infoText=n.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=n.element.value.trim()}),t}_createButton(e,t,n,r){const o=new Dt(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),r&&o.delegate("execute").to(this,r),o}}var lD='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cD extends be{static get requires(){return[Du]}static get pluginName(){return"MediaEmbedUI"}init(){const e=this.editor,t=e.commands.get("mediaEmbed"),n=e.plugins.get(Du).registry;e.ui.componentFactory.add("mediaEmbed",r=>{const o=Vo(r),s=new aD(uD(e.t,n),e.locale);return this._setUpDropdown(o,s,t,e),this._setUpForm(o,s,t),o})}_setUpDropdown(e,t,n){const r=this.editor,o=r.t,s=e.buttonView;e.bind("isEnabled").to(n),e.panelView.children.add(t),s.set({label:o("Insert media"),icon:lD,tooltip:!0}),s.on("open",()=>{t.disableCssTransitions(),t.url=n.value||"",t.urlInputView.fieldView.select(),t.focus(),t.enableCssTransitions()},{priority:"low"}),e.on("submit",()=>{t.isValid()&&(r.execute("mediaEmbed",t.url),c())}),e.on("change:isOpen",()=>t.resetFormStatus()),e.on("cancel",()=>c());function c(){r.editing.view.focus(),e.isOpen=!1}}_setUpForm(e,t,n){t.delegate("submit","cancel").to(e),t.urlInputView.bind("value").to(n,"value"),t.urlInputView.bind("isReadOnly").to(n,"isEnabled",r=>!r)}}function uD(i,e){return[t=>{if(!t.url.length)return i("The URL must not be empty.")},t=>{if(!e.hasMedia(t.url))return i("This media URL is not supported.")}]}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dD extends be{static get requires(){return[Du,cD,sD,wa]}static get pluginName(){return"MediaEmbed"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function hD(i,e){for(const t of i.getChildren())if(t.is("element","b")&&t.getStyle("font-weight")==="normal"){const n=i.getChildIndex(t);e.remove(t),e.insertChild(n,t.getChildren(),i)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function fD(i,e){if(!i.childCount)return;const t=new ga(i.document),n=pD(i,t);if(!n.length)return;let r=null,o=1;n.forEach((s,c)=>{const u=ED(n[c-1],s),h=u?null:n[c-1],f=TD(h,s);if(u&&(r=null,o=1),!r||f!==0){const y=gD(s,e);if(!r)r=M0(y,s.element,t);else if(s.indent>o){const T=r.getChild(r.childCount-1),A=T.getChild(T.childCount-1);r=M0(y,A,t),o+=1}else if(s.indent<o){const T=o-s.indent;r=SD(r,T),o=parseInt(s.indent)}s.indent<=o&&(r.is("element",y.type)||(r=t.rename(y.type,r)))}const p=yD(s.element,t);t.appendChild(p,r)})}function mD(i,e){for(const t of e.createRangeIn(i)){const n=t.item;if(n.is("element","li")){const r=n.getChild(0);r&&r.is("element","p")&&e.unwrapElement(r)}}}function pD(i,e){const t=e.createRangeIn(i),n=new Cr({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),r=[];for(const o of t)if(o.type==="elementStart"&&n.match(o.item)){const s=_D(o.item);r.push({element:o.item,id:s.id,order:s.order,indent:s.indent})}return r}function gD(i,e){const t=new RegExp(`@list l${i.id}:level${i.indent}\\s*({[^}]*)`,"gi"),n=/mso-level-number-format:([^;]{0,100});/gi,r=t.exec(e);let o="decimal",s="ol";if(r&&r[1]){const c=n.exec(r[1]);if(c&&c[1]&&(o=c[1].trim(),s=o!=="bullet"&&o!=="image"?"ol":"ul"),o==="bullet"){const u=bD(i.element);u&&(o=u)}}return{type:s,style:vD(o)}}function bD(i){const e=wD(i);if(!e)return null;const t=e._data;return t==="o"?"circle":t==="\xB7"?"disc":t==="\xA7"?"square":null}function wD(i){if(i.getChild(0).is("$text"))return null;for(const e of i.getChildren()){if(!e.is("element","span"))continue;const t=e.getChild(0);return t.is("$text")?t:t.getChild(0)}}function vD(i){switch(i){case"arabic-leading-zero":return"decimal-leading-zero";case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return i;default:return null}}function M0(i,e,t){const n=e.parent,r=t.createElement(i.type),o=n.getChildIndex(e)+1;return t.insertChild(o,r,n),i.style&&t.setStyle("list-style-type",i.style,r),r}function yD(i,e){return kD(i,e),e.rename("li",i)}function _D(i){const e={},t=i.getStyle("mso-list");if(t){const n=t.match(/(^|\s{1,100})l(\d+)/i),r=t.match(/\s{0,100}lfo(\d+)/i),o=t.match(/\s{0,100}level(\d+)/i);n&&r&&o&&(e.id=n[2],e.order=r[1],e.indent=o[1])}return e}function kD(i,e){const t=new Cr({name:"span",styles:{"mso-list":"Ignore"}}),n=e.createRangeIn(i);for(const r of n)r.type==="elementStart"&&t.match(r.item)&&e.remove(r.item)}function ED(i,e){if(!i)return!0;if(i.id!==e.id)return e.indent-i.indent!=1;const t=e.element.previousSibling;return t?!CD(t):!0}function CD(i){return i.is("element","ol")||i.is("element","ul")}function TD(i,e){return i?e.indent-i.indent:e.indent-1}function SD(i,e){const t=i.getAncestors({parentFirst:!0});let n=null,r=0;for(const o of t)if((o.name==="ul"||o.name==="ol")&&r++,r===e){n=o;break}return n}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xD=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class PD{constructor(e){this.document=e}isActive(e){return xD.test(e)}execute(e){const t=new ga(this.document),{body:n}=e._parsedData;hD(n,t),mD(n,t),e.content=n}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function AD(i,e){if(!i.childCount)return;const t=new ga,n=RD(i,t);MD(n,i,t),OD(i,t);const r=ND(i,t);r.length&&BD(r,DD(e),t)}function ID(i){return btoa(i.match(/\w{2}/g).map(e=>String.fromCharCode(parseInt(e,16))).join(""))}function RD(i,e){const t=e.createRangeIn(i),n=new Cr({name:/v:(.+)/}),r=[];for(const o of t){if(o.type!="elementStart")continue;const s=o.item,c=s.previousSibling&&s.previousSibling.name||null;n.match(s)&&s.getAttribute("o:gfxdata")&&c!=="v:shapetype"&&r.push(o.item.getAttribute("id"))}return r}function MD(i,e,t){const n=t.createRangeIn(e),r=new Cr({name:"img"}),o=[];for(const s of n)if(r.match(s.item)){const c=s.item,u=c.getAttribute("v:shapes")?c.getAttribute("v:shapes").split(" "):[];u.length&&u.every(h=>i.indexOf(h)>-1)?o.push(c):c.getAttribute("src")||o.push(c)}for(const s of o)t.remove(s)}function OD(i,e){const t=e.createRangeIn(i),n=new Cr({name:/v:(.+)/}),r=[];for(const o of t)o.type=="elementStart"&&n.match(o.item)&&r.push(o.item);for(const o of r)e.remove(o)}function ND(i,e){const t=e.createRangeIn(i),n=new Cr({name:"img"}),r=[];for(const o of t)n.match(o.item)&&o.item.getAttribute("src").startsWith("file://")&&r.push(o.item);return r}function DD(i){if(!i)return[];const e=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,t=new RegExp("(?:("+e.source+"))([\\da-fA-F\\s]+)\\}","g"),n=i.match(t),r=[];if(n)for(const o of n){let s=!1;o.includes("\\pngblip")?s="image/png":o.includes("\\jpegblip")&&(s="image/jpeg"),s&&r.push({hex:o.replace(e,"").replace(/[^\da-fA-F]/g,""),type:s})}return r}function BD(i,e,t){if(i.length===e.length)for(let n=0;n<i.length;n++){const r=`data:${e[n].type};base64,${ID(e[n].hex)}`;t.setAttribute("src",r,i[n])}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const VD=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,LD=/xmlns:o="urn:schemas-microsoft-com/i;class FD{constructor(e){this.document=e}isActive(e){return VD.test(e)||LD.test(e)}execute(e){const{body:t,stylesString:n}=e._parsedData;fD(t,n),AD(t,e.dataTransfer.getData("text/rtf")),e.content=t}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zD(i){return O0(O0(i)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g,"\xA0</").replace(/ <o:p><\/o:p>/g,"\xA0<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function HD(i){i.querySelectorAll("span[style*=spacerun]").forEach(e=>{const t=e.innerText.length||0;e.innerHTML=Array(t+1).join("\xA0 ").substr(0,t)})}function O0(i){return i.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length===1?" ":Array(t.length+1).join("\xA0 ").substr(0,t.length))}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function UD(i,e){const t=new DOMParser;i=i.replace(/<!--\[if gte vml 1]>/g,"");const n=zD(jD(i)),r=t.parseFromString(n,"text/html");HD(r);const o=r.body.innerHTML,s=WD(r,e),c=$D(r);return{body:s,bodyString:o,styles:c.styles,stylesString:c.stylesString}}function WD(i,e){const t=new Cl(e),n=new lu(t,{renderingMode:"data"}),r=i.createDocumentFragment(),o=i.body.childNodes;for(;o.length>0;)r.appendChild(o[0]);return n.domToView(r,{skipComments:!0})}function $D(i){const e=[],t=[],n=Array.from(i.getElementsByTagName("style"));for(const r of n)r.sheet&&r.sheet.cssRules&&r.sheet.cssRules.length&&(e.push(r.sheet),t.push(r.innerHTML));return{styles:e,stylesString:t.join(" ")}}function jD(i){const e="</body>",t="</html>",n=i.indexOf(e);if(n<0)return i;const r=i.indexOf(t,n+e.length);return i.substring(0,n+e.length)+(r>=0?i.substring(r):"")}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qD extends be{static get pluginName(){return"PasteFromOffice"}static get requires(){return[Ar]}init(){const e=this.editor,t=e.editing.view.document,n=[];n.push(new FD(t)),n.push(new PD(t)),e.plugins.get("ClipboardPipeline").on("inputTransformation",(r,o)=>{if(o._isTransformedWithPasteFromOffice)return;const s=o.dataTransfer.getData("text/html"),c=n.find(u=>u.isActive(s));c&&(o._parsedData=UD(s,t.stylesProcessor),c.execute(o),o._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yt(i,e,t,n,r=1){e>r?n.setAttribute(i,e,t):n.removeAttribute(i,t)}function Is(i,e,t={}){const n=i.createElement("tableCell",t);return i.insertElement("paragraph",n),i.insert(n,e),n}function Jf(i,e){const t=e.parent.parent,n=parseInt(t.getAttribute("headingColumns")||0),{column:r}=i.getCellLocation(e);return!!n&&r<n}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function KD(){return i=>{i.on("element:figure",(e,t,n)=>{if(!n.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const r=JD(t.viewItem);if(!r||!n.consumable.test(r,{name:!0}))return;n.consumable.consume(t.viewItem,{name:!0,classes:"table"});const o=n.convertItem(r,t.modelCursor),s=Qn(o.modelRange.getItems());if(!s){n.consumable.revert(t.viewItem,{name:!0,classes:"table"});return}n.convertChildren(t.viewItem,n.writer.createPositionAt(s,"end")),n.updateConversionResult(s,t)})}}function GD(){return i=>{i.on("element:table",(e,t,n)=>{const r=t.viewItem;if(!n.consumable.test(r,{name:!0}))return;const{rows:o,headingRows:s,headingColumns:c}=QD(r),u={};c&&(u.headingColumns=c),s&&(u.headingRows=s);const h=n.writer.createElement("table",u);if(!!n.safeInsert(h,t.modelCursor)){if(n.consumable.consume(r,{name:!0}),o.forEach(f=>n.convertItem(f,n.writer.createPositionAt(h,"end"))),n.convertChildren(r,n.writer.createPositionAt(h,"end")),h.isEmpty){const f=n.writer.createElement("tableRow");n.writer.insert(f,n.writer.createPositionAt(h,"end")),Is(n.writer,n.writer.createPositionAt(f,"end"))}n.updateConversionResult(h,t)}})}}function YD(){return i=>{i.on("element:tr",(e,t)=>{t.viewItem.isEmpty&&t.modelCursor.index==0&&e.stop()},{priority:"high"})}}function N0(i){return e=>{e.on(`element:${i}`,(t,n,r)=>{if(!!n.modelRange&&n.viewItem.isEmpty){const o=n.modelRange.start.nodeAfter,s=r.writer.createPositionAt(o,0);r.writer.insertElement("paragraph",s)}},{priority:"low"})}}function JD(i){for(const e of i.getChildren())if(e.is("element","table"))return e}function QD(i){const e={headingRows:0,headingColumns:0},t=[],n=[];let r;for(const o of Array.from(i.getChildren()))if(o.name==="tbody"||o.name==="thead"||o.name==="tfoot"){o.name==="thead"&&!r&&(r=o);const s=Array.from(o.getChildren()).filter(c=>c.is("element","tr"));for(const c of s)if(c.parent.name==="thead"&&c.parent===r)e.headingRows++,t.push(c);else{n.push(c);const u=XD(c);u>e.headingColumns&&(e.headingColumns=u)}}return e.rows=[...t,...n],e}function XD(i){let e=0,t=0;const n=Array.from(i.getChildren()).filter(r=>r.name==="th"||r.name==="td");for(;t<n.length&&n[t].name==="th";){const r=n[t],o=parseInt(r.getAttribute("colspan")||1);e=e+o,t++}return e}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _t{constructor(e,t={}){this._table=e,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(n.cell,n.row,n.column));else{const r=e.getChild(this._cellIndex);if(!r)return this._advanceToNextRow();const o=parseInt(r.getAttribute("colspan")||1),s=parseInt(r.getAttribute("rowspan")||1);(o>1||s>1)&&this._recordSpans(r,s,o),this._shouldSkipSlot()||(t=this._formatOutValue(r)),this._nextCellAtColumn=this._column+o}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(e,t=this._row,n=this._column){return{done:!1,value:new ZD(this,e,t,n)}}_shouldSkipSlot(){const e=this._skipRows.has(this._row),t=this._row<this._startRow,n=this._column<this._startColumn,r=this._endColumn!==void 0&&this._column>this._endColumn;return e||t||n||r}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,n){const r={cell:e,row:this._row,column:this._column};for(let o=this._row;o<this._row+t;o++)for(let s=this._column;s<this._column+n;s++)(o!=this._row||s!=this._column)&&this._markSpannedCell(o,s,r)}_markSpannedCell(e,t,n){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,n)}}class ZD{constructor(e,t,n,r){this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=n,this.cellAnchorColumn=r,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||1)}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||1)}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function D0(i={}){return e=>e.on("insert:table",(t,n,r)=>{const o=n.item;if(!r.consumable.consume(o,"insert"))return;r.consumable.consume(o,"attribute:headingRows:table"),r.consumable.consume(o,"attribute:headingColumns:table");const s=i&&i.asWidget,c=r.writer.createContainerElement("figure",{class:"table"}),u=r.writer.createContainerElement("table");r.writer.insert(r.writer.createPositionAt(c,0),u);let h;s&&(h=o3(c,r.writer));const f=new _t(o),p={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},y=new Map;for(const A of f){const{row:M,cell:B}=A,O=o.getChild(M),V=y.get(M)||Xf(u,O,M,p,r);y.set(M,V),r.consumable.consume(B,"insert");const F=r.writer.createPositionAt(V,"end");Qf(A,p,F,r,i)}for(const A of o.getChildren()){const M=A.index;A.is("element","tableRow")&&!y.has(M)&&y.set(M,Xf(u,A,M,p,r))}const T=r.mapper.toViewPosition(n.range.start);r.mapper.bindElements(o,s?h:c),r.writer.insert(T,s?h:c)})}function e3(){return i=>i.on("insert:tableRow",(e,t,n)=>{const r=t.item;if(!n.consumable.consume(r,"insert"))return;const o=r.parent,s=n.mapper.toViewElement(o),c=d3(s),u=o.getChildIndex(r),h=new _t(o,{row:u}),f={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},p=new Map;for(const y of h){const T=p.get(u)||Xf(c,r,u,f,n);p.set(u,T),n.consumable.consume(y.cell,"insert");const A=n.writer.createPositionAt(T,"end");Qf(y,f,A,n,{asWidget:!0})}})}function t3(){return i=>i.on("insert:tableCell",(e,t,n)=>{const r=t.item;if(!n.consumable.consume(r,"insert"))return;const o=r.parent,s=o.parent,c=s.getChildIndex(o),u=new _t(s,{row:c}),h={headingRows:s.getAttribute("headingRows")||0,headingColumns:s.getAttribute("headingColumns")||0};for(const f of u)if(f.cell===r){const p=n.mapper.toViewElement(o),y=n.writer.createPositionAt(p,o.getChildIndex(r));Qf(f,h,y,n,{asWidget:!0});return}})}function n3(){return i=>i.on("attribute:headingColumns:table",(e,t,n)=>{const r=t.item;if(!n.consumable.consume(t.item,e.name))return;const o={headingRows:r.getAttribute("headingRows")||0,headingColumns:r.getAttribute("headingColumns")||0},s=t.attributeOldValue,c=t.attributeNewValue,u=(s>c?s:c)-1;for(const h of new _t(r,{endColumn:u}))a3(h,o,n)})}function i3(){return i=>i.on("remove:tableRow",(e,t,n)=>{e.stop();const r=n.writer,o=n.mapper,c=o.toViewPosition(t.position).getLastMatchingPosition(y=>!y.item.is("element","tr")).nodeAfter,h=c.parent.parent,f=r.createRangeOn(c),p=r.remove(f);for(const y of r.createRangeIn(p).getItems())o.unbindViewElement(y);F0("thead",h,n),F0("tbody",h,n)},{priority:"higher"})}function r3(i,e){const{writer:t}=e;if(!!i.parent.is("element","tableCell"))return B0(i)?t.createContainerElement("span",{class:"ck-table-bogus-paragraph"}):t.createContainerElement("p")}function B0(i){return i.parent.childCount===1&&!z0(i)}function o3(i,e){return e.setCustomProperty("table",!0,i),Cf(i,e,{hasSelectionHandle:!0})}function s3(i,e,t){const n=t.writer,r=t.mapper.toViewElement(i),o=n.createEditableElement(e,r.getAttributes()),s=Tf(o,n);n.insert(n.createPositionAfter(r),s),n.move(n.createRangeIn(r),n.createPositionAt(s,0)),n.remove(n.createRangeOn(r)),t.mapper.unbindViewElement(r),t.mapper.bindElements(i,s)}function a3(i,e,t){const{cell:n}=i,r=V0(i,e),o=t.mapper.toViewElement(n);o&&o.name!==r&&s3(n,r,t)}function Qf(i,e,t,n,r){const o=r&&r.asWidget,s=V0(i,e),c=o?Tf(n.writer.createEditableElement(s),n.writer):n.writer.createContainerElement(s),u=i.cell,h=u.getChild(0),f=u.childCount===1&&h.name==="paragraph";if(n.writer.insert(t,c),n.mapper.bindElements(u,c),!o&&f&&!z0(h)){const p=u.getChild(0);n.consumable.consume(p,"insert"),n.mapper.bindElements(p,c)}}function Xf(i,e,t,n,r){r.consumable.consume(e,"insert");const o=e.isEmpty?r.writer.createEmptyElement("tr"):r.writer.createContainerElement("tr");r.mapper.bindElements(e,o);const s=n.headingRows,c=c3(l3(t,n),i,r),u=s>0&&t>=s?t-s:t,h=r.writer.createPositionAt(c,u);return r.writer.insert(h,o),o}function V0(i,e){const{row:t,column:n}=i,{headingColumns:r,headingRows:o}=e;return o&&o>t||r&&r>n?"th":"td"}function l3(i,e){return i<e.headingRows?"thead":"tbody"}function c3(i,e,t){const n=L0(i,e);return n||u3(i,e,t)}function L0(i,e){for(const t of e.getChildren())if(t.name==i)return t}function u3(i,e,t){const n=t.writer.createContainerElement(i),r=t.writer.createPositionAt(e,i=="tbody"?"end":0);return t.writer.insert(r,n),n}function F0(i,e,t){const n=L0(i,e);n&&n.childCount===0&&t.writer.remove(t.writer.createRangeOn(n))}function d3(i){for(const e of i.getChildren())if(e.name==="table")return e}function z0(i){return!![...i.getAttributeKeys()].length}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class h3 extends at{refresh(){const e=this.editor.model,t=e.document.selection,n=e.schema;this.isEnabled=f3(t,n)}execute(e={}){const t=this.editor.model,n=t.document.selection,r=this.editor.plugins.get("TableUtils"),o=this.editor.config.get("table"),s=ba(n,t),c=o.defaultHeadings.rows,u=o.defaultHeadings.columns;e.headingRows===void 0&&c&&(e.headingRows=c),e.headingColumns===void 0&&u&&(e.headingColumns=u),t.change(h=>{const f=r.createTable(h,e);t.insertContent(f,s),h.setSelection(h.createPositionAt(f.getNodeByPath([0,0,0]),0))})}}function f3(i,e){const t=i.getFirstPosition().parent,n=t===t.root?t:t.parent;return e.checkChild(n,"table")}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ta(i){const e=[];for(const t of H0(i.getRanges())){const n=t.getContainedElement();n&&n.is("element","tableCell")&&e.push(n)}return e}function Dl(i){const e=[];for(const t of i.getRanges()){const n=t.start.findAncestor("tableCell");n&&e.push(n)}return e}function gn(i){const e=Ta(i);return e.length?e:Dl(i)}function zo(i){const e=i.map(t=>t.parent.index);return U0(e)}function Sa(i){const e=i[0].findAncestor("table"),n=[...new _t(e)].filter(r=>i.includes(r.cell)).map(r=>r.column);return U0(n)}function Zf(i,e){if(i.length<2||!g3(i))return!1;const t=new Set,n=new Set;let r=0;for(const s of i){const{row:c,column:u}=e.getCellLocation(s),h=parseInt(s.getAttribute("rowspan")||1),f=parseInt(s.getAttribute("colspan")||1);t.add(c),n.add(u),h>1&&t.add(c+h-1),f>1&&n.add(u+f-1),r+=h*f}return p3(t,n)==r}function H0(i){return Array.from(i).sort(m3)}function U0(i){const e=i.sort((r,o)=>r-o),t=e[0],n=e[e.length-1];return{first:t,last:n}}function m3(i,e){const t=i.start,n=e.start;return t.isBefore(n)?-1:1}function p3(i,e){const t=Array.from(i.values()),n=Array.from(e.values()),r=Math.max(...t),o=Math.min(...t),s=Math.max(...n),c=Math.min(...n);return(r-o+1)*(s-c+1)}function g3(i){const e=i[0].findAncestor("table"),t=zo(i),n=parseInt(e.getAttribute("headingRows")||0);if(!W0(t,n))return!1;const r=parseInt(e.getAttribute("headingColumns")||0),o=Sa(i);return W0(o,r)}function W0({first:i,last:e},t){const n=i<t,r=e<t;return n===r}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $0 extends at{constructor(e,t={}){super(e);this.order=t.order||"below"}refresh(){const e=this.editor.model.document.selection,t=!!gn(e).length;this.isEnabled=t}execute(){const e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),r=this.order==="above",o=gn(t),s=zo(o),c=r?s.first:s.last,u=o[0].findAncestor("table");n.insertRows(u,{at:r?c:c+1,copyStructureFromAbove:!r})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class j0 extends at{constructor(e,t={}){super(e);this.order=t.order||"right"}refresh(){const e=this.editor.model.document.selection,t=!!gn(e).length;this.isEnabled=t}execute(){const e=this.editor,t=e.model.document.selection,n=e.plugins.get("TableUtils"),r=this.order==="left",o=gn(t),s=Sa(o),c=r?s.first:s.last,u=o[0].findAncestor("table");n.insertColumns(u,{columns:1,at:r?c:c+1})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q0 extends at{constructor(e,t={}){super(e);this.direction=t.direction||"horizontally"}refresh(){const e=gn(this.editor.model.document.selection);this.isEnabled=e.length===1}execute(){const e=gn(this.editor.model.document.selection)[0],t=this.direction==="horizontally",n=this.editor.plugins.get("TableUtils");t?n.splitCellHorizontally(e,2):n.splitCellVertically(e,2)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function K0(i,e,t){const{startRow:n,startColumn:r,endRow:o,endColumn:s}=e,c=t.createElement("table"),u=o-n+1;for(let f=0;f<u;f++)t.insertElement("tableRow",c,"end");const h=[...new _t(i,{startRow:n,endRow:o,startColumn:r,endColumn:s,includeAllSlots:!0})];for(const{row:f,column:p,cell:y,isAnchor:T,cellAnchorRow:A,cellAnchorColumn:M}of h){const B=f-n,O=c.getChild(B);if(!T)(A<n||M<r)&&Is(t,t.createPositionAt(O,"end"));else{const V=t.cloneElement(y);t.append(V,O),X0(V,f,p,o,s,t)}}return b3(c,i,n,r,t),c}function G0(i,e,t=0){const n=[],r=new _t(i,{startRow:t,endRow:e-1});for(const o of r){const{row:s,cellHeight:c}=o,u=s+c-1;s<e&&e<=u&&n.push(o)}return n}function Y0(i,e,t){const n=i.parent,r=n.parent,o=n.index,s=parseInt(i.getAttribute("rowspan")),c=e-o,u={},h=s-c;h>1&&(u.rowspan=h);const f=parseInt(i.getAttribute("colspan")||1);f>1&&(u.colspan=f);const p=o,y=p+c,T=[...new _t(r,{startRow:p,endRow:y,includeAllSlots:!0})];let A=null,M;for(const B of T){const{row:O,column:V,cell:F}=B;F===i&&M===void 0&&(M=V),M!==void 0&&M===V&&O===y&&(A=Is(t,B.getPositionBefore(),u))}return Yt("rowspan",c,i,t),A}function J0(i,e){const t=[],n=new _t(i);for(const r of n){const{column:o,cellWidth:s}=r,c=o+s-1;o<e&&e<=c&&t.push(r)}return t}function Q0(i,e,t,n){const r=parseInt(i.getAttribute("colspan")),o=t-e,s={},c=r-o;c>1&&(s.colspan=c);const u=parseInt(i.getAttribute("rowspan")||1);u>1&&(s.rowspan=u);const h=Is(n,n.createPositionAfter(i),s);return Yt("colspan",o,i,n),h}function X0(i,e,t,n,r,o){const s=parseInt(i.getAttribute("colspan")||1),c=parseInt(i.getAttribute("rowspan")||1);if(t+s-1>r){const f=r-t+1;Yt("colspan",f,i,o,1)}if(e+c-1>n){const f=n-e+1;Yt("rowspan",f,i,o,1)}}function b3(i,e,t,n,r){const o=parseInt(e.getAttribute("headingRows")||0);if(o>0){const c=o-t;Yt("headingRows",c,i,r,0)}const s=parseInt(e.getAttribute("headingColumns")||0);if(s>0){const c=s-n;Yt("headingColumns",c,i,r,0)}}function em(i,e){const t=e.getColumns(i),n=new Array(t).fill(0);for(const{column:o}of new _t(i))n[o]++;const r=n.reduce((o,s,c)=>s?o:[...o,c],[]);if(r.length>0){const o=r[r.length-1];return e.removeColumns(i,{at:o}),!0}return!1}function tm(i,e){const t=[],n=e.getRows(i);for(let r=0;r<n;r++)i.getChild(r).isEmpty&&t.push(r);if(t.length>0){const r=t[t.length-1];return e.removeRows(i,{at:r}),!0}return!1}function nm(i,e){em(i,e)||tm(i,e)}function Z0(i,e){const t=Array.from(new _t(i,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(t.every(({cellHeight:o})=>o===1))return e.lastRow;const r=t[0].cellHeight-1;return e.lastRow+r}function e_(i,e){const t=Array.from(new _t(i,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(t.every(({cellWidth:o})=>o===1))return e.lastColumn;const r=t[0].cellWidth-1;return e.lastColumn+r}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bu extends at{constructor(e,t){super(e);this.direction=t.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=e.document,n=Dl(t.selection)[0],r=this.value,o=this.direction;e.change(s=>{const c=o=="right"||o=="down",u=c?n:r,h=c?r:n,f=h.parent;y3(h,u,s);const p=this.isHorizontal?"colspan":"rowspan",y=parseInt(n.getAttribute(p)||1),T=parseInt(r.getAttribute(p)||1);s.setAttribute(p,y+T,u),s.setSelection(s.createRangeIn(u));const A=this.editor.plugins.get("TableUtils"),M=f.findAncestor("table");nm(M,A)})}_getMergeableCell(){const t=this.editor.model.document,n=Dl(t.selection)[0];if(!n)return;const r=this.editor.plugins.get("TableUtils"),o=this.isHorizontal?w3(n,this.direction,r):v3(n,this.direction,r);if(!o)return;const s=this.isHorizontal?"rowspan":"colspan",c=parseInt(n.getAttribute(s)||1);if(parseInt(o.getAttribute(s)||1)===c)return o}}function w3(i,e,t){const r=i.parent.parent,o=e=="right"?i.nextSibling:i.previousSibling,s=(r.getAttribute("headingColumns")||0)>0;if(!o)return;const c=e=="right"?i:o,u=e=="right"?o:i,{column:h}=t.getCellLocation(c),{column:f}=t.getCellLocation(u),p=parseInt(c.getAttribute("colspan")||1),y=Jf(t,c),T=Jf(t,u);return s&&y!=T?void 0:h+p===f?o:void 0}function v3(i,e,t){const n=i.parent,r=n.parent,o=r.getChildIndex(n);if(e=="down"&&o===t.getRows(r)-1||e=="up"&&o===0)return;const s=parseInt(i.getAttribute("rowspan")||1),c=r.getAttribute("headingRows")||0,u=e=="down"&&o+s===c,h=e=="up"&&o===c;if(c&&(u||h))return;const f=parseInt(i.getAttribute("rowspan")||1),p=e=="down"?o+f:o,y=[...new _t(r,{endRow:p})],A=y.find(B=>B.cell===i).column,M=y.find(({row:B,cellHeight:O,column:V})=>V!==A?!1:e=="down"?B===p:p===B+O);return M&&M.cell}function y3(i,e,t){t_(i)||(t_(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(i),t.createPositionAt(e,"end"))),t.remove(i)}function t_(i){return i.childCount==1&&i.getChild(0).is("element","paragraph")&&i.getChild(0).isEmpty}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _3 extends at{refresh(){const e=gn(this.editor.model.document.selection),t=e[0];if(t){const n=t.findAncestor("table"),o=this.editor.plugins.get("TableUtils").getRows(n)-1,s=zo(e),c=s.first===0&&s.last===o;this.isEnabled=!c}else this.isEnabled=!1}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),n=gn(e.document.selection),r=zo(n),o=n[0],s=o.findAncestor("table"),c=t.getCellLocation(o).column;e.change(u=>{const h=r.last-r.first+1;t.removeRows(s,{at:r.first,rows:h});const f=k3(s,r.first,c,t.getRows(s));u.setSelection(u.createPositionAt(f,0))})}}function k3(i,e,t,n){const r=i.getChild(Math.min(e,n-1));let o=r.getChild(0),s=0;for(const c of r.getChildren()){if(s>t)return o;o=c,s+=parseInt(c.getAttribute("colspan")||1)}return o}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class E3 extends at{refresh(){const e=gn(this.editor.model.document.selection),t=e[0];if(t){const n=t.findAncestor("table"),r=this.editor.plugins.get("TableUtils").getColumns(n),{first:o,last:s}=Sa(e);this.isEnabled=s-o<r-1}else this.isEnabled=!1}execute(){const[e,t]=T3(this.editor.model.document.selection),n=e.parent.parent,r=[...new _t(n)],o={first:r.find(c=>c.cell===e).column,last:r.find(c=>c.cell===t).column},s=C3(r,e,t,o);this.editor.model.change(c=>{const u=o.last-o.first+1;this.editor.plugins.get("TableUtils").removeColumns(n,{at:o.first,columns:u}),c.setSelection(c.createPositionAt(s,0))})}}function C3(i,e,t,n){return parseInt(t.getAttribute("colspan")||1)>1?t:e.previousSibling||t.nextSibling?t.nextSibling||e.previousSibling:n.first?i.reverse().find(({column:o})=>o<n.first).cell:i.reverse().find(({column:o})=>o>n.last).cell}function T3(i){const e=gn(i),t=e[0],n=e.pop(),r=[t,n];return t.isBefore(n)?r:r.reverse()}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class S3 extends at{refresh(){const e=this.editor.model,t=gn(e.document.selection),n=t.length>0;this.isEnabled=n,this.value=n&&t.every(r=>this._isInHeading(r,r.parent.parent))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.model,n=gn(t.document.selection),r=n[0].findAncestor("table"),{first:o,last:s}=zo(n),c=this.value?o:s+1,u=r.getAttribute("headingRows")||0;t.change(h=>{if(c){const f=c>u?u:0,p=G0(r,c,f);for(const{cell:y}of p)Y0(y,c,h)}Yt("headingRows",c,r,h,0)})}_isInHeading(e,t){const n=parseInt(t.getAttribute("headingRows")||0);return!!n&&e.parent.index<n}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class x3 extends at{refresh(){const e=this.editor.model,t=gn(e.document.selection),n=this.editor.plugins.get("TableUtils"),r=t.length>0;this.isEnabled=r,this.value=r&&t.every(o=>Jf(n,o))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.model,n=gn(t.document.selection),r=n[0].findAncestor("table"),{first:o,last:s}=Sa(n),c=this.value?o:s+1;t.change(u=>{if(c){const h=J0(r,c);for(const{cell:f,column:p}of h)Q0(f,p,c,u)}Yt("headingColumns",c,r,u,0)})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xa extends be{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,n=t.parent,r=n.getChildIndex(t),o=new _t(n,{row:r});for(const{cell:s,row:c,column:u}of o)if(s===e)return{row:c,column:u}}createTable(e,t){const n=e.createElement("table"),r=parseInt(t.rows)||2,o=parseInt(t.columns)||2;return im(e,n,0,r,o),t.headingRows&&Yt("headingRows",Math.min(t.headingRows,r),n,e,0),t.headingColumns&&Yt("headingColumns",Math.min(t.headingColumns,o),n,e,0),n}insertRows(e,t={}){const n=this.editor.model,r=t.at||0,o=t.rows||1,s=t.copyStructureFromAbove!==void 0,c=t.copyStructureFromAbove?r-1:r,u=this.getRows(e),h=this.getColumns(e);if(r>u)throw new H("tableutils-insertrows-insert-out-of-range",this,{options:t});n.change(f=>{const p=e.getAttribute("headingRows")||0;if(p>r&&Yt("headingRows",p+o,e,f,0),!s&&(r===0||r===u)){im(f,e,r,o,h);return}const y=s?Math.max(r,c):r,T=new _t(e,{endRow:y}),A=new Array(h).fill(1);for(const{row:M,column:B,cellHeight:O,cellWidth:V,cell:F}of T){const Z=M+O-1,ae=M<r&&r<=Z,W=M<=c&&c<=Z;ae?(f.setAttribute("rowspan",O+o,F),A[B]=-V):s&&W&&(A[B]=V)}for(let M=0;M<o;M++){const B=f.createElement("tableRow");f.insert(B,e,r);for(let O=0;O<A.length;O++){const V=A[O],F=f.createPositionAt(B,"end");V>0&&Is(f,F,V>1?{colspan:V}:null),O+=Math.abs(V)-1}}})}insertColumns(e,t={}){const n=this.editor.model,r=t.at||0,o=t.columns||1;n.change(s=>{const c=e.getAttribute("headingColumns");r<c&&s.setAttribute("headingColumns",c+o,e);const u=this.getColumns(e);if(r===0||u===r){for(const f of e.getChildren())!f.is("element","tableRow")||Pa(o,s,s.createPositionAt(f,r?"end":0));return}const h=new _t(e,{column:r,includeAllSlots:!0});for(const f of h){const{row:p,cell:y,cellAnchorColumn:T,cellAnchorRow:A,cellWidth:M,cellHeight:B}=f;if(T<r){s.setAttribute("colspan",M+o,y);const O=A+B-1;for(let V=p;V<=O;V++)h.skipRow(V)}else Pa(o,s,f.getPositionBefore())}})}removeRows(e,t){const n=this.editor.model,r=t.rows||1,o=this.getRows(e),s=t.at,c=s+r-1;if(c>o-1)throw new H("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});n.change(u=>{const{cellsToMove:h,cellsToTrim:f}=I3(e,s,c);if(h.size){const p=c+1;R3(e,p,h,u)}for(let p=c;p>=s;p--)u.remove(e.getChild(p));for(const{rowspan:p,cell:y}of f)Yt("rowspan",p,y,u);A3(e,s,c,u),em(e,this)||tm(e,this)})}removeColumns(e,t){const n=this.editor.model,r=t.at,o=t.columns||1,s=t.at+o-1;n.change(c=>{P3(e,{first:r,last:s},c);for(let u=s;u>=r;u--)for(const{cell:h,column:f,cellWidth:p}of[...new _t(e)])f<=u&&p>1&&f+p>u?Yt("colspan",p-1,h,c):f===u&&c.remove(h);tm(e,this)||em(e,this)})}splitCellVertically(e,t=2){const n=this.editor.model,o=e.parent.parent,s=parseInt(e.getAttribute("rowspan")||1),c=parseInt(e.getAttribute("colspan")||1);n.change(u=>{if(c>1){const{newCellsSpan:h,updatedSpan:f}=n_(c,t);Yt("colspan",f,e,u);const p={};h>1&&(p.colspan=h),s>1&&(p.rowspan=s);const y=c>t?t-1:c-1;Pa(y,u,u.createPositionAfter(e),p)}if(c<t){const h=t-c,f=[...new _t(o)],{column:p}=f.find(({cell:M})=>M===e),y=f.filter(({cell:M,cellWidth:B,column:O})=>{const V=M!==e&&O===p,F=O<p&&O+B>p;return V||F});for(const{cell:M,cellWidth:B}of y)u.setAttribute("colspan",B+h,M);const T={};s>1&&(T.rowspan=s),Pa(h,u,u.createPositionAfter(e),T);const A=o.getAttribute("headingColumns")||0;A>p&&Yt("headingColumns",A+h,o,u)}})}splitCellHorizontally(e,t=2){const n=this.editor.model,r=e.parent,o=r.parent,s=o.getChildIndex(r),c=parseInt(e.getAttribute("rowspan")||1),u=parseInt(e.getAttribute("colspan")||1);n.change(h=>{if(c>1){const f=[...new _t(o,{startRow:s,endRow:s+c-1,includeAllSlots:!0})],{newCellsSpan:p,updatedSpan:y}=n_(c,t);Yt("rowspan",y,e,h);const{column:T}=f.find(({cell:M})=>M===e),A={};p>1&&(A.rowspan=p),u>1&&(A.colspan=u);for(const M of f){const{column:B,row:O}=M,V=O>=s+y,F=B===T,Z=(O+s+y)%p==0;V&&F&&Z&&Pa(1,h,M.getPositionBefore(),A)}}if(c<t){const f=t-c,p=[...new _t(o,{startRow:0,endRow:s})];for(const{cell:A,cellHeight:M,row:B}of p)if(A!==e&&B+M>s){const O=M+f;h.setAttribute("rowspan",O,A)}const y={};u>1&&(y.colspan=u),im(h,o,s+1,f,1,y);const T=o.getAttribute("headingRows")||0;T>s&&Yt("headingRows",T+f,o,h)}})}getColumns(e){return[...e.getChild(0).getChildren()].reduce((n,r)=>{const o=parseInt(r.getAttribute("colspan")||1);return n+o},0)}getRows(e){return Array.from(e.getChildren()).reduce((t,n)=>n.is("element","tableRow")?t+1:t,0)}}function im(i,e,t,n,r,o={}){for(let s=0;s<n;s++){const c=i.createElement("tableRow");i.insert(c,e,t),Pa(r,i,i.createPositionAt(c,"end"),o)}}function Pa(i,e,t,n={}){for(let r=0;r<i;r++)Is(e,t,n)}function n_(i,e){if(i<e)return{newCellsSpan:1,updatedSpan:1};const t=Math.floor(i/e),n=i-t*e+t;return{newCellsSpan:t,updatedSpan:n}}function P3(i,e,t){const n=i.getAttribute("headingColumns")||0;if(n&&e.first<n){const r=Math.min(n-1,e.last)-e.first+1;t.setAttribute("headingColumns",n-r,i)}}function A3(i,e,t,n){const r=i.getAttribute("headingRows")||0;if(e<r){const o=t<r?r-(t-e+1):e;Yt("headingRows",o,i,n,0)}}function I3(i,e,t){const n=new Map,r=[];for(const{row:o,column:s,cellHeight:c,cell:u}of new _t(i,{endRow:t})){const h=o+c-1;if(o>=e&&o<=t&&h>t){const y=t-o+1,T=c-y;n.set(s,{cell:u,rowspan:T})}if(o<e&&h>=e){let y;h>=t?y=t-e+1:y=h-e+1,r.push({cell:u,rowspan:c-y})}}return{cellsToMove:n,cellsToTrim:r}}function R3(i,e,t,n){const o=[...new _t(i,{includeAllSlots:!0,row:e})],s=i.getChild(e);let c;for(const{column:u,cell:h,isAnchor:f}of o)if(t.has(u)){const{cell:p,rowspan:y}=t.get(u),T=c?n.createPositionAfter(c):n.createPositionAt(s,0);n.move(n.createRangeOn(p),T),Yt("rowspan",y,p,n),c=p}else f&&(c=h)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M3 extends at{refresh(){const e=Ta(this.editor.model.document.selection);this.isEnabled=Zf(e,this.editor.plugins.get(xa))}execute(){const e=this.editor.model,t=this.editor.plugins.get(xa);e.change(n=>{const r=Ta(e.document.selection),o=r.shift(),{mergeWidth:s,mergeHeight:c}=N3(o,r,t);Yt("colspan",s,o,n),Yt("rowspan",c,o,n);for(const h of r)O3(h,o,n);const u=o.findAncestor("table");nm(u,t),n.setSelection(o,"in")})}}function O3(i,e,t){i_(i)||(i_(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(i),t.createPositionAt(e,"end"))),t.remove(i)}function i_(i){return i.childCount==1&&i.getChild(0).is("element","paragraph")&&i.getChild(0).isEmpty}function N3(i,e,t){let n=0,r=0;for(const h of e){const{row:f,column:p}=t.getCellLocation(h);n=r_(h,p,n,"colspan"),r=r_(h,f,r,"rowspan")}const{row:o,column:s}=t.getCellLocation(i),c=n-s,u=r-o;return{mergeWidth:c,mergeHeight:u}}function r_(i,e,t,n){const r=parseInt(i.getAttribute(n)||1);return Math.max(t,e+r)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class D3 extends at{constructor(e){super(e);this.affectsData=!1}refresh(){const e=gn(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const e=this.editor.model,t=gn(e.document.selection),n=zo(t),r=t[0].findAncestor("table"),o=[];for(let s=n.first;s<=n.last;s++)for(const c of r.getChild(s).getChildren())o.push(e.createRangeOn(c));e.change(s=>{s.setSelection(o)})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B3 extends at{constructor(e){super(e);this.affectsData=!1}refresh(){const e=gn(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const e=this.editor.model,t=gn(e.document.selection),n=t[0],r=t.pop(),o=n.findAncestor("table"),s=this.editor.plugins.get("TableUtils"),c=s.getCellLocation(n),u=s.getCellLocation(r),h=Math.min(c.column,u.column),f=Math.max(c.column,u.column),p=[];for(const y of new _t(o,{startColumn:h,endColumn:f}))p.push(e.createRangeOn(y.cell));e.change(y=>{y.setSelection(p)})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function V3(i){i.document.registerPostFixer(e=>L3(e,i))}function L3(i,e){const t=e.document.differ.getChanges();let n=!1;const r=new Set;for(const o of t){let s;o.name=="table"&&o.type=="insert"&&(s=o.position.nodeAfter),(o.name=="tableRow"||o.name=="tableCell")&&(s=o.position.findAncestor("table")),W3(o)&&(s=o.range.start.findAncestor("table")),s&&!r.has(s)&&(n=F3(s,i)||n,n=z3(s,i)||n,r.add(s))}return n}function F3(i,e){let t=!1;const n=H3(i);if(n.length){t=!0;for(const r of n)Yt("rowspan",r.rowspan,r.cell,e,1)}return t}function z3(i,e){let t=!1;const n=U3(i),r=[];for(const[u,h]of n.entries())!h&&i.getChild(u).is("element","tableRow")&&r.push(u);if(r.length){t=!0;for(const u of r.reverse())e.remove(i.getChild(u)),n.splice(u,1)}const o=n.filter((u,h)=>i.getChild(h).is("element","tableRow")),s=o[0];if(!o.every(u=>u===s)){const u=o.reduce((h,f)=>f>h?f:h,0);for(const[h,f]of o.entries()){const p=u-f;if(p){for(let y=0;y<p;y++)Is(e,e.createPositionAt(i.getChild(h),"end"));t=!0}}}return t}function H3(i){const e=parseInt(i.getAttribute("headingRows")||0),t=Array.from(i.getChildren()).reduce((r,o)=>o.is("element","tableRow")?r+1:r,0),n=[];for(const{row:r,cell:o,cellHeight:s}of new _t(i)){if(s<2)continue;const u=r<e?e:t;if(r+s>u){const h=u-r;n.push({cell:o,rowspan:h})}}return n}function U3(i){const e=new Array(i.childCount).fill(0);for(const{rowIndex:t}of new _t(i,{includeAllSlots:!0}))e[t]++;return e}function W3(i){const e=i.type==="attribute",t=i.attributeKey;return e&&(t==="headingRows"||t==="colspan"||t==="rowspan")}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $3(i){i.document.registerPostFixer(e=>j3(e,i))}function j3(i,e){const t=e.document.differ.getChanges();let n=!1;for(const r of t)r.type=="insert"&&r.name=="table"&&(n=q3(r.position.nodeAfter,i)||n),r.type=="insert"&&r.name=="tableRow"&&(n=o_(r.position.nodeAfter,i)||n),r.type=="insert"&&r.name=="tableCell"&&(n=rm(r.position.nodeAfter,i)||n),K3(r)&&(n=rm(r.position.parent,i)||n);return n}function q3(i,e){let t=!1;for(const n of i.getChildren())n.is("element","tableRow")&&(t=o_(n,e)||t);return t}function o_(i,e){let t=!1;for(const n of i.getChildren())t=rm(n,e)||t;return t}function rm(i,e){if(i.childCount==0)return e.insertElement("paragraph",i),!0;const t=Array.from(i.getChildren()).filter(n=>n.is("$text"));for(const n of t)e.wrap(e.createRangeOn(n),"paragraph");return!!t.length}function K3(i){return!i.position||!i.position.parent.is("element","tableCell")?!1:i.type=="insert"&&i.name=="$text"||i.type=="remove"}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function G3(i,e){i.document.registerPostFixer(()=>Y3(i.document.differ,e))}function Y3(i,e){const t=new Set;for(const n of i.getChanges()){const r=n.type=="attribute"?n.range.start.parent:n.position.parent;r.is("element","tableCell")&&t.add(r)}for(const n of t.values())for(const r of[...n.getChildren()].filter(o=>J3(o,e)))i.refreshItem(r);return!1}function J3(i,e){if(!i.is("element","paragraph"))return!1;const t=e.toViewElement(i);return t?B0(i)!==t.is("element","span"):!1}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Q3(i){i.document.registerPostFixer(()=>X3(i))}function X3(i){const e=i.document.differ,t=new Set;for(const n of e.getChanges())if(n.type==="attribute"){const r=n.range.start.nodeAfter;r&&r.is("element","table")&&n.attributeKey==="headingRows"&&t.add(r)}else if(n.type==="insert"||n.type==="remove"){if(n.name==="tableRow"){const r=n.position.findAncestor("table"),o=r.getAttribute("headingRows")||0;n.position.offset<o&&t.add(r)}else if(n.name==="tableCell"){const r=n.position.findAncestor("table"),o=r.getAttribute("headingColumns")||0;n.position.offset<o&&t.add(r)}}if(t.size){for(const n of t.values())e.refreshItem(n);return!0}return!1}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Z3 extends be{static get pluginName(){return"TableEditing"}init(){const e=this.editor,t=e.model,n=t.schema,r=e.conversion;n.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isObject:!0,isBlock:!0}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowIn:"tableRow",allowChildren:"$block",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),r.for("upcast").add(KD()),r.for("upcast").add(GD()),r.for("editingDowncast").add(D0({asWidget:!0})),r.for("dataDowncast").add(D0()),r.for("upcast").elementToElement({model:"tableRow",view:"tr"}),r.for("upcast").add(YD()),r.for("editingDowncast").add(e3()),r.for("editingDowncast").add(i3()),r.for("upcast").elementToElement({model:"tableCell",view:"td"}),r.for("upcast").elementToElement({model:"tableCell",view:"th"}),r.for("upcast").add(N0("td")),r.for("upcast").add(N0("th")),r.for("editingDowncast").add(t3()),r.for("editingDowncast").elementToElement({model:"paragraph",view:r3,converterPriority:"high"}),r.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),r.for("upcast").attributeToAttribute({model:{key:"colspan",value:s_("colspan")},view:"colspan"}),r.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),r.for("upcast").attributeToAttribute({model:{key:"rowspan",value:s_("rowspan")},view:"rowspan"}),r.for("editingDowncast").add(n3()),e.data.mapper.on("modelToViewPosition",e7()),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new h3(e)),e.commands.add("insertTableRowAbove",new $0(e,{order:"above"})),e.commands.add("insertTableRowBelow",new $0(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new j0(e,{order:"left"})),e.commands.add("insertTableColumnRight",new j0(e,{order:"right"})),e.commands.add("removeTableRow",new _3(e)),e.commands.add("removeTableColumn",new E3(e)),e.commands.add("splitTableCellVertically",new q0(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new q0(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new M3(e)),e.commands.add("mergeTableCellRight",new Bu(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Bu(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Bu(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Bu(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new x3(e)),e.commands.add("setTableRowHeader",new S3(e)),e.commands.add("selectTableRow",new D3(e)),e.commands.add("selectTableColumn",new B3(e)),Q3(t),V3(t),G3(t,e.editing.mapper),$3(t)}static get requires(){return[xa]}}function e7(){return(i,e)=>{const t=e.modelPosition.parent,n=e.modelPosition.nodeBefore;if(!t.is("element","tableCell")||!n||!n.is("element","paragraph"))return;const r=e.mapper.toViewElement(n),o=e.mapper.toViewElement(t);r===o&&(e.viewPosition=e.mapper.findPositionIn(o,n.maxOffset))}}function s_(i){return e=>{const t=parseInt(e.getAttribute(i));return Number.isNaN(t)||t<=0?null:t}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class t7 extends rt{constructor(e){super(e);const t=this.bindTemplate;this.items=this._createGridCollection(),this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(n,r)=>`${r} \xD7 ${n}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck-insert-table-dropdown__label"]},children:[{text:t.to("label")}]}],on:{mousedown:t.to(n=>{n.preventDefault()}),click:t.to(()=>{this.fire("execute")})}}),this.on("boxover",(n,r)=>{const{row:o,column:s}=r.target.dataset;this.set({rows:parseInt(o),columns:parseInt(s)})}),this.on("change:columns",()=>{this._highlightGridBoxes()}),this.on("change:rows",()=>{this._highlightGridBoxes()})}focus(){}focusLast(){}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map((n,r)=>{const o=Math.floor(r/10),s=r%10,c=o<e&&s<t;n.set("isOn",c)})}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const n=Math.floor(t/10),r=t%10;e.push(new n7(this.locale,n+1,r+1))}return this.createCollection(e)}}class n7 extends rt{constructor(e,t,n){super(e);const r=this.bindTemplate;this.set("isOn",!1),this.setTemplate({tag:"div",attributes:{class:["ck-insert-table-dropdown-grid-box",r.if("isOn","ck-on")],"data-row":t,"data-column":n}})}}var i7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',r7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',o7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',s7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class a7 extends be{static get pluginName(){return"TableUI"}init(){const e=this.editor,t=this.editor.t,r=e.locale.contentLanguageDirection==="ltr";e.ui.componentFactory.add("insertTable",o=>{const s=e.commands.get("insertTable"),c=Vo(o);c.bind("isEnabled").to(s),c.buttonView.set({icon:i7,label:t("Insert table"),tooltip:!0});let u;return c.on("change:isOpen",()=>{u||(u=new t7(o),c.panelView.children.add(u),u.delegate("execute").to(c),c.buttonView.on("open",()=>{u.rows=0,u.columns=0}),c.on("execute",()=>{e.execute("insertTable",{rows:u.rows,columns:u.columns}),e.editing.view.focus()}))}),c}),e.ui.componentFactory.add("tableColumn",o=>{const s=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:r?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:r?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),r7,s,o)}),e.ui.componentFactory.add("tableRow",o=>{const s=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),o7,s,o)}),e.ui.componentFactory.add("mergeTableCells",o=>{const s=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:r?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:r?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),s7,s,o)})}_prepareDropdown(e,t,n,r){const o=this.editor,s=Vo(r),c=this._fillDropdownWithListOptions(s,n);return s.buttonView.set({label:e,icon:t,tooltip:!0}),s.bind("isEnabled").toMany(c,"isEnabled",(...u)=>u.some(h=>h)),this.listenTo(s,"execute",u=>{o.execute(u.source.commandName),o.editing.view.focus()}),s}_prepareMergeSplitButtonDropdown(e,t,n,r){const o=this.editor,s=Vo(r,mv),c="mergeTableCells",u=o.commands.get(c),h=this._fillDropdownWithListOptions(s,n);return s.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),s.bind("isEnabled").toMany([u,...h],"isEnabled",(...f)=>f.some(p=>p)),this.listenTo(s.buttonView,"execute",()=>{o.execute(c),o.editing.view.focus()}),this.listenTo(s,"execute",f=>{o.execute(f.source.commandName),o.editing.view.focus()}),s}_fillDropdownWithListOptions(e,t){const n=this.editor,r=[],o=new Ci;for(const s of t)l7(s,n,r,o);return pf(e,o,n.ui.componentFactory),r}}function l7(i,e,t,n){const r=i.model=new yu(i.model),{commandName:o,bindIsOn:s}=i.model;if(i.type==="button"||i.type==="switchbutton"){const c=e.commands.get(o);t.push(c),r.set({commandName:o}),r.bind("isEnabled").to(c),s&&r.bind("isOn").to(c,"value")}r.set({withText:!0}),n.add(i)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rs extends be{static get pluginName(){return"TableSelection"}static get requires(){return[xa]}init(){const t=this.editor.model;this.listenTo(t,"deleteContent",(n,r)=>this._handleDeleteContent(n,r),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const e=this.editor.model.document.selection,t=Ta(e);return t.length==0?null:t}getSelectionAsFragment(){const e=this.getSelectedTableCells();return e?this.editor.model.change(t=>{const n=t.createDocumentFragment(),r=this.editor.plugins.get("TableUtils"),{first:o,last:s}=Sa(e),{first:c,last:u}=zo(e),h=e[0].findAncestor("table");let f=u,p=s;if(Zf(e,r)){const A={firstColumn:o,lastColumn:s,firstRow:c,lastRow:u};f=Z0(h,A),p=e_(h,A)}const T=K0(h,{startRow:c,startColumn:o,endRow:f,endColumn:p},t);return t.insert(T,n,0),n}):null}setCellSelection(e,t){const n=this._getCellsToSelect(e,t);this.editor.model.change(r=>{r.setSelection(n.cells.map(o=>r.createRangeOn(o)),{backward:n.backward})})}getFocusCell(){const n=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return n&&n.is("element","tableCell")?n:null}getAnchorCell(){const e=this.editor.model.document.selection,n=Qn(e.getRanges()).getContainedElement();return n&&n.is("element","tableCell")?n:null}_defineSelectionConverter(){const e=this.editor,t=new Set;e.conversion.for("editingDowncast").add(r=>r.on("selection",(o,s,c)=>{const u=c.writer;n(u);const h=this.getSelectedTableCells();if(!h)return;for(const p of h){const y=c.mapper.toViewElement(p);u.addClass("ck-editor__editable_selected",y),t.add(y)}const f=c.mapper.toViewElement(h[h.length-1]);u.setSelection(f,0)},{priority:"lowest"}));function n(r){for(const o of t)r.removeClass("ck-editor__editable_selected",o);t.clear()}}_enablePluginDisabling(){const e=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;e.model.change(n=>{const r=n.createPositionAt(t[0],0),o=e.model.schema.getNearestSelectionRange(r);n.setSelection(o)})}})}_handleDeleteContent(e,t){const[n,r]=t,o=this.editor.model,s=!r||r.direction=="backward",c=Ta(n);!c.length||(e.stop(),o.change(u=>{const h=c[s?c.length-1:0];o.change(p=>{for(const y of c)o.deleteContent(p.createSelection(y,"in"))});const f=o.schema.getNearestSelectionRange(u.createPositionAt(h,0));n.is("documentSelection")?u.setSelection(f):n.setTo(f)}))}_getCellsToSelect(e,t){const n=this.editor.plugins.get("TableUtils"),r=n.getCellLocation(e),o=n.getCellLocation(t),s=Math.min(r.row,o.row),c=Math.max(r.row,o.row),u=Math.min(r.column,o.column),h=Math.max(r.column,o.column),f=new Array(c-s+1).fill(null).map(()=>[]),p={startRow:s,endRow:c,startColumn:u,endColumn:h};for(const{row:A,cell:M}of new _t(e.findAncestor("table"),p))f[A-s].push(M);const y=o.row<r.row,T=o.column<r.column;return y&&f.reverse(),T&&f.forEach(A=>A.reverse()),{cells:f.flat(),backward:y||T}}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class c7 extends be{static get pluginName(){return"TableClipboard"}static get requires(){return[Rs,xa]}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"copy",(n,r)=>this._onCopyCut(n,r)),this.listenTo(t,"cut",(n,r)=>this._onCopyCut(n,r)),this.listenTo(e.model,"insertContent",(n,r)=>this._onInsertContent(n,...r),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(e,t){const n=this.editor.plugins.get(Rs);if(!n.getSelectedTableCells()||e.name=="cut"&&this.editor.isReadOnly)return;t.preventDefault(),e.stop();const r=this.editor.data,o=this.editor.editing.view.document,s=r.toView(n.getSelectionAsFragment());o.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:s,method:e.name})}_onInsertContent(e,t,n){if(n&&!n.is("documentSelection"))return;const r=this.editor.model,o=this.editor.plugins.get(xa);let s=u7(t,r);if(!s)return;const c=gn(r.document.selection);if(!c.length){nm(s,o);return}e.stop(),r.change(u=>{const h={width:o.getColumns(s),height:o.getRows(s)},f=d7(c,h,u,o),p=f.lastRow-f.firstRow+1,y=f.lastColumn-f.firstColumn+1,T={startRow:0,startColumn:0,endRow:Math.min(p,h.height)-1,endColumn:Math.min(y,h.width)-1};s=K0(s,T,u);const A=c[0].findAncestor("table"),M=this._replaceSelectedCellsWithPasted(s,h,A,f,u);if(this.editor.plugins.get("TableSelection").isEnabled){const B=H0(M.map(O=>u.createRangeOn(O)));u.setSelection(B)}else u.setSelection(M[0],0)})}_replaceSelectedCellsWithPasted(e,t,n,r,o){const{width:s,height:c}=t,u=f7(e,s,c),h=[...new _t(n,{startRow:r.firstRow,endRow:r.lastRow,startColumn:r.firstColumn,endColumn:r.lastColumn,includeAllSlots:!0})],f=[];let p;for(const B of h){const{row:O,column:V}=B;V===r.firstColumn&&(p=B.getPositionBefore());const F=O-r.firstRow,Z=V-r.firstColumn,ae=u[F%c][Z%s],W=ae?o.cloneElement(ae):null,se=this._replaceTableSlotCell(B,W,p,o);!se||(X0(se,O,V,r.lastRow,r.lastColumn,o),f.push(se),p=o.createPositionAfter(se))}const y=parseInt(n.getAttribute("headingRows")||0),T=parseInt(n.getAttribute("headingColumns")||0),A=r.firstRow<y&&y<=r.lastRow,M=r.firstColumn<T&&T<=r.lastColumn;if(A){const B={first:r.firstColumn,last:r.lastColumn},O=om(n,y,B,o,r.firstRow);f.push(...O)}if(M){const B={first:r.firstRow,last:r.lastRow},O=sm(n,T,B,o);f.push(...O)}return f}_replaceTableSlotCell(e,t,n,r){const{cell:o,isAnchor:s}=e;return s&&r.remove(o),t?(r.insert(t,n),t):null}}function u7(i,e){if(!i.is("documentFragment")&&!i.is("element"))return null;if(i.is("element","table"))return i;if(i.childCount==1&&i.getChild(0).is("element","table"))return i.getChild(0);const t=e.createRangeIn(i);for(const n of t.getItems())if(n.is("element","table")){const r=e.createRange(t.start,e.createPositionBefore(n));if(e.hasContent(r,{ignoreWhitespaces:!0}))return null;const o=e.createRange(e.createPositionAfter(n),t.end);return e.hasContent(o,{ignoreWhitespaces:!0})?null:n}return null}function d7(i,e,t,n){const r=i[0].findAncestor("table"),o=Sa(i),s=zo(i),c={firstColumn:o.first,lastColumn:o.last,firstRow:s.first,lastRow:s.last},u=i.length===1;return u&&(c.lastRow+=e.height-1,c.lastColumn+=e.width-1,h7(r,c.lastRow+1,c.lastColumn+1,n)),u||!Zf(i,n)?m7(r,c,t):(c.lastRow=Z0(r,c),c.lastColumn=e_(r,c)),c}function h7(i,e,t,n){const r=n.getColumns(i),o=n.getRows(i);t>r&&n.insertColumns(i,{at:r,columns:t-r}),e>o&&n.insertRows(i,{at:o,rows:e-o})}function f7(i,e,t){const n=new Array(t).fill(null).map(()=>new Array(e).fill(null));for(const{column:r,row:o,cell:s}of new _t(i))n[o][r]=s;return n}function m7(i,e,t){const{firstRow:n,lastRow:r,firstColumn:o,lastColumn:s}=e,c={first:n,last:r},u={first:o,last:s};sm(i,o,c,t),sm(i,s+1,c,t),om(i,n,u,t),om(i,r+1,u,t,n)}function om(i,e,t,n,r=0){return e<1?void 0:G0(i,e,r).filter(({column:c,cellWidth:u})=>a_(c,u,t)).map(({cell:c})=>Y0(c,e,n))}function sm(i,e,t,n){return e<1?void 0:J0(i,e).filter(({row:s,cellHeight:c})=>a_(s,c,t)).map(({cell:s,column:c})=>Q0(s,c,e,n))}function a_(i,e,t){const n=i+e-1,{first:r,last:o}=t,s=i>=r&&i<=o,c=i<r&&n>=r;return s||c}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class p7 extends be{static get pluginName(){return"TableKeyboard"}static get requires(){return[Rs]}init(){const t=this.editor.editing.view.document;this.editor.keystrokes.set("Tab",(...n)=>this._handleTabOnSelectedTable(...n),{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"}),this.listenTo(t,"arrowKey",(...n)=>this._onArrowKey(...n),{context:"table"})}_handleTabOnSelectedTable(e,t){const n=this.editor,o=n.model.document.selection.getSelectedElement();!o||!o.is("element","table")||(t(),n.model.change(s=>{s.setSelection(s.createRangeIn(o.getChild(0).getChild(0)))}))}_getTabHandler(e){const t=this.editor;return(n,r)=>{const o=t.model.document.selection;let s=Dl(o)[0];if(s||(s=this.editor.plugins.get("TableSelection").getFocusCell()),!s)return;r();const c=s.parent,u=c.parent,h=u.getChildIndex(c),f=c.getChildIndex(s),p=f===0;if(!e&&p&&h===0){t.model.change(B=>{B.setSelection(B.createRangeOn(u))});return}const y=this.editor.plugins.get("TableUtils"),T=f===c.childCount-1,A=h===y.getRows(u)-1;if(e&&A&&T&&(t.execute("insertTableRowBelow"),h===y.getRows(u)-1)){t.model.change(B=>{B.setSelection(B.createRangeOn(u))});return}let M;if(e&&T)M=u.getChild(h+1).getChild(0);else if(!e&&p){const B=u.getChild(h-1);M=B.getChild(B.childCount-1)}else M=c.getChild(f+(e?1:-1));t.model.change(B=>{B.setSelection(B.createRangeIn(M))})}}_onArrowKey(e,t){const n=this.editor,r=t.keyCode,o=Nh(r,n.locale.contentLanguageDirection);this._handleArrowKeys(o,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const n=this.editor.model,r=n.document.selection,o=["right","down"].includes(e),s=Ta(r);if(s.length){let u;return t?u=this.editor.plugins.get("TableSelection").getFocusCell():u=o?s[s.length-1]:s[0],this._navigateFromCellInDirection(u,e,t),!0}const c=r.focus.findAncestor("tableCell");if(!c)return!1;if(!r.isCollapsed)if(t){if(r.isBackward==o&&!r.containsEntireContent(c))return!1}else{const u=r.getSelectedElement();if(!u||!n.schema.isObject(u))return!1}return this._isSelectionAtCellEdge(r,c,o)?(this._navigateFromCellInDirection(c,e,t),!0):!1}_isSelectionAtCellEdge(e,t,n){const r=this.editor.model,o=this.editor.model.schema,s=n?e.getLastPosition():e.getFirstPosition();if(!o.getLimitElement(s).is("element","tableCell"))return r.createPositionAt(t,n?"end":0).isTouching(s);const c=r.createSelection(s);return r.modifySelection(c,{direction:n?"forward":"backward"}),s.isEqual(c.focus)}_navigateFromCellInDirection(e,t,n=!1){const r=this.editor.model,o=e.findAncestor("table"),s=[...new _t(o,{includeAllSlots:!0})],{row:c,column:u}=s[s.length-1],h=s.find(({cell:V})=>V==e);let{row:f,column:p}=h;switch(t){case"left":p--;break;case"up":f--;break;case"right":p+=h.cellWidth;break;case"down":f+=h.cellHeight;break}const y=f<0||f>c,T=p<0&&f<=0,A=p>u&&f>=c;if(y||T||A){r.change(V=>{V.setSelection(V.createRangeOn(o))});return}p<0?(p=n?0:u,f--):p>u&&(p=n?u:0,f++);const M=s.find(V=>V.row==f&&V.column==p).cell,B=["right","down"].includes(t),O=this.editor.plugins.get("TableSelection");if(n&&O.isEnabled){const V=O.getAnchorCell()||e;O.setCellSelection(V,M)}else{const V=r.createPositionAt(M,B?0:"end");r.change(F=>{F.setSelection(V)})}}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class g7 extends Bo{constructor(e){super(e);this.domEventType=["mousemove","mouseleave"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class b7 extends be{static get pluginName(){return"TableMouse"}static get requires(){return[Rs]}init(){this.editor.editing.view.addObserver(g7),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const e=this.editor;let t=!1;const n=e.plugins.get(Rs);this.listenTo(e.editing.view.document,"mousedown",(r,o)=>{if(!this.isEnabled||!n.isEnabled||!o.domEvent.shiftKey)return;const s=n.getAnchorCell()||Dl(e.model.document.selection)[0];if(!s)return;const c=this._getModelTableCellFromDomEvent(o);c&&l_(s,c)&&(t=!0,n.setCellSelection(s,c),o.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{t=!1}),this.listenTo(e.editing.view.document,"selectionChange",r=>{t&&r.stop()},{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let t,n,r=!1,o=!1;const s=e.plugins.get(Rs);this.listenTo(e.editing.view.document,"mousedown",(c,u)=>{!this.isEnabled||!s.isEnabled||u.domEvent.shiftKey||u.domEvent.ctrlKey||u.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(u))}),this.listenTo(e.editing.view.document,"mousemove",(c,u)=>{if(!u.domEvent.buttons||!t)return;const h=this._getModelTableCellFromDomEvent(u);h&&l_(t,h)&&(n=h,!r&&n!=t&&(r=!0)),!!r&&(o=!0,s.setCellSelection(t,n),u.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{r=!1,o=!1,t=null,n=null}),this.listenTo(e.editing.view.document,"selectionChange",c=>{o&&c.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(e){const t=e.target,n=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell",{includeSelf:!0})}}function l_(i,e){return i.parent.parent==e.parent.parent}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class w7 extends be{static get requires(){return[Z3,a7,Rs,b7,p7,c7,wa]}static get pluginName(){return"Table"}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function v7(i){const e=i.getSelectedElement();return e&&c_(e)?e:null}function y7(i){let e=i.getFirstPosition().parent;for(;e;){if(e.is("element")&&c_(e))return e;e=e.parent}return null}function c_(i){return!!i.getCustomProperty("table")&&jt(i)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _7 extends be{static get requires(){return[Ru]}static get pluginName(){return"TableToolbar"}afterInit(){const e=this.editor,t=e.t,n=e.plugins.get(Ru),r=e.config.get("table.contentToolbar"),o=e.config.get("table.tableToolbar");r&&n.register("tableContent",{ariaLabel:t("Table toolbar"),items:r,getRelatedElement:y7}),o&&n.register("table",{ariaLabel:t("Table toolbar"),items:o,getRelatedElement:v7})}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const am={autoRefresh:!0},u_=36e5;class Vu{constructor(e,t=am){if(!e)throw new H("token-missing-token-url",this);t.initValue&&this._validateTokenValue(t.initValue),this.set("value",t.initValue),typeof e=="function"?this._refresh=e:this._refresh=()=>k7(e),this._options=Object.assign({},am,t)}init(){return new Promise((e,t)=>{if(!this.value){this.refreshToken().then(e).catch(t);return}this._options.autoRefresh&&this._registerRefreshTokenTimeout(),e(this)})}refreshToken(){return this._refresh().then(e=>{this._validateTokenValue(e),this.set("value",e),this._options.autoRefresh&&this._registerRefreshTokenTimeout()}).then(()=>this)}destroy(){clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(e){const t=typeof e=="string",n=!/^".*"$/.test(e),r=t&&e.split(".").length===3;if(!(n&&r))throw new H("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(){const e=this._getTokenRefreshTimeoutTime();clearTimeout(this._tokenRefreshTimeout),this._tokenRefreshTimeout=setTimeout(()=>{this.refreshToken()},e)}_getTokenRefreshTimeoutTime(){try{const[,e]=this.value.split("."),{exp:t}=JSON.parse(atob(e));return t?Math.floor((t*1e3-Date.now())/2):u_}catch{return u_}}static create(e,t=am){return new Vu(e,t).init()}}je(Vu,Pt);function k7(i){return new Promise((e,t)=>{const n=new XMLHttpRequest;n.open("GET",i),n.addEventListener("load",()=>{const r=n.status,o=n.response;return r<200||r>299?t(new H("token-cannot-download-new-token",null)):e(o)}),n.addEventListener("error",()=>t(new Error("Network Error"))),n.addEventListener("abort",()=>t(new Error("Abort"))),n.send()})}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const lm=/^data:(\S*?);base64,/;class d_{constructor(e,t,n){if(!e)throw new H("fileuploader-missing-file",null);if(!t)throw new H("fileuploader-missing-token",null);if(!n)throw new H("fileuploader-missing-api-address",null);this.file=C7(e)?E7(e):e,this._token=t,this._apiAddress=n}onProgress(e){return this.on("progress",(t,n)=>e(n)),this}onError(e){return this.once("error",(t,n)=>e(n)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}_attachXHRListeners(){const e=this,t=this.xhr;t.addEventListener("error",n("Network Error")),t.addEventListener("abort",n("Abort")),t.upload&&t.upload.addEventListener("progress",r=>{r.lengthComputable&&this.fire("progress",{total:r.total,uploaded:r.loaded})}),t.addEventListener("load",()=>{const r=t.status,o=t.response;if(r<200||r>299)return this.fire("error",o.message||o.error)});function n(r){return()=>e.fire("error",r)}}_sendRequest(){const e=new FormData,t=this.xhr;return e.append("file",this.file),new Promise((n,r)=>{t.addEventListener("load",()=>{const o=t.status,s=t.response;return o<200||o>299?s.message?r(new H("fileuploader-uploading-data-failed",this,{message:s.message})):r(s.error):n(s)}),t.addEventListener("error",()=>r(new Error("Network Error"))),t.addEventListener("abort",()=>r(new Error("Abort"))),t.send(e)})}}je(d_,xt);function E7(i,e=512){try{const t=i.match(lm)[1],n=atob(i.replace(lm,"")),r=[];for(let o=0;o<n.length;o+=e){const s=n.slice(o,o+e),c=new Array(s.length);for(let u=0;u<s.length;u++)c[u]=s.charCodeAt(u);r.push(new Uint8Array(c))}return new Blob(r,{type:t})}catch{throw new H("fileuploader-decoding-image-data-error",null)}}function C7(i){if(typeof i!="string")return!1;const e=i.match(lm);return!!(e&&e.length)}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class T7{constructor(e,t){if(!e)throw new H("uploadgateway-missing-token",null);if(!t)throw new H("uploadgateway-missing-api-address",null);this._token=e,this._apiAddress=t}upload(e){return new d_(e,this._token,this._apiAddress)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class S7 extends kl{static get pluginName(){return"CloudServicesCore"}createToken(e,t){return new Vu(e,t)}createUploadGateway(e,t){return new T7(e,t)}}/**
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class x7 extends kl{static get pluginName(){return"CloudServices"}static get requires(){return[S7]}init(){const t=this.context.config.get("cloudServices")||{};for(const n in t)this[n]=t[n];if(this._tokens=new Map,!this.tokenUrl){this.token=null;return}return this.token=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl),this._tokens.set(this.tokenUrl,this.token),this.token.init()}registerTokenUrl(e){if(this._tokens.has(e))return Promise.resolve(this.getTokenFor(e));const t=this.context.plugins.get("CloudServicesCore").createToken(e);return this._tokens.set(e,t),t.init()}getTokenFor(e){const t=this._tokens.get(e);if(!t)throw new H("cloudservices-token-not-registered",this);return t}destroy(){super.destroy();for(const e of this._tokens.values())e.destroy()}}var h_={exports:{}};/*! For license information please see inspector.js.LICENSE.txt */(function(i,e){(function(t,n){i.exports=n()})(window,function(){return function(t){var n={};function r(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=n,r.d=function(o,s,c){r.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:c})},r.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,s){if(1&s&&(o=r(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(r.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var u in o)r.d(c,u,function(h){return o[h]}.bind(null,u));return c},r.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(s,"a",s),s},r.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},r.p="",r(r.s=66)}([function(t,n,r){t.exports=r(19)},function(t,n,r){var o,s=function(){return o===void 0&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},c=function(){var F={};return function(Z){if(F[Z]===void 0){var ae=document.querySelector(Z);if(window.HTMLIFrameElement&&ae instanceof window.HTMLIFrameElement)try{ae=ae.contentDocument.head}catch{ae=null}F[Z]=ae}return F[Z]}}(),u=[];function h(F){for(var Z=-1,ae=0;ae<u.length;ae++)if(u[ae].identifier===F){Z=ae;break}return Z}function f(F,Z){for(var ae={},W=[],se=0;se<F.length;se++){var te=F[se],ve=Z.base?te[0]+Z.base:te[0],ee=ae[ve]||0,Oe="".concat(ve," ").concat(ee);ae[ve]=ee+1;var Ue=h(Oe),we={css:te[1],media:te[2],sourceMap:te[3]};Ue!==-1?(u[Ue].references++,u[Ue].updater(we)):u.push({identifier:Oe,updater:V(we,Z),references:1}),W.push(Oe)}return W}function p(F){var Z=document.createElement("style"),ae=F.attributes||{};if(ae.nonce===void 0){var W=r.nc;W&&(ae.nonce=W)}if(Object.keys(ae).forEach(function(te){Z.setAttribute(te,ae[te])}),typeof F.insert=="function")F.insert(Z);else{var se=c(F.insert||"head");if(!se)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");se.appendChild(Z)}return Z}var y,T=(y=[],function(F,Z){return y[F]=Z,y.filter(Boolean).join(`
`)});function A(F,Z,ae,W){var se=ae?"":W.media?"@media ".concat(W.media," {").concat(W.css,"}"):W.css;if(F.styleSheet)F.styleSheet.cssText=T(Z,se);else{var te=document.createTextNode(se),ve=F.childNodes;ve[Z]&&F.removeChild(ve[Z]),ve.length?F.insertBefore(te,ve[Z]):F.appendChild(te)}}function M(F,Z,ae){var W=ae.css,se=ae.media,te=ae.sourceMap;if(se?F.setAttribute("media",se):F.removeAttribute("media"),te&&typeof btoa!="undefined"&&(W+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(te))))," */")),F.styleSheet)F.styleSheet.cssText=W;else{for(;F.firstChild;)F.removeChild(F.firstChild);F.appendChild(document.createTextNode(W))}}var B=null,O=0;function V(F,Z){var ae,W,se;if(Z.singleton){var te=O++;ae=B||(B=p(Z)),W=A.bind(null,ae,te,!1),se=A.bind(null,ae,te,!0)}else ae=p(Z),W=M.bind(null,ae,Z),se=function(){(function(ve){if(ve.parentNode===null)return!1;ve.parentNode.removeChild(ve)})(ae)};return W(F),function(ve){if(ve){if(ve.css===F.css&&ve.media===F.media&&ve.sourceMap===F.sourceMap)return;W(F=ve)}else se()}}t.exports=function(F,Z){(Z=Z||{}).singleton||typeof Z.singleton=="boolean"||(Z.singleton=s());var ae=f(F=F||[],Z);return function(W){if(W=W||[],Object.prototype.toString.call(W)==="[object Array]"){for(var se=0;se<ae.length;se++){var te=h(ae[se]);u[te].references--}for(var ve=f(W,Z),ee=0;ee<ae.length;ee++){var Oe=h(ae[ee]);u[Oe].references===0&&(u[Oe].updater(),u.splice(Oe,1))}ae=ve}}}},function(t,n,r){t.exports=function(o){var s=[];return s.toString=function(){return this.map(function(c){var u=function(h,f){var p=h[1]||"",y=h[3];if(!y)return p;if(f&&typeof btoa=="function"){var T=(M=y,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(M))))+" */"),A=y.sources.map(function(B){return"/*# sourceURL="+y.sourceRoot+B+" */"});return[p].concat(A).concat([T]).join(`
`)}var M;return[p].join(`
`)}(c,o);return c[2]?"@media "+c[2]+"{"+u+"}":u}).join("")},s.i=function(c,u){typeof c=="string"&&(c=[[null,c,""]]);for(var h={},f=0;f<this.length;f++){var p=this[f][0];p!=null&&(h[p]=!0)}for(f=0;f<c.length;f++){var y=c[f];y[0]!=null&&h[y[0]]||(u&&!y[2]?y[2]=u:u&&(y[2]="("+y[2]+") and ("+u+")"),s.push(y))}},s}},function(t,n,r){(function(o,s){var c="[object Arguments]",u="[object Map]",h="[object Object]",f="[object Set]",p=/^\[object .+?Constructor\]$/,y=/^(?:0|[1-9]\d*)$/,T={};T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T[c]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object Boolean]"]=T["[object DataView]"]=T["[object Date]"]=T["[object Error]"]=T["[object Function]"]=T[u]=T["[object Number]"]=T[h]=T["[object RegExp]"]=T[f]=T["[object String]"]=T["[object WeakMap]"]=!1;var A=typeof o=="object"&&o&&o.Object===Object&&o,M=typeof self=="object"&&self&&self.Object===Object&&self,B=A||M||Function("return this")(),O=n&&!n.nodeType&&n,V=O&&typeof s=="object"&&s&&!s.nodeType&&s,F=V&&V.exports===O,Z=F&&A.process,ae=function(){try{return Z&&Z.binding&&Z.binding("util")}catch{}}(),W=ae&&ae.isTypedArray;function se($,X){for(var ye=-1,Ne=$==null?0:$.length;++ye<Ne;)if(X($[ye],ye,$))return!0;return!1}function te($){var X=-1,ye=Array($.size);return $.forEach(function(Ne,ft){ye[++X]=[ft,Ne]}),ye}function ve($){var X=-1,ye=Array($.size);return $.forEach(function(Ne){ye[++X]=Ne}),ye}var ee,Oe,Ue,we=Array.prototype,ke=Function.prototype,Te=Object.prototype,ie=B["__core-js_shared__"],me=ke.toString,D=Te.hasOwnProperty,re=(ee=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||""))?"Symbol(src)_1."+ee:"",pe=Te.toString,Be=RegExp("^"+me.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pe=F?B.Buffer:void 0,Ve=B.Symbol,Me=B.Uint8Array,qe=Te.propertyIsEnumerable,lt=we.splice,K=Ve?Ve.toStringTag:void 0,j=Object.getOwnPropertySymbols,de=Pe?Pe.isBuffer:void 0,v=(Oe=Object.keys,Ue=Object,function($){return Oe(Ue($))}),E=Pi(B,"DataView"),x=Pi(B,"Map"),L=Pi(B,"Promise"),z=Pi(B,"Set"),U=Pi(B,"WeakMap"),ue=Pi(Object,"create"),$e=di(E),We=di(x),it=di(L),Ze=di(z),un=di(U),qt=Ve?Ve.prototype:void 0,zn=qt?qt.valueOf:void 0;function Jt($){var X=-1,ye=$==null?0:$.length;for(this.clear();++X<ye;){var Ne=$[X];this.set(Ne[0],Ne[1])}}function dn($){var X=-1,ye=$==null?0:$.length;for(this.clear();++X<ye;){var Ne=$[X];this.set(Ne[0],Ne[1])}}function ci($){var X=-1,ye=$==null?0:$.length;for(this.clear();++X<ye;){var Ne=$[X];this.set(Ne[0],Ne[1])}}function ui($){var X=-1,ye=$==null?0:$.length;for(this.__data__=new ci;++X<ye;)this.add($[X])}function vt($){var X=this.__data__=new dn($);this.size=X.size}function ao($,X){var ye=cr($),Ne=!ye&&Uo($),ft=!ye&&!Ne&&Nr($),et=!ye&&!Ne&&!ft&&Dr($),mt=ye||Ne||ft||et,yt=mt?function(Lt,Cn){for(var Un=-1,Qt=Array(Lt);++Un<Lt;)Qt[Un]=Cn(Un);return Qt}($.length,String):[],nn=yt.length;for(var dt in $)!X&&!D.call($,dt)||mt&&(dt=="length"||ft&&(dt=="offset"||dt=="parent")||et&&(dt=="buffer"||dt=="byteLength"||dt=="byteOffset")||uo(dt,nn))||yt.push(dt);return yt}function lr($,X){for(var ye=$.length;ye--;)if(ho($[ye][0],X))return ye;return-1}function xi($){return $==null?$===void 0?"[object Undefined]":"[object Null]":K&&K in Object($)?function(X){var ye=D.call(X,K),Ne=X[K];try{X[K]=void 0;var ft=!0}catch{}var et=pe.call(X);return ft&&(ye?X[K]=Ne:delete X[K]),et}($):function(X){return pe.call(X)}($)}function lo($){return Ki($)&&xi($)==c}function Ho($,X,ye,Ne,ft){return $===X||($==null||X==null||!Ki($)&&!Ki(X)?$!=$&&X!=X:function(et,mt,yt,nn,dt,Lt){var Cn=cr(et),Un=cr(mt),Qt=Cn?"[object Array]":Xn(et),Wn=Un?"[object Array]":Xn(mt),Ai=(Qt=Qt==c?h:Qt)==h,hi=(Wn=Wn==c?h:Wn)==h,Ii=Qt==Wn;if(Ii&&Nr(et)){if(!Nr(mt))return!1;Cn=!0,Ai=!1}if(Ii&&!Ai)return Lt||(Lt=new vt),Cn||Dr(et)?Hn(et,mt,yt,nn,dt,Lt):function(pt,ot,Yi,Rn,po,hn,$n){switch(Yi){case"[object DataView]":if(pt.byteLength!=ot.byteLength||pt.byteOffset!=ot.byteOffset)return!1;pt=pt.buffer,ot=ot.buffer;case"[object ArrayBuffer]":return!(pt.byteLength!=ot.byteLength||!hn(new Me(pt),new Me(ot)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ho(+pt,+ot);case"[object Error]":return pt.name==ot.name&&pt.message==ot.message;case"[object RegExp]":case"[object String]":return pt==ot+"";case u:var mi=te;case f:var ei=1&Rn;if(mi||(mi=ve),pt.size!=ot.size&&!ei)return!1;var Br=$n.get(pt);if(Br)return Br==ot;Rn|=2,$n.set(pt,ot);var Ji=Hn(mi(pt),mi(ot),Rn,po,hn,$n);return $n.delete(pt),Ji;case"[object Symbol]":if(zn)return zn.call(pt)==zn.call(ot)}return!1}(et,mt,Qt,yt,nn,dt,Lt);if(!(1&yt)){var Gi=Ai&&D.call(et,"__wrapped__"),fi=hi&&D.call(mt,"__wrapped__");if(Gi||fi){var mo=Gi?et.value():et,Ms=fi?mt.value():mt;return Lt||(Lt=new vt),dt(mo,Ms,yt,nn,Lt)}}return Ii?(Lt||(Lt=new vt),function(pt,ot,Yi,Rn,po,hn){var $n=1&Yi,mi=co(pt),ei=mi.length,Br=co(ot).length;if(ei!=Br&&!$n)return!1;for(var Ji=ei;Ji--;){var pi=mi[Ji];if(!($n?pi in ot:D.call(ot,pi)))return!1}var ti=hn.get(pt);if(ti&&hn.get(ot))return ti==ot;var Vr=!0;hn.set(pt,ot),hn.set(ot,pt);for(var Tn=$n;++Ji<ei;){pi=mi[Ji];var Lr=pt[pi],gi=ot[pi];if(Rn)var Mn=$n?Rn(gi,Lr,pi,ot,pt,hn):Rn(Lr,gi,pi,pt,ot,hn);if(!(Mn===void 0?Lr===gi||po(Lr,gi,Yi,Rn,hn):Mn)){Vr=!1;break}Tn||(Tn=pi=="constructor")}if(Vr&&!Tn){var rn=pt.constructor,bn=ot.constructor;rn==bn||!("constructor"in pt)||!("constructor"in ot)||typeof rn=="function"&&rn instanceof rn&&typeof bn=="function"&&bn instanceof bn||(Vr=!1)}return hn.delete(pt),hn.delete(ot),Vr}(et,mt,yt,nn,dt,Lt)):!1}($,X,ye,Ne,Ho,ft))}function Mr($){return!(!fo($)||function(X){return!!re&&re in X}($))&&(Zn($)?Be:p).test(di($))}function Kt($){if(ye=(X=$)&&X.constructor,Ne=typeof ye=="function"&&ye.prototype||Te,X!==Ne)return v($);var X,ye,Ne,ft=[];for(var et in Object($))D.call($,et)&&et!="constructor"&&ft.push(et);return ft}function Hn($,X,ye,Ne,ft,et){var mt=1&ye,yt=$.length,nn=X.length;if(yt!=nn&&!(mt&&nn>yt))return!1;var dt=et.get($);if(dt&&et.get(X))return dt==X;var Lt=-1,Cn=!0,Un=2&ye?new ui:void 0;for(et.set($,X),et.set(X,$);++Lt<yt;){var Qt=$[Lt],Wn=X[Lt];if(Ne)var Ai=mt?Ne(Wn,Qt,Lt,X,$,et):Ne(Qt,Wn,Lt,$,X,et);if(Ai!==void 0){if(Ai)continue;Cn=!1;break}if(Un){if(!se(X,function(hi,Ii){if(Gi=Ii,!Un.has(Gi)&&(Qt===hi||ft(Qt,hi,ye,Ne,et)))return Un.push(Ii);var Gi})){Cn=!1;break}}else if(Qt!==Wn&&!ft(Qt,Wn,ye,Ne,et)){Cn=!1;break}}return et.delete($),et.delete(X),Cn}function co($){return function(X,ye,Ne){var ft=ye(X);return cr(X)?ft:function(et,mt){for(var yt=-1,nn=mt.length,dt=et.length;++yt<nn;)et[dt+yt]=mt[yt];return et}(ft,Ne(X))}($,Wo,Or)}function En($,X){var ye,Ne,ft=$.__data__;return((Ne=typeof(ye=X))=="string"||Ne=="number"||Ne=="symbol"||Ne=="boolean"?ye!=="__proto__":ye===null)?ft[typeof X=="string"?"string":"hash"]:ft.map}function Pi($,X){var ye=function(Ne,ft){return Ne==null?void 0:Ne[ft]}($,X);return Mr(ye)?ye:void 0}Jt.prototype.clear=function(){this.__data__=ue?ue(null):{},this.size=0},Jt.prototype.delete=function($){var X=this.has($)&&delete this.__data__[$];return this.size-=X?1:0,X},Jt.prototype.get=function($){var X=this.__data__;if(ue){var ye=X[$];return ye==="__lodash_hash_undefined__"?void 0:ye}return D.call(X,$)?X[$]:void 0},Jt.prototype.has=function($){var X=this.__data__;return ue?X[$]!==void 0:D.call(X,$)},Jt.prototype.set=function($,X){var ye=this.__data__;return this.size+=this.has($)?0:1,ye[$]=ue&&X===void 0?"__lodash_hash_undefined__":X,this},dn.prototype.clear=function(){this.__data__=[],this.size=0},dn.prototype.delete=function($){var X=this.__data__,ye=lr(X,$);return!(ye<0)&&(ye==X.length-1?X.pop():lt.call(X,ye,1),--this.size,!0)},dn.prototype.get=function($){var X=this.__data__,ye=lr(X,$);return ye<0?void 0:X[ye][1]},dn.prototype.has=function($){return lr(this.__data__,$)>-1},dn.prototype.set=function($,X){var ye=this.__data__,Ne=lr(ye,$);return Ne<0?(++this.size,ye.push([$,X])):ye[Ne][1]=X,this},ci.prototype.clear=function(){this.size=0,this.__data__={hash:new Jt,map:new(x||dn),string:new Jt}},ci.prototype.delete=function($){var X=En(this,$).delete($);return this.size-=X?1:0,X},ci.prototype.get=function($){return En(this,$).get($)},ci.prototype.has=function($){return En(this,$).has($)},ci.prototype.set=function($,X){var ye=En(this,$),Ne=ye.size;return ye.set($,X),this.size+=ye.size==Ne?0:1,this},ui.prototype.add=ui.prototype.push=function($){return this.__data__.set($,"__lodash_hash_undefined__"),this},ui.prototype.has=function($){return this.__data__.has($)},vt.prototype.clear=function(){this.__data__=new dn,this.size=0},vt.prototype.delete=function($){var X=this.__data__,ye=X.delete($);return this.size=X.size,ye},vt.prototype.get=function($){return this.__data__.get($)},vt.prototype.has=function($){return this.__data__.has($)},vt.prototype.set=function($,X){var ye=this.__data__;if(ye instanceof dn){var Ne=ye.__data__;if(!x||Ne.length<199)return Ne.push([$,X]),this.size=++ye.size,this;ye=this.__data__=new ci(Ne)}return ye.set($,X),this.size=ye.size,this};var Or=j?function($){return $==null?[]:($=Object($),function(X,ye){for(var Ne=-1,ft=X==null?0:X.length,et=0,mt=[];++Ne<ft;){var yt=X[Ne];ye(yt,Ne,X)&&(mt[et++]=yt)}return mt}(j($),function(X){return qe.call($,X)}))}:function(){return[]},Xn=xi;function uo($,X){return!!(X=X==null?9007199254740991:X)&&(typeof $=="number"||y.test($))&&$>-1&&$%1==0&&$<X}function di($){if($!=null){try{return me.call($)}catch{}try{return $+""}catch{}}return""}function ho($,X){return $===X||$!=$&&X!=X}(E&&Xn(new E(new ArrayBuffer(1)))!="[object DataView]"||x&&Xn(new x)!=u||L&&Xn(L.resolve())!="[object Promise]"||z&&Xn(new z)!=f||U&&Xn(new U)!="[object WeakMap]")&&(Xn=function($){var X=xi($),ye=X==h?$.constructor:void 0,Ne=ye?di(ye):"";if(Ne)switch(Ne){case $e:return"[object DataView]";case We:return u;case it:return"[object Promise]";case Ze:return f;case un:return"[object WeakMap]"}return X});var Uo=lo(function(){return arguments}())?lo:function($){return Ki($)&&D.call($,"callee")&&!qe.call($,"callee")},cr=Array.isArray,Nr=de||function(){return!1};function Zn($){if(!fo($))return!1;var X=xi($);return X=="[object Function]"||X=="[object GeneratorFunction]"||X=="[object AsyncFunction]"||X=="[object Proxy]"}function St($){return typeof $=="number"&&$>-1&&$%1==0&&$<=9007199254740991}function fo($){var X=typeof $;return $!=null&&(X=="object"||X=="function")}function Ki($){return $!=null&&typeof $=="object"}var Dr=W?function($){return function(X){return $(X)}}(W):function($){return Ki($)&&St($.length)&&!!T[xi($)]};function Wo($){return(X=$)!=null&&St(X.length)&&!Zn(X)?ao($):Kt($);var X}s.exports=function($,X){return Ho($,X)}}).call(this,r(9),r(43)(t))},function(t,n){function r(p,y,T,A){var M,B=(M=A)==null||typeof M=="number"||typeof M=="boolean"?A:T(A),O=y.get(B);return O===void 0&&(O=p.call(this,A),y.set(B,O)),O}function o(p,y,T){var A=Array.prototype.slice.call(arguments,3),M=T(A),B=y.get(M);return B===void 0&&(B=p.apply(this,A),y.set(M,B)),B}function s(p,y,T,A,M){return T.bind(y,p,A,M)}function c(p,y){return s(p,this,p.length===1?r:o,y.cache.create(),y.serializer)}function u(){return JSON.stringify(arguments)}function h(){this.cache=Object.create(null)}h.prototype.has=function(p){return p in this.cache},h.prototype.get=function(p){return this.cache[p]},h.prototype.set=function(p,y){this.cache[p]=y};var f={create:function(){return new h}};t.exports=function(p,y){var T=y&&y.cache?y.cache:f,A=y&&y.serializer?y.serializer:u;return(y&&y.strategy?y.strategy:c)(p,{cache:T,serializer:A})},t.exports.strategies={variadic:function(p,y){return s(p,this,o,y.cache.create(),y.serializer)},monadic:function(p,y){return s(p,this,r,y.cache.create(),y.serializer)}}},function(t,n,r){(function o(){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE=="function")try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(s){console.error(s)}})(),t.exports=r(20)},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.stringifyPath=n.quoteKey=n.isValidVariableName=n.IS_VALID_IDENTIFIER=n.quoteString=void 0;const o=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s=new Map([["\b","\\b"],["	","\\t"],[`
`,"\\n"],["\f","\\f"],["\r","\\r"],["'","\\'"],['"','\\"'],["\\","\\\\"]]);function c(f){return s.get(f)||"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)}n.quoteString=function(f){return`'${f.replace(o,c)}'`};const u=new Set("break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "));function h(f){return typeof f=="string"&&!u.has(f)&&n.IS_VALID_IDENTIFIER.test(f)}n.IS_VALID_IDENTIFIER=/^[A-Za-z_$][A-Za-z0-9_$]*$/,n.isValidVariableName=h,n.quoteKey=function(f,p){return h(f)?f:p(f)},n.stringifyPath=function(f,p){let y="";for(const T of f)h(T)?y+="."+T:y+=`[${p(T)}]`;return y}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.findInArray=function(o,s){for(var c=0,u=o.length;c<u;c++)if(s.apply(s,[o[c],c,o]))return o[c]},n.isFunction=function(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"},n.isNum=function(o){return typeof o=="number"&&!isNaN(o)},n.int=function(o){return parseInt(o,10)},n.dontSetMe=function(o,s,c){if(o[s])return new Error("Invalid prop ".concat(s," passed to ").concat(c," - do not set this, set it on the child."))}},function(t,n,r){t.exports=r(23)()},function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}t.exports=r},function(t,n,r){function o(O){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(O)}Object.defineProperty(n,"__esModule",{value:!0}),n.matchesSelector=T,n.matchesSelectorAndParentsTo=function(O,V,F){var Z=O;do{if(T(Z,V))return!0;if(Z===F)return!1;Z=Z.parentNode}while(Z);return!1},n.addEvent=function(O,V,F,Z){if(!!O){var ae=f({capture:!0},Z);O.addEventListener?O.addEventListener(V,F,ae):O.attachEvent?O.attachEvent("on"+V,F):O["on"+V]=F}},n.removeEvent=function(O,V,F,Z){if(!!O){var ae=f({capture:!0},Z);O.removeEventListener?O.removeEventListener(V,F,ae):O.detachEvent?O.detachEvent("on"+V,F):O["on"+V]=null}},n.outerHeight=function(O){var V=O.clientHeight,F=O.ownerDocument.defaultView.getComputedStyle(O);return V+=(0,s.int)(F.borderTopWidth),V+=(0,s.int)(F.borderBottomWidth)},n.outerWidth=function(O){var V=O.clientWidth,F=O.ownerDocument.defaultView.getComputedStyle(O);return V+=(0,s.int)(F.borderLeftWidth),V+=(0,s.int)(F.borderRightWidth)},n.innerHeight=function(O){var V=O.clientHeight,F=O.ownerDocument.defaultView.getComputedStyle(O);return V-=(0,s.int)(F.paddingTop),V-=(0,s.int)(F.paddingBottom)},n.innerWidth=function(O){var V=O.clientWidth,F=O.ownerDocument.defaultView.getComputedStyle(O);return V-=(0,s.int)(F.paddingLeft),V-=(0,s.int)(F.paddingRight)},n.offsetXYFromParent=function(O,V,F){var Z=V===V.ownerDocument.body?{left:0,top:0}:V.getBoundingClientRect(),ae=(O.clientX+V.scrollLeft-Z.left)/F,W=(O.clientY+V.scrollTop-Z.top)/F;return{x:ae,y:W}},n.createCSSTransform=function(O,V){var F=A(O,V,"px");return p({},(0,c.browserPrefixToKey)("transform",c.default),F)},n.createSVGTransform=function(O,V){return A(O,V,"")},n.getTranslation=A,n.getTouch=function(O,V){return O.targetTouches&&(0,s.findInArray)(O.targetTouches,function(F){return V===F.identifier})||O.changedTouches&&(0,s.findInArray)(O.changedTouches,function(F){return V===F.identifier})},n.getTouchIdentifier=function(O){if(O.targetTouches&&O.targetTouches[0])return O.targetTouches[0].identifier;if(O.changedTouches&&O.changedTouches[0])return O.changedTouches[0].identifier},n.addUserSelectStyles=function(O){if(!!O){var V=O.getElementById("react-draggable-style-el");V||((V=O.createElement("style")).type="text/css",V.id="react-draggable-style-el",V.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,V.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,O.getElementsByTagName("head")[0].appendChild(V)),O.body&&M(O.body,"react-draggable-transparent-selection")}},n.removeUserSelectStyles=function(O){if(!!O)try{if(O.body&&B(O.body,"react-draggable-transparent-selection"),O.selection)O.selection.empty();else{var V=(O.defaultView||window).getSelection();V&&V.type!=="Caret"&&V.removeAllRanges()}}catch{}},n.addClassName=M,n.removeClassName=B;var s=r(7),c=function(O){if(O&&O.__esModule)return O;if(O===null||o(O)!=="object"&&typeof O!="function")return{default:O};var V=u();if(V&&V.has(O))return V.get(O);var F={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in O)if(Object.prototype.hasOwnProperty.call(O,ae)){var W=Z?Object.getOwnPropertyDescriptor(O,ae):null;W&&(W.get||W.set)?Object.defineProperty(F,ae,W):F[ae]=O[ae]}return F.default=O,V&&V.set(O,F),F}(r(37));function u(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return u=function(){return O},O}function h(O,V){var F=Object.keys(O);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(O);V&&(Z=Z.filter(function(ae){return Object.getOwnPropertyDescriptor(O,ae).enumerable})),F.push.apply(F,Z)}return F}function f(O){for(var V=1;V<arguments.length;V++){var F=arguments[V]!=null?arguments[V]:{};V%2?h(Object(F),!0).forEach(function(Z){p(O,Z,F[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(F)):h(Object(F)).forEach(function(Z){Object.defineProperty(O,Z,Object.getOwnPropertyDescriptor(F,Z))})}return O}function p(O,V,F){return V in O?Object.defineProperty(O,V,{value:F,enumerable:!0,configurable:!0,writable:!0}):O[V]=F,O}var y="";function T(O,V){return y||(y=(0,s.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(F){return(0,s.isFunction)(O[F])})),!!(0,s.isFunction)(O[y])&&O[y](V)}function A(O,V,F){var Z=O.x,ae=O.y,W="translate(".concat(Z).concat(F,",").concat(ae).concat(F,")");if(V){var se="".concat(typeof V.x=="string"?V.x:V.x+F),te="".concat(typeof V.y=="string"?V.y:V.y+F);W="translate(".concat(se,", ").concat(te,")")+W}return W}function M(O,V){O.classList?O.classList.add(V):O.className.match(new RegExp("(?:^|\\s)".concat(V,"(?!\\S)")))||(O.className+=" ".concat(V))}function B(O,V){O.classList?O.classList.remove(V):O.className=O.className.replace(new RegExp("(?:^|\\s)".concat(V,"(?!\\S)"),"g"),"")}},function(t,n,r){var o=r(25),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},c={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},u={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},h={};function f(O){return o.isMemo(O)?u:h[O.$$typeof]||s}h[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},h[o.Memo]=u;var p=Object.defineProperty,y=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,M=Object.getPrototypeOf,B=Object.prototype;t.exports=function O(V,F,Z){if(typeof F!="string"){if(B){var ae=M(F);ae&&ae!==B&&O(V,ae,Z)}var W=y(F);T&&(W=W.concat(T(F)));for(var se=f(V),te=f(F),ve=0;ve<W.length;++ve){var ee=W[ve];if(!(c[ee]||Z&&Z[ee]||te&&te[ee]||se&&se[ee])){var Oe=A(F,ee);try{p(V,ee,Oe)}catch{}}}}return V}},function(t,n,r){var o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function u(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}t.exports=function(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de",Object.getOwnPropertyNames(h)[0]==="5")return!1;for(var f={},p=0;p<10;p++)f["_"+String.fromCharCode(p)]=p;if(Object.getOwnPropertyNames(f).map(function(T){return f[T]}).join("")!=="0123456789")return!1;var y={};return"abcdefghijklmnopqrst".split("").forEach(function(T){y[T]=T}),Object.keys(Object.assign({},y)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(h,f){for(var p,y,T=u(h),A=1;A<arguments.length;A++){for(var M in p=Object(arguments[A]))s.call(p,M)&&(T[M]=p[M]);if(o){y=o(p);for(var B=0;B<y.length;B++)c.call(p,y[B])&&(T[y[B]]=p[y[B]])}}return T}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FunctionParser=n.dedentFunction=n.functionToString=n.USED_METHOD_KEY=void 0;const o=r(6),s={" "(){}}[" "].toString().charAt(0)==='"',c={Function:"function ",GeneratorFunction:"function* ",AsyncFunction:"async function ",AsyncGeneratorFunction:"async function* "},u={Function:"",GeneratorFunction:"*",AsyncFunction:"async ",AsyncGeneratorFunction:"async *"},h=new Set("case delete else in instanceof new return throw typeof void , ; : + - ! ~ & | ^ * / % < > ? =".split(" "));n.USED_METHOD_KEY=new WeakSet;function f(y){let T;for(const A of y.split(`
`).slice(1)){const M=/^[\s\t]+/.exec(A);if(!M)return y;const[B]=M;(T===void 0||B.length<T.length)&&(T=B)}return T?y.split(`
`+T).join(`
`):y}n.functionToString=(y,T,A,M)=>{const B=typeof M=="string"?M:void 0;return B!==void 0&&n.USED_METHOD_KEY.add(y),new p(y,T,A,B).stringify()},n.dedentFunction=f;class p{constructor(T,A,M,B){this.fn=T,this.indent=A,this.next=M,this.key=B,this.pos=0,this.hadKeyword=!1,this.fnString=Function.prototype.toString.call(T),this.fnType=T.constructor.name,this.keyQuote=B===void 0?"":o.quoteKey(B,M),this.keyPrefix=B===void 0?"":`${this.keyQuote}:${A?" ":""}`,this.isMethodCandidate=B!==void 0&&(this.fn.name===""||this.fn.name===B)}stringify(){const T=this.tryParse();return T?f(T):`${this.keyPrefix}void ${this.next(this.fnString)}`}getPrefix(){return this.isMethodCandidate&&!this.hadKeyword?u[this.fnType]+this.keyQuote:this.keyPrefix+c[this.fnType]}tryParse(){if(this.fnString[this.fnString.length-1]!=="}")return this.keyPrefix+this.fnString;if(this.fn.name){const A=this.tryStrippingName();if(A)return A}const T=this.pos;if(this.consumeSyntax()==="class")return this.fnString;if(this.pos=T,this.tryParsePrefixTokens()){const A=this.tryStrippingName();if(A)return A;let M=this.pos;switch(this.consumeSyntax("WORD_LIKE")){case"WORD_LIKE":this.isMethodCandidate&&!this.hadKeyword&&(M=this.pos);case"()":if(this.fnString.substr(this.pos,2)==="=>")return this.keyPrefix+this.fnString;this.pos=M;case'"':case"'":case"[]":return this.getPrefix()+this.fnString.substr(this.pos)}}}tryStrippingName(){if(s)return;let T=this.pos;const A=this.fnString.substr(this.pos,this.fn.name.length);if(A===this.fn.name&&(this.pos+=A.length,this.consumeSyntax()==="()"&&this.consumeSyntax()==="{}"&&this.pos===this.fnString.length))return!this.isMethodCandidate&&o.isValidVariableName(A)||(T+=A.length),this.getPrefix()+this.fnString.substr(T);this.pos=T}tryParsePrefixTokens(){let T=this.pos;switch(this.hadKeyword=!1,this.fnType){case"AsyncFunction":if(this.consumeSyntax()!=="async")return!1;T=this.pos;case"Function":return this.consumeSyntax()==="function"?this.hadKeyword=!0:this.pos=T,!0;case"AsyncGeneratorFunction":if(this.consumeSyntax()!=="async")return!1;case"GeneratorFunction":let A=this.consumeSyntax();return A==="function"&&(A=this.consumeSyntax(),this.hadKeyword=!0),A==="*"}}consumeSyntax(T){const A=this.consumeMatch(/^(?:([A-Za-z_0-9$\xA0-\uFFFF]+)|=>|\+\+|\-\-|.)/);if(!A)return;const[M,B]=A;if(this.consumeWhitespace(),B)return T||B;switch(M){case"(":return this.consumeSyntaxUntil("(",")");case"[":return this.consumeSyntaxUntil("[","]");case"{":return this.consumeSyntaxUntil("{","}");case"`":return this.consumeTemplate();case'"':return this.consumeRegExp(/^(?:[^\\"]|\\.)*"/,'"');case"'":return this.consumeRegExp(/^(?:[^\\']|\\.)*'/,"'")}return M}consumeSyntaxUntil(T,A){let M=!0;for(;;){const B=this.consumeSyntax();if(B===A)return T+A;if(!B||B===")"||B==="]"||B==="}")return;B==="/"&&M&&this.consumeMatch(/^(?:\\.|[^\\\/\n[]|\[(?:\\.|[^\]])*\])+\/[a-z]*/)?(M=!1,this.consumeWhitespace()):M=h.has(B)}}consumeMatch(T){const A=T.exec(this.fnString.substr(this.pos));return A&&(this.pos+=A[0].length),A}consumeRegExp(T,A){const M=T.exec(this.fnString.substr(this.pos));if(M)return this.pos+=M[0].length,this.consumeWhitespace(),A}consumeTemplate(){for(;;){if(this.consumeMatch(/^(?:[^`$\\]|\\.|\$(?!{))*/),this.fnString[this.pos]==="`")return this.pos++,this.consumeWhitespace(),"`";if(this.fnString.substr(this.pos,2)!=="${"||(this.pos+=2,this.consumeWhitespace(),!this.consumeSyntaxUntil("{","}")))return}}consumeWhitespace(){this.consumeMatch(/^(?:\s|\/\/.*|\/\*[^]*?\*\/)*/)}}n.FunctionParser=p},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getBoundPosition=function(u,h,f){if(!u.props.bounds)return[h,f];var p=u.props.bounds;p=typeof p=="string"?p:function(V){return{left:V.left,top:V.top,right:V.right,bottom:V.bottom}}(p);var y=c(u);if(typeof p=="string"){var T,A=y.ownerDocument,M=A.defaultView;if(!((T=p==="parent"?y.parentNode:A.querySelector(p))instanceof M.HTMLElement))throw new Error('Bounds selector "'+p+'" could not find an element.');var B=M.getComputedStyle(y),O=M.getComputedStyle(T);p={left:-y.offsetLeft+(0,o.int)(O.paddingLeft)+(0,o.int)(B.marginLeft),top:-y.offsetTop+(0,o.int)(O.paddingTop)+(0,o.int)(B.marginTop),right:(0,s.innerWidth)(T)-(0,s.outerWidth)(y)-y.offsetLeft+(0,o.int)(O.paddingRight)-(0,o.int)(B.marginRight),bottom:(0,s.innerHeight)(T)-(0,s.outerHeight)(y)-y.offsetTop+(0,o.int)(O.paddingBottom)-(0,o.int)(B.marginBottom)}}return(0,o.isNum)(p.right)&&(h=Math.min(h,p.right)),(0,o.isNum)(p.bottom)&&(f=Math.min(f,p.bottom)),(0,o.isNum)(p.left)&&(h=Math.max(h,p.left)),(0,o.isNum)(p.top)&&(f=Math.max(f,p.top)),[h,f]},n.snapToGrid=function(u,h,f){var p=Math.round(h/u[0])*u[0],y=Math.round(f/u[1])*u[1];return[p,y]},n.canDragX=function(u){return u.props.axis==="both"||u.props.axis==="x"},n.canDragY=function(u){return u.props.axis==="both"||u.props.axis==="y"},n.getControlPosition=function(u,h,f){var p=typeof h=="number"?(0,s.getTouch)(u,h):null;if(typeof h=="number"&&!p)return null;var y=c(f),T=f.props.offsetParent||y.offsetParent||y.ownerDocument.body;return(0,s.offsetXYFromParent)(p||u,T,f.props.scale)},n.createCoreData=function(u,h,f){var p=u.state,y=!(0,o.isNum)(p.lastX),T=c(u);return y?{node:T,deltaX:0,deltaY:0,lastX:h,lastY:f,x:h,y:f}:{node:T,deltaX:h-p.lastX,deltaY:f-p.lastY,lastX:p.lastX,lastY:p.lastY,x:h,y:f}},n.createDraggableData=function(u,h){var f=u.props.scale;return{node:h.node,x:u.state.x+h.deltaX/f,y:u.state.y+h.deltaY/f,deltaX:h.deltaX/f,deltaY:h.deltaY/f,lastX:u.state.x,lastY:u.state.y}};var o=r(7),s=r(10);function c(u){var h=u.findDOMNode();if(!h)throw new Error("<DraggableCore>: Unmounted during event!");return h}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){}},function(t,n,r){t.exports=r(27)},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.stringify=void 0;const o=r(28),s=r(6),c=Symbol("root");n.stringify=function(u,h,f,p={}){const y=typeof f=="string"?f:" ".repeat(f||0),T=[],A=new Set,M=new Map,B=new Map;let O=0;const{maxDepth:V=100,references:F=!1,skipUndefinedProperties:Z=!1,maxValues:ae=1e5}=p,W=function(ee){return ee?(Oe,Ue,we,ke)=>ee(Oe,Ue,Te=>o.toString(Te,Ue,we,ke),ke):o.toString}(h),se=(ee,Oe)=>{if(++O>ae||Z&&ee===void 0||T.length>V)return;if(Oe===void 0)return W(ee,y,se,Oe);T.push(Oe);const Ue=te(ee,Oe===c?void 0:Oe);return T.pop(),Ue},te=F?(ee,Oe)=>{if(ee!==null&&(typeof ee=="object"||typeof ee=="function"||typeof ee=="symbol")){if(M.has(ee))return B.set(T.slice(1),M.get(ee)),W(void 0,y,se,Oe);M.set(ee,T.slice(1))}return W(ee,y,se,Oe)}:(ee,Oe)=>{if(A.has(ee))return;A.add(ee);const Ue=W(ee,y,se,Oe);return A.delete(ee),Ue},ve=se(u,c);if(B.size){const ee=y?" ":"",Oe=y?`
`:"";let Ue=`var x${ee}=${ee}${ve};${Oe}`;for(const[we,ke]of B.entries())Ue+=`x${s.stringifyPath(we,se)}${ee}=${ee}x${s.stringifyPath(ke,se)};${Oe}`;return`(function${ee}()${ee}{${Oe}${Ue}return x;${Oe}}())`}return ve}},function(t,n,r){var o=r(35),s=o.default,c=o.DraggableCore;t.exports=s,t.exports.default=s,t.exports.DraggableCore=c},function(t,n,r){var o=r(12),s=typeof Symbol=="function"&&Symbol.for,c=s?Symbol.for("react.element"):60103,u=s?Symbol.for("react.portal"):60106,h=s?Symbol.for("react.fragment"):60107,f=s?Symbol.for("react.strict_mode"):60108,p=s?Symbol.for("react.profiler"):60114,y=s?Symbol.for("react.provider"):60109,T=s?Symbol.for("react.context"):60110,A=s?Symbol.for("react.forward_ref"):60112,M=s?Symbol.for("react.suspense"):60113,B=s?Symbol.for("react.memo"):60115,O=s?Symbol.for("react.lazy"):60116,V=typeof Symbol=="function"&&Symbol.iterator;function F(K){for(var j="https://reactjs.org/docs/error-decoder.html?invariant="+K,de=1;de<arguments.length;de++)j+="&args[]="+encodeURIComponent(arguments[de]);return"Minified React error #"+K+"; visit "+j+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ae={};function W(K,j,de){this.props=K,this.context=j,this.refs=ae,this.updater=de||Z}function se(){}function te(K,j,de){this.props=K,this.context=j,this.refs=ae,this.updater=de||Z}W.prototype.isReactComponent={},W.prototype.setState=function(K,j){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error(F(85));this.updater.enqueueSetState(this,K,j,"setState")},W.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")},se.prototype=W.prototype;var ve=te.prototype=new se;ve.constructor=te,o(ve,W.prototype),ve.isPureReactComponent=!0;var ee={current:null},Oe=Object.prototype.hasOwnProperty,Ue={key:!0,ref:!0,__self:!0,__source:!0};function we(K,j,de){var v,E={},x=null,L=null;if(j!=null)for(v in j.ref!==void 0&&(L=j.ref),j.key!==void 0&&(x=""+j.key),j)Oe.call(j,v)&&!Ue.hasOwnProperty(v)&&(E[v]=j[v]);var z=arguments.length-2;if(z===1)E.children=de;else if(1<z){for(var U=Array(z),ue=0;ue<z;ue++)U[ue]=arguments[ue+2];E.children=U}if(K&&K.defaultProps)for(v in z=K.defaultProps)E[v]===void 0&&(E[v]=z[v]);return{$$typeof:c,type:K,key:x,ref:L,props:E,_owner:ee.current}}function ke(K){return typeof K=="object"&&K!==null&&K.$$typeof===c}var Te=/\/+/g,ie=[];function me(K,j,de,v){if(ie.length){var E=ie.pop();return E.result=K,E.keyPrefix=j,E.func=de,E.context=v,E.count=0,E}return{result:K,keyPrefix:j,func:de,context:v,count:0}}function D(K){K.result=null,K.keyPrefix=null,K.func=null,K.context=null,K.count=0,10>ie.length&&ie.push(K)}function re(K,j,de){return K==null?0:function v(E,x,L,z){var U=typeof E;U!=="undefined"&&U!=="boolean"||(E=null);var ue=!1;if(E===null)ue=!0;else switch(U){case"string":case"number":ue=!0;break;case"object":switch(E.$$typeof){case c:case u:ue=!0}}if(ue)return L(z,E,x===""?"."+pe(E,0):x),1;if(ue=0,x=x===""?".":x+":",Array.isArray(E))for(var $e=0;$e<E.length;$e++){var We=x+pe(U=E[$e],$e);ue+=v(U,We,L,z)}else if(E===null||typeof E!="object"?We=null:We=typeof(We=V&&E[V]||E["@@iterator"])=="function"?We:null,typeof We=="function")for(E=We.call(E),$e=0;!(U=E.next()).done;)ue+=v(U=U.value,We=x+pe(U,$e++),L,z);else if(U==="object")throw L=""+E,Error(F(31,L==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":L,""));return ue}(K,"",j,de)}function pe(K,j){return typeof K=="object"&&K!==null&&K.key!=null?function(de){var v={"=":"=0",":":"=2"};return"$"+(""+de).replace(/[=:]/g,function(E){return v[E]})}(K.key):j.toString(36)}function Be(K,j){K.func.call(K.context,j,K.count++)}function Pe(K,j,de){var v=K.result,E=K.keyPrefix;K=K.func.call(K.context,j,K.count++),Array.isArray(K)?Ve(K,v,de,function(x){return x}):K!=null&&(ke(K)&&(K=function(x,L){return{$$typeof:c,type:x.type,key:L,ref:x.ref,props:x.props,_owner:x._owner}}(K,E+(!K.key||j&&j.key===K.key?"":(""+K.key).replace(Te,"$&/")+"/")+de)),v.push(K))}function Ve(K,j,de,v,E){var x="";de!=null&&(x=(""+de).replace(Te,"$&/")+"/"),re(K,Pe,j=me(j,x,v,E)),D(j)}var Me={current:null};function qe(){var K=Me.current;if(K===null)throw Error(F(321));return K}var lt={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:ee,IsSomeRendererActing:{current:!1},assign:o};n.Children={map:function(K,j,de){if(K==null)return K;var v=[];return Ve(K,v,null,j,de),v},forEach:function(K,j,de){if(K==null)return K;re(K,Be,j=me(null,null,j,de)),D(j)},count:function(K){return re(K,function(){return null},null)},toArray:function(K){var j=[];return Ve(K,j,null,function(de){return de}),j},only:function(K){if(!ke(K))throw Error(F(143));return K}},n.Component=W,n.Fragment=h,n.Profiler=p,n.PureComponent=te,n.StrictMode=f,n.Suspense=M,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lt,n.cloneElement=function(K,j,de){if(K==null)throw Error(F(267,K));var v=o({},K.props),E=K.key,x=K.ref,L=K._owner;if(j!=null){if(j.ref!==void 0&&(x=j.ref,L=ee.current),j.key!==void 0&&(E=""+j.key),K.type&&K.type.defaultProps)var z=K.type.defaultProps;for(U in j)Oe.call(j,U)&&!Ue.hasOwnProperty(U)&&(v[U]=j[U]===void 0&&z!==void 0?z[U]:j[U])}var U=arguments.length-2;if(U===1)v.children=de;else if(1<U){z=Array(U);for(var ue=0;ue<U;ue++)z[ue]=arguments[ue+2];v.children=z}return{$$typeof:c,type:K.type,key:E,ref:x,props:v,_owner:L}},n.createContext=function(K,j){return j===void 0&&(j=null),(K={$$typeof:T,_calculateChangedBits:j,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:y,_context:K},K.Consumer=K},n.createElement=we,n.createFactory=function(K){var j=we.bind(null,K);return j.type=K,j},n.createRef=function(){return{current:null}},n.forwardRef=function(K){return{$$typeof:A,render:K}},n.isValidElement=ke,n.lazy=function(K){return{$$typeof:O,_ctor:K,_status:-1,_result:null}},n.memo=function(K,j){return{$$typeof:B,type:K,compare:j===void 0?null:j}},n.useCallback=function(K,j){return qe().useCallback(K,j)},n.useContext=function(K,j){return qe().useContext(K,j)},n.useDebugValue=function(){},n.useEffect=function(K,j){return qe().useEffect(K,j)},n.useImperativeHandle=function(K,j,de){return qe().useImperativeHandle(K,j,de)},n.useLayoutEffect=function(K,j){return qe().useLayoutEffect(K,j)},n.useMemo=function(K,j){return qe().useMemo(K,j)},n.useReducer=function(K,j,de){return qe().useReducer(K,j,de)},n.useRef=function(K){return qe().useRef(K)},n.useState=function(K){return qe().useState(K)},n.version="16.14.0"},function(t,n,r){var o=r(0),s=r(12),c=r(21);function u(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!o)throw Error(u(227));function h(a,l,d,m,b,C,S,R,G){var q=Array.prototype.slice.call(arguments,3);try{l.apply(d,q)}catch(he){this.onError(he)}}var f=!1,p=null,y=!1,T=null,A={onError:function(a){f=!0,p=a}};function M(a,l,d,m,b,C,S,R,G){f=!1,p=null,h.apply(A,arguments)}var B=null,O=null,V=null;function F(a,l,d){var m=a.type||"unknown-event";a.currentTarget=V(d),function(b,C,S,R,G,q,he,Fe,Xe){if(M.apply(this,arguments),f){if(!f)throw Error(u(198));var bt=p;f=!1,p=null,y||(y=!0,T=bt)}}(m,l,void 0,a),a.currentTarget=null}var Z=null,ae={};function W(){if(Z)for(var a in ae){var l=ae[a],d=Z.indexOf(a);if(!(-1<d))throw Error(u(96,a));if(!te[d]){if(!l.extractEvents)throw Error(u(97,a));for(var m in te[d]=l,d=l.eventTypes){var b=void 0,C=d[m],S=l,R=m;if(ve.hasOwnProperty(R))throw Error(u(99,R));ve[R]=C;var G=C.phasedRegistrationNames;if(G){for(b in G)G.hasOwnProperty(b)&&se(G[b],S,R);b=!0}else C.registrationName?(se(C.registrationName,S,R),b=!0):b=!1;if(!b)throw Error(u(98,m,a))}}}}function se(a,l,d){if(ee[a])throw Error(u(100,a));ee[a]=l,Oe[a]=l.eventTypes[d].dependencies}var te=[],ve={},ee={},Oe={};function Ue(a){var l,d=!1;for(l in a)if(a.hasOwnProperty(l)){var m=a[l];if(!ae.hasOwnProperty(l)||ae[l]!==m){if(ae[l])throw Error(u(102,l));ae[l]=m,d=!0}}d&&W()}var we=!(typeof window=="undefined"||window.document===void 0||window.document.createElement===void 0),ke=null,Te=null,ie=null;function me(a){if(a=O(a)){if(typeof ke!="function")throw Error(u(280));var l=a.stateNode;l&&(l=B(l),ke(a.stateNode,a.type,l))}}function D(a){Te?ie?ie.push(a):ie=[a]:Te=a}function re(){if(Te){var a=Te,l=ie;if(ie=Te=null,me(a),l)for(a=0;a<l.length;a++)me(l[a])}}function pe(a,l){return a(l)}function Be(a,l,d,m,b){return a(l,d,m,b)}function Pe(){}var Ve=pe,Me=!1,qe=!1;function lt(){Te===null&&ie===null||(Pe(),re())}function K(a,l,d){if(qe)return a(l,d);qe=!0;try{return Ve(a,l,d)}finally{qe=!1,lt()}}var j=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,de=Object.prototype.hasOwnProperty,v={},E={};function x(a,l,d,m,b,C){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=b,this.mustUseProperty=d,this.propertyName=a,this.type=l,this.sanitizeURL=C}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){L[a]=new x(a,0,!1,a,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];L[l]=new x(l,1,!1,a[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){L[a]=new x(a,2,!1,a.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){L[a]=new x(a,2,!1,a,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){L[a]=new x(a,3,!1,a.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(a){L[a]=new x(a,3,!0,a,null,!1)}),["capture","download"].forEach(function(a){L[a]=new x(a,4,!1,a,null,!1)}),["cols","rows","size","span"].forEach(function(a){L[a]=new x(a,6,!1,a,null,!1)}),["rowSpan","start"].forEach(function(a){L[a]=new x(a,5,!1,a.toLowerCase(),null,!1)});var z=/[\-:]([a-z])/g;function U(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(z,U);L[l]=new x(l,1,!1,a,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(z,U);L[l]=new x(l,1,!1,a,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(z,U);L[l]=new x(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(a){L[a]=new x(a,1,!1,a.toLowerCase(),null,!1)}),L.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(a){L[a]=new x(a,1,!1,a.toLowerCase(),null,!0)});var ue=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function $e(a,l,d,m){var b=L.hasOwnProperty(l)?L[l]:null;(b!==null?b.type===0:!m&&2<l.length&&(l[0]==="o"||l[0]==="O")&&(l[1]==="n"||l[1]==="N"))||(function(C,S,R,G){if(S==null||function(q,he,Fe,Xe){if(Fe!==null&&Fe.type===0)return!1;switch(typeof he){case"function":case"symbol":return!0;case"boolean":return!Xe&&(Fe!==null?!Fe.acceptsBooleans:(q=q.toLowerCase().slice(0,5))!=="data-"&&q!=="aria-");default:return!1}}(C,S,R,G))return!0;if(G)return!1;if(R!==null)switch(R.type){case 3:return!S;case 4:return S===!1;case 5:return isNaN(S);case 6:return isNaN(S)||1>S}return!1}(l,d,b,m)&&(d=null),m||b===null?function(C){return!!de.call(E,C)||!de.call(v,C)&&(j.test(C)?E[C]=!0:(v[C]=!0,!1))}(l)&&(d===null?a.removeAttribute(l):a.setAttribute(l,""+d)):b.mustUseProperty?a[b.propertyName]=d===null?b.type!==3&&"":d:(l=b.attributeName,m=b.attributeNamespace,d===null?a.removeAttribute(l):(d=(b=b.type)===3||b===4&&d===!0?"":""+d,m?a.setAttributeNS(m,l,d):a.setAttribute(l,d))))}ue.hasOwnProperty("ReactCurrentDispatcher")||(ue.ReactCurrentDispatcher={current:null}),ue.hasOwnProperty("ReactCurrentBatchConfig")||(ue.ReactCurrentBatchConfig={suspense:null});var We=/^(.*)[\\\/]/,it=typeof Symbol=="function"&&Symbol.for,Ze=it?Symbol.for("react.element"):60103,un=it?Symbol.for("react.portal"):60106,qt=it?Symbol.for("react.fragment"):60107,zn=it?Symbol.for("react.strict_mode"):60108,Jt=it?Symbol.for("react.profiler"):60114,dn=it?Symbol.for("react.provider"):60109,ci=it?Symbol.for("react.context"):60110,ui=it?Symbol.for("react.concurrent_mode"):60111,vt=it?Symbol.for("react.forward_ref"):60112,ao=it?Symbol.for("react.suspense"):60113,lr=it?Symbol.for("react.suspense_list"):60120,xi=it?Symbol.for("react.memo"):60115,lo=it?Symbol.for("react.lazy"):60116,Ho=it?Symbol.for("react.block"):60121,Mr=typeof Symbol=="function"&&Symbol.iterator;function Kt(a){return a===null||typeof a!="object"?null:typeof(a=Mr&&a[Mr]||a["@@iterator"])=="function"?a:null}function Hn(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case qt:return"Fragment";case un:return"Portal";case Jt:return"Profiler";case zn:return"StrictMode";case ao:return"Suspense";case lr:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case ci:return"Context.Consumer";case dn:return"Context.Provider";case vt:var l=a.render;return l=l.displayName||l.name||"",a.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case xi:return Hn(a.type);case Ho:return Hn(a.render);case lo:if(a=a._status===1?a._result:null)return Hn(a)}return null}function co(a){var l="";do{e:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var d="";break e;default:var m=a._debugOwner,b=a._debugSource,C=Hn(a.type);d=null,m&&(d=Hn(m.type)),m=C,C="",b?C=" (at "+b.fileName.replace(We,"")+":"+b.lineNumber+")":d&&(C=" (created by "+d+")"),d=`
    in `+(m||"Unknown")+C}l+=d,a=a.return}while(a);return l}function En(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function Pi(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Or(a){a._valueTracker||(a._valueTracker=function(l){var d=Pi(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),b=""+l[d];if(!l.hasOwnProperty(d)&&m!==void 0&&typeof m.get=="function"&&typeof m.set=="function"){var C=m.get,S=m.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return C.call(this)},set:function(R){b=""+R,S.call(this,R)}}),Object.defineProperty(l,d,{enumerable:m.enumerable}),{getValue:function(){return b},setValue:function(R){b=""+R},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}(a))}function Xn(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return a&&(m=Pi(a)?a.checked?"true":"false":a.value),(a=m)!==d&&(l.setValue(a),!0)}function uo(a,l){var d=l.checked;return s({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d!=null?d:a._wrapperState.initialChecked})}function di(a,l){var d=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;d=En(l.value!=null?l.value:d),a._wrapperState={initialChecked:m,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function ho(a,l){(l=l.checked)!=null&&$e(a,"checked",l,!1)}function Uo(a,l){ho(a,l);var d=En(l.value),m=l.type;if(d!=null)m==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(m==="submit"||m==="reset")return void a.removeAttribute("value");l.hasOwnProperty("value")?Nr(a,l.type,d):l.hasOwnProperty("defaultValue")&&Nr(a,l.type,En(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function cr(a,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,d||l===a.value||(a.value=l),a.defaultValue=l}(d=a.name)!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function Nr(a,l,d){l==="number"&&a.ownerDocument.activeElement===a||(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}function Zn(a,l){return a=s({children:void 0},l),(l=function(d){var m="";return o.Children.forEach(d,function(b){b!=null&&(m+=b)}),m}(l.children))&&(a.children=l),a}function St(a,l,d,m){if(a=a.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<a.length;d++)b=l.hasOwnProperty("$"+a[d].value),a[d].selected!==b&&(a[d].selected=b),b&&m&&(a[d].defaultSelected=!0)}else{for(d=""+En(d),l=null,b=0;b<a.length;b++){if(a[b].value===d)return a[b].selected=!0,void(m&&(a[b].defaultSelected=!0));l!==null||a[b].disabled||(l=a[b])}l!==null&&(l.selected=!0)}}function fo(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(u(91));return s({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Ki(a,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(u(92));if(Array.isArray(d)){if(!(1>=d.length))throw Error(u(93));d=d[0]}l=d}l==null&&(l=""),d=l}a._wrapperState={initialValue:En(d)}}function Dr(a,l){var d=En(l.value),m=En(l.defaultValue);d!=null&&((d=""+d)!==a.value&&(a.value=d),l.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),m!=null&&(a.defaultValue=""+m)}function Wo(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}var $="http://www.w3.org/1999/xhtml",X="http://www.w3.org/2000/svg";function ye(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ne(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?ye(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var ft,et=function(a){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(l,d,m,b){MSApp.execUnsafeLocalFunction(function(){return a(l,d)})}:a}(function(a,l){if(a.namespaceURI!==X||"innerHTML"in a)a.innerHTML=l;else{for((ft=ft||document.createElement("div")).innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=ft.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function mt(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3)return void(d.nodeValue=l)}a.textContent=l}function yt(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var nn={animationend:yt("Animation","AnimationEnd"),animationiteration:yt("Animation","AnimationIteration"),animationstart:yt("Animation","AnimationStart"),transitionend:yt("Transition","TransitionEnd")},dt={},Lt={};function Cn(a){if(dt[a])return dt[a];if(!nn[a])return a;var l,d=nn[a];for(l in d)if(d.hasOwnProperty(l)&&l in Lt)return dt[a]=d[l];return a}we&&(Lt=document.createElement("div").style,"AnimationEvent"in window||(delete nn.animationend.animation,delete nn.animationiteration.animation,delete nn.animationstart.animation),"TransitionEvent"in window||delete nn.transitionend.transition);var Un=Cn("animationend"),Qt=Cn("animationiteration"),Wn=Cn("animationstart"),Ai=Cn("transitionend"),hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ii=new(typeof WeakMap=="function"?WeakMap:Map);function Gi(a){var l=Ii.get(a);return l===void 0&&(l=new Map,Ii.set(a,l)),l}function fi(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do(1026&(l=a).effectTag)!=0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function mo(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate)!==null&&(l=a.memoizedState),l!==null)return l.dehydrated}return null}function Ms(a){if(fi(a)!==a)throw Error(u(188))}function pt(a){if(!(a=function(d){var m=d.alternate;if(!m){if((m=fi(d))===null)throw Error(u(188));return m!==d?null:d}for(var b=d,C=m;;){var S=b.return;if(S===null)break;var R=S.alternate;if(R===null){if((C=S.return)!==null){b=C;continue}break}if(S.child===R.child){for(R=S.child;R;){if(R===b)return Ms(S),d;if(R===C)return Ms(S),m;R=R.sibling}throw Error(u(188))}if(b.return!==C.return)b=S,C=R;else{for(var G=!1,q=S.child;q;){if(q===b){G=!0,b=S,C=R;break}if(q===C){G=!0,C=S,b=R;break}q=q.sibling}if(!G){for(q=R.child;q;){if(q===b){G=!0,b=R,C=S;break}if(q===C){G=!0,C=R,b=S;break}q=q.sibling}if(!G)throw Error(u(189))}}if(b.alternate!==C)throw Error(u(190))}if(b.tag!==3)throw Error(u(188));return b.stateNode.current===b?d:m}(a)))return null;for(var l=a;;){if(l.tag===5||l.tag===6)return l;if(l.child)l.child.return=l,l=l.child;else{if(l===a)break;for(;!l.sibling;){if(!l.return||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}}return null}function ot(a,l){if(l==null)throw Error(u(30));return a==null?l:Array.isArray(a)?Array.isArray(l)?(a.push.apply(a,l),a):(a.push(l),a):Array.isArray(l)?[a].concat(l):[a,l]}function Yi(a,l,d){Array.isArray(a)?a.forEach(l,d):a&&l.call(d,a)}var Rn=null;function po(a){if(a){var l=a._dispatchListeners,d=a._dispatchInstances;if(Array.isArray(l))for(var m=0;m<l.length&&!a.isPropagationStopped();m++)F(a,l[m],d[m]);else l&&F(a,l,d);a._dispatchListeners=null,a._dispatchInstances=null,a.isPersistent()||a.constructor.release(a)}}function hn(a){if(a!==null&&(Rn=ot(Rn,a)),a=Rn,Rn=null,a){if(Yi(a,po),Rn)throw Error(u(95));if(y)throw a=T,y=!1,T=null,a}}function $n(a){return(a=a.target||a.srcElement||window).correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}function mi(a){if(!we)return!1;var l=(a="on"+a)in document;return l||((l=document.createElement("div")).setAttribute(a,"return;"),l=typeof l[a]=="function"),l}var ei=[];function Br(a){a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>ei.length&&ei.push(a)}function Ji(a,l,d,m){if(ei.length){var b=ei.pop();return b.topLevelType=a,b.eventSystemFlags=m,b.nativeEvent=l,b.targetInst=d,b}return{topLevelType:a,eventSystemFlags:m,nativeEvent:l,targetInst:d,ancestors:[]}}function pi(a){var l=a.targetInst,d=l;do{if(!d){a.ancestors.push(d);break}var m=d;if(m.tag===3)m=m.stateNode.containerInfo;else{for(;m.return;)m=m.return;m=m.tag!==3?null:m.stateNode.containerInfo}if(!m)break;(l=d.tag)!==5&&l!==6||a.ancestors.push(d),d=Xi(m)}while(d);for(d=0;d<a.ancestors.length;d++){l=a.ancestors[d];var b=$n(a.nativeEvent);m=a.topLevelType;var C=a.nativeEvent,S=a.eventSystemFlags;d===0&&(S|=64);for(var R=null,G=0;G<te.length;G++){var q=te[G];q&&(q=q.extractEvents(m,l,C,b,S))&&(R=ot(R,q))}hn(R)}}function ti(a,l,d){if(!d.has(a)){switch(a){case"scroll":Ri(l,"scroll",!0);break;case"focus":case"blur":Ri(l,"focus",!0),Ri(l,"blur",!0),d.set("blur",null),d.set("focus",null);break;case"cancel":case"close":mi(a)&&Ri(l,a,!0);break;case"invalid":case"submit":case"reset":break;default:hi.indexOf(a)===-1&&Mt(a,l)}d.set(a,null)}}var Vr,Tn,Lr,gi=!1,Mn=[],rn=null,bn=null,Qi=null,Ft=new Map,Fr=new Map,ur=[],Aa="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Fu="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ia(a,l,d,m,b){return{blockedOn:a,topLevelType:l,eventSystemFlags:32|d,nativeEvent:b,container:m}}function Ra(a,l){switch(a){case"focus":case"blur":rn=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Ft.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fr.delete(l.pointerId)}}function On(a,l,d,m,b,C){return a===null||a.nativeEvent!==C?(a=Ia(l,d,m,b,C),l!==null&&(l=Jo(l))!==null&&Tn(l),a):(a.eventSystemFlags|=m,a)}function zu(a){var l=Xi(a.target);if(l!==null){var d=fi(l);if(d!==null){if((l=d.tag)===13){if((l=mo(d))!==null)return a.blockedOn=l,void c.unstable_runWithPriority(a.priority,function(){Lr(d)})}else if(l===3&&d.stateNode.hydrate)return void(a.blockedOn=d.tag===3?d.stateNode.containerInfo:null)}}a.blockedOn=null}function Os(a){if(a.blockedOn!==null)return!1;var l=Ds(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(l!==null){var d=Jo(l);return d!==null&&Tn(d),a.blockedOn=l,!1}return!0}function Ma(a,l,d){Os(a)&&d.delete(l)}function Hu(){for(gi=!1;0<Mn.length;){var a=Mn[0];if(a.blockedOn!==null){(a=Jo(a.blockedOn))!==null&&Vr(a);break}var l=Ds(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);l!==null?a.blockedOn=l:Mn.shift()}rn!==null&&Os(rn)&&(rn=null),bn!==null&&Os(bn)&&(bn=null),Qi!==null&&Os(Qi)&&(Qi=null),Ft.forEach(Ma),Fr.forEach(Ma)}function $o(a,l){a.blockedOn===l&&(a.blockedOn=null,gi||(gi=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Hu)))}function jo(a){function l(b){return $o(b,a)}if(0<Mn.length){$o(Mn[0],a);for(var d=1;d<Mn.length;d++){var m=Mn[d];m.blockedOn===a&&(m.blockedOn=null)}}for(rn!==null&&$o(rn,a),bn!==null&&$o(bn,a),Qi!==null&&$o(Qi,a),Ft.forEach(l),Fr.forEach(l),d=0;d<ur.length;d++)(m=ur[d]).blockedOn===a&&(m.blockedOn=null);for(;0<ur.length&&(d=ur[0]).blockedOn===null;)zu(d),d.blockedOn===null&&ur.shift()}var qo={},Bl=new Map,dr=new Map,Oa=["abort","abort",Un,"animationEnd",Qt,"animationIteration",Wn,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ai,"transitionEnd","waiting","waiting"];function fn(a,l){for(var d=0;d<a.length;d+=2){var m=a[d],b=a[d+1],C="on"+(b[0].toUpperCase()+b.slice(1));C={phasedRegistrationNames:{bubbled:C,captured:C+"Capture"},dependencies:[m],eventPriority:l},dr.set(m,l),Bl.set(m,C),qo[b]=C}}fn("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),fn("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),fn(Oa,2);for(var bi="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Na=0;Na<bi.length;Na++)dr.set(bi[Na],0);var Uu=c.unstable_UserBlockingPriority,Da=c.unstable_runWithPriority,Ko=!0;function Mt(a,l){Ri(l,a,!1)}function Ri(a,l,d){var m=dr.get(l);switch(m===void 0?2:m){case 0:m=Wu.bind(null,l,1,a);break;case 1:m=$u.bind(null,l,1,a);break;default:m=Ns.bind(null,l,1,a)}d?a.addEventListener(l,m,!0):a.addEventListener(l,m,!1)}function Wu(a,l,d,m){Me||Pe();var b=Ns,C=Me;Me=!0;try{Be(b,a,l,d,m)}finally{(Me=C)||lt()}}function $u(a,l,d,m){Da(Uu,Ns.bind(null,a,l,d,m))}function Ns(a,l,d,m){if(Ko)if(0<Mn.length&&-1<Aa.indexOf(a))a=Ia(null,a,l,d,m),Mn.push(a);else{var b=Ds(a,l,d,m);if(b===null)Ra(a,m);else if(-1<Aa.indexOf(a))a=Ia(b,a,l,d,m),Mn.push(a);else if(!function(C,S,R,G,q){switch(S){case"focus":return rn=On(rn,C,S,R,G,q),!0;case"dragenter":return bn=On(bn,C,S,R,G,q),!0;case"mouseover":return Qi=On(Qi,C,S,R,G,q),!0;case"pointerover":var he=q.pointerId;return Ft.set(he,On(Ft.get(he)||null,C,S,R,G,q)),!0;case"gotpointercapture":return he=q.pointerId,Fr.set(he,On(Fr.get(he)||null,C,S,R,G,q)),!0}return!1}(b,a,l,d,m)){Ra(a,m),a=Ji(a,m,null,l);try{K(pi,a)}finally{Br(a)}}}}function Ds(a,l,d,m){if((d=Xi(d=$n(m)))!==null){var b=fi(d);if(b===null)d=null;else{var C=b.tag;if(C===13){if((d=mo(b))!==null)return d;d=null}else if(C===3){if(b.stateNode.hydrate)return b.tag===3?b.stateNode.containerInfo:null;d=null}else b!==d&&(d=null)}}a=Ji(a,m,d,l);try{K(pi,a)}finally{Br(a)}return null}var zr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ba=["Webkit","ms","Moz","O"];function Vl(a,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||zr.hasOwnProperty(a)&&zr[a]?(""+l).trim():l+"px"}function Ll(a,l){for(var d in a=a.style,l)if(l.hasOwnProperty(d)){var m=d.indexOf("--")===0,b=Vl(d,l[d],m);d==="float"&&(d="cssFloat"),m?a.setProperty(d,b):a[d]=b}}Object.keys(zr).forEach(function(a){Ba.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),zr[l]=zr[a]})});var Va=s({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function La(a,l){if(l){if(Va[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(u(137,a,""));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(u(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(u(61))}if(l.style!=null&&typeof l.style!="object")throw Error(u(62,""))}}function Bs(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hr=$;function Mi(a,l){var d=Gi(a=a.nodeType===9||a.nodeType===11?a:a.ownerDocument);l=Oe[l];for(var m=0;m<l.length;m++)ti(l[m],a,d)}function jn(){}function Fa(a){if((a=a||(typeof document!="undefined"?document:void 0))===void 0)return null;try{return a.activeElement||a.body}catch{return a.body}}function Fl(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function za(a,l){var d,m=Fl(a);for(a=0;m;){if(m.nodeType===3){if(d=a+m.textContent.length,a<=l&&d>=l)return{node:m,offset:l-a};a=d}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Fl(m)}}function Ha(){for(var a=window,l=Fa();l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(!d)break;l=Fa((a=l.contentWindow).document)}return l}function hr(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var Ua=null,Wa=null;function Go(a,l){switch(a){case"button":case"input":case"select":case"textarea":return!!l.autoFocus}return!1}function $a(a,l){return a==="textarea"||a==="option"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ja=typeof setTimeout=="function"?setTimeout:void 0,ju=typeof clearTimeout=="function"?clearTimeout:void 0;function go(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break}return a}function zl(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}var qa=Math.random().toString(36).slice(2),fr="__reactInternalInstance$"+qa,Vs="__reactEventHandlers$"+qa,Yo="__reactContainere$"+qa;function Xi(a){var l=a[fr];if(l)return l;for(var d=a.parentNode;d;){if(l=d[Yo]||d[fr]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=zl(a);a!==null;){if(d=a[fr])return d;a=zl(a)}return l}d=(a=d).parentNode}return null}function Jo(a){return!(a=a[fr]||a[Yo])||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Ur(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(u(33))}function bo(a){return a[Vs]||null}function Zi(a){do a=a.return;while(a&&a.tag!==5);return a||null}function Hl(a,l){var d=a.stateNode;if(!d)return null;var m=B(d);if(!m)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(m=!((a=a.type)==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(u(231,l,typeof d));return d}function Ul(a,l,d){(l=Hl(a,d.dispatchConfig.phasedRegistrationNames[l]))&&(d._dispatchListeners=ot(d._dispatchListeners,l),d._dispatchInstances=ot(d._dispatchInstances,a))}function qu(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var l=a._targetInst,d=[];l;)d.push(l),l=Zi(l);for(l=d.length;0<l--;)Ul(d[l],"captured",a);for(l=0;l<d.length;l++)Ul(d[l],"bubbled",a)}}function Ls(a,l,d){a&&d&&d.dispatchConfig.registrationName&&(l=Hl(a,d.dispatchConfig.registrationName))&&(d._dispatchListeners=ot(d._dispatchListeners,l),d._dispatchInstances=ot(d._dispatchInstances,a))}function Ku(a){a&&a.dispatchConfig.registrationName&&Ls(a._targetInst,null,a)}function wo(a){Yi(a,qu)}var Wr=null,Ka=null,Fs=null;function Ga(){if(Fs)return Fs;var a,l,d=Ka,m=d.length,b="value"in Wr?Wr.value:Wr.textContent,C=b.length;for(a=0;a<m&&d[a]===b[a];a++);var S=m-a;for(l=1;l<=S&&d[m-l]===b[C-l];l++);return Fs=b.slice(a,1<l?1-l:void 0)}function zs(){return!0}function Qo(){return!1}function qn(a,l,d,m){for(var b in this.dispatchConfig=a,this._targetInst=l,this.nativeEvent=d,a=this.constructor.Interface)a.hasOwnProperty(b)&&((l=a[b])?this[b]=l(d):b==="target"?this.target=m:this[b]=d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?zs:Qo,this.isPropagationStopped=Qo,this}function Wl(a,l,d,m){if(this.eventPool.length){var b=this.eventPool.pop();return this.call(b,a,l,d,m),b}return new this(a,l,d,m)}function Gu(a){if(!(a instanceof this))throw Error(u(279));a.destructor(),10>this.eventPool.length&&this.eventPool.push(a)}function $l(a){a.eventPool=[],a.getPooled=Wl,a.release=Gu}s(qn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){this.isPersistent=zs},isPersistent:Qo,destructor:function(){var a,l=this.constructor.Interface;for(a in l)this[a]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Qo,this._dispatchInstances=this._dispatchListeners=null}}),qn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},qn.extend=function(a){function l(){}function d(){return m.apply(this,arguments)}var m=this;l.prototype=m.prototype;var b=new l;return s(b,d.prototype),d.prototype=b,d.prototype.constructor=d,d.Interface=s({},m.Interface,a),d.extend=m.extend,$l(d),d},$l(qn);var Yu=qn.extend({data:null}),jl=qn.extend({data:null}),Ju=[9,13,27,32],Ya=we&&"CompositionEvent"in window,Xo=null;we&&"documentMode"in document&&(Xo=document.documentMode);var Qu=we&&"TextEvent"in window&&!Xo,ql=we&&(!Ya||Xo&&8<Xo&&11>=Xo),Kl=String.fromCharCode(32),er={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Gl=!1;function Yl(a,l){switch(a){case"keyup":return Ju.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Ja(a){return typeof(a=a.detail)=="object"&&"data"in a?a.data:null}var Ye=!1,k={eventTypes:er,extractEvents:function(a,l,d,m){var b;if(Ya)e:{switch(a){case"compositionstart":var C=er.compositionStart;break e;case"compositionend":C=er.compositionEnd;break e;case"compositionupdate":C=er.compositionUpdate;break e}C=void 0}else Ye?Yl(a,d)&&(C=er.compositionEnd):a==="keydown"&&d.keyCode===229&&(C=er.compositionStart);return C?(ql&&d.locale!=="ko"&&(Ye||C!==er.compositionStart?C===er.compositionEnd&&Ye&&(b=Ga()):(Ka="value"in(Wr=m)?Wr.value:Wr.textContent,Ye=!0)),C=Yu.getPooled(C,l,d,m),(b||(b=Ja(d))!==null)&&(C.data=b),wo(C),b=C):b=null,(a=Qu?function(S,R){switch(S){case"compositionend":return Ja(R);case"keypress":return R.which!==32?null:(Gl=!0,Kl);case"textInput":return(S=R.data)===Kl&&Gl?null:S;default:return null}}(a,d):function(S,R){if(Ye)return S==="compositionend"||!Ya&&Yl(S,R)?(S=Ga(),Fs=Ka=Wr=null,Ye=!1,S):null;switch(S){case"paste":return null;case"keypress":if(!(R.ctrlKey||R.altKey||R.metaKey)||R.ctrlKey&&R.altKey){if(R.char&&1<R.char.length)return R.char;if(R.which)return String.fromCharCode(R.which)}return null;case"compositionend":return ql&&R.locale!=="ko"?null:R.data;default:return null}}(a,d))?((l=jl.getPooled(er.beforeInput,l,d,m)).data=a,wo(l)):l=null,b===null?l:l===null?b:[b,l]}},g={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!g[a.type]:l==="textarea"}var _={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function I(a,l,d){return(a=qn.getPooled(_.change,a,l,d)).type="change",D(d),wo(a),a}var P=null,N=null;function Y(a){hn(a)}function ne(a){if(Xn(Ur(a)))return a}function ce(a,l){if(a==="change")return l}var ge=!1;function Ee(){P&&(P.detachEvent("onpropertychange",Ie),N=P=null)}function Ie(a){if(a.propertyName==="value"&&ne(N))if(a=I(N,a,$n(a)),Me)hn(a);else{Me=!0;try{pe(Y,a)}finally{Me=!1,lt()}}}function xe(a,l,d){a==="focus"?(Ee(),N=d,(P=l).attachEvent("onpropertychange",Ie)):a==="blur"&&Ee()}function ze(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ne(N)}function Re(a,l){if(a==="click")return ne(l)}function Le(a,l){if(a==="input"||a==="change")return ne(l)}we&&(ge=mi("input")&&(!document.documentMode||9<document.documentMode));var ct={eventTypes:_,_isInputEventSupported:ge,extractEvents:function(a,l,d,m){var b=l?Ur(l):window,C=b.nodeName&&b.nodeName.toLowerCase();if(C==="select"||C==="input"&&b.type==="file")var S=ce;else if(w(b))if(ge)S=Le;else{S=ze;var R=xe}else(C=b.nodeName)&&C.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(S=Re);if(S&&(S=S(a,l)))return I(S,d,m);R&&R(a,b,l),a==="blur"&&(a=b._wrapperState)&&a.controlled&&b.type==="number"&&Nr(b,"number",b.value)}},Ge=qn.extend({view:null,detail:null}),Ke={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bt(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):!!(a=Ke[a])&&!!l[a]}function zt(){return Bt}var Sn=0,on=0,sn=!1,mn=!1,kt=Ge.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:zt,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var l=Sn;return Sn=a.screenX,sn?a.type==="mousemove"?a.screenX-l:0:(sn=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var l=on;return on=a.screenY,mn?a.type==="mousemove"?a.screenY-l:0:(mn=!0,0)}}),wi=kt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),ht={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Oi={eventTypes:ht,extractEvents:function(a,l,d,m,b){var C=a==="mouseover"||a==="pointerover",S=a==="mouseout"||a==="pointerout";if(C&&(32&b)==0&&(d.relatedTarget||d.fromElement)||!S&&!C||(C=m.window===m?m:(C=m.ownerDocument)?C.defaultView||C.parentWindow:window,S?(S=l,(l=(l=d.relatedTarget||d.toElement)?Xi(l):null)!==null&&(l!==fi(l)||l.tag!==5&&l.tag!==6)&&(l=null)):S=null,S===l))return null;if(a==="mouseout"||a==="mouseover")var R=kt,G=ht.mouseLeave,q=ht.mouseEnter,he="mouse";else a!=="pointerout"&&a!=="pointerover"||(R=wi,G=ht.pointerLeave,q=ht.pointerEnter,he="pointer");if(a=S==null?C:Ur(S),C=l==null?C:Ur(l),(G=R.getPooled(G,S,d,m)).type=he+"leave",G.target=a,G.relatedTarget=C,(d=R.getPooled(q,l,d,m)).type=he+"enter",d.target=C,d.relatedTarget=a,he=l,(m=S)&&he)e:{for(q=he,S=0,a=R=m;a;a=Zi(a))S++;for(a=0,l=q;l;l=Zi(l))a++;for(;0<S-a;)R=Zi(R),S--;for(;0<a-S;)q=Zi(q),a--;for(;S--;){if(R===q||R===q.alternate)break e;R=Zi(R),q=Zi(q)}R=null}else R=null;for(q=R,R=[];m&&m!==q&&((S=m.alternate)===null||S!==q);)R.push(m),m=Zi(m);for(m=[];he&&he!==q&&((S=he.alternate)===null||S!==q);)m.push(he),he=Zi(he);for(he=0;he<R.length;he++)Ls(R[he],"bubbled",G);for(he=m.length;0<he--;)Ls(m[he],"captured",d);return(64&b)==0?[G]:[G,d]}},xn=typeof Object.is=="function"?Object.is:function(a,l){return a===l&&(a!==0||1/a==1/l)||a!=a&&l!=l},vo=Object.prototype.hasOwnProperty;function Xt(a,l){if(xn(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++)if(!vo.call(l,d[m])||!xn(a[d[m]],l[d[m]]))return!1;return!0}var Zo=we&&"documentMode"in document&&11>=document.documentMode,vi={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},an=null,Kn=null,yi=null,Pn=!1;function ni(a,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;return Pn||an==null||an!==Fa(d)?null:("selectionStart"in(d=an)&&hr(d)?d={start:d.selectionStart,end:d.selectionEnd}:d={anchorNode:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset},yi&&Xt(yi,d)?null:(yi=d,(a=qn.getPooled(vi.select,Kn,a,l)).type="select",a.target=an,wo(a),a))}var Jl={eventTypes:vi,extractEvents:function(a,l,d,m,b,C){if(!(C=!(b=C||(m.window===m?m.document:m.nodeType===9?m:m.ownerDocument)))){e:{b=Gi(b),C=Oe.onSelect;for(var S=0;S<C.length;S++)if(!b.has(C[S])){b=!1;break e}b=!0}C=!b}if(C)return null;switch(b=l?Ur(l):window,a){case"focus":(w(b)||b.contentEditable==="true")&&(an=b,Kn=l,yi=null);break;case"blur":yi=Kn=an=null;break;case"mousedown":Pn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Pn=!1,ni(d,m);case"selectionchange":if(Zo)break;case"keydown":case"keyup":return ni(d,m)}return null}},Ql=qn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Xl=qn.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Hs=Ge.extend({relatedTarget:null});function Us(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode)===0&&l===13&&(a=13):a=l,a===10&&(a=13),32<=a||a===13?a:0}var Zl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ws=Ge.extend({key:function(a){if(a.key){var l=Zl[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Us(a))===13?"Enter":String.fromCharCode(a):a.type==="keydown"||a.type==="keyup"?Qa[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:zt,charCode:function(a){return a.type==="keypress"?Us(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Us(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ec=kt.extend({dataTransfer:null}),Xa=Ge.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:zt}),Za=qn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),$r=kt.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),el={eventTypes:qo,extractEvents:function(a,l,d,m){var b=Bl.get(a);if(!b)return null;switch(a){case"keypress":if(Us(d)===0)return null;case"keydown":case"keyup":a=Ws;break;case"blur":case"focus":a=Hs;break;case"click":if(d.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=kt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=ec;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=Xa;break;case Un:case Qt:case Wn:a=Ql;break;case Ai:a=Za;break;case"scroll":a=Ge;break;case"wheel":a=$r;break;case"copy":case"cut":case"paste":a=Xl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=wi;break;default:a=qn}return wo(l=a.getPooled(b,l,d,m)),l}};if(Z)throw Error(u(101));Z=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),W(),B=bo,O=Jo,V=Ur,Ue({SimpleEventPlugin:el,EnterLeaveEventPlugin:Oi,ChangeEventPlugin:ct,SelectEventPlugin:Jl,BeforeInputEventPlugin:k});var Xu=[],$s=-1;function Wt(a){0>$s||(a.current=Xu[$s],Xu[$s]=null,$s--)}function Zt(a,l){$s++,Xu[$s]=a.current,a.current=l}var yo={},Nn={current:yo},ii={current:!1},es=yo;function js(a,l){var d=a.type.contextTypes;if(!d)return yo;var m=a.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var b,C={};for(b in d)C[b]=l[b];return m&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=C),C}function ri(a){return(a=a.childContextTypes)!=null}function tc(){Wt(ii),Wt(Nn)}function cm(a,l,d){if(Nn.current!==yo)throw Error(u(168));Zt(Nn,l),Zt(ii,d)}function um(a,l,d){var m=a.stateNode;if(a=l.childContextTypes,typeof m.getChildContext!="function")return d;for(var b in m=m.getChildContext())if(!(b in a))throw Error(u(108,Hn(l)||"Unknown",b));return s({},d,{},m)}function nc(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||yo,es=Nn.current,Zt(Nn,a),Zt(ii,ii.current),!0}function dm(a,l,d){var m=a.stateNode;if(!m)throw Error(u(169));d?(a=um(a,l,es),m.__reactInternalMemoizedMergedChildContext=a,Wt(ii),Wt(Nn),Zt(Nn,a)):Wt(ii),Zt(ii,d)}var p_=c.unstable_runWithPriority,Zu=c.unstable_scheduleCallback,hm=c.unstable_cancelCallback,fm=c.unstable_requestPaint,ed=c.unstable_now,g_=c.unstable_getCurrentPriorityLevel,ic=c.unstable_ImmediatePriority,mm=c.unstable_UserBlockingPriority,pm=c.unstable_NormalPriority,gm=c.unstable_LowPriority,bm=c.unstable_IdlePriority,wm={},b_=c.unstable_shouldYield,w_=fm!==void 0?fm:function(){},jr=null,rc=null,td=!1,vm=ed(),Ni=1e4>vm?ed:function(){return ed()-vm};function oc(){switch(g_()){case ic:return 99;case mm:return 98;case pm:return 97;case gm:return 96;case bm:return 95;default:throw Error(u(332))}}function ym(a){switch(a){case 99:return ic;case 98:return mm;case 97:return pm;case 96:return gm;case 95:return bm;default:throw Error(u(332))}}function _o(a,l){return a=ym(a),p_(a,l)}function _m(a,l,d){return a=ym(a),Zu(a,l,d)}function km(a){return jr===null?(jr=[a],rc=Zu(ic,Em)):jr.push(a),wm}function mr(){if(rc!==null){var a=rc;rc=null,hm(a)}Em()}function Em(){if(!td&&jr!==null){td=!0;var a=0;try{var l=jr;_o(99,function(){for(;a<l.length;a++){var d=l[a];do d=d(!0);while(d!==null)}}),jr=null}catch(d){throw jr!==null&&(jr=jr.slice(a+1)),Zu(ic,mr),d}finally{td=!1}}}function sc(a,l,d){return 1073741821-(1+((1073741821-a+l/10)/(d/=10)|0))*d}function tr(a,l){if(a&&a.defaultProps)for(var d in l=s({},l),a=a.defaultProps)l[d]===void 0&&(l[d]=a[d]);return l}var ac={current:null},lc=null,qs=null,cc=null;function nd(){cc=qs=lc=null}function id(a){var l=ac.current;Wt(ac),a.type._context._currentValue=l}function Cm(a,l){for(;a!==null;){var d=a.alternate;if(a.childExpirationTime<l)a.childExpirationTime=l,d!==null&&d.childExpirationTime<l&&(d.childExpirationTime=l);else{if(!(d!==null&&d.childExpirationTime<l))break;d.childExpirationTime=l}a=a.return}}function Ks(a,l){lc=a,cc=qs=null,(a=a.dependencies)!==null&&a.firstContext!==null&&(a.expirationTime>=l&&(gr=!0),a.firstContext=null)}function Di(a,l){if(cc!==a&&l!==!1&&l!==0)if(typeof l=="number"&&l!==1073741823||(cc=a,l=1073741823),l={context:a,observedBits:l,next:null},qs===null){if(lc===null)throw Error(u(308));qs=l,lc.dependencies={expirationTime:0,firstContext:l,responders:null}}else qs=qs.next=l;return a._currentValue}var ko=!1;function rd(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function od(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Eo(a,l){return(a={expirationTime:a,suspenseConfig:l,tag:0,payload:null,callback:null,next:null}).next=a}function Co(a,l){if((a=a.updateQueue)!==null){var d=(a=a.shared).pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}}function Tm(a,l){var d=a.alternate;d!==null&&od(d,a),(d=(a=a.updateQueue).baseQueue)===null?(a.baseQueue=l.next=l,l.next=l):(l.next=d.next,d.next=l)}function tl(a,l,d,m){var b=a.updateQueue;ko=!1;var C=b.baseQueue,S=b.shared.pending;if(S!==null){if(C!==null){var R=C.next;C.next=S.next,S.next=R}C=S,b.shared.pending=null,(R=a.alternate)!==null&&(R=R.updateQueue)!==null&&(R.baseQueue=S)}if(C!==null){R=C.next;var G=b.baseState,q=0,he=null,Fe=null,Xe=null;if(R!==null)for(var bt=R;;){if((S=bt.expirationTime)<m){var Li={expirationTime:bt.expirationTime,suspenseConfig:bt.suspenseConfig,tag:bt.tag,payload:bt.payload,callback:bt.callback,next:null};Xe===null?(Fe=Xe=Li,he=G):Xe=Xe.next=Li,S>q&&(q=S)}else{Xe!==null&&(Xe=Xe.next={expirationTime:1073741823,suspenseConfig:bt.suspenseConfig,tag:bt.tag,payload:bt.payload,callback:bt.callback,next:null}),yp(S,bt.suspenseConfig);e:{var Yn=a,Q=bt;switch(S=l,Li=d,Q.tag){case 1:if(typeof(Yn=Q.payload)=="function"){G=Yn.call(Li,G,S);break e}G=Yn;break e;case 3:Yn.effectTag=-4097&Yn.effectTag|64;case 0:if((S=typeof(Yn=Q.payload)=="function"?Yn.call(Li,G,S):Yn)==null)break e;G=s({},G,S);break e;case 2:ko=!0}}bt.callback!==null&&(a.effectTag|=32,(S=b.effects)===null?b.effects=[bt]:S.push(bt))}if((bt=bt.next)===null||bt===R){if((S=b.shared.pending)===null)break;bt=C.next=S.next,S.next=R,b.baseQueue=C=S,b.shared.pending=null}}Xe===null?he=G:Xe.next=Fe,b.baseState=he,b.baseQueue=Xe,Dc(q),a.expirationTime=q,a.memoizedState=G}}function Sm(a,l,d){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var m=a[l],b=m.callback;if(b!==null){if(m.callback=null,m=b,b=d,typeof m!="function")throw Error(u(191,m));m.call(b)}}}var nl=ue.ReactCurrentBatchConfig,xm=new o.Component().refs;function uc(a,l,d,m){d=(d=d(m,l=a.memoizedState))==null?l:s({},l,d),a.memoizedState=d,a.expirationTime===0&&(a.updateQueue.baseState=d)}var dc={isMounted:function(a){return!!(a=a._reactInternalFiber)&&fi(a)===a},enqueueSetState:function(a,l,d){a=a._reactInternalFiber;var m=br(),b=nl.suspense;(b=Eo(m=ss(m,a,b),b)).payload=l,d!=null&&(b.callback=d),Co(a,b),Po(a,m)},enqueueReplaceState:function(a,l,d){a=a._reactInternalFiber;var m=br(),b=nl.suspense;(b=Eo(m=ss(m,a,b),b)).tag=1,b.payload=l,d!=null&&(b.callback=d),Co(a,b),Po(a,m)},enqueueForceUpdate:function(a,l){a=a._reactInternalFiber;var d=br(),m=nl.suspense;(m=Eo(d=ss(d,a,m),m)).tag=2,l!=null&&(m.callback=l),Co(a,m),Po(a,d)}};function Pm(a,l,d,m,b,C,S){return typeof(a=a.stateNode).shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,C,S):!l.prototype||!l.prototype.isPureReactComponent||!Xt(d,m)||!Xt(b,C)}function Am(a,l,d){var m=!1,b=yo,C=l.contextType;return typeof C=="object"&&C!==null?C=Di(C):(b=ri(l)?es:Nn.current,C=(m=(m=l.contextTypes)!=null)?js(a,b):yo),l=new l(d,C),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=dc,a.stateNode=l,l._reactInternalFiber=a,m&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=C),l}function Im(a,l,d,m){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==a&&dc.enqueueReplaceState(l,l.state,null)}function sd(a,l,d,m){var b=a.stateNode;b.props=d,b.state=a.memoizedState,b.refs=xm,rd(a);var C=l.contextType;typeof C=="object"&&C!==null?b.context=Di(C):(C=ri(l)?es:Nn.current,b.context=js(a,C)),tl(a,d,b,m),b.state=a.memoizedState,typeof(C=l.getDerivedStateFromProps)=="function"&&(uc(a,l,C,d),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(l=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),l!==b.state&&dc.enqueueReplaceState(b,b.state,null),tl(a,d,b,m),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.effectTag|=4)}var hc=Array.isArray;function il(a,l,d){if((a=d.ref)!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner){if(d.tag!==1)throw Error(u(309));var m=d.stateNode}if(!m)throw Error(u(147,a));var b=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===b?l.ref:((l=function(C){var S=m.refs;S===xm&&(S=m.refs={}),C===null?delete S[b]:S[b]=C})._stringRef=b,l)}if(typeof a!="string")throw Error(u(284));if(!d._owner)throw Error(u(290,a))}return a}function fc(a,l){if(a.type!=="textarea")throw Error(u(31,Object.prototype.toString.call(l)==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":l,""))}function Rm(a){function l(Q,J){if(a){var le=Q.lastEffect;le!==null?(le.nextEffect=J,Q.lastEffect=J):Q.firstEffect=Q.lastEffect=J,J.nextEffect=null,J.effectTag=8}}function d(Q,J){if(!a)return null;for(;J!==null;)l(Q,J),J=J.sibling;return null}function m(Q,J){for(Q=new Map;J!==null;)J.key!==null?Q.set(J.key,J):Q.set(J.index,J),J=J.sibling;return Q}function b(Q,J){return(Q=us(Q,J)).index=0,Q.sibling=null,Q}function C(Q,J,le){return Q.index=le,a?(le=Q.alternate)!==null?(le=le.index)<J?(Q.effectTag=2,J):le:(Q.effectTag=2,J):J}function S(Q){return a&&Q.alternate===null&&(Q.effectTag=2),Q}function R(Q,J,le,_e){return J===null||J.tag!==6?((J=Bd(le,Q.mode,_e)).return=Q,J):((J=b(J,le)).return=Q,J)}function G(Q,J,le,_e){return J!==null&&J.elementType===le.type?((_e=b(J,le.props)).ref=il(Q,J,le),_e.return=Q,_e):((_e=Bc(le.type,le.key,le.props,null,Q.mode,_e)).ref=il(Q,J,le),_e.return=Q,_e)}function q(Q,J,le,_e){return J===null||J.tag!==4||J.stateNode.containerInfo!==le.containerInfo||J.stateNode.implementation!==le.implementation?((J=Vd(le,Q.mode,_e)).return=Q,J):((J=b(J,le.children||[])).return=Q,J)}function he(Q,J,le,_e,Ae){return J===null||J.tag!==7?((J=Ao(le,Q.mode,_e,Ae)).return=Q,J):((J=b(J,le)).return=Q,J)}function Fe(Q,J,le){if(typeof J=="string"||typeof J=="number")return(J=Bd(""+J,Q.mode,le)).return=Q,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Ze:return(le=Bc(J.type,J.key,J.props,null,Q.mode,le)).ref=il(Q,null,J),le.return=Q,le;case un:return(J=Vd(J,Q.mode,le)).return=Q,J}if(hc(J)||Kt(J))return(J=Ao(J,Q.mode,le,null)).return=Q,J;fc(Q,J)}return null}function Xe(Q,J,le,_e){var Ae=J!==null?J.key:null;if(typeof le=="string"||typeof le=="number")return Ae!==null?null:R(Q,J,""+le,_e);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case Ze:return le.key===Ae?le.type===qt?he(Q,J,le.props.children,_e,Ae):G(Q,J,le,_e):null;case un:return le.key===Ae?q(Q,J,le,_e):null}if(hc(le)||Kt(le))return Ae!==null?null:he(Q,J,le,_e,null);fc(Q,le)}return null}function bt(Q,J,le,_e,Ae){if(typeof _e=="string"||typeof _e=="number")return R(J,Q=Q.get(le)||null,""+_e,Ae);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case Ze:return Q=Q.get(_e.key===null?le:_e.key)||null,_e.type===qt?he(J,Q,_e.props.children,Ae,_e.key):G(J,Q,_e,Ae);case un:return q(J,Q=Q.get(_e.key===null?le:_e.key)||null,_e,Ae)}if(hc(_e)||Kt(_e))return he(J,Q=Q.get(le)||null,_e,Ae,null);fc(J,_e)}return null}function Li(Q,J,le,_e){for(var Ae=null,De=null,Qe=J,wt=J=0,ln=null;Qe!==null&&wt<le.length;wt++){Qe.index>wt?(ln=Qe,Qe=null):ln=Qe.sibling;var st=Xe(Q,Qe,le[wt],_e);if(st===null){Qe===null&&(Qe=ln);break}a&&Qe&&st.alternate===null&&l(Q,Qe),J=C(st,J,wt),De===null?Ae=st:De.sibling=st,De=st,Qe=ln}if(wt===le.length)return d(Q,Qe),Ae;if(Qe===null){for(;wt<le.length;wt++)(Qe=Fe(Q,le[wt],_e))!==null&&(J=C(Qe,J,wt),De===null?Ae=Qe:De.sibling=Qe,De=Qe);return Ae}for(Qe=m(Q,Qe);wt<le.length;wt++)(ln=bt(Qe,Q,wt,le[wt],_e))!==null&&(a&&ln.alternate!==null&&Qe.delete(ln.key===null?wt:ln.key),J=C(ln,J,wt),De===null?Ae=ln:De.sibling=ln,De=ln);return a&&Qe.forEach(function(vn){return l(Q,vn)}),Ae}function Yn(Q,J,le,_e){var Ae=Kt(le);if(typeof Ae!="function")throw Error(u(150));if((le=Ae.call(le))==null)throw Error(u(151));for(var De=Ae=null,Qe=J,wt=J=0,ln=null,st=le.next();Qe!==null&&!st.done;wt++,st=le.next()){Qe.index>wt?(ln=Qe,Qe=null):ln=Qe.sibling;var vn=Xe(Q,Qe,st.value,_e);if(vn===null){Qe===null&&(Qe=ln);break}a&&Qe&&vn.alternate===null&&l(Q,Qe),J=C(vn,J,wt),De===null?Ae=vn:De.sibling=vn,De=vn,Qe=ln}if(st.done)return d(Q,Qe),Ae;if(Qe===null){for(;!st.done;wt++,st=le.next())(st=Fe(Q,st.value,_e))!==null&&(J=C(st,J,wt),De===null?Ae=st:De.sibling=st,De=st);return Ae}for(Qe=m(Q,Qe);!st.done;wt++,st=le.next())(st=bt(Qe,Q,wt,st.value,_e))!==null&&(a&&st.alternate!==null&&Qe.delete(st.key===null?wt:st.key),J=C(st,J,wt),De===null?Ae=st:De.sibling=st,De=st);return a&&Qe.forEach(function(Yr){return l(Q,Yr)}),Ae}return function(Q,J,le,_e){var Ae=typeof le=="object"&&le!==null&&le.type===qt&&le.key===null;Ae&&(le=le.props.children);var De=typeof le=="object"&&le!==null;if(De)switch(le.$$typeof){case Ze:e:{for(De=le.key,Ae=J;Ae!==null;){if(Ae.key===De){switch(Ae.tag){case 7:if(le.type===qt){d(Q,Ae.sibling),(J=b(Ae,le.props.children)).return=Q,Q=J;break e}break;default:if(Ae.elementType===le.type){d(Q,Ae.sibling),(J=b(Ae,le.props)).ref=il(Q,Ae,le),J.return=Q,Q=J;break e}}d(Q,Ae);break}l(Q,Ae),Ae=Ae.sibling}le.type===qt?((J=Ao(le.props.children,Q.mode,_e,le.key)).return=Q,Q=J):((_e=Bc(le.type,le.key,le.props,null,Q.mode,_e)).ref=il(Q,J,le),_e.return=Q,Q=_e)}return S(Q);case un:e:{for(Ae=le.key;J!==null;){if(J.key===Ae){if(J.tag===4&&J.stateNode.containerInfo===le.containerInfo&&J.stateNode.implementation===le.implementation){d(Q,J.sibling),(J=b(J,le.children||[])).return=Q,Q=J;break e}d(Q,J);break}l(Q,J),J=J.sibling}(J=Vd(le,Q.mode,_e)).return=Q,Q=J}return S(Q)}if(typeof le=="string"||typeof le=="number")return le=""+le,J!==null&&J.tag===6?(d(Q,J.sibling),(J=b(J,le)).return=Q,Q=J):(d(Q,J),(J=Bd(le,Q.mode,_e)).return=Q,Q=J),S(Q);if(hc(le))return Li(Q,J,le,_e);if(Kt(le))return Yn(Q,J,le,_e);if(De&&fc(Q,le),le===void 0&&!Ae)switch(Q.tag){case 1:case 0:throw Q=Q.type,Error(u(152,Q.displayName||Q.name||"Component"))}return d(Q,J)}}var Gs=Rm(!0),ad=Rm(!1),rl={},pr={current:rl},ol={current:rl},sl={current:rl};function ts(a){if(a===rl)throw Error(u(174));return a}function ld(a,l){switch(Zt(sl,l),Zt(ol,a),Zt(pr,rl),a=l.nodeType){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Ne(null,"");break;default:l=Ne(l=(a=a===8?l.parentNode:l).namespaceURI||null,a=a.tagName)}Wt(pr),Zt(pr,l)}function Ys(){Wt(pr),Wt(ol),Wt(sl)}function Mm(a){ts(sl.current);var l=ts(pr.current),d=Ne(l,a.type);l!==d&&(Zt(ol,a),Zt(pr,d))}function cd(a){ol.current===a&&(Wt(pr),Wt(ol))}var en={current:0};function mc(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&((d=d.dehydrated)===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((64&l.effectTag)!=0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function ud(a,l){return{responder:a,props:l}}var pc=ue.ReactCurrentDispatcher,Bi=ue.ReactCurrentBatchConfig,To=0,pn=null,Gn=null,Dn=null,gc=!1;function _i(){throw Error(u(321))}function dd(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!xn(a[d],l[d]))return!1;return!0}function hd(a,l,d,m,b,C){if(To=C,pn=l,l.memoizedState=null,l.updateQueue=null,l.expirationTime=0,pc.current=a===null||a.memoizedState===null?v_:y_,a=d(m,b),l.expirationTime===To){C=0;do{if(l.expirationTime=0,!(25>C))throw Error(u(301));C+=1,Dn=Gn=null,l.updateQueue=null,pc.current=__,a=d(m,b)}while(l.expirationTime===To)}if(pc.current=_c,l=Gn!==null&&Gn.next!==null,To=0,Dn=Gn=pn=null,gc=!1,l)throw Error(u(300));return a}function Js(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?pn.memoizedState=Dn=a:Dn=Dn.next=a,Dn}function Qs(){if(Gn===null){var a=pn.alternate;a=a!==null?a.memoizedState:null}else a=Gn.next;var l=Dn===null?pn.memoizedState:Dn.next;if(l!==null)Dn=l,Gn=a;else{if(a===null)throw Error(u(310));a={memoizedState:(Gn=a).memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},Dn===null?pn.memoizedState=Dn=a:Dn=Dn.next=a}return Dn}function ns(a,l){return typeof l=="function"?l(a):l}function bc(a){var l=Qs(),d=l.queue;if(d===null)throw Error(u(311));d.lastRenderedReducer=a;var m=Gn,b=m.baseQueue,C=d.pending;if(C!==null){if(b!==null){var S=b.next;b.next=C.next,C.next=S}m.baseQueue=b=C,d.pending=null}if(b!==null){b=b.next,m=m.baseState;var R=S=C=null,G=b;do{var q=G.expirationTime;if(q<To){var he={expirationTime:G.expirationTime,suspenseConfig:G.suspenseConfig,action:G.action,eagerReducer:G.eagerReducer,eagerState:G.eagerState,next:null};R===null?(S=R=he,C=m):R=R.next=he,q>pn.expirationTime&&(pn.expirationTime=q,Dc(q))}else R!==null&&(R=R.next={expirationTime:1073741823,suspenseConfig:G.suspenseConfig,action:G.action,eagerReducer:G.eagerReducer,eagerState:G.eagerState,next:null}),yp(q,G.suspenseConfig),m=G.eagerReducer===a?G.eagerState:a(m,G.action);G=G.next}while(G!==null&&G!==b);R===null?C=m:R.next=S,xn(m,l.memoizedState)||(gr=!0),l.memoizedState=m,l.baseState=C,l.baseQueue=R,d.lastRenderedState=m}return[l.memoizedState,d.dispatch]}function wc(a){var l=Qs(),d=l.queue;if(d===null)throw Error(u(311));d.lastRenderedReducer=a;var m=d.dispatch,b=d.pending,C=l.memoizedState;if(b!==null){d.pending=null;var S=b=b.next;do C=a(C,S.action),S=S.next;while(S!==b);xn(C,l.memoizedState)||(gr=!0),l.memoizedState=C,l.baseQueue===null&&(l.baseState=C),d.lastRenderedState=C}return[C,m]}function fd(a){var l=Js();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a=(a=l.queue={pending:null,dispatch:null,lastRenderedReducer:ns,lastRenderedState:a}).dispatch=zm.bind(null,pn,a),[l.memoizedState,a]}function md(a,l,d,m){return a={tag:a,create:l,destroy:d,deps:m,next:null},(l=pn.updateQueue)===null?(l={lastEffect:null},pn.updateQueue=l,l.lastEffect=a.next=a):(d=l.lastEffect)===null?l.lastEffect=a.next=a:(m=d.next,d.next=a,a.next=m,l.lastEffect=a),a}function Om(){return Qs().memoizedState}function pd(a,l,d,m){var b=Js();pn.effectTag|=a,b.memoizedState=md(1|l,d,void 0,m===void 0?null:m)}function gd(a,l,d,m){var b=Qs();m=m===void 0?null:m;var C=void 0;if(Gn!==null){var S=Gn.memoizedState;if(C=S.destroy,m!==null&&dd(m,S.deps))return void md(l,d,C,m)}pn.effectTag|=a,b.memoizedState=md(1|l,d,C,m)}function Nm(a,l){return pd(516,4,a,l)}function vc(a,l){return gd(516,4,a,l)}function Dm(a,l){return gd(4,2,a,l)}function Bm(a,l){return typeof l=="function"?(a=a(),l(a),function(){l(null)}):l!=null?(a=a(),l.current=a,function(){l.current=null}):void 0}function Vm(a,l,d){return d=d!=null?d.concat([a]):null,gd(4,2,Bm.bind(null,l,a),d)}function bd(){}function Lm(a,l){return Js().memoizedState=[a,l===void 0?null:l],a}function yc(a,l){var d=Qs();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&dd(l,m[1])?m[0]:(d.memoizedState=[a,l],a)}function Fm(a,l){var d=Qs();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&dd(l,m[1])?m[0]:(a=a(),d.memoizedState=[a,l],a)}function wd(a,l,d){var m=oc();_o(98>m?98:m,function(){a(!0)}),_o(97<m?97:m,function(){var b=Bi.suspense;Bi.suspense=l===void 0?null:l;try{a(!1),d()}finally{Bi.suspense=b}})}function zm(a,l,d){var m=br(),b=nl.suspense;b={expirationTime:m=ss(m,a,b),suspenseConfig:b,action:d,eagerReducer:null,eagerState:null,next:null};var C=l.pending;if(C===null?b.next=b:(b.next=C.next,C.next=b),l.pending=b,C=a.alternate,a===pn||C!==null&&C===pn)gc=!0,b.expirationTime=To,pn.expirationTime=To;else{if(a.expirationTime===0&&(C===null||C.expirationTime===0)&&(C=l.lastRenderedReducer)!==null)try{var S=l.lastRenderedState,R=C(S,d);if(b.eagerReducer=C,b.eagerState=R,xn(R,S))return}catch{}Po(a,m)}}var _c={readContext:Di,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useResponder:_i,useDeferredValue:_i,useTransition:_i},v_={readContext:Di,useCallback:Lm,useContext:Di,useEffect:Nm,useImperativeHandle:function(a,l,d){return d=d!=null?d.concat([a]):null,pd(4,2,Bm.bind(null,l,a),d)},useLayoutEffect:function(a,l){return pd(4,2,a,l)},useMemo:function(a,l){var d=Js();return l=l===void 0?null:l,a=a(),d.memoizedState=[a,l],a},useReducer:function(a,l,d){var m=Js();return l=d!==void 0?d(l):l,m.memoizedState=m.baseState=l,a=(a=m.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:l}).dispatch=zm.bind(null,pn,a),[m.memoizedState,a]},useRef:function(a){return a={current:a},Js().memoizedState=a},useState:fd,useDebugValue:bd,useResponder:ud,useDeferredValue:function(a,l){var d=fd(a),m=d[0],b=d[1];return Nm(function(){var C=Bi.suspense;Bi.suspense=l===void 0?null:l;try{b(a)}finally{Bi.suspense=C}},[a,l]),m},useTransition:function(a){var l=fd(!1),d=l[0];return l=l[1],[Lm(wd.bind(null,l,a),[l,a]),d]}},y_={readContext:Di,useCallback:yc,useContext:Di,useEffect:vc,useImperativeHandle:Vm,useLayoutEffect:Dm,useMemo:Fm,useReducer:bc,useRef:Om,useState:function(){return bc(ns)},useDebugValue:bd,useResponder:ud,useDeferredValue:function(a,l){var d=bc(ns),m=d[0],b=d[1];return vc(function(){var C=Bi.suspense;Bi.suspense=l===void 0?null:l;try{b(a)}finally{Bi.suspense=C}},[a,l]),m},useTransition:function(a){var l=bc(ns),d=l[0];return l=l[1],[yc(wd.bind(null,l,a),[l,a]),d]}},__={readContext:Di,useCallback:yc,useContext:Di,useEffect:vc,useImperativeHandle:Vm,useLayoutEffect:Dm,useMemo:Fm,useReducer:wc,useRef:Om,useState:function(){return wc(ns)},useDebugValue:bd,useResponder:ud,useDeferredValue:function(a,l){var d=wc(ns),m=d[0],b=d[1];return vc(function(){var C=Bi.suspense;Bi.suspense=l===void 0?null:l;try{b(a)}finally{Bi.suspense=C}},[a,l]),m},useTransition:function(a){var l=wc(ns),d=l[0];return l=l[1],[yc(wd.bind(null,l,a),[l,a]),d]}},qr=null,So=null,is=!1;function Hm(a,l){var d=wr(5,null,null,0);d.elementType="DELETED",d.type="DELETED",d.stateNode=l,d.return=a,d.effectTag=8,a.lastEffect!==null?(a.lastEffect.nextEffect=d,a.lastEffect=d):a.firstEffect=a.lastEffect=d}function Um(a,l){switch(a.tag){case 5:var d=a.type;return(l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l)!==null&&(a.stateNode=l,!0);case 6:return(l=a.pendingProps===""||l.nodeType!==3?null:l)!==null&&(a.stateNode=l,!0);case 13:default:return!1}}function vd(a){if(is){var l=So;if(l){var d=l;if(!Um(a,l)){if(!(l=go(d.nextSibling))||!Um(a,l))return a.effectTag=-1025&a.effectTag|2,is=!1,void(qr=a);Hm(qr,d)}qr=a,So=go(l.firstChild)}else a.effectTag=-1025&a.effectTag|2,is=!1,qr=a}}function Wm(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;qr=a}function kc(a){if(a!==qr)return!1;if(!is)return Wm(a),is=!0,!1;var l=a.type;if(a.tag!==5||l!=="head"&&l!=="body"&&!$a(l,a.memoizedProps))for(l=So;l;)Hm(a,l),l=go(l.nextSibling);if(Wm(a),a.tag===13){if(!(a=(a=a.memoizedState)!==null?a.dehydrated:null))throw Error(u(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(l===0){So=go(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}a=a.nextSibling}So=null}}else So=qr?go(a.stateNode.nextSibling):null;return!0}function yd(){So=qr=null,is=!1}var k_=ue.ReactCurrentOwner,gr=!1;function Vi(a,l,d,m){l.child=a===null?ad(l,null,d,m):Gs(l,a.child,d,m)}function $m(a,l,d,m,b){d=d.render;var C=l.ref;return Ks(l,b),m=hd(a,l,d,m,C,b),a===null||gr?(l.effectTag|=1,Vi(a,l,m,b),l.child):(l.updateQueue=a.updateQueue,l.effectTag&=-517,a.expirationTime<=b&&(a.expirationTime=0),Kr(a,l,b))}function jm(a,l,d,m,b,C){if(a===null){var S=d.type;return typeof S!="function"||Dd(S)||S.defaultProps!==void 0||d.compare!==null||d.defaultProps!==void 0?((a=Bc(d.type,null,m,null,l.mode,C)).ref=l.ref,a.return=l,l.child=a):(l.tag=15,l.type=S,qm(a,l,S,m,b,C))}return S=a.child,b<C&&(b=S.memoizedProps,(d=(d=d.compare)!==null?d:Xt)(b,m)&&a.ref===l.ref)?Kr(a,l,C):(l.effectTag|=1,(a=us(S,m)).ref=l.ref,a.return=l,l.child=a)}function qm(a,l,d,m,b,C){return a!==null&&Xt(a.memoizedProps,m)&&a.ref===l.ref&&(gr=!1,b<C)?(l.expirationTime=a.expirationTime,Kr(a,l,C)):_d(a,l,d,m,C)}function Km(a,l){var d=l.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(l.effectTag|=128)}function _d(a,l,d,m,b){var C=ri(d)?es:Nn.current;return C=js(l,C),Ks(l,b),d=hd(a,l,d,m,C,b),a===null||gr?(l.effectTag|=1,Vi(a,l,d,b),l.child):(l.updateQueue=a.updateQueue,l.effectTag&=-517,a.expirationTime<=b&&(a.expirationTime=0),Kr(a,l,b))}function Gm(a,l,d,m,b){if(ri(d)){var C=!0;nc(l)}else C=!1;if(Ks(l,b),l.stateNode===null)a!==null&&(a.alternate=null,l.alternate=null,l.effectTag|=2),Am(l,d,m),sd(l,d,m,b),m=!0;else if(a===null){var S=l.stateNode,R=l.memoizedProps;S.props=R;var G=S.context,q=d.contextType;typeof q=="object"&&q!==null?q=Di(q):q=js(l,q=ri(d)?es:Nn.current);var he=d.getDerivedStateFromProps,Fe=typeof he=="function"||typeof S.getSnapshotBeforeUpdate=="function";Fe||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==m||G!==q)&&Im(l,S,m,q),ko=!1;var Xe=l.memoizedState;S.state=Xe,tl(l,m,S,b),G=l.memoizedState,R!==m||Xe!==G||ii.current||ko?(typeof he=="function"&&(uc(l,d,he,m),G=l.memoizedState),(R=ko||Pm(l,d,R,m,Xe,G,q))?(Fe||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(l.effectTag|=4)):(typeof S.componentDidMount=="function"&&(l.effectTag|=4),l.memoizedProps=m,l.memoizedState=G),S.props=m,S.state=G,S.context=q,m=R):(typeof S.componentDidMount=="function"&&(l.effectTag|=4),m=!1)}else S=l.stateNode,od(a,l),R=l.memoizedProps,S.props=l.type===l.elementType?R:tr(l.type,R),G=S.context,typeof(q=d.contextType)=="object"&&q!==null?q=Di(q):q=js(l,q=ri(d)?es:Nn.current),(Fe=typeof(he=d.getDerivedStateFromProps)=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==m||G!==q)&&Im(l,S,m,q),ko=!1,G=l.memoizedState,S.state=G,tl(l,m,S,b),Xe=l.memoizedState,R!==m||G!==Xe||ii.current||ko?(typeof he=="function"&&(uc(l,d,he,m),Xe=l.memoizedState),(he=ko||Pm(l,d,R,m,G,Xe,q))?(Fe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,Xe,q),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,Xe,q)),typeof S.componentDidUpdate=="function"&&(l.effectTag|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(l.effectTag|=256)):(typeof S.componentDidUpdate!="function"||R===a.memoizedProps&&G===a.memoizedState||(l.effectTag|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&G===a.memoizedState||(l.effectTag|=256),l.memoizedProps=m,l.memoizedState=Xe),S.props=m,S.state=Xe,S.context=q,m=he):(typeof S.componentDidUpdate!="function"||R===a.memoizedProps&&G===a.memoizedState||(l.effectTag|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&G===a.memoizedState||(l.effectTag|=256),m=!1);return kd(a,l,d,m,C,b)}function kd(a,l,d,m,b,C){Km(a,l);var S=(64&l.effectTag)!=0;if(!m&&!S)return b&&dm(l,d,!1),Kr(a,l,C);m=l.stateNode,k_.current=l;var R=S&&typeof d.getDerivedStateFromError!="function"?null:m.render();return l.effectTag|=1,a!==null&&S?(l.child=Gs(l,a.child,null,C),l.child=Gs(l,null,R,C)):Vi(a,l,R,C),l.memoizedState=m.state,b&&dm(l,d,!0),l.child}function Ym(a){var l=a.stateNode;l.pendingContext?cm(0,l.pendingContext,l.pendingContext!==l.context):l.context&&cm(0,l.context,!1),ld(a,l.containerInfo)}var Jm,Qm,Xm,Ed={dehydrated:null,retryTime:0};function Zm(a,l,d){var m,b=l.mode,C=l.pendingProps,S=en.current,R=!1;if((m=(64&l.effectTag)!=0)||(m=(2&S)!=0&&(a===null||a.memoizedState!==null)),m?(R=!0,l.effectTag&=-65):a!==null&&a.memoizedState===null||C.fallback===void 0||C.unstable_avoidThisFallback===!0||(S|=1),Zt(en,1&S),a===null){if(C.fallback!==void 0&&vd(l),R){if(R=C.fallback,(C=Ao(null,b,0,null)).return=l,(2&l.mode)==0)for(a=l.memoizedState!==null?l.child.child:l.child,C.child=a;a!==null;)a.return=C,a=a.sibling;return(d=Ao(R,b,d,null)).return=l,C.sibling=d,l.memoizedState=Ed,l.child=C,d}return b=C.children,l.memoizedState=null,l.child=ad(l,null,b,d)}if(a.memoizedState!==null){if(b=(a=a.child).sibling,R){if(C=C.fallback,(d=us(a,a.pendingProps)).return=l,(2&l.mode)==0&&(R=l.memoizedState!==null?l.child.child:l.child)!==a.child)for(d.child=R;R!==null;)R.return=d,R=R.sibling;return(b=us(b,C)).return=l,d.sibling=b,d.childExpirationTime=0,l.memoizedState=Ed,l.child=d,b}return d=Gs(l,a.child,C.children,d),l.memoizedState=null,l.child=d}if(a=a.child,R){if(R=C.fallback,(C=Ao(null,b,0,null)).return=l,C.child=a,a!==null&&(a.return=C),(2&l.mode)==0)for(a=l.memoizedState!==null?l.child.child:l.child,C.child=a;a!==null;)a.return=C,a=a.sibling;return(d=Ao(R,b,d,null)).return=l,C.sibling=d,d.effectTag|=2,C.childExpirationTime=0,l.memoizedState=Ed,l.child=C,d}return l.memoizedState=null,l.child=Gs(l,a,C.children,d)}function ep(a,l){a.expirationTime<l&&(a.expirationTime=l);var d=a.alternate;d!==null&&d.expirationTime<l&&(d.expirationTime=l),Cm(a.return,l)}function Cd(a,l,d,m,b,C){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailExpiration:0,tailMode:b,lastEffect:C}:(S.isBackwards=l,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=d,S.tailExpiration=0,S.tailMode=b,S.lastEffect=C)}function tp(a,l,d){var m=l.pendingProps,b=m.revealOrder,C=m.tail;if(Vi(a,l,m.children,d),(2&(m=en.current))!=0)m=1&m|2,l.effectTag|=64;else{if(a!==null&&(64&a.effectTag)!=0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&ep(a,d);else if(a.tag===19)ep(a,d);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}if(Zt(en,m),(2&l.mode)==0)l.memoizedState=null;else switch(b){case"forwards":for(d=l.child,b=null;d!==null;)(a=d.alternate)!==null&&mc(a)===null&&(b=d),d=d.sibling;(d=b)===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),Cd(l,!1,b,d,C,l.lastEffect);break;case"backwards":for(d=null,b=l.child,l.child=null;b!==null;){if((a=b.alternate)!==null&&mc(a)===null){l.child=b;break}a=b.sibling,b.sibling=d,d=b,b=a}Cd(l,!0,d,null,C,l.lastEffect);break;case"together":Cd(l,!1,null,null,void 0,l.lastEffect);break;default:l.memoizedState=null}return l.child}function Kr(a,l,d){a!==null&&(l.dependencies=a.dependencies);var m=l.expirationTime;if(m!==0&&Dc(m),l.childExpirationTime<d)return null;if(a!==null&&l.child!==a.child)throw Error(u(153));if(l.child!==null){for(d=us(a=l.child,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,(d=d.sibling=us(a,a.pendingProps)).return=l;d.sibling=null}return l.child}function Ec(a,l){switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function E_(a,l,d){var m=l.pendingProps;switch(l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ri(l.type)&&tc(),null;case 3:return Ys(),Wt(ii),Wt(Nn),(d=l.stateNode).pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),a!==null&&a.child!==null||!kc(l)||(l.effectTag|=4),null;case 5:cd(l),d=ts(sl.current);var b=l.type;if(a!==null&&l.stateNode!=null)Qm(a,l,b,m,d),a.ref!==l.ref&&(l.effectTag|=128);else{if(!m){if(l.stateNode===null)throw Error(u(166));return null}if(a=ts(pr.current),kc(l)){m=l.stateNode,b=l.type;var C=l.memoizedProps;switch(m[fr]=l,m[Vs]=C,b){case"iframe":case"object":case"embed":Mt("load",m);break;case"video":case"audio":for(a=0;a<hi.length;a++)Mt(hi[a],m);break;case"source":Mt("error",m);break;case"img":case"image":case"link":Mt("error",m),Mt("load",m);break;case"form":Mt("reset",m),Mt("submit",m);break;case"details":Mt("toggle",m);break;case"input":di(m,C),Mt("invalid",m),Mi(d,"onChange");break;case"select":m._wrapperState={wasMultiple:!!C.multiple},Mt("invalid",m),Mi(d,"onChange");break;case"textarea":Ki(m,C),Mt("invalid",m),Mi(d,"onChange")}for(var S in La(b,C),a=null,C)if(C.hasOwnProperty(S)){var R=C[S];S==="children"?typeof R=="string"?m.textContent!==R&&(a=["children",R]):typeof R=="number"&&m.textContent!==""+R&&(a=["children",""+R]):ee.hasOwnProperty(S)&&R!=null&&Mi(d,S)}switch(b){case"input":Or(m),cr(m,C,!0);break;case"textarea":Or(m),Wo(m);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(m.onclick=jn)}d=a,l.updateQueue=d,d!==null&&(l.effectTag|=4)}else{switch(S=d.nodeType===9?d:d.ownerDocument,a===Hr&&(a=ye(b)),a===Hr?b==="script"?((a=S.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof m.is=="string"?a=S.createElement(b,{is:m.is}):(a=S.createElement(b),b==="select"&&(S=a,m.multiple?S.multiple=!0:m.size&&(S.size=m.size))):a=S.createElementNS(a,b),a[fr]=l,a[Vs]=m,Jm(a,l),l.stateNode=a,S=Bs(b,m),b){case"iframe":case"object":case"embed":Mt("load",a),R=m;break;case"video":case"audio":for(R=0;R<hi.length;R++)Mt(hi[R],a);R=m;break;case"source":Mt("error",a),R=m;break;case"img":case"image":case"link":Mt("error",a),Mt("load",a),R=m;break;case"form":Mt("reset",a),Mt("submit",a),R=m;break;case"details":Mt("toggle",a),R=m;break;case"input":di(a,m),R=uo(a,m),Mt("invalid",a),Mi(d,"onChange");break;case"option":R=Zn(a,m);break;case"select":a._wrapperState={wasMultiple:!!m.multiple},R=s({},m,{value:void 0}),Mt("invalid",a),Mi(d,"onChange");break;case"textarea":Ki(a,m),R=fo(a,m),Mt("invalid",a),Mi(d,"onChange");break;default:R=m}La(b,R);var G=R;for(C in G)if(G.hasOwnProperty(C)){var q=G[C];C==="style"?Ll(a,q):C==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0)!=null&&et(a,q):C==="children"?typeof q=="string"?(b!=="textarea"||q!=="")&&mt(a,q):typeof q=="number"&&mt(a,""+q):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(ee.hasOwnProperty(C)?q!=null&&Mi(d,C):q!=null&&$e(a,C,q,S))}switch(b){case"input":Or(a),cr(a,m,!1);break;case"textarea":Or(a),Wo(a);break;case"option":m.value!=null&&a.setAttribute("value",""+En(m.value));break;case"select":a.multiple=!!m.multiple,(d=m.value)!=null?St(a,!!m.multiple,d,!1):m.defaultValue!=null&&St(a,!!m.multiple,m.defaultValue,!0);break;default:typeof R.onClick=="function"&&(a.onclick=jn)}Go(b,m)&&(l.effectTag|=4)}l.ref!==null&&(l.effectTag|=128)}return null;case 6:if(a&&l.stateNode!=null)Xm(0,l,a.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(u(166));d=ts(sl.current),ts(pr.current),kc(l)?(d=l.stateNode,m=l.memoizedProps,d[fr]=l,d.nodeValue!==m&&(l.effectTag|=4)):((d=(d.nodeType===9?d:d.ownerDocument).createTextNode(m))[fr]=l,l.stateNode=d)}return null;case 13:return Wt(en),m=l.memoizedState,(64&l.effectTag)!=0?(l.expirationTime=d,l):(d=m!==null,m=!1,a===null?l.memoizedProps.fallback!==void 0&&kc(l):(m=(b=a.memoizedState)!==null,d||b===null||(b=a.child.sibling)!==null&&((C=l.firstEffect)!==null?(l.firstEffect=b,b.nextEffect=C):(l.firstEffect=l.lastEffect=b,b.nextEffect=null),b.effectTag=8)),d&&!m&&(2&l.mode)!=0&&(a===null&&l.memoizedProps.unstable_avoidThisFallback!==!0||(1&en.current)!=0?wn===rs&&(wn=Tc):(wn!==rs&&wn!==Tc||(wn=Sc),ll!==0&&ki!==null&&(ds(ki,oi),Tp(ki,ll)))),(d||m)&&(l.effectTag|=4),null);case 4:return Ys(),null;case 10:return id(l),null;case 17:return ri(l.type)&&tc(),null;case 19:if(Wt(en),(m=l.memoizedState)===null)return null;if(b=(64&l.effectTag)!=0,(C=m.rendering)===null){if(b)Ec(m,!1);else if(wn!==rs||a!==null&&(64&a.effectTag)!=0)for(C=l.child;C!==null;){if((a=mc(C))!==null){for(l.effectTag|=64,Ec(m,!1),(b=a.updateQueue)!==null&&(l.updateQueue=b,l.effectTag|=4),m.lastEffect===null&&(l.firstEffect=null),l.lastEffect=m.lastEffect,m=l.child;m!==null;)C=d,(b=m).effectTag&=2,b.nextEffect=null,b.firstEffect=null,b.lastEffect=null,(a=b.alternate)===null?(b.childExpirationTime=0,b.expirationTime=C,b.child=null,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null):(b.childExpirationTime=a.childExpirationTime,b.expirationTime=a.expirationTime,b.child=a.child,b.memoizedProps=a.memoizedProps,b.memoizedState=a.memoizedState,b.updateQueue=a.updateQueue,C=a.dependencies,b.dependencies=C===null?null:{expirationTime:C.expirationTime,firstContext:C.firstContext,responders:C.responders}),m=m.sibling;return Zt(en,1&en.current|2),l.child}C=C.sibling}}else{if(!b)if((a=mc(C))!==null){if(l.effectTag|=64,b=!0,(d=a.updateQueue)!==null&&(l.updateQueue=d,l.effectTag|=4),Ec(m,!0),m.tail===null&&m.tailMode==="hidden"&&!C.alternate)return(l=l.lastEffect=m.lastEffect)!==null&&(l.nextEffect=null),null}else 2*Ni()-m.renderingStartTime>m.tailExpiration&&1<d&&(l.effectTag|=64,b=!0,Ec(m,!1),l.expirationTime=l.childExpirationTime=d-1);m.isBackwards?(C.sibling=l.child,l.child=C):((d=m.last)!==null?d.sibling=C:l.child=C,m.last=C)}return m.tail!==null?(m.tailExpiration===0&&(m.tailExpiration=Ni()+500),d=m.tail,m.rendering=d,m.tail=d.sibling,m.lastEffect=l.lastEffect,m.renderingStartTime=Ni(),d.sibling=null,l=en.current,Zt(en,b?1&l|2:1&l),d):null}throw Error(u(156,l.tag))}function C_(a){switch(a.tag){case 1:ri(a.type)&&tc();var l=a.effectTag;return 4096&l?(a.effectTag=-4097&l|64,a):null;case 3:if(Ys(),Wt(ii),Wt(Nn),(64&(l=a.effectTag))!=0)throw Error(u(285));return a.effectTag=-4097&l|64,a;case 5:return cd(a),null;case 13:return Wt(en),4096&(l=a.effectTag)?(a.effectTag=-4097&l|64,a):null;case 19:return Wt(en),null;case 4:return Ys(),null;case 10:return id(a),null;default:return null}}function Td(a,l){return{value:a,source:l,stack:co(l)}}Jm=function(a,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Qm=function(a,l,d,m,b){var C=a.memoizedProps;if(C!==m){var S,R,G=l.stateNode;switch(ts(pr.current),a=null,d){case"input":C=uo(G,C),m=uo(G,m),a=[];break;case"option":C=Zn(G,C),m=Zn(G,m),a=[];break;case"select":C=s({},C,{value:void 0}),m=s({},m,{value:void 0}),a=[];break;case"textarea":C=fo(G,C),m=fo(G,m),a=[];break;default:typeof C.onClick!="function"&&typeof m.onClick=="function"&&(G.onclick=jn)}for(S in La(d,m),d=null,C)if(!m.hasOwnProperty(S)&&C.hasOwnProperty(S)&&C[S]!=null)if(S==="style")for(R in G=C[S])G.hasOwnProperty(R)&&(d||(d={}),d[R]="");else S!=="dangerouslySetInnerHTML"&&S!=="children"&&S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(ee.hasOwnProperty(S)?a||(a=[]):(a=a||[]).push(S,null));for(S in m){var q=m[S];if(G=C!=null?C[S]:void 0,m.hasOwnProperty(S)&&q!==G&&(q!=null||G!=null))if(S==="style")if(G){for(R in G)!G.hasOwnProperty(R)||q&&q.hasOwnProperty(R)||(d||(d={}),d[R]="");for(R in q)q.hasOwnProperty(R)&&G[R]!==q[R]&&(d||(d={}),d[R]=q[R])}else d||(a||(a=[]),a.push(S,d)),d=q;else S==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,G=G?G.__html:void 0,q!=null&&G!==q&&(a=a||[]).push(S,q)):S==="children"?G===q||typeof q!="string"&&typeof q!="number"||(a=a||[]).push(S,""+q):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&(ee.hasOwnProperty(S)?(q!=null&&Mi(b,S),a||G===q||(a=[])):(a=a||[]).push(S,q))}d&&(a=a||[]).push("style",d),b=a,(l.updateQueue=b)&&(l.effectTag|=4)}},Xm=function(a,l,d,m){d!==m&&(l.effectTag|=4)};var T_=typeof WeakSet=="function"?WeakSet:Set;function Sd(a,l){var d=l.source,m=l.stack;m===null&&d!==null&&(m=co(d)),d!==null&&Hn(d.type),l=l.value,a!==null&&a.tag===1&&Hn(a.type);try{console.error(l)}catch(b){setTimeout(function(){throw b})}}function np(a){var l=a.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){cs(a,d)}else l.current=null}function S_(a,l){switch(l.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&l.effectTag&&a!==null){var d=a.memoizedProps,m=a.memoizedState;l=(a=l.stateNode).getSnapshotBeforeUpdate(l.elementType===l.type?d:tr(l.type,d),m),a.__reactInternalSnapshotBeforeUpdate=l}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u(163))}function ip(a,l){if((l=(l=l.updateQueue)!==null?l.lastEffect:null)!==null){var d=l=l.next;do{if((d.tag&a)===a){var m=d.destroy;d.destroy=void 0,m!==void 0&&m()}d=d.next}while(d!==l)}}function rp(a,l){if((l=(l=l.updateQueue)!==null?l.lastEffect:null)!==null){var d=l=l.next;do{if((d.tag&a)===a){var m=d.create;d.destroy=m()}d=d.next}while(d!==l)}}function x_(a,l,d){switch(d.tag){case 0:case 11:case 15:case 22:return void rp(3,d);case 1:if(a=d.stateNode,4&d.effectTag)if(l===null)a.componentDidMount();else{var m=d.elementType===d.type?l.memoizedProps:tr(d.type,l.memoizedProps);a.componentDidUpdate(m,l.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}return void((l=d.updateQueue)!==null&&Sm(d,l,a));case 3:if((l=d.updateQueue)!==null){if(a=null,d.child!==null)switch(d.child.tag){case 5:a=d.child.stateNode;break;case 1:a=d.child.stateNode}Sm(d,l,a)}return;case 5:return a=d.stateNode,void(l===null&&4&d.effectTag&&Go(d.type,d.memoizedProps)&&a.focus());case 6:case 4:case 12:return;case 13:return void(d.memoizedState===null&&(d=d.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&jo(d)))));case 19:case 17:case 20:case 21:return}throw Error(u(163))}function op(a,l,d){switch(typeof Nd=="function"&&Nd(l),l.tag){case 0:case 11:case 14:case 15:case 22:if((a=l.updateQueue)!==null&&(a=a.lastEffect)!==null){var m=a.next;_o(97<d?97:d,function(){var b=m;do{var C=b.destroy;if(C!==void 0){var S=l;try{C()}catch(R){cs(S,R)}}b=b.next}while(b!==m)})}break;case 1:np(l),typeof(d=l.stateNode).componentWillUnmount=="function"&&function(b,C){try{C.props=b.memoizedProps,C.state=b.memoizedState,C.componentWillUnmount()}catch(S){cs(b,S)}}(l,d);break;case 5:np(l);break;case 4:cp(a,l,d)}}function sp(a){var l=a.alternate;a.return=null,a.child=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.alternate=null,a.firstEffect=null,a.lastEffect=null,a.pendingProps=null,a.memoizedProps=null,a.stateNode=null,l!==null&&sp(l)}function ap(a){return a.tag===5||a.tag===3||a.tag===4}function lp(a){e:{for(var l=a.return;l!==null;){if(ap(l)){var d=l;break e}l=l.return}throw Error(u(160))}switch(l=d.stateNode,d.tag){case 5:var m=!1;break;case 3:case 4:l=l.containerInfo,m=!0;break;default:throw Error(u(161))}16&d.effectTag&&(mt(l,""),d.effectTag&=-17);e:t:for(d=a;;){for(;d.sibling===null;){if(d.return===null||ap(d.return)){d=null;break e}d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(2&d.effectTag||d.child===null||d.tag===4)continue t;d.child.return=d,d=d.child}if(!(2&d.effectTag)){d=d.stateNode;break e}}m?function b(C,S,R){var G=C.tag,q=G===5||G===6;if(q)C=q?C.stateNode:C.stateNode.instance,S?R.nodeType===8?R.parentNode.insertBefore(C,S):R.insertBefore(C,S):(R.nodeType===8?(S=R.parentNode).insertBefore(C,R):(S=R).appendChild(C),(R=R._reactRootContainer)!==null&&R!==void 0||S.onclick!==null||(S.onclick=jn));else if(G!==4&&(C=C.child)!==null)for(b(C,S,R),C=C.sibling;C!==null;)b(C,S,R),C=C.sibling}(a,d,l):function b(C,S,R){var G=C.tag,q=G===5||G===6;if(q)C=q?C.stateNode:C.stateNode.instance,S?R.insertBefore(C,S):R.appendChild(C);else if(G!==4&&(C=C.child)!==null)for(b(C,S,R),C=C.sibling;C!==null;)b(C,S,R),C=C.sibling}(a,d,l)}function cp(a,l,d){for(var m,b,C=l,S=!1;;){if(!S){S=C.return;e:for(;;){if(S===null)throw Error(u(160));switch(m=S.stateNode,S.tag){case 5:b=!1;break e;case 3:case 4:m=m.containerInfo,b=!0;break e}S=S.return}S=!0}if(C.tag===5||C.tag===6){e:for(var R=a,G=C,q=d,he=G;;)if(op(R,he,q),he.child!==null&&he.tag!==4)he.child.return=he,he=he.child;else{if(he===G)break e;for(;he.sibling===null;){if(he.return===null||he.return===G)break e;he=he.return}he.sibling.return=he.return,he=he.sibling}b?(R=m,G=C.stateNode,R.nodeType===8?R.parentNode.removeChild(G):R.removeChild(G)):m.removeChild(C.stateNode)}else if(C.tag===4){if(C.child!==null){m=C.stateNode.containerInfo,b=!0,C.child.return=C,C=C.child;continue}}else if(op(a,C,d),C.child!==null){C.child.return=C,C=C.child;continue}if(C===l)break;for(;C.sibling===null;){if(C.return===null||C.return===l)return;(C=C.return).tag===4&&(S=!1)}C.sibling.return=C.return,C=C.sibling}}function xd(a,l){switch(l.tag){case 0:case 11:case 14:case 15:case 22:return void ip(3,l);case 1:return;case 5:var d=l.stateNode;if(d!=null){var m=l.memoizedProps,b=a!==null?a.memoizedProps:m;a=l.type;var C=l.updateQueue;if(l.updateQueue=null,C!==null){for(d[Vs]=m,a==="input"&&m.type==="radio"&&m.name!=null&&ho(d,m),Bs(a,b),l=Bs(a,m),b=0;b<C.length;b+=2){var S=C[b],R=C[b+1];S==="style"?Ll(d,R):S==="dangerouslySetInnerHTML"?et(d,R):S==="children"?mt(d,R):$e(d,S,R,l)}switch(a){case"input":Uo(d,m);break;case"textarea":Dr(d,m);break;case"select":l=d._wrapperState.wasMultiple,d._wrapperState.wasMultiple=!!m.multiple,(a=m.value)!=null?St(d,!!m.multiple,a,!1):l!==!!m.multiple&&(m.defaultValue!=null?St(d,!!m.multiple,m.defaultValue,!0):St(d,!!m.multiple,m.multiple?[]:"",!1))}}}return;case 6:if(l.stateNode===null)throw Error(u(162));return void(l.stateNode.nodeValue=l.memoizedProps);case 3:return void((l=l.stateNode).hydrate&&(l.hydrate=!1,jo(l.containerInfo)));case 12:return;case 13:if(d=l,l.memoizedState===null?m=!1:(m=!0,d=l.child,Pd=Ni()),d!==null)e:for(a=d;;){if(a.tag===5)C=a.stateNode,m?typeof(C=C.style).setProperty=="function"?C.setProperty("display","none","important"):C.display="none":(C=a.stateNode,b=(b=a.memoizedProps.style)!=null&&b.hasOwnProperty("display")?b.display:null,C.style.display=Vl("display",b));else if(a.tag===6)a.stateNode.nodeValue=m?"":a.memoizedProps;else{if(a.tag===13&&a.memoizedState!==null&&a.memoizedState.dehydrated===null){(C=a.child.sibling).return=a,a=C;continue}if(a.child!==null){a.child.return=a,a=a.child;continue}}if(a===d)break;for(;a.sibling===null;){if(a.return===null||a.return===d)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}return void up(l);case 19:return void up(l);case 17:return}throw Error(u(163))}function up(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new T_),l.forEach(function(m){var b=B_.bind(null,a,m);d.has(m)||(d.add(m),m.then(b,b))})}}var P_=typeof WeakMap=="function"?WeakMap:Map;function dp(a,l,d){(d=Eo(d,null)).tag=3,d.payload={element:null};var m=l.value;return d.callback=function(){Ic||(Ic=!0,Ad=m),Sd(a,l)},d}function hp(a,l,d){(d=Eo(d,null)).tag=3;var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var b=l.value;d.payload=function(){return Sd(a,l),m(b)}}var C=a.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(d.callback=function(){typeof m!="function"&&(xo===null?xo=new Set([this]):xo.add(this),Sd(a,l));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})}),d}var fp,A_=Math.ceil,Cc=ue.ReactCurrentDispatcher,mp=ue.ReactCurrentOwner,rs=0,Tc=3,Sc=4,tt=0,ki=null,nt=null,oi=0,wn=rs,xc=null,Gr=1073741823,al=1073741823,Pc=null,ll=0,Ac=!1,Pd=0,He=null,Ic=!1,Ad=null,xo=null,Rc=!1,cl=null,ul=90,os=null,dl=0,Id=null,Mc=0;function br(){return(48&tt)!=0?1073741821-(Ni()/10|0):Mc!==0?Mc:Mc=1073741821-(Ni()/10|0)}function ss(a,l,d){if((2&(l=l.mode))==0)return 1073741823;var m=oc();if((4&l)==0)return m===99?1073741823:1073741822;if((16&tt)!=0)return oi;if(d!==null)a=sc(a,0|d.timeoutMs||5e3,250);else switch(m){case 99:a=1073741823;break;case 98:a=sc(a,150,100);break;case 97:case 96:a=sc(a,5e3,250);break;case 95:a=2;break;default:throw Error(u(326))}return ki!==null&&a===oi&&--a,a}function Po(a,l){if(50<dl)throw dl=0,Id=null,Error(u(185));if((a=Oc(a,l))!==null){var d=oc();l===1073741823?(8&tt)!=0&&(48&tt)==0?Rd(a):(Ei(a),tt===0&&mr()):Ei(a),(4&tt)==0||d!==98&&d!==99||(os===null?os=new Map([[a,l]]):((d=os.get(a))===void 0||d>l)&&os.set(a,l))}}function Oc(a,l){a.expirationTime<l&&(a.expirationTime=l);var d=a.alternate;d!==null&&d.expirationTime<l&&(d.expirationTime=l);var m=a.return,b=null;if(m===null&&a.tag===3)b=a.stateNode;else for(;m!==null;){if(d=m.alternate,m.childExpirationTime<l&&(m.childExpirationTime=l),d!==null&&d.childExpirationTime<l&&(d.childExpirationTime=l),m.return===null&&m.tag===3){b=m.stateNode;break}m=m.return}return b!==null&&(ki===b&&(Dc(l),wn===Sc&&ds(b,oi)),Tp(b,l)),b}function Nc(a){var l=a.lastExpiredTime;if(l!==0||!Cp(a,l=a.firstPendingTime))return l;var d=a.lastPingedTime;return 2>=(a=d>(a=a.nextKnownPendingLevel)?d:a)&&l!==a?0:a}function Ei(a){if(a.lastExpiredTime!==0)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=km(Rd.bind(null,a));else{var l=Nc(a),d=a.callbackNode;if(l===0)d!==null&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var m=br();if(l===1073741823?m=99:l===1||l===2?m=95:m=0>=(m=10*(1073741821-l)-10*(1073741821-m))?99:250>=m?98:5250>=m?97:95,d!==null){var b=a.callbackPriority;if(a.callbackExpirationTime===l&&b>=m)return;d!==wm&&hm(d)}a.callbackExpirationTime=l,a.callbackPriority=m,l=l===1073741823?km(Rd.bind(null,a)):_m(m,pp.bind(null,a),{timeout:10*(1073741821-l)-Ni()}),a.callbackNode=l}}}function pp(a,l){if(Mc=0,l)return Ld(a,l=br()),Ei(a),null;var d=Nc(a);if(d!==0){if(l=a.callbackNode,(48&tt)!=0)throw Error(u(327));if(Xs(),a===ki&&d===oi||as(a,d),nt!==null){var m=tt;tt|=16;for(var b=vp();;)try{R_();break}catch(R){wp(a,R)}if(nd(),tt=m,Cc.current=b,wn===1)throw l=xc,as(a,d),ds(a,d),Ei(a),l;if(nt===null)switch(b=a.finishedWork=a.current.alternate,a.finishedExpirationTime=d,m=wn,ki=null,m){case rs:case 1:throw Error(u(345));case 2:Ld(a,2<d?2:d);break;case Tc:if(ds(a,d),d===(m=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Md(b)),Gr===1073741823&&10<(b=Pd+500-Ni())){if(Ac){var C=a.lastPingedTime;if(C===0||C>=d){a.lastPingedTime=d,as(a,d);break}}if((C=Nc(a))!==0&&C!==d)break;if(m!==0&&m!==d){a.lastPingedTime=m;break}a.timeoutHandle=ja(ls.bind(null,a),b);break}ls(a);break;case Sc:if(ds(a,d),d===(m=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Md(b)),Ac&&((b=a.lastPingedTime)===0||b>=d)){a.lastPingedTime=d,as(a,d);break}if((b=Nc(a))!==0&&b!==d)break;if(m!==0&&m!==d){a.lastPingedTime=m;break}if(al!==1073741823?m=10*(1073741821-al)-Ni():Gr===1073741823?m=0:(m=10*(1073741821-Gr)-5e3,0>(m=(b=Ni())-m)&&(m=0),(d=10*(1073741821-d)-b)<(m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*A_(m/1960))-m)&&(m=d)),10<m){a.timeoutHandle=ja(ls.bind(null,a),m);break}ls(a);break;case 5:if(Gr!==1073741823&&Pc!==null){C=Gr;var S=Pc;if(0>=(m=0|S.busyMinDurationMs)?m=0:(b=0|S.busyDelayMs,m=(C=Ni()-(10*(1073741821-C)-(0|S.timeoutMs||5e3)))<=b?0:b+m-C),10<m){ds(a,d),a.timeoutHandle=ja(ls.bind(null,a),m);break}}ls(a);break;default:throw Error(u(329))}if(Ei(a),a.callbackNode===l)return pp.bind(null,a)}}return null}function Rd(a){var l=a.lastExpiredTime;if(l=l!==0?l:1073741823,(48&tt)!=0)throw Error(u(327));if(Xs(),a===ki&&l===oi||as(a,l),nt!==null){var d=tt;tt|=16;for(var m=vp();;)try{I_();break}catch(b){wp(a,b)}if(nd(),tt=d,Cc.current=m,wn===1)throw d=xc,as(a,l),ds(a,l),Ei(a),d;if(nt!==null)throw Error(u(261));a.finishedWork=a.current.alternate,a.finishedExpirationTime=l,ki=null,ls(a),Ei(a)}return null}function gp(a,l){var d=tt;tt|=1;try{return a(l)}finally{(tt=d)===0&&mr()}}function bp(a,l){var d=tt;tt&=-2,tt|=8;try{return a(l)}finally{(tt=d)===0&&mr()}}function as(a,l){a.finishedWork=null,a.finishedExpirationTime=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,ju(d)),nt!==null)for(d=nt.return;d!==null;){var m=d;switch(m.tag){case 1:(m=m.type.childContextTypes)!=null&&tc();break;case 3:Ys(),Wt(ii),Wt(Nn);break;case 5:cd(m);break;case 4:Ys();break;case 13:case 19:Wt(en);break;case 10:id(m)}d=d.return}ki=a,nt=us(a.current,null),oi=l,wn=rs,xc=null,al=Gr=1073741823,Pc=null,ll=0,Ac=!1}function wp(a,l){for(;;){try{if(nd(),pc.current=_c,gc)for(var d=pn.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}if(To=0,Dn=Gn=pn=null,gc=!1,nt===null||nt.return===null)return wn=1,xc=l,nt=null;e:{var b=a,C=nt.return,S=nt,R=l;if(l=oi,S.effectTag|=2048,S.firstEffect=S.lastEffect=null,R!==null&&typeof R=="object"&&typeof R.then=="function"){var G=R;if((2&S.mode)==0){var q=S.alternate;q?(S.updateQueue=q.updateQueue,S.memoizedState=q.memoizedState,S.expirationTime=q.expirationTime):(S.updateQueue=null,S.memoizedState=null)}var he=(1&en.current)!=0,Fe=C;do{var Xe;if(Xe=Fe.tag===13){var bt=Fe.memoizedState;if(bt!==null)Xe=bt.dehydrated!==null;else{var Li=Fe.memoizedProps;Xe=Li.fallback!==void 0&&(Li.unstable_avoidThisFallback!==!0||!he)}}if(Xe){var Yn=Fe.updateQueue;if(Yn===null){var Q=new Set;Q.add(G),Fe.updateQueue=Q}else Yn.add(G);if((2&Fe.mode)==0){if(Fe.effectTag|=64,S.effectTag&=-2981,S.tag===1)if(S.alternate===null)S.tag=17;else{var J=Eo(1073741823,null);J.tag=2,Co(S,J)}S.expirationTime=1073741823;break e}R=void 0,S=l;var le=b.pingCache;if(le===null?(le=b.pingCache=new P_,R=new Set,le.set(G,R)):(R=le.get(G))===void 0&&(R=new Set,le.set(G,R)),!R.has(S)){R.add(S);var _e=D_.bind(null,b,G,S);G.then(_e,_e)}Fe.effectTag|=4096,Fe.expirationTime=l;break e}Fe=Fe.return}while(Fe!==null);R=Error((Hn(S.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+co(S))}wn!==5&&(wn=2),R=Td(R,S),Fe=C;do{switch(Fe.tag){case 3:G=R,Fe.effectTag|=4096,Fe.expirationTime=l,Tm(Fe,dp(Fe,G,l));break e;case 1:G=R;var Ae=Fe.type,De=Fe.stateNode;if((64&Fe.effectTag)==0&&(typeof Ae.getDerivedStateFromError=="function"||De!==null&&typeof De.componentDidCatch=="function"&&(xo===null||!xo.has(De)))){Fe.effectTag|=4096,Fe.expirationTime=l,Tm(Fe,hp(Fe,G,l));break e}}Fe=Fe.return}while(Fe!==null)}nt=kp(nt)}catch(Qe){l=Qe;continue}break}}function vp(){var a=Cc.current;return Cc.current=_c,a===null?_c:a}function yp(a,l){a<Gr&&2<a&&(Gr=a),l!==null&&a<al&&2<a&&(al=a,Pc=l)}function Dc(a){a>ll&&(ll=a)}function I_(){for(;nt!==null;)nt=_p(nt)}function R_(){for(;nt!==null&&!b_();)nt=_p(nt)}function _p(a){var l=fp(a.alternate,a,oi);return a.memoizedProps=a.pendingProps,l===null&&(l=kp(a)),mp.current=null,l}function kp(a){nt=a;do{var l=nt.alternate;if(a=nt.return,(2048&nt.effectTag)==0){if(l=E_(l,nt,oi),oi===1||nt.childExpirationTime!==1){for(var d=0,m=nt.child;m!==null;){var b=m.expirationTime,C=m.childExpirationTime;b>d&&(d=b),C>d&&(d=C),m=m.sibling}nt.childExpirationTime=d}if(l!==null)return l;a!==null&&(2048&a.effectTag)==0&&(a.firstEffect===null&&(a.firstEffect=nt.firstEffect),nt.lastEffect!==null&&(a.lastEffect!==null&&(a.lastEffect.nextEffect=nt.firstEffect),a.lastEffect=nt.lastEffect),1<nt.effectTag&&(a.lastEffect!==null?a.lastEffect.nextEffect=nt:a.firstEffect=nt,a.lastEffect=nt))}else{if((l=C_(nt))!==null)return l.effectTag&=2047,l;a!==null&&(a.firstEffect=a.lastEffect=null,a.effectTag|=2048)}if((l=nt.sibling)!==null)return l;nt=a}while(nt!==null);return wn===rs&&(wn=5),null}function Md(a){var l=a.expirationTime;return l>(a=a.childExpirationTime)?l:a}function ls(a){var l=oc();return _o(99,M_.bind(null,a,l)),null}function M_(a,l){do Xs();while(cl!==null);if((48&tt)!=0)throw Error(u(327));var d=a.finishedWork,m=a.finishedExpirationTime;if(d===null)return null;if(a.finishedWork=null,a.finishedExpirationTime=0,d===a.current)throw Error(u(177));a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90,a.nextKnownPendingLevel=0;var b=Md(d);if(a.firstPendingTime=b,m<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:m<=a.firstSuspendedTime&&(a.firstSuspendedTime=m-1),m<=a.lastPingedTime&&(a.lastPingedTime=0),m<=a.lastExpiredTime&&(a.lastExpiredTime=0),a===ki&&(nt=ki=null,oi=0),1<d.effectTag?d.lastEffect!==null?(d.lastEffect.nextEffect=d,b=d.firstEffect):b=d:b=d.firstEffect,b!==null){var C=tt;tt|=32,mp.current=null,Ua=Ko;var S=Ha();if(hr(S)){if("selectionStart"in S)var R={start:S.selectionStart,end:S.selectionEnd};else e:{var G=(R=(R=S.ownerDocument)&&R.defaultView||window).getSelection&&R.getSelection();if(G&&G.rangeCount!==0){R=G.anchorNode;var q=G.anchorOffset,he=G.focusNode;G=G.focusOffset;try{R.nodeType,he.nodeType}catch{R=null;break e}var Fe=0,Xe=-1,bt=-1,Li=0,Yn=0,Q=S,J=null;t:for(;;){for(var le;Q!==R||q!==0&&Q.nodeType!==3||(Xe=Fe+q),Q!==he||G!==0&&Q.nodeType!==3||(bt=Fe+G),Q.nodeType===3&&(Fe+=Q.nodeValue.length),(le=Q.firstChild)!==null;)J=Q,Q=le;for(;;){if(Q===S)break t;if(J===R&&++Li===q&&(Xe=Fe),J===he&&++Yn===G&&(bt=Fe),(le=Q.nextSibling)!==null)break;J=(Q=J).parentNode}Q=le}R=Xe===-1||bt===-1?null:{start:Xe,end:bt}}else R=null}R=R||{start:0,end:0}}else R=null;Wa={activeElementDetached:null,focusedElem:S,selectionRange:R},Ko=!1,He=b;do try{O_()}catch(st){if(He===null)throw Error(u(330));cs(He,st),He=He.nextEffect}while(He!==null);He=b;do try{for(S=a,R=l;He!==null;){var _e=He.effectTag;if(16&_e&&mt(He.stateNode,""),128&_e){var Ae=He.alternate;if(Ae!==null){var De=Ae.ref;De!==null&&(typeof De=="function"?De(null):De.current=null)}}switch(1038&_e){case 2:lp(He),He.effectTag&=-3;break;case 6:lp(He),He.effectTag&=-3,xd(He.alternate,He);break;case 1024:He.effectTag&=-1025;break;case 1028:He.effectTag&=-1025,xd(He.alternate,He);break;case 4:xd(He.alternate,He);break;case 8:cp(S,q=He,R),sp(q)}He=He.nextEffect}}catch(st){if(He===null)throw Error(u(330));cs(He,st),He=He.nextEffect}while(He!==null);if(De=Wa,Ae=Ha(),_e=De.focusedElem,R=De.selectionRange,Ae!==_e&&_e&&_e.ownerDocument&&function st(vn,Yr){return!(!vn||!Yr)&&(vn===Yr||(!vn||vn.nodeType!==3)&&(Yr&&Yr.nodeType===3?st(vn,Yr.parentNode):"contains"in vn?vn.contains(Yr):!!vn.compareDocumentPosition&&!!(16&vn.compareDocumentPosition(Yr))))}(_e.ownerDocument.documentElement,_e)){for(R!==null&&hr(_e)&&(Ae=R.start,(De=R.end)===void 0&&(De=Ae),"selectionStart"in _e?(_e.selectionStart=Ae,_e.selectionEnd=Math.min(De,_e.value.length)):(De=(Ae=_e.ownerDocument||document)&&Ae.defaultView||window).getSelection&&(De=De.getSelection(),q=_e.textContent.length,S=Math.min(R.start,q),R=R.end===void 0?S:Math.min(R.end,q),!De.extend&&S>R&&(q=R,R=S,S=q),q=za(_e,S),he=za(_e,R),q&&he&&(De.rangeCount!==1||De.anchorNode!==q.node||De.anchorOffset!==q.offset||De.focusNode!==he.node||De.focusOffset!==he.offset)&&((Ae=Ae.createRange()).setStart(q.node,q.offset),De.removeAllRanges(),S>R?(De.addRange(Ae),De.extend(he.node,he.offset)):(Ae.setEnd(he.node,he.offset),De.addRange(Ae))))),Ae=[],De=_e;De=De.parentNode;)De.nodeType===1&&Ae.push({element:De,left:De.scrollLeft,top:De.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<Ae.length;_e++)(De=Ae[_e]).element.scrollLeft=De.left,De.element.scrollTop=De.top}Ko=!!Ua,Wa=Ua=null,a.current=d,He=b;do try{for(_e=a;He!==null;){var Qe=He.effectTag;if(36&Qe&&x_(_e,He.alternate,He),128&Qe){Ae=void 0;var wt=He.ref;if(wt!==null){var ln=He.stateNode;switch(He.tag){case 5:Ae=ln;break;default:Ae=ln}typeof wt=="function"?wt(Ae):wt.current=Ae}}He=He.nextEffect}}catch(st){if(He===null)throw Error(u(330));cs(He,st),He=He.nextEffect}while(He!==null);He=null,w_(),tt=C}else a.current=d;if(Rc)Rc=!1,cl=a,ul=l;else for(He=b;He!==null;)l=He.nextEffect,He.nextEffect=null,He=l;if((l=a.firstPendingTime)===0&&(xo=null),l===1073741823?a===Id?dl++:(dl=0,Id=a):dl=0,typeof Od=="function"&&Od(d.stateNode,m),Ei(a),Ic)throw Ic=!1,a=Ad,Ad=null,a;return(8&tt)!=0||mr(),null}function O_(){for(;He!==null;){var a=He.effectTag;(256&a)!=0&&S_(He.alternate,He),(512&a)==0||Rc||(Rc=!0,_m(97,function(){return Xs(),null})),He=He.nextEffect}}function Xs(){if(ul!==90){var a=97<ul?97:ul;return ul=90,_o(a,N_)}}function N_(){if(cl===null)return!1;var a=cl;if(cl=null,(48&tt)!=0)throw Error(u(331));var l=tt;for(tt|=32,a=a.current.firstEffect;a!==null;){try{var d=a;if((512&d.effectTag)!=0)switch(d.tag){case 0:case 11:case 15:case 22:ip(5,d),rp(5,d)}}catch(m){if(a===null)throw Error(u(330));cs(a,m)}d=a.nextEffect,a.nextEffect=null,a=d}return tt=l,mr(),!0}function Ep(a,l,d){Co(a,l=dp(a,l=Td(d,l),1073741823)),(a=Oc(a,1073741823))!==null&&Ei(a)}function cs(a,l){if(a.tag===3)Ep(a,a,l);else for(var d=a.return;d!==null;){if(d.tag===3){Ep(d,a,l);break}if(d.tag===1){var m=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(xo===null||!xo.has(m))){Co(d,a=hp(d,a=Td(l,a),1073741823)),(d=Oc(d,1073741823))!==null&&Ei(d);break}}d=d.return}}function D_(a,l,d){var m=a.pingCache;m!==null&&m.delete(l),ki===a&&oi===d?wn===Sc||wn===Tc&&Gr===1073741823&&Ni()-Pd<500?as(a,oi):Ac=!0:Cp(a,d)&&((l=a.lastPingedTime)!==0&&l<d||(a.lastPingedTime=d,Ei(a)))}function B_(a,l){var d=a.stateNode;d!==null&&d.delete(l),(l=0)==0&&(l=ss(l=br(),a,null)),(a=Oc(a,l))!==null&&Ei(a)}fp=function(a,l,d){var m=l.expirationTime;if(a!==null){var b=l.pendingProps;if(a.memoizedProps!==b||ii.current)gr=!0;else{if(m<d){switch(gr=!1,l.tag){case 3:Ym(l),yd();break;case 5:if(Mm(l),4&l.mode&&d!==1&&b.hidden)return l.expirationTime=l.childExpirationTime=1,null;break;case 1:ri(l.type)&&nc(l);break;case 4:ld(l,l.stateNode.containerInfo);break;case 10:m=l.memoizedProps.value,b=l.type._context,Zt(ac,b._currentValue),b._currentValue=m;break;case 13:if(l.memoizedState!==null)return(m=l.child.childExpirationTime)!==0&&m>=d?Zm(a,l,d):(Zt(en,1&en.current),(l=Kr(a,l,d))!==null?l.sibling:null);Zt(en,1&en.current);break;case 19:if(m=l.childExpirationTime>=d,(64&a.effectTag)!=0){if(m)return tp(a,l,d);l.effectTag|=64}if((b=l.memoizedState)!==null&&(b.rendering=null,b.tail=null),Zt(en,en.current),!m)return null}return Kr(a,l,d)}gr=!1}}else gr=!1;switch(l.expirationTime=0,l.tag){case 2:if(m=l.type,a!==null&&(a.alternate=null,l.alternate=null,l.effectTag|=2),a=l.pendingProps,b=js(l,Nn.current),Ks(l,d),b=hd(null,l,m,a,b,d),l.effectTag|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0){if(l.tag=1,l.memoizedState=null,l.updateQueue=null,ri(m)){var C=!0;nc(l)}else C=!1;l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,rd(l);var S=m.getDerivedStateFromProps;typeof S=="function"&&uc(l,m,S,a),b.updater=dc,l.stateNode=b,b._reactInternalFiber=l,sd(l,m,a,d),l=kd(null,l,m,!0,C,d)}else l.tag=0,Vi(null,l,b,d),l=l.child;return l;case 16:e:{if(b=l.elementType,a!==null&&(a.alternate=null,l.alternate=null,l.effectTag|=2),a=l.pendingProps,function(he){if(he._status===-1){he._status=0;var Fe=he._ctor;Fe=Fe(),he._result=Fe,Fe.then(function(Xe){he._status===0&&(Xe=Xe.default,he._status=1,he._result=Xe)},function(Xe){he._status===0&&(he._status=2,he._result=Xe)})}}(b),b._status!==1)throw b._result;switch(b=b._result,l.type=b,C=l.tag=function(he){if(typeof he=="function")return Dd(he)?1:0;if(he!=null){if((he=he.$$typeof)===vt)return 11;if(he===xi)return 14}return 2}(b),a=tr(b,a),C){case 0:l=_d(null,l,b,a,d);break e;case 1:l=Gm(null,l,b,a,d);break e;case 11:l=$m(null,l,b,a,d);break e;case 14:l=jm(null,l,b,tr(b.type,a),m,d);break e}throw Error(u(306,b,""))}return l;case 0:return m=l.type,b=l.pendingProps,_d(a,l,m,b=l.elementType===m?b:tr(m,b),d);case 1:return m=l.type,b=l.pendingProps,Gm(a,l,m,b=l.elementType===m?b:tr(m,b),d);case 3:if(Ym(l),m=l.updateQueue,a===null||m===null)throw Error(u(282));if(m=l.pendingProps,b=(b=l.memoizedState)!==null?b.element:null,od(a,l),tl(l,m,null,d),(m=l.memoizedState.element)===b)yd(),l=Kr(a,l,d);else{if((b=l.stateNode.hydrate)&&(So=go(l.stateNode.containerInfo.firstChild),qr=l,b=is=!0),b)for(d=ad(l,null,m,d),l.child=d;d;)d.effectTag=-3&d.effectTag|1024,d=d.sibling;else Vi(a,l,m,d),yd();l=l.child}return l;case 5:return Mm(l),a===null&&vd(l),m=l.type,b=l.pendingProps,C=a!==null?a.memoizedProps:null,S=b.children,$a(m,b)?S=null:C!==null&&$a(m,C)&&(l.effectTag|=16),Km(a,l),4&l.mode&&d!==1&&b.hidden?(l.expirationTime=l.childExpirationTime=1,l=null):(Vi(a,l,S,d),l=l.child),l;case 6:return a===null&&vd(l),null;case 13:return Zm(a,l,d);case 4:return ld(l,l.stateNode.containerInfo),m=l.pendingProps,a===null?l.child=Gs(l,null,m,d):Vi(a,l,m,d),l.child;case 11:return m=l.type,b=l.pendingProps,$m(a,l,m,b=l.elementType===m?b:tr(m,b),d);case 7:return Vi(a,l,l.pendingProps,d),l.child;case 8:case 12:return Vi(a,l,l.pendingProps.children,d),l.child;case 10:e:{m=l.type._context,b=l.pendingProps,S=l.memoizedProps,C=b.value;var R=l.type._context;if(Zt(ac,R._currentValue),R._currentValue=C,S!==null)if(R=S.value,(C=xn(R,C)?0:0|(typeof m._calculateChangedBits=="function"?m._calculateChangedBits(R,C):1073741823))==0){if(S.children===b.children&&!ii.current){l=Kr(a,l,d);break e}}else for((R=l.child)!==null&&(R.return=l);R!==null;){var G=R.dependencies;if(G!==null){S=R.child;for(var q=G.firstContext;q!==null;){if(q.context===m&&(q.observedBits&C)!=0){R.tag===1&&((q=Eo(d,null)).tag=2,Co(R,q)),R.expirationTime<d&&(R.expirationTime=d),(q=R.alternate)!==null&&q.expirationTime<d&&(q.expirationTime=d),Cm(R.return,d),G.expirationTime<d&&(G.expirationTime=d);break}q=q.next}}else S=R.tag===10&&R.type===l.type?null:R.child;if(S!==null)S.return=R;else for(S=R;S!==null;){if(S===l){S=null;break}if((R=S.sibling)!==null){R.return=S.return,S=R;break}S=S.return}R=S}Vi(a,l,b.children,d),l=l.child}return l;case 9:return b=l.type,m=(C=l.pendingProps).children,Ks(l,d),m=m(b=Di(b,C.unstable_observedBits)),l.effectTag|=1,Vi(a,l,m,d),l.child;case 14:return C=tr(b=l.type,l.pendingProps),jm(a,l,b,C=tr(b.type,C),m,d);case 15:return qm(a,l,l.type,l.pendingProps,m,d);case 17:return m=l.type,b=l.pendingProps,b=l.elementType===m?b:tr(m,b),a!==null&&(a.alternate=null,l.alternate=null,l.effectTag|=2),l.tag=1,ri(m)?(a=!0,nc(l)):a=!1,Ks(l,d),Am(l,m,b),sd(l,m,b,d),kd(null,l,m,!0,a,d);case 19:return tp(a,l,d)}throw Error(u(156,l.tag))};var Od=null,Nd=null;function V_(a,l,d,m){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function wr(a,l,d,m){return new V_(a,l,d,m)}function Dd(a){return!(!(a=a.prototype)||!a.isReactComponent)}function us(a,l){var d=a.alternate;return d===null?((d=wr(a.tag,l,a.key,a.mode)).elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.effectTag=0,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null),d.childExpirationTime=a.childExpirationTime,d.expirationTime=a.expirationTime,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{expirationTime:l.expirationTime,firstContext:l.firstContext,responders:l.responders},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function Bc(a,l,d,m,b,C){var S=2;if(m=a,typeof a=="function")Dd(a)&&(S=1);else if(typeof a=="string")S=5;else e:switch(a){case qt:return Ao(d.children,b,C,l);case ui:S=8,b|=7;break;case zn:S=8,b|=1;break;case Jt:return(a=wr(12,d,l,8|b)).elementType=Jt,a.type=Jt,a.expirationTime=C,a;case ao:return(a=wr(13,d,l,b)).type=ao,a.elementType=ao,a.expirationTime=C,a;case lr:return(a=wr(19,d,l,b)).elementType=lr,a.expirationTime=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case dn:S=10;break e;case ci:S=9;break e;case vt:S=11;break e;case xi:S=14;break e;case lo:S=16,m=null;break e;case Ho:S=22;break e}throw Error(u(130,a==null?a:typeof a,""))}return(l=wr(S,d,l,b)).elementType=a,l.type=m,l.expirationTime=C,l}function Ao(a,l,d,m){return(a=wr(7,a,m,l)).expirationTime=d,a}function Bd(a,l,d){return(a=wr(6,a,null,l)).expirationTime=d,a}function Vd(a,l,d){return(l=wr(4,a.children!==null?a.children:[],a.key,l)).expirationTime=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function L_(a,l,d){this.tag=l,this.current=null,this.containerInfo=a,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=d,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Cp(a,l){var d=a.firstSuspendedTime;return a=a.lastSuspendedTime,d!==0&&d>=l&&a<=l}function ds(a,l){var d=a.firstSuspendedTime,m=a.lastSuspendedTime;d<l&&(a.firstSuspendedTime=l),(m>l||d===0)&&(a.lastSuspendedTime=l),l<=a.lastPingedTime&&(a.lastPingedTime=0),l<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function Tp(a,l){l>a.firstPendingTime&&(a.firstPendingTime=l);var d=a.firstSuspendedTime;d!==0&&(l>=d?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:l>=a.lastSuspendedTime&&(a.lastSuspendedTime=l+1),l>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=l))}function Ld(a,l){var d=a.lastExpiredTime;(d===0||d>l)&&(a.lastExpiredTime=l)}function Vc(a,l,d,m){var b=l.current,C=br(),S=nl.suspense;C=ss(C,b,S);e:if(d){t:{if(fi(d=d._reactInternalFiber)!==d||d.tag!==1)throw Error(u(170));var R=d;do{switch(R.tag){case 3:R=R.stateNode.context;break t;case 1:if(ri(R.type)){R=R.stateNode.__reactInternalMemoizedMergedChildContext;break t}}R=R.return}while(R!==null);throw Error(u(171))}if(d.tag===1){var G=d.type;if(ri(G)){d=um(d,G,R);break e}}d=R}else d=yo;return l.context===null?l.context=d:l.pendingContext=d,(l=Eo(C,S)).payload={element:a},(m=m===void 0?null:m)!==null&&(l.callback=m),Co(b,l),Po(b,C),C}function Fd(a){if(!(a=a.current).child)return null;switch(a.child.tag){case 5:default:return a.child.stateNode}}function Sp(a,l){(a=a.memoizedState)!==null&&a.dehydrated!==null&&a.retryTime<l&&(a.retryTime=l)}function zd(a,l){Sp(a,l),(a=a.alternate)&&Sp(a,l)}function Hd(a,l,d){var m=new L_(a,l,d=d!=null&&d.hydrate===!0),b=wr(3,null,null,l===2?7:l===1?3:0);m.current=b,b.stateNode=m,rd(b),a[Yo]=m.current,d&&l!==0&&function(C,S){var R=Gi(S);Aa.forEach(function(G){ti(G,S,R)}),Fu.forEach(function(G){ti(G,S,R)})}(0,a.nodeType===9?a:a.ownerDocument),this._internalRoot=m}function hl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Lc(a,l,d,m,b){var C=d._reactRootContainer;if(C){var S=C._internalRoot;if(typeof b=="function"){var R=b;b=function(){var q=Fd(S);R.call(q)}}Vc(l,S,a,b)}else{if(C=d._reactRootContainer=function(q,he){if(he||(he=!(!(he=q?q.nodeType===9?q.documentElement:q.firstChild:null)||he.nodeType!==1||!he.hasAttribute("data-reactroot"))),!he)for(var Fe;Fe=q.lastChild;)q.removeChild(Fe);return new Hd(q,0,he?{hydrate:!0}:void 0)}(d,m),S=C._internalRoot,typeof b=="function"){var G=b;b=function(){var q=Fd(S);G.call(q)}}bp(function(){Vc(l,S,a,b)})}return Fd(S)}function F_(a,l,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:un,key:m==null?null:""+m,children:a,containerInfo:l,implementation:d}}function xp(a,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hl(l))throw Error(u(200));return F_(a,l,null,d)}Hd.prototype.render=function(a){Vc(a,this._internalRoot,null,null)},Hd.prototype.unmount=function(){var a=this._internalRoot,l=a.containerInfo;Vc(null,a,null,function(){l[Yo]=null})},Vr=function(a){if(a.tag===13){var l=sc(br(),150,100);Po(a,l),zd(a,l)}},Tn=function(a){a.tag===13&&(Po(a,3),zd(a,3))},Lr=function(a){if(a.tag===13){var l=br();Po(a,l=ss(l,a,null)),zd(a,l)}},ke=function(a,l,d){switch(l){case"input":if(Uo(a,d),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==a&&m.form===a.form){var b=bo(m);if(!b)throw Error(u(90));Xn(m),Uo(m,b)}}}break;case"textarea":Dr(a,d);break;case"select":(l=d.value)!=null&&St(a,!!d.multiple,l,!1)}},pe=gp,Be=function(a,l,d,m,b){var C=tt;tt|=4;try{return _o(98,a.bind(null,l,d,m,b))}finally{(tt=C)===0&&mr()}},Pe=function(){(49&tt)==0&&(function(){if(os!==null){var a=os;os=null,a.forEach(function(l,d){Ld(d,l),Ei(d)}),mr()}}(),Xs())},Ve=function(a,l){var d=tt;tt|=2;try{return a(l)}finally{(tt=d)===0&&mr()}};var Pp,Ud,z_={Events:[Jo,Ur,bo,Ue,ve,wo,function(a){Yi(a,Ku)},D,re,Ns,hn,Xs,{current:!1}]};Ud=(Pp={findFiberByHostInstance:Xi,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(a){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)return!0;try{var d=l.inject(a);Od=function(m){try{l.onCommitFiberRoot(d,m,void 0,(64&m.current.effectTag)==64)}catch{}},Nd=function(m){try{l.onCommitFiberUnmount(d,m)}catch{}}}catch{}}(s({},Pp,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ue.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return(a=pt(a))===null?null:a.stateNode},findFiberByHostInstance:function(a){return Ud?Ud(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z_,n.createPortal=xp,n.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternalFiber;if(l===void 0)throw typeof a.render=="function"?Error(u(188)):Error(u(268,Object.keys(a)));return a=(a=pt(l))===null?null:a.stateNode},n.flushSync=function(a,l){if((48&tt)!=0)throw Error(u(187));var d=tt;tt|=1;try{return _o(99,a.bind(null,l))}finally{tt=d,mr()}},n.hydrate=function(a,l,d){if(!hl(l))throw Error(u(200));return Lc(null,a,l,!0,d)},n.render=function(a,l,d){if(!hl(l))throw Error(u(200));return Lc(null,a,l,!1,d)},n.unmountComponentAtNode=function(a){if(!hl(a))throw Error(u(40));return!!a._reactRootContainer&&(bp(function(){Lc(null,null,a,!1,function(){a._reactRootContainer=null,a[Yo]=null})}),!0)},n.unstable_batchedUpdates=gp,n.unstable_createPortal=function(a,l){return xp(a,l,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)},n.unstable_renderSubtreeIntoContainer=function(a,l,d,m){if(!hl(d))throw Error(u(200));if(a==null||a._reactInternalFiber===void 0)throw Error(u(38));return Lc(a,l,d,!1,m)},n.version="16.14.0"},function(t,n,r){t.exports=r(22)},function(t,n,r){var o,s,c,u,h;if(typeof window=="undefined"||typeof MessageChannel!="function"){var f=null,p=null,y=function(){if(f!==null)try{var j=n.unstable_now();f(!0,j),f=null}catch(de){throw setTimeout(y,0),de}},T=Date.now();n.unstable_now=function(){return Date.now()-T},o=function(j){f!==null?setTimeout(o,0,j):(f=j,setTimeout(y,0))},s=function(j,de){p=setTimeout(j,de)},c=function(){clearTimeout(p)},u=function(){return!1},h=n.unstable_forceFrameRate=function(){}}else{var A=window.performance,M=window.Date,B=window.setTimeout,O=window.clearTimeout;if(typeof console!="undefined"){var V=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof V!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof A=="object"&&typeof A.now=="function")n.unstable_now=function(){return A.now()};else{var F=M.now();n.unstable_now=function(){return M.now()-F}}var Z=!1,ae=null,W=-1,se=5,te=0;u=function(){return n.unstable_now()>=te},h=function(){},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):se=0<j?Math.floor(1e3/j):5};var ve=new MessageChannel,ee=ve.port2;ve.port1.onmessage=function(){if(ae!==null){var j=n.unstable_now();te=j+se;try{ae(!0,j)?ee.postMessage(null):(Z=!1,ae=null)}catch(de){throw ee.postMessage(null),de}}else Z=!1},o=function(j){ae=j,Z||(Z=!0,ee.postMessage(null))},s=function(j,de){W=B(function(){j(n.unstable_now())},de)},c=function(){O(W),W=-1}}function Oe(j,de){var v=j.length;j.push(de);e:for(;;){var E=v-1>>>1,x=j[E];if(!(x!==void 0&&0<ke(x,de)))break e;j[E]=de,j[v]=x,v=E}}function Ue(j){return(j=j[0])===void 0?null:j}function we(j){var de=j[0];if(de!==void 0){var v=j.pop();if(v!==de){j[0]=v;e:for(var E=0,x=j.length;E<x;){var L=2*(E+1)-1,z=j[L],U=L+1,ue=j[U];if(z!==void 0&&0>ke(z,v))ue!==void 0&&0>ke(ue,z)?(j[E]=ue,j[U]=v,E=U):(j[E]=z,j[L]=v,E=L);else{if(!(ue!==void 0&&0>ke(ue,v)))break e;j[E]=ue,j[U]=v,E=U}}}return de}return null}function ke(j,de){var v=j.sortIndex-de.sortIndex;return v!==0?v:j.id-de.id}var Te=[],ie=[],me=1,D=null,re=3,pe=!1,Be=!1,Pe=!1;function Ve(j){for(var de=Ue(ie);de!==null;){if(de.callback===null)we(ie);else{if(!(de.startTime<=j))break;we(ie),de.sortIndex=de.expirationTime,Oe(Te,de)}de=Ue(ie)}}function Me(j){if(Pe=!1,Ve(j),!Be)if(Ue(Te)!==null)Be=!0,o(qe);else{var de=Ue(ie);de!==null&&s(Me,de.startTime-j)}}function qe(j,de){Be=!1,Pe&&(Pe=!1,c()),pe=!0;var v=re;try{for(Ve(de),D=Ue(Te);D!==null&&(!(D.expirationTime>de)||j&&!u());){var E=D.callback;if(E!==null){D.callback=null,re=D.priorityLevel;var x=E(D.expirationTime<=de);de=n.unstable_now(),typeof x=="function"?D.callback=x:D===Ue(Te)&&we(Te),Ve(de)}else we(Te);D=Ue(Te)}if(D!==null)var L=!0;else{var z=Ue(ie);z!==null&&s(Me,z.startTime-de),L=!1}return L}finally{D=null,re=v,pe=!1}}function lt(j){switch(j){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var K=h;n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){Be||pe||(Be=!0,o(qe))},n.unstable_getCurrentPriorityLevel=function(){return re},n.unstable_getFirstCallbackNode=function(){return Ue(Te)},n.unstable_next=function(j){switch(re){case 1:case 2:case 3:var de=3;break;default:de=re}var v=re;re=de;try{return j()}finally{re=v}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=K,n.unstable_runWithPriority=function(j,de){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var v=re;re=j;try{return de()}finally{re=v}},n.unstable_scheduleCallback=function(j,de,v){var E=n.unstable_now();if(typeof v=="object"&&v!==null){var x=v.delay;x=typeof x=="number"&&0<x?E+x:E,v=typeof v.timeout=="number"?v.timeout:lt(j)}else v=lt(j),x=E;return j={id:me++,callback:de,priorityLevel:j,startTime:x,expirationTime:v=x+v,sortIndex:-1},x>E?(j.sortIndex=x,Oe(ie,j),Ue(Te)===null&&j===Ue(ie)&&(Pe?c():Pe=!0,s(Me,x-E))):(j.sortIndex=v,Oe(Te,j),Be||pe||(Be=!0,o(qe))),j},n.unstable_shouldYield=function(){var j=n.unstable_now();Ve(j);var de=Ue(Te);return de!==D&&D!==null&&de!==null&&de.callback!==null&&de.startTime<=j&&de.expirationTime<D.expirationTime||u()},n.unstable_wrapCallback=function(j){var de=re;return function(){var v=re;re=de;try{return j.apply(this,arguments)}finally{re=v}}}},function(t,n,r){var o=r(24);function s(){}function c(){}c.resetWarningCache=s,t.exports=function(){function u(p,y,T,A,M,B){if(B!==o){var O=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw O.name="Invariant Violation",O}}function h(){return u}u.isRequired=u;var f={array:u,bool:u,func:u,number:u,object:u,string:u,symbol:u,any:u,arrayOf:h,element:u,elementType:u,instanceOf:h,node:u,objectOf:h,oneOf:h,oneOfType:h,shape:h,exact:h,checkPropTypes:c,resetWarningCache:s};return f.PropTypes=f,f}},function(t,n,r){t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,n,r){t.exports=r(26)},function(t,n,r){var o=typeof Symbol=="function"&&Symbol.for,s=o?Symbol.for("react.element"):60103,c=o?Symbol.for("react.portal"):60106,u=o?Symbol.for("react.fragment"):60107,h=o?Symbol.for("react.strict_mode"):60108,f=o?Symbol.for("react.profiler"):60114,p=o?Symbol.for("react.provider"):60109,y=o?Symbol.for("react.context"):60110,T=o?Symbol.for("react.async_mode"):60111,A=o?Symbol.for("react.concurrent_mode"):60111,M=o?Symbol.for("react.forward_ref"):60112,B=o?Symbol.for("react.suspense"):60113,O=o?Symbol.for("react.suspense_list"):60120,V=o?Symbol.for("react.memo"):60115,F=o?Symbol.for("react.lazy"):60116,Z=o?Symbol.for("react.block"):60121,ae=o?Symbol.for("react.fundamental"):60117,W=o?Symbol.for("react.responder"):60118,se=o?Symbol.for("react.scope"):60119;function te(ee){if(typeof ee=="object"&&ee!==null){var Oe=ee.$$typeof;switch(Oe){case s:switch(ee=ee.type){case T:case A:case u:case f:case h:case B:return ee;default:switch(ee=ee&&ee.$$typeof){case y:case M:case F:case V:case p:return ee;default:return Oe}}case c:return Oe}}}function ve(ee){return te(ee)===A}n.AsyncMode=T,n.ConcurrentMode=A,n.ContextConsumer=y,n.ContextProvider=p,n.Element=s,n.ForwardRef=M,n.Fragment=u,n.Lazy=F,n.Memo=V,n.Portal=c,n.Profiler=f,n.StrictMode=h,n.Suspense=B,n.isAsyncMode=function(ee){return ve(ee)||te(ee)===T},n.isConcurrentMode=ve,n.isContextConsumer=function(ee){return te(ee)===y},n.isContextProvider=function(ee){return te(ee)===p},n.isElement=function(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===s},n.isForwardRef=function(ee){return te(ee)===M},n.isFragment=function(ee){return te(ee)===u},n.isLazy=function(ee){return te(ee)===F},n.isMemo=function(ee){return te(ee)===V},n.isPortal=function(ee){return te(ee)===c},n.isProfiler=function(ee){return te(ee)===f},n.isStrictMode=function(ee){return te(ee)===h},n.isSuspense=function(ee){return te(ee)===B},n.isValidElementType=function(ee){return typeof ee=="string"||typeof ee=="function"||ee===u||ee===A||ee===f||ee===h||ee===B||ee===O||typeof ee=="object"&&ee!==null&&(ee.$$typeof===F||ee.$$typeof===V||ee.$$typeof===p||ee.$$typeof===y||ee.$$typeof===M||ee.$$typeof===ae||ee.$$typeof===W||ee.$$typeof===se||ee.$$typeof===Z)},n.typeOf=te},function(t,n,r){var o=60103,s=60106,c=60107,u=60108,h=60114,f=60109,p=60110,y=60112,T=60113,A=60120,M=60115,B=60116,O=60121,V=60122,F=60117,Z=60129,ae=60131;if(typeof Symbol=="function"&&Symbol.for){var W=Symbol.for;o=W("react.element"),s=W("react.portal"),c=W("react.fragment"),u=W("react.strict_mode"),h=W("react.profiler"),f=W("react.provider"),p=W("react.context"),y=W("react.forward_ref"),T=W("react.suspense"),A=W("react.suspense_list"),M=W("react.memo"),B=W("react.lazy"),O=W("react.block"),V=W("react.server.block"),F=W("react.fundamental"),Z=W("react.debug_trace_mode"),ae=W("react.legacy_hidden")}function se(D){if(typeof D=="object"&&D!==null){var re=D.$$typeof;switch(re){case o:switch(D=D.type){case c:case h:case u:case T:case A:return D;default:switch(D=D&&D.$$typeof){case p:case y:case B:case M:case f:return D;default:return re}}case s:return re}}}var te=f,ve=o,ee=y,Oe=c,Ue=B,we=M,ke=s,Te=h,ie=u,me=T;n.ContextConsumer=p,n.ContextProvider=te,n.Element=ve,n.ForwardRef=ee,n.Fragment=Oe,n.Lazy=Ue,n.Memo=we,n.Portal=ke,n.Profiler=Te,n.StrictMode=ie,n.Suspense=me,n.isAsyncMode=function(){return!1},n.isConcurrentMode=function(){return!1},n.isContextConsumer=function(D){return se(D)===p},n.isContextProvider=function(D){return se(D)===f},n.isElement=function(D){return typeof D=="object"&&D!==null&&D.$$typeof===o},n.isForwardRef=function(D){return se(D)===y},n.isFragment=function(D){return se(D)===c},n.isLazy=function(D){return se(D)===B},n.isMemo=function(D){return se(D)===M},n.isPortal=function(D){return se(D)===s},n.isProfiler=function(D){return se(D)===h},n.isStrictMode=function(D){return se(D)===u},n.isSuspense=function(D){return se(D)===T},n.isValidElementType=function(D){return typeof D=="string"||typeof D=="function"||D===c||D===h||D===Z||D===u||D===T||D===A||D===ae||typeof D=="object"&&D!==null&&(D.$$typeof===B||D.$$typeof===M||D.$$typeof===f||D.$$typeof===p||D.$$typeof===y||D.$$typeof===F||D.$$typeof===O||D[0]===V)},n.typeOf=se},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.toString=void 0;const o=r(6),s=r(29),c=r(13),u={string:o.quoteString,number:h=>Object.is(h,-0)?"-0":String(h),boolean:String,symbol:(h,f,p)=>{const y=Symbol.keyFor(h);return y!==void 0?`Symbol.for(${p(y)})`:`Symbol(${p(h.description)})`},bigint:(h,f,p)=>`BigInt(${p(String(h))})`,undefined:String,object:s.objectToString,function:c.functionToString};n.toString=(h,f,p,y)=>h===null?"null":u[typeof h](h,f,p,y)},function(t,n,r){(function(o,s){Object.defineProperty(n,"__esModule",{value:!0}),n.objectToString=void 0;const c=r(6),u=r(13),h=r(34);n.objectToString=(y,T,A,M)=>{if(typeof o=="function"&&o.isBuffer(y))return`Buffer.from(${A(y.toString("base64"))}, 'base64')`;if(typeof s=="object"&&y===s)return f(y,T,A,M);const B=p[Object.prototype.toString.call(y)];return B?B(y,T,A,M):void 0};const f=(y,T,A)=>`Function(${A("return this")})()`,p={"[object Array]":h.arrayToString,"[object Object]":(y,T,A,M)=>{const B=T?`
`:"",O=T?" ":"",V=Object.keys(y).reduce(function(F,Z){const ae=y[Z],W=A(ae,Z);if(W===void 0)return F;const se=W.split(`
`).join(`
`+T);return u.USED_METHOD_KEY.has(ae)?(F.push(`${T}${se}`),F):(F.push(`${T}${c.quoteKey(Z,A)}:${O}${se}`),F)},[]).join(","+B);return V===""?"{}":`{${B}${V}${B}}`},"[object Error]":(y,T,A)=>`new Error(${A(y.message)})`,"[object Date]":y=>`new Date(${y.getTime()})`,"[object String]":(y,T,A)=>`new String(${A(y.toString())})`,"[object Number]":y=>`new Number(${y})`,"[object Boolean]":y=>`new Boolean(${y})`,"[object Set]":(y,T,A)=>`new Set(${A(Array.from(y))})`,"[object Map]":(y,T,A)=>`new Map(${A(Array.from(y))})`,"[object RegExp]":String,"[object global]":f,"[object Window]":f}}).call(this,r(30).Buffer,r(9))},function(t,n,r){(function(o){var s=r(31),c=r(32),u=r(33);function h(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(v,E){if(h()<E)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(v=new Uint8Array(E)).__proto__=p.prototype:(v===null&&(v=new p(E)),v.length=E),v}function p(v,E,x){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(v,E,x);if(typeof v=="number"){if(typeof E=="string")throw new Error("If encoding is specified then the first argument must be a string");return A(this,v)}return y(this,v,E,x)}function y(v,E,x,L){if(typeof E=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&E instanceof ArrayBuffer?function(z,U,ue,$e){if(U.byteLength,ue<0||U.byteLength<ue)throw new RangeError("'offset' is out of bounds");if(U.byteLength<ue+($e||0))throw new RangeError("'length' is out of bounds");return U=ue===void 0&&$e===void 0?new Uint8Array(U):$e===void 0?new Uint8Array(U,ue):new Uint8Array(U,ue,$e),p.TYPED_ARRAY_SUPPORT?(z=U).__proto__=p.prototype:z=M(z,U),z}(v,E,x,L):typeof E=="string"?function(z,U,ue){if(typeof ue=="string"&&ue!==""||(ue="utf8"),!p.isEncoding(ue))throw new TypeError('"encoding" must be a valid string encoding');var $e=0|O(U,ue),We=(z=f(z,$e)).write(U,ue);return We!==$e&&(z=z.slice(0,We)),z}(v,E,x):function(z,U){if(p.isBuffer(U)){var ue=0|B(U.length);return(z=f(z,ue)).length===0||U.copy(z,0,0,ue),z}if(U){if(typeof ArrayBuffer!="undefined"&&U.buffer instanceof ArrayBuffer||"length"in U)return typeof U.length!="number"||($e=U.length)!=$e?f(z,0):M(z,U);if(U.type==="Buffer"&&u(U.data))return M(z,U.data)}var $e;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(v,E)}function T(v){if(typeof v!="number")throw new TypeError('"size" argument must be a number');if(v<0)throw new RangeError('"size" argument must not be negative')}function A(v,E){if(T(E),v=f(v,E<0?0:0|B(E)),!p.TYPED_ARRAY_SUPPORT)for(var x=0;x<E;++x)v[x]=0;return v}function M(v,E){var x=E.length<0?0:0|B(E.length);v=f(v,x);for(var L=0;L<x;L+=1)v[L]=255&E[L];return v}function B(v){if(v>=h())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h().toString(16)+" bytes");return 0|v}function O(v,E){if(p.isBuffer(v))return v.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(v)||v instanceof ArrayBuffer))return v.byteLength;typeof v!="string"&&(v=""+v);var x=v.length;if(x===0)return 0;for(var L=!1;;)switch(E){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":case void 0:return K(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*x;case"hex":return x>>>1;case"base64":return j(v).length;default:if(L)return K(v).length;E=(""+E).toLowerCase(),L=!0}}function V(v,E,x){var L=!1;if((E===void 0||E<0)&&(E=0),E>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0)<=(E>>>=0))return"";for(v||(v="utf8");;)switch(v){case"hex":return ie(this,E,x);case"utf8":case"utf-8":return we(this,E,x);case"ascii":return ke(this,E,x);case"latin1":case"binary":return Te(this,E,x);case"base64":return Ue(this,E,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,E,x);default:if(L)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),L=!0}}function F(v,E,x){var L=v[E];v[E]=v[x],v[x]=L}function Z(v,E,x,L,z){if(v.length===0)return-1;if(typeof x=="string"?(L=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,isNaN(x)&&(x=z?0:v.length-1),x<0&&(x=v.length+x),x>=v.length){if(z)return-1;x=v.length-1}else if(x<0){if(!z)return-1;x=0}if(typeof E=="string"&&(E=p.from(E,L)),p.isBuffer(E))return E.length===0?-1:ae(v,E,x,L,z);if(typeof E=="number")return E&=255,p.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(v,E,x):Uint8Array.prototype.lastIndexOf.call(v,E,x):ae(v,[E],x,L,z);throw new TypeError("val must be string, number or Buffer")}function ae(v,E,x,L,z){var U,ue=1,$e=v.length,We=E.length;if(L!==void 0&&((L=String(L).toLowerCase())==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(v.length<2||E.length<2)return-1;ue=2,$e/=2,We/=2,x/=2}function it(zn,Jt){return ue===1?zn[Jt]:zn.readUInt16BE(Jt*ue)}if(z){var Ze=-1;for(U=x;U<$e;U++)if(it(v,U)===it(E,Ze===-1?0:U-Ze)){if(Ze===-1&&(Ze=U),U-Ze+1===We)return Ze*ue}else Ze!==-1&&(U-=U-Ze),Ze=-1}else for(x+We>$e&&(x=$e-We),U=x;U>=0;U--){for(var un=!0,qt=0;qt<We;qt++)if(it(v,U+qt)!==it(E,qt)){un=!1;break}if(un)return U}return-1}function W(v,E,x,L){x=Number(x)||0;var z=v.length-x;L?(L=Number(L))>z&&(L=z):L=z;var U=E.length;if(U%2!=0)throw new TypeError("Invalid hex string");L>U/2&&(L=U/2);for(var ue=0;ue<L;++ue){var $e=parseInt(E.substr(2*ue,2),16);if(isNaN($e))return ue;v[x+ue]=$e}return ue}function se(v,E,x,L){return de(K(E,v.length-x),v,x,L)}function te(v,E,x,L){return de(function(z){for(var U=[],ue=0;ue<z.length;++ue)U.push(255&z.charCodeAt(ue));return U}(E),v,x,L)}function ve(v,E,x,L){return te(v,E,x,L)}function ee(v,E,x,L){return de(j(E),v,x,L)}function Oe(v,E,x,L){return de(function(z,U){for(var ue,$e,We,it=[],Ze=0;Ze<z.length&&!((U-=2)<0);++Ze)ue=z.charCodeAt(Ze),$e=ue>>8,We=ue%256,it.push(We),it.push($e);return it}(E,v.length-x),v,x,L)}function Ue(v,E,x){return E===0&&x===v.length?s.fromByteArray(v):s.fromByteArray(v.slice(E,x))}function we(v,E,x){x=Math.min(v.length,x);for(var L=[],z=E;z<x;){var U,ue,$e,We,it=v[z],Ze=null,un=it>239?4:it>223?3:it>191?2:1;if(z+un<=x)switch(un){case 1:it<128&&(Ze=it);break;case 2:(192&(U=v[z+1]))==128&&(We=(31&it)<<6|63&U)>127&&(Ze=We);break;case 3:U=v[z+1],ue=v[z+2],(192&U)==128&&(192&ue)==128&&(We=(15&it)<<12|(63&U)<<6|63&ue)>2047&&(We<55296||We>57343)&&(Ze=We);break;case 4:U=v[z+1],ue=v[z+2],$e=v[z+3],(192&U)==128&&(192&ue)==128&&(192&$e)==128&&(We=(15&it)<<18|(63&U)<<12|(63&ue)<<6|63&$e)>65535&&We<1114112&&(Ze=We)}Ze===null?(Ze=65533,un=1):Ze>65535&&(Ze-=65536,L.push(Ze>>>10&1023|55296),Ze=56320|1023&Ze),L.push(Ze),z+=un}return function(qt){var zn=qt.length;if(zn<=4096)return String.fromCharCode.apply(String,qt);for(var Jt="",dn=0;dn<zn;)Jt+=String.fromCharCode.apply(String,qt.slice(dn,dn+=4096));return Jt}(L)}n.Buffer=p,n.SlowBuffer=function(v){return+v!=v&&(v=0),p.alloc(+v)},n.INSPECT_MAX_BYTES=50,p.TYPED_ARRAY_SUPPORT=o.TYPED_ARRAY_SUPPORT!==void 0?o.TYPED_ARRAY_SUPPORT:function(){try{var v=new Uint8Array(1);return v.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},v.foo()===42&&typeof v.subarray=="function"&&v.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=h(),p.poolSize=8192,p._augment=function(v){return v.__proto__=p.prototype,v},p.from=function(v,E,x){return y(null,v,E,x)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0})),p.alloc=function(v,E,x){return function(L,z,U,ue){return T(z),z<=0?f(L,z):U!==void 0?typeof ue=="string"?f(L,z).fill(U,ue):f(L,z).fill(U):f(L,z)}(null,v,E,x)},p.allocUnsafe=function(v){return A(null,v)},p.allocUnsafeSlow=function(v){return A(null,v)},p.isBuffer=function(v){return!(v==null||!v._isBuffer)},p.compare=function(v,E){if(!p.isBuffer(v)||!p.isBuffer(E))throw new TypeError("Arguments must be Buffers");if(v===E)return 0;for(var x=v.length,L=E.length,z=0,U=Math.min(x,L);z<U;++z)if(v[z]!==E[z]){x=v[z],L=E[z];break}return x<L?-1:L<x?1:0},p.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(v,E){if(!u(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return p.alloc(0);var x;if(E===void 0)for(E=0,x=0;x<v.length;++x)E+=v[x].length;var L=p.allocUnsafe(E),z=0;for(x=0;x<v.length;++x){var U=v[x];if(!p.isBuffer(U))throw new TypeError('"list" argument must be an Array of Buffers');U.copy(L,z),z+=U.length}return L},p.byteLength=O,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var v=this.length;if(v%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var E=0;E<v;E+=2)F(this,E,E+1);return this},p.prototype.swap32=function(){var v=this.length;if(v%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var E=0;E<v;E+=4)F(this,E,E+3),F(this,E+1,E+2);return this},p.prototype.swap64=function(){var v=this.length;if(v%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var E=0;E<v;E+=8)F(this,E,E+7),F(this,E+1,E+6),F(this,E+2,E+5),F(this,E+3,E+4);return this},p.prototype.toString=function(){var v=0|this.length;return v===0?"":arguments.length===0?we(this,0,v):V.apply(this,arguments)},p.prototype.equals=function(v){if(!p.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v||p.compare(this,v)===0},p.prototype.inspect=function(){var v="",E=n.INSPECT_MAX_BYTES;return this.length>0&&(v=this.toString("hex",0,E).match(/.{2}/g).join(" "),this.length>E&&(v+=" ... ")),"<Buffer "+v+">"},p.prototype.compare=function(v,E,x,L,z){if(!p.isBuffer(v))throw new TypeError("Argument must be a Buffer");if(E===void 0&&(E=0),x===void 0&&(x=v?v.length:0),L===void 0&&(L=0),z===void 0&&(z=this.length),E<0||x>v.length||L<0||z>this.length)throw new RangeError("out of range index");if(L>=z&&E>=x)return 0;if(L>=z)return-1;if(E>=x)return 1;if(this===v)return 0;for(var U=(z>>>=0)-(L>>>=0),ue=(x>>>=0)-(E>>>=0),$e=Math.min(U,ue),We=this.slice(L,z),it=v.slice(E,x),Ze=0;Ze<$e;++Ze)if(We[Ze]!==it[Ze]){U=We[Ze],ue=it[Ze];break}return U<ue?-1:ue<U?1:0},p.prototype.includes=function(v,E,x){return this.indexOf(v,E,x)!==-1},p.prototype.indexOf=function(v,E,x){return Z(this,v,E,x,!0)},p.prototype.lastIndexOf=function(v,E,x){return Z(this,v,E,x,!1)},p.prototype.write=function(v,E,x,L){if(E===void 0)L="utf8",x=this.length,E=0;else if(x===void 0&&typeof E=="string")L=E,x=this.length,E=0;else{if(!isFinite(E))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");E|=0,isFinite(x)?(x|=0,L===void 0&&(L="utf8")):(L=x,x=void 0)}var z=this.length-E;if((x===void 0||x>z)&&(x=z),v.length>0&&(x<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");for(var U=!1;;)switch(L){case"hex":return W(this,v,E,x);case"utf8":case"utf-8":return se(this,v,E,x);case"ascii":return te(this,v,E,x);case"latin1":case"binary":return ve(this,v,E,x);case"base64":return ee(this,v,E,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,v,E,x);default:if(U)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),U=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ke(v,E,x){var L="";x=Math.min(v.length,x);for(var z=E;z<x;++z)L+=String.fromCharCode(127&v[z]);return L}function Te(v,E,x){var L="";x=Math.min(v.length,x);for(var z=E;z<x;++z)L+=String.fromCharCode(v[z]);return L}function ie(v,E,x){var L=v.length;(!E||E<0)&&(E=0),(!x||x<0||x>L)&&(x=L);for(var z="",U=E;U<x;++U)z+=lt(v[U]);return z}function me(v,E,x){for(var L=v.slice(E,x),z="",U=0;U<L.length;U+=2)z+=String.fromCharCode(L[U]+256*L[U+1]);return z}function D(v,E,x){if(v%1!=0||v<0)throw new RangeError("offset is not uint");if(v+E>x)throw new RangeError("Trying to access beyond buffer length")}function re(v,E,x,L,z,U){if(!p.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(E>z||E<U)throw new RangeError('"value" argument is out of bounds');if(x+L>v.length)throw new RangeError("Index out of range")}function pe(v,E,x,L){E<0&&(E=65535+E+1);for(var z=0,U=Math.min(v.length-x,2);z<U;++z)v[x+z]=(E&255<<8*(L?z:1-z))>>>8*(L?z:1-z)}function Be(v,E,x,L){E<0&&(E=4294967295+E+1);for(var z=0,U=Math.min(v.length-x,4);z<U;++z)v[x+z]=E>>>8*(L?z:3-z)&255}function Pe(v,E,x,L,z,U){if(x+L>v.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function Ve(v,E,x,L,z){return z||Pe(v,0,x,4),c.write(v,E,x,L,23,4),x+4}function Me(v,E,x,L,z){return z||Pe(v,0,x,8),c.write(v,E,x,L,52,8),x+8}p.prototype.slice=function(v,E){var x,L=this.length;if((v=~~v)<0?(v+=L)<0&&(v=0):v>L&&(v=L),(E=E===void 0?L:~~E)<0?(E+=L)<0&&(E=0):E>L&&(E=L),E<v&&(E=v),p.TYPED_ARRAY_SUPPORT)(x=this.subarray(v,E)).__proto__=p.prototype;else{var z=E-v;x=new p(z,void 0);for(var U=0;U<z;++U)x[U]=this[U+v]}return x},p.prototype.readUIntLE=function(v,E,x){v|=0,E|=0,x||D(v,E,this.length);for(var L=this[v],z=1,U=0;++U<E&&(z*=256);)L+=this[v+U]*z;return L},p.prototype.readUIntBE=function(v,E,x){v|=0,E|=0,x||D(v,E,this.length);for(var L=this[v+--E],z=1;E>0&&(z*=256);)L+=this[v+--E]*z;return L},p.prototype.readUInt8=function(v,E){return E||D(v,1,this.length),this[v]},p.prototype.readUInt16LE=function(v,E){return E||D(v,2,this.length),this[v]|this[v+1]<<8},p.prototype.readUInt16BE=function(v,E){return E||D(v,2,this.length),this[v]<<8|this[v+1]},p.prototype.readUInt32LE=function(v,E){return E||D(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+16777216*this[v+3]},p.prototype.readUInt32BE=function(v,E){return E||D(v,4,this.length),16777216*this[v]+(this[v+1]<<16|this[v+2]<<8|this[v+3])},p.prototype.readIntLE=function(v,E,x){v|=0,E|=0,x||D(v,E,this.length);for(var L=this[v],z=1,U=0;++U<E&&(z*=256);)L+=this[v+U]*z;return L>=(z*=128)&&(L-=Math.pow(2,8*E)),L},p.prototype.readIntBE=function(v,E,x){v|=0,E|=0,x||D(v,E,this.length);for(var L=E,z=1,U=this[v+--L];L>0&&(z*=256);)U+=this[v+--L]*z;return U>=(z*=128)&&(U-=Math.pow(2,8*E)),U},p.prototype.readInt8=function(v,E){return E||D(v,1,this.length),128&this[v]?-1*(255-this[v]+1):this[v]},p.prototype.readInt16LE=function(v,E){E||D(v,2,this.length);var x=this[v]|this[v+1]<<8;return 32768&x?4294901760|x:x},p.prototype.readInt16BE=function(v,E){E||D(v,2,this.length);var x=this[v+1]|this[v]<<8;return 32768&x?4294901760|x:x},p.prototype.readInt32LE=function(v,E){return E||D(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},p.prototype.readInt32BE=function(v,E){return E||D(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},p.prototype.readFloatLE=function(v,E){return E||D(v,4,this.length),c.read(this,v,!0,23,4)},p.prototype.readFloatBE=function(v,E){return E||D(v,4,this.length),c.read(this,v,!1,23,4)},p.prototype.readDoubleLE=function(v,E){return E||D(v,8,this.length),c.read(this,v,!0,52,8)},p.prototype.readDoubleBE=function(v,E){return E||D(v,8,this.length),c.read(this,v,!1,52,8)},p.prototype.writeUIntLE=function(v,E,x,L){v=+v,E|=0,x|=0,L||re(this,v,E,x,Math.pow(2,8*x)-1,0);var z=1,U=0;for(this[E]=255&v;++U<x&&(z*=256);)this[E+U]=v/z&255;return E+x},p.prototype.writeUIntBE=function(v,E,x,L){v=+v,E|=0,x|=0,L||re(this,v,E,x,Math.pow(2,8*x)-1,0);var z=x-1,U=1;for(this[E+z]=255&v;--z>=0&&(U*=256);)this[E+z]=v/U&255;return E+x},p.prototype.writeUInt8=function(v,E,x){return v=+v,E|=0,x||re(this,v,E,1,255,0),p.TYPED_ARRAY_SUPPORT||(v=Math.floor(v)),this[E]=255&v,E+1},p.prototype.writeUInt16LE=function(v,E,x){return v=+v,E|=0,x||re(this,v,E,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[E]=255&v,this[E+1]=v>>>8):pe(this,v,E,!0),E+2},p.prototype.writeUInt16BE=function(v,E,x){return v=+v,E|=0,x||re(this,v,E,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[E]=v>>>8,this[E+1]=255&v):pe(this,v,E,!1),E+2},p.prototype.writeUInt32LE=function(v,E,x){return v=+v,E|=0,x||re(this,v,E,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[E+3]=v>>>24,this[E+2]=v>>>16,this[E+1]=v>>>8,this[E]=255&v):Be(this,v,E,!0),E+4},p.prototype.writeUInt32BE=function(v,E,x){return v=+v,E|=0,x||re(this,v,E,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[E]=v>>>24,this[E+1]=v>>>16,this[E+2]=v>>>8,this[E+3]=255&v):Be(this,v,E,!1),E+4},p.prototype.writeIntLE=function(v,E,x,L){if(v=+v,E|=0,!L){var z=Math.pow(2,8*x-1);re(this,v,E,x,z-1,-z)}var U=0,ue=1,$e=0;for(this[E]=255&v;++U<x&&(ue*=256);)v<0&&$e===0&&this[E+U-1]!==0&&($e=1),this[E+U]=(v/ue>>0)-$e&255;return E+x},p.prototype.writeIntBE=function(v,E,x,L){if(v=+v,E|=0,!L){var z=Math.pow(2,8*x-1);re(this,v,E,x,z-1,-z)}var U=x-1,ue=1,$e=0;for(this[E+U]=255&v;--U>=0&&(ue*=256);)v<0&&$e===0&&this[E+U+1]!==0&&($e=1),this[E+U]=(v/ue>>0)-$e&255;return E+x},p.prototype.writeInt8=function(v,E,x){return v=+v,E|=0,x||re(this,v,E,1,127,-128),p.TYPED_ARRAY_SUPPORT||(v=Math.floor(v)),v<0&&(v=255+v+1),this[E]=255&v,E+1},p.prototype.writeInt16LE=function(v,E,x){return v=+v,E|=0,x||re(this,v,E,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[E]=255&v,this[E+1]=v>>>8):pe(this,v,E,!0),E+2},p.prototype.writeInt16BE=function(v,E,x){return v=+v,E|=0,x||re(this,v,E,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[E]=v>>>8,this[E+1]=255&v):pe(this,v,E,!1),E+2},p.prototype.writeInt32LE=function(v,E,x){return v=+v,E|=0,x||re(this,v,E,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[E]=255&v,this[E+1]=v>>>8,this[E+2]=v>>>16,this[E+3]=v>>>24):Be(this,v,E,!0),E+4},p.prototype.writeInt32BE=function(v,E,x){return v=+v,E|=0,x||re(this,v,E,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),p.TYPED_ARRAY_SUPPORT?(this[E]=v>>>24,this[E+1]=v>>>16,this[E+2]=v>>>8,this[E+3]=255&v):Be(this,v,E,!1),E+4},p.prototype.writeFloatLE=function(v,E,x){return Ve(this,v,E,!0,x)},p.prototype.writeFloatBE=function(v,E,x){return Ve(this,v,E,!1,x)},p.prototype.writeDoubleLE=function(v,E,x){return Me(this,v,E,!0,x)},p.prototype.writeDoubleBE=function(v,E,x){return Me(this,v,E,!1,x)},p.prototype.copy=function(v,E,x,L){if(x||(x=0),L||L===0||(L=this.length),E>=v.length&&(E=v.length),E||(E=0),L>0&&L<x&&(L=x),L===x||v.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("sourceStart out of bounds");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),v.length-E<L-x&&(L=v.length-E+x);var z,U=L-x;if(this===v&&x<E&&E<L)for(z=U-1;z>=0;--z)v[z+E]=this[z+x];else if(U<1e3||!p.TYPED_ARRAY_SUPPORT)for(z=0;z<U;++z)v[z+E]=this[z+x];else Uint8Array.prototype.set.call(v,this.subarray(x,x+U),E);return U},p.prototype.fill=function(v,E,x,L){if(typeof v=="string"){if(typeof E=="string"?(L=E,E=0,x=this.length):typeof x=="string"&&(L=x,x=this.length),v.length===1){var z=v.charCodeAt(0);z<256&&(v=z)}if(L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!p.isEncoding(L))throw new TypeError("Unknown encoding: "+L)}else typeof v=="number"&&(v&=255);if(E<0||this.length<E||this.length<x)throw new RangeError("Out of range index");if(x<=E)return this;var U;if(E>>>=0,x=x===void 0?this.length:x>>>0,v||(v=0),typeof v=="number")for(U=E;U<x;++U)this[U]=v;else{var ue=p.isBuffer(v)?v:K(new p(v,L).toString()),$e=ue.length;for(U=0;U<x-E;++U)this[U+E]=ue[U%$e]}return this};var qe=/[^+\/0-9A-Za-z-_]/g;function lt(v){return v<16?"0"+v.toString(16):v.toString(16)}function K(v,E){var x;E=E||1/0;for(var L=v.length,z=null,U=[],ue=0;ue<L;++ue){if((x=v.charCodeAt(ue))>55295&&x<57344){if(!z){if(x>56319){(E-=3)>-1&&U.push(239,191,189);continue}if(ue+1===L){(E-=3)>-1&&U.push(239,191,189);continue}z=x;continue}if(x<56320){(E-=3)>-1&&U.push(239,191,189),z=x;continue}x=65536+(z-55296<<10|x-56320)}else z&&(E-=3)>-1&&U.push(239,191,189);if(z=null,x<128){if((E-=1)<0)break;U.push(x)}else if(x<2048){if((E-=2)<0)break;U.push(x>>6|192,63&x|128)}else if(x<65536){if((E-=3)<0)break;U.push(x>>12|224,x>>6&63|128,63&x|128)}else{if(!(x<1114112))throw new Error("Invalid code point");if((E-=4)<0)break;U.push(x>>18|240,x>>12&63|128,x>>6&63|128,63&x|128)}}return U}function j(v){return s.toByteArray(function(E){if((E=function(x){return x.trim?x.trim():x.replace(/^\s+|\s+$/g,"")}(E).replace(qe,"")).length<2)return"";for(;E.length%4!=0;)E+="=";return E}(v))}function de(v,E,x,L){for(var z=0;z<L&&!(z+x>=E.length||z>=v.length);++z)E[z+x]=v[z];return z}}).call(this,r(9))},function(t,n,r){n.byteLength=function(T){var A=p(T),M=A[0],B=A[1];return 3*(M+B)/4-B},n.toByteArray=function(T){var A,M,B=p(T),O=B[0],V=B[1],F=new c(function(W,se,te){return 3*(se+te)/4-te}(0,O,V)),Z=0,ae=V>0?O-4:O;for(M=0;M<ae;M+=4)A=s[T.charCodeAt(M)]<<18|s[T.charCodeAt(M+1)]<<12|s[T.charCodeAt(M+2)]<<6|s[T.charCodeAt(M+3)],F[Z++]=A>>16&255,F[Z++]=A>>8&255,F[Z++]=255&A;return V===2&&(A=s[T.charCodeAt(M)]<<2|s[T.charCodeAt(M+1)]>>4,F[Z++]=255&A),V===1&&(A=s[T.charCodeAt(M)]<<10|s[T.charCodeAt(M+1)]<<4|s[T.charCodeAt(M+2)]>>2,F[Z++]=A>>8&255,F[Z++]=255&A),F},n.fromByteArray=function(T){for(var A,M=T.length,B=M%3,O=[],V=0,F=M-B;V<F;V+=16383)O.push(y(T,V,V+16383>F?F:V+16383));return B===1?(A=T[M-1],O.push(o[A>>2]+o[A<<4&63]+"==")):B===2&&(A=(T[M-2]<<8)+T[M-1],O.push(o[A>>10]+o[A>>4&63]+o[A<<2&63]+"=")),O.join("")};for(var o=[],s=[],c=typeof Uint8Array!="undefined"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,f=u.length;h<f;++h)o[h]=u[h],s[u.charCodeAt(h)]=h;function p(T){var A=T.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=T.indexOf("=");return M===-1&&(M=A),[M,M===A?0:4-M%4]}function y(T,A,M){for(var B,O,V=[],F=A;F<M;F+=3)B=(T[F]<<16&16711680)+(T[F+1]<<8&65280)+(255&T[F+2]),V.push(o[(O=B)>>18&63]+o[O>>12&63]+o[O>>6&63]+o[63&O]);return V.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(t,n){n.read=function(r,o,s,c,u){var h,f,p=8*u-c-1,y=(1<<p)-1,T=y>>1,A=-7,M=s?u-1:0,B=s?-1:1,O=r[o+M];for(M+=B,h=O&(1<<-A)-1,O>>=-A,A+=p;A>0;h=256*h+r[o+M],M+=B,A-=8);for(f=h&(1<<-A)-1,h>>=-A,A+=c;A>0;f=256*f+r[o+M],M+=B,A-=8);if(h===0)h=1-T;else{if(h===y)return f?NaN:1/0*(O?-1:1);f+=Math.pow(2,c),h-=T}return(O?-1:1)*f*Math.pow(2,h-c)},n.write=function(r,o,s,c,u,h){var f,p,y,T=8*h-u-1,A=(1<<T)-1,M=A>>1,B=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=c?0:h-1,V=c?1:-1,F=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(p=isNaN(o)?1:0,f=A):(f=Math.floor(Math.log(o)/Math.LN2),o*(y=Math.pow(2,-f))<1&&(f--,y*=2),(o+=f+M>=1?B/y:B*Math.pow(2,1-M))*y>=2&&(f++,y/=2),f+M>=A?(p=0,f=A):f+M>=1?(p=(o*y-1)*Math.pow(2,u),f+=M):(p=o*Math.pow(2,M-1)*Math.pow(2,u),f=0));u>=8;r[s+O]=255&p,O+=V,p/=256,u-=8);for(f=f<<u|p,T+=u;T>0;r[s+O]=255&f,O+=V,f/=256,T-=8);r[s+O-V]|=128*F}},function(t,n){var r={}.toString;t.exports=Array.isArray||function(o){return r.call(o)=="[object Array]"}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.arrayToString=void 0,n.arrayToString=(o,s,c)=>{const u=o.map(function(f,p){const y=c(f,p);return y===void 0?String(y):s+y.split(`
`).join(`
`+s)}).join(s?`,
`:","),h=s&&u?`
`:"";return`[${h}${u}${h}]`}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return y.default}}),n.default=void 0;var o=function(ie){if(ie&&ie.__esModule)return ie;if(ie===null||B(ie)!=="object"&&typeof ie!="function")return{default:ie};var me=M();if(me&&me.has(ie))return me.get(ie);var D={},re=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var pe in ie)if(Object.prototype.hasOwnProperty.call(ie,pe)){var Be=re?Object.getOwnPropertyDescriptor(ie,pe):null;Be&&(Be.get||Be.set)?Object.defineProperty(D,pe,Be):D[pe]=ie[pe]}return D.default=ie,me&&me.set(ie,D),D}(r(0)),s=A(r(8)),c=A(r(5)),u=A(r(36)),h=r(10),f=r(14),p=r(7),y=A(r(38)),T=A(r(15));function A(ie){return ie&&ie.__esModule?ie:{default:ie}}function M(){if(typeof WeakMap!="function")return null;var ie=new WeakMap;return M=function(){return ie},ie}function B(ie){return(B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(me){return typeof me}:function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me})(ie)}function O(){return(O=Object.assign||function(ie){for(var me=1;me<arguments.length;me++){var D=arguments[me];for(var re in D)Object.prototype.hasOwnProperty.call(D,re)&&(ie[re]=D[re])}return ie}).apply(this,arguments)}function V(ie,me){if(ie==null)return{};var D,re,pe=function(Pe,Ve){if(Pe==null)return{};var Me,qe,lt={},K=Object.keys(Pe);for(qe=0;qe<K.length;qe++)Me=K[qe],Ve.indexOf(Me)>=0||(lt[Me]=Pe[Me]);return lt}(ie,me);if(Object.getOwnPropertySymbols){var Be=Object.getOwnPropertySymbols(ie);for(re=0;re<Be.length;re++)D=Be[re],me.indexOf(D)>=0||Object.prototype.propertyIsEnumerable.call(ie,D)&&(pe[D]=ie[D])}return pe}function F(ie,me){return function(D){if(Array.isArray(D))return D}(ie)||function(D,re){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(D)))){var pe=[],Be=!0,Pe=!1,Ve=void 0;try{for(var Me,qe=D[Symbol.iterator]();!(Be=(Me=qe.next()).done)&&(pe.push(Me.value),!re||pe.length!==re);Be=!0);}catch(lt){Pe=!0,Ve=lt}finally{try{Be||qe.return==null||qe.return()}finally{if(Pe)throw Ve}}return pe}}(ie,me)||function(D,re){if(!!D){if(typeof D=="string")return Z(D,re);var pe=Object.prototype.toString.call(D).slice(8,-1);if(pe==="Object"&&D.constructor&&(pe=D.constructor.name),pe==="Map"||pe==="Set")return Array.from(D);if(pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pe))return Z(D,re)}}(ie,me)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Z(ie,me){(me==null||me>ie.length)&&(me=ie.length);for(var D=0,re=new Array(me);D<me;D++)re[D]=ie[D];return re}function ae(ie,me){var D=Object.keys(ie);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(ie);me&&(re=re.filter(function(pe){return Object.getOwnPropertyDescriptor(ie,pe).enumerable})),D.push.apply(D,re)}return D}function W(ie){for(var me=1;me<arguments.length;me++){var D=arguments[me]!=null?arguments[me]:{};me%2?ae(Object(D),!0).forEach(function(re){ke(ie,re,D[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(D)):ae(Object(D)).forEach(function(re){Object.defineProperty(ie,re,Object.getOwnPropertyDescriptor(D,re))})}return ie}function se(ie,me){for(var D=0;D<me.length;D++){var re=me[D];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(ie,re.key,re)}}function te(ie,me,D){return me&&se(ie.prototype,me),D&&se(ie,D),ie}function ve(ie,me){return(ve=Object.setPrototypeOf||function(D,re){return D.__proto__=re,D})(ie,me)}function ee(ie){var me=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var D,re=we(ie);if(me){var pe=we(this).constructor;D=Reflect.construct(re,arguments,pe)}else D=re.apply(this,arguments);return Oe(this,D)}}function Oe(ie,me){return!me||B(me)!=="object"&&typeof me!="function"?Ue(ie):me}function Ue(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function we(ie){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(me){return me.__proto__||Object.getPrototypeOf(me)})(ie)}function ke(ie,me,D){return me in ie?Object.defineProperty(ie,me,{value:D,enumerable:!0,configurable:!0,writable:!0}):ie[me]=D,ie}var Te=function(ie){(function(re,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(pe&&pe.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),pe&&ve(re,pe)})(D,ie);var me=ee(D);function D(re){var pe;return function(Be,Pe){if(!(Be instanceof Pe))throw new TypeError("Cannot call a class as a function")}(this,D),ke(Ue(pe=me.call(this,re)),"onDragStart",function(Be,Pe){if((0,T.default)("Draggable: onDragStart: %j",Pe),pe.props.onStart(Be,(0,f.createDraggableData)(Ue(pe),Pe))===!1)return!1;pe.setState({dragging:!0,dragged:!0})}),ke(Ue(pe),"onDrag",function(Be,Pe){if(!pe.state.dragging)return!1;(0,T.default)("Draggable: onDrag: %j",Pe);var Ve=(0,f.createDraggableData)(Ue(pe),Pe),Me={x:Ve.x,y:Ve.y};if(pe.props.bounds){var qe=Me.x,lt=Me.y;Me.x+=pe.state.slackX,Me.y+=pe.state.slackY;var K=F((0,f.getBoundPosition)(Ue(pe),Me.x,Me.y),2),j=K[0],de=K[1];Me.x=j,Me.y=de,Me.slackX=pe.state.slackX+(qe-Me.x),Me.slackY=pe.state.slackY+(lt-Me.y),Ve.x=Me.x,Ve.y=Me.y,Ve.deltaX=Me.x-pe.state.x,Ve.deltaY=Me.y-pe.state.y}if(pe.props.onDrag(Be,Ve)===!1)return!1;pe.setState(Me)}),ke(Ue(pe),"onDragStop",function(Be,Pe){if(!pe.state.dragging||pe.props.onStop(Be,(0,f.createDraggableData)(Ue(pe),Pe))===!1)return!1;(0,T.default)("Draggable: onDragStop: %j",Pe);var Ve={dragging:!1,slackX:0,slackY:0};if(Boolean(pe.props.position)){var Me=pe.props.position,qe=Me.x,lt=Me.y;Ve.x=qe,Ve.y=lt}pe.setState(Ve)}),pe.state={dragging:!1,dragged:!1,x:re.position?re.position.x:re.defaultPosition.x,y:re.position?re.position.y:re.defaultPosition.y,prevPropsPosition:W({},re.position),slackX:0,slackY:0,isElementSVG:!1},!re.position||re.onDrag||re.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),pe}return te(D,null,[{key:"getDerivedStateFromProps",value:function(re,pe){var Be=re.position,Pe=pe.prevPropsPosition;return!Be||Pe&&Be.x===Pe.x&&Be.y===Pe.y?null:((0,T.default)("Draggable: getDerivedStateFromProps %j",{position:Be,prevPropsPosition:Pe}),{x:Be.x,y:Be.y,prevPropsPosition:W({},Be)})}}]),te(D,[{key:"componentDidMount",value:function(){window.SVGElement!==void 0&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){return this.props.nodeRef?this.props.nodeRef.current:c.default.findDOMNode(this)}},{key:"render",value:function(){var re,pe=this.props,Be=(pe.axis,pe.bounds,pe.children),Pe=pe.defaultPosition,Ve=pe.defaultClassName,Me=pe.defaultClassNameDragging,qe=pe.defaultClassNameDragged,lt=pe.position,K=pe.positionOffset,j=(pe.scale,V(pe,["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"])),de={},v=null,E=!Boolean(lt)||this.state.dragging,x=lt||Pe,L={x:(0,f.canDragX)(this)&&E?this.state.x:x.x,y:(0,f.canDragY)(this)&&E?this.state.y:x.y};this.state.isElementSVG?v=(0,h.createSVGTransform)(L,K):de=(0,h.createCSSTransform)(L,K);var z=(0,u.default)(Be.props.className||"",Ve,(ke(re={},Me,this.state.dragging),ke(re,qe,this.state.dragged),re));return o.createElement(y.default,O({},j,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),o.cloneElement(o.Children.only(Be),{className:z,style:W(W({},Be.props.style),de),transform:v}))}}]),D}(o.Component);n.default=Te,ke(Te,"displayName","Draggable"),ke(Te,"propTypes",W(W({},y.default.propTypes),{},{axis:s.default.oneOf(["both","x","y","none"]),bounds:s.default.oneOfType([s.default.shape({left:s.default.number,right:s.default.number,top:s.default.number,bottom:s.default.number}),s.default.string,s.default.oneOf([!1])]),defaultClassName:s.default.string,defaultClassNameDragging:s.default.string,defaultClassNameDragged:s.default.string,defaultPosition:s.default.shape({x:s.default.number,y:s.default.number}),positionOffset:s.default.shape({x:s.default.oneOfType([s.default.number,s.default.string]),y:s.default.oneOfType([s.default.number,s.default.string])}),position:s.default.shape({x:s.default.number,y:s.default.number}),className:p.dontSetMe,style:p.dontSetMe,transform:p.dontSetMe})),ke(Te,"defaultProps",W(W({},y.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null,scale:1}))},function(t,n,r){var o;(function(){var s={}.hasOwnProperty;function c(){for(var u=[],h=0;h<arguments.length;h++){var f=arguments[h];if(f){var p=typeof f;if(p==="string"||p==="number")u.push(f);else if(Array.isArray(f)){if(f.length){var y=c.apply(null,f);y&&u.push(y)}}else if(p==="object")if(f.toString===Object.prototype.toString)for(var T in f)s.call(f,T)&&f[T]&&u.push(T);else u.push(f.toString())}}return u.join(" ")}t.exports?(c.default=c,t.exports=c):(o=function(){return c}.apply(n,[]))===void 0||(t.exports=o)})()},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getPrefix=s,n.browserPrefixToKey=c,n.browserPrefixToStyle=function(h,f){return f?"-".concat(f.toLowerCase(),"-").concat(h):h},n.default=void 0;var o=["Moz","Webkit","O","ms"];function s(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window=="undefined"||window.document===void 0)return"";var f=window.document.documentElement.style;if(h in f)return"";for(var p=0;p<o.length;p++)if(c(h,o[p])in f)return o[p];return""}function c(h,f){return f?"".concat(f).concat(function(p){for(var y="",T=!0,A=0;A<p.length;A++)T?(y+=p[A].toUpperCase(),T=!1):p[A]==="-"?T=!0:y+=p[A];return y}(h)):h}var u=s();n.default=u},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(we){if(we&&we.__esModule)return we;if(we===null||A(we)!=="object"&&typeof we!="function")return{default:we};var ke=T();if(ke&&ke.has(we))return ke.get(we);var Te={},ie=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var me in we)if(Object.prototype.hasOwnProperty.call(we,me)){var D=ie?Object.getOwnPropertyDescriptor(we,me):null;D&&(D.get||D.set)?Object.defineProperty(Te,me,D):Te[me]=we[me]}return Te.default=we,ke&&ke.set(we,Te),Te}(r(0)),s=y(r(8)),c=y(r(5)),u=r(10),h=r(14),f=r(7),p=y(r(15));function y(we){return we&&we.__esModule?we:{default:we}}function T(){if(typeof WeakMap!="function")return null;var we=new WeakMap;return T=function(){return we},we}function A(we){return(A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ke){return typeof ke}:function(ke){return ke&&typeof Symbol=="function"&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke})(we)}function M(we,ke){return function(Te){if(Array.isArray(Te))return Te}(we)||function(Te,ie){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(Te)))){var me=[],D=!0,re=!1,pe=void 0;try{for(var Be,Pe=Te[Symbol.iterator]();!(D=(Be=Pe.next()).done)&&(me.push(Be.value),!ie||me.length!==ie);D=!0);}catch(Ve){re=!0,pe=Ve}finally{try{D||Pe.return==null||Pe.return()}finally{if(re)throw pe}}return me}}(we,ke)||function(Te,ie){if(!!Te){if(typeof Te=="string")return B(Te,ie);var me=Object.prototype.toString.call(Te).slice(8,-1);if(me==="Object"&&Te.constructor&&(me=Te.constructor.name),me==="Map"||me==="Set")return Array.from(Te);if(me==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(me))return B(Te,ie)}}(we,ke)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(we,ke){(ke==null||ke>we.length)&&(ke=we.length);for(var Te=0,ie=new Array(ke);Te<ke;Te++)ie[Te]=we[Te];return ie}function O(we,ke){if(!(we instanceof ke))throw new TypeError("Cannot call a class as a function")}function V(we,ke){for(var Te=0;Te<ke.length;Te++){var ie=ke[Te];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(we,ie.key,ie)}}function F(we,ke){return(F=Object.setPrototypeOf||function(Te,ie){return Te.__proto__=ie,Te})(we,ke)}function Z(we){var ke=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Te,ie=se(we);if(ke){var me=se(this).constructor;Te=Reflect.construct(ie,arguments,me)}else Te=ie.apply(this,arguments);return ae(this,Te)}}function ae(we,ke){return!ke||A(ke)!=="object"&&typeof ke!="function"?W(we):ke}function W(we){if(we===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return we}function se(we){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(ke){return ke.__proto__||Object.getPrototypeOf(ke)})(we)}function te(we,ke,Te){return ke in we?Object.defineProperty(we,ke,{value:Te,enumerable:!0,configurable:!0,writable:!0}):we[ke]=Te,we}var ve={start:"touchstart",move:"touchmove",stop:"touchend"},ee={start:"mousedown",move:"mousemove",stop:"mouseup"},Oe=ee,Ue=function(we){(function(D,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(re&&re.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),re&&F(D,re)})(me,we);var ke,Te,ie=Z(me);function me(){var D;O(this,me);for(var re=arguments.length,pe=new Array(re),Be=0;Be<re;Be++)pe[Be]=arguments[Be];return te(W(D=ie.call.apply(ie,[this].concat(pe))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),te(W(D),"mounted",!1),te(W(D),"handleDragStart",function(Pe){if(D.props.onMouseDown(Pe),!D.props.allowAnyClick&&typeof Pe.button=="number"&&Pe.button!==0)return!1;var Ve=D.findDOMNode();if(!Ve||!Ve.ownerDocument||!Ve.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Me=Ve.ownerDocument;if(!(D.props.disabled||!(Pe.target instanceof Me.defaultView.Node)||D.props.handle&&!(0,u.matchesSelectorAndParentsTo)(Pe.target,D.props.handle,Ve)||D.props.cancel&&(0,u.matchesSelectorAndParentsTo)(Pe.target,D.props.cancel,Ve))){Pe.type==="touchstart"&&Pe.preventDefault();var qe=(0,u.getTouchIdentifier)(Pe);D.setState({touchIdentifier:qe});var lt=(0,h.getControlPosition)(Pe,qe,W(D));if(lt!=null){var K=lt.x,j=lt.y,de=(0,h.createCoreData)(W(D),K,j);(0,p.default)("DraggableCore: handleDragStart: %j",de),(0,p.default)("calling",D.props.onStart),D.props.onStart(Pe,de)!==!1&&D.mounted!==!1&&(D.props.enableUserSelectHack&&(0,u.addUserSelectStyles)(Me),D.setState({dragging:!0,lastX:K,lastY:j}),(0,u.addEvent)(Me,Oe.move,D.handleDrag),(0,u.addEvent)(Me,Oe.stop,D.handleDragStop))}}}),te(W(D),"handleDrag",function(Pe){var Ve=(0,h.getControlPosition)(Pe,D.state.touchIdentifier,W(D));if(Ve!=null){var Me=Ve.x,qe=Ve.y;if(Array.isArray(D.props.grid)){var lt=Me-D.state.lastX,K=qe-D.state.lastY,j=M((0,h.snapToGrid)(D.props.grid,lt,K),2);if(lt=j[0],K=j[1],!lt&&!K)return;Me=D.state.lastX+lt,qe=D.state.lastY+K}var de=(0,h.createCoreData)(W(D),Me,qe);if((0,p.default)("DraggableCore: handleDrag: %j",de),D.props.onDrag(Pe,de)!==!1&&D.mounted!==!1)D.setState({lastX:Me,lastY:qe});else try{D.handleDragStop(new MouseEvent("mouseup"))}catch{var v=document.createEvent("MouseEvents");v.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),D.handleDragStop(v)}}}),te(W(D),"handleDragStop",function(Pe){if(D.state.dragging){var Ve=(0,h.getControlPosition)(Pe,D.state.touchIdentifier,W(D));if(Ve!=null){var Me=Ve.x,qe=Ve.y,lt=(0,h.createCoreData)(W(D),Me,qe);if(D.props.onStop(Pe,lt)===!1||D.mounted===!1)return!1;var K=D.findDOMNode();K&&D.props.enableUserSelectHack&&(0,u.removeUserSelectStyles)(K.ownerDocument),(0,p.default)("DraggableCore: handleDragStop: %j",lt),D.setState({dragging:!1,lastX:NaN,lastY:NaN}),K&&((0,p.default)("DraggableCore: Removing handlers"),(0,u.removeEvent)(K.ownerDocument,Oe.move,D.handleDrag),(0,u.removeEvent)(K.ownerDocument,Oe.stop,D.handleDragStop))}}}),te(W(D),"onMouseDown",function(Pe){return Oe=ee,D.handleDragStart(Pe)}),te(W(D),"onMouseUp",function(Pe){return Oe=ee,D.handleDragStop(Pe)}),te(W(D),"onTouchStart",function(Pe){return Oe=ve,D.handleDragStart(Pe)}),te(W(D),"onTouchEnd",function(Pe){return Oe=ve,D.handleDragStop(Pe)}),D}return ke=me,(Te=[{key:"componentDidMount",value:function(){this.mounted=!0;var D=this.findDOMNode();D&&(0,u.addEvent)(D,ve.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var D=this.findDOMNode();if(D){var re=D.ownerDocument;(0,u.removeEvent)(re,ee.move,this.handleDrag),(0,u.removeEvent)(re,ve.move,this.handleDrag),(0,u.removeEvent)(re,ee.stop,this.handleDragStop),(0,u.removeEvent)(re,ve.stop,this.handleDragStop),(0,u.removeEvent)(D,ve.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,u.removeUserSelectStyles)(re)}}},{key:"findDOMNode",value:function(){return this.props.nodeRef?this.props.nodeRef.current:c.default.findDOMNode(this)}},{key:"render",value:function(){return o.cloneElement(o.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&V(ke.prototype,Te),me}(o.Component);n.default=Ue,te(Ue,"displayName","DraggableCore"),te(Ue,"propTypes",{allowAnyClick:s.default.bool,disabled:s.default.bool,enableUserSelectHack:s.default.bool,offsetParent:function(we,ke){if(we[ke]&&we[ke].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:s.default.arrayOf(s.default.number),handle:s.default.string,cancel:s.default.string,nodeRef:s.default.object,onStart:s.default.func,onDrag:s.default.func,onStop:s.default.func,onMouseDown:s.default.func,scale:s.default.number,className:f.dontSetMe,style:f.dontSetMe,transform:f.dontSetMe}),te(Ue,"defaultProps",{allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},function(t,n,r){var o=r(1),s=r(40);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,".ck-inspector{--ck-inspector-color-tab-background-hover:rgba(0,0,0,0.07);--ck-inspector-color-tab-active-border:#0dacef}.ck-inspector .ck-inspector-horizontal-nav{display:flex;flex-direction:row;user-select:none;align-self:stretch}.ck-inspector .ck-inspector-horizontal-nav .ck-inspector-horizontal-nav__item{-webkit-appearance:none;background:none;border:0;border-bottom:2px solid transparent;padding:.5em 1em;align-self:stretch}.ck-inspector .ck-inspector-horizontal-nav .ck-inspector-horizontal-nav__item:hover{background:var(--ck-inspector-color-tab-background-hover)}.ck-inspector .ck-inspector-horizontal-nav .ck-inspector-horizontal-nav__item.ck-inspector-horizontal-nav__item_active{border-bottom-color:var(--ck-inspector-color-tab-active-border)}",""])},function(t,n,r){var o=r(1),s=r(42);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,".ck-inspector{--ck-inspector-navbox-empty-background:#fafafa}.ck-inspector .ck-inspector-navbox{display:flex;flex-direction:column;height:100%;align-items:stretch}.ck-inspector .ck-inspector-navbox .ck-inspector-navbox__navigation{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch;min-height:30px;max-height:30px;border-bottom:1px solid var(--ck-inspector-color-border);width:100%;user-select:none;align-items:center}.ck-inspector .ck-inspector-navbox .ck-inspector-navbox__content{display:flex;flex-direction:row;height:100%;overflow:hidden}",""])},function(t,n){t.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(t,n,r){var o=r(1),s=r(45);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,".ck-inspector{--ck-inspector-icon-size:19px;--ck-inspector-button-size:calc(4px + var(--ck-inspector-icon-size));--ck-inspector-color-button:#777;--ck-inspector-color-button-hover:#222;--ck-inspector-color-button-on:#0f79e2}.ck-inspector .ck-inspector-button{width:var(--ck-inspector-button-size);height:var(--ck-inspector-button-size);border:0;overflow:hidden;border-radius:2px;padding:2px;color:var(--ck-inspector-color-button)}.ck-inspector .ck-inspector-button.ck-inspector-button_on,.ck-inspector .ck-inspector-button.ck-inspector-button_on:hover{color:var(--ck-inspector-color-button-on);opacity:1}.ck-inspector .ck-inspector-button.ck-inspector-button_disabled{opacity:.3}.ck-inspector .ck-inspector-button>span{display:none}.ck-inspector .ck-inspector-button:hover{color:var(--ck-inspector-color-button-hover)}.ck-inspector .ck-inspector-button svg{width:var(--ck-inspector-icon-size);height:var(--ck-inspector-icon-size)}.ck-inspector .ck-inspector-button svg,.ck-inspector .ck-inspector-button svg *{fill:currentColor}",""])},function(t,n,r){var o=r(1),s=r(47);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,".ck-inspector{--ck-inspector-explorer-width:300px}.ck-inspector .ck-inspector-pane{display:flex;width:100%}.ck-inspector .ck-inspector-pane.ck-inspector-pane_empty{align-items:center;justify-content:center;padding:1em;background:var(--ck-inspector-navbox-empty-background)}.ck-inspector .ck-inspector-pane.ck-inspector-pane_empty p{align-self:center;width:100%;text-align:center}.ck-inspector .ck-inspector-pane>.ck-inspector-navbox:last-child{min-width:var(--ck-inspector-explorer-width);width:var(--ck-inspector-explorer-width)}.ck-inspector .ck-inspector-pane.ck-inspector-pane_vsplit>.ck-inspector-navbox:first-child{border-right:1px solid var(--ck-inspector-color-border);flex:1 1 auto;overflow:hidden}.ck-inspector .ck-inspector-pane.ck-inspector-pane_vsplit>.ck-inspector-navbox:first-child .ck-inspector-navbox__navigation{align-items:center}.ck-inspector .ck-inspector-pane.ck-inspector-pane_vsplit>.ck-inspector-navbox:first-child .ck-inspector-tree__config label{margin:0 .5em}.ck-inspector .ck-inspector-pane.ck-inspector-pane_vsplit>.ck-inspector-navbox:first-child .ck-inspector-tree__config input+label{margin-right:1em}",""])},function(t,n,r){var o=r(1),s=r(49);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,".ck-inspector-side-pane{position:relative}",""])},function(t,n,r){var o=r(1),s=r(51);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,`.ck-inspector{--ck-inspector-color-tree-node-hover:#eaf2fb;--ck-inspector-color-tree-node-name:#882680;--ck-inspector-color-tree-node-attribute-name:#8a8a8a;--ck-inspector-color-tree-node-tag:#aaa;--ck-inspector-color-tree-node-attribute:#9a4819;--ck-inspector-color-tree-node-attribute-value:#2a43ac;--ck-inspector-color-tree-text-border:#b7b7b7;--ck-inspector-color-tree-node-border-hover:#b0c6e0;--ck-inspector-color-tree-content-delimiter:#ddd;--ck-inspector-color-tree-node-active-bg:#f5faff;--ck-inspector-color-tree-node-name-active-bg:#2b98f0;--ck-inspector-color-tree-node-inactive:#8a8a8a;--ck-inspector-color-tree-selection:#ff1744;--ck-inspector-color-tree-position:#000;--ck-inspector-color-comment:green}.ck-inspector .ck-inspector-tree{background:var(--ck-inspector-color-white);padding:1em;width:100%;height:100%;overflow:auto;user-select:none}.ck-inspector-tree .ck-inspector-tree-node__attribute{font:inherit;margin-left:.4em;color:var(--ck-inspector-color-tree-node-tag)}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__name{color:var(--ck-inspector-color-tree-node-attribute)}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__value{color:var(--ck-inspector-color-tree-node-attribute-value)}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__value:before{content:'="'}.ck-inspector-tree .ck-inspector-tree-node__attribute .ck-inspector-tree-node__attribute__value:after{content:'"'}.ck-inspector-tree .ck-inspector-tree-node .ck-inspector-tree-node__name{color:var(--ck-inspector-color-tree-node-name);display:inline-block;width:100%;padding:0 .1em;border-left:1px solid transparent}.ck-inspector-tree .ck-inspector-tree-node .ck-inspector-tree-node__name:hover{background:var(--ck-inspector-color-tree-node-hover)}.ck-inspector-tree .ck-inspector-tree-node .ck-inspector-tree-node__content{padding:1px .5em 1px 1.5em;border-left:1px solid var(--ck-inspector-color-tree-content-delimiter);white-space:pre-wrap}.ck-inspector-tree .ck-inspector-tree-node:not(.ck-inspector-tree-node_tagless) .ck-inspector-tree-node__name>.ck-inspector-tree-node__name__bracket_open:after{content:"<";color:var(--ck-inspector-color-tree-node-tag)}.ck-inspector-tree .ck-inspector-tree-node:not(.ck-inspector-tree-node_tagless) .ck-inspector-tree-node__name .ck-inspector-tree-node__name__bracket_close:after{content:">";color:var(--ck-inspector-color-tree-node-tag)}.ck-inspector-tree .ck-inspector-tree-node:not(.ck-inspector-tree-node_tagless).ck-inspector-tree-node_empty .ck-inspector-tree-node__name:after{content:" />"}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_tagless .ck-inspector-tree-node__content{display:none}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:not(.ck-inspector-tree-node__name_close),.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:not(.ck-inspector-tree-node__name_close) :not(.ck-inspector-tree__position),.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name:not(.ck-inspector-tree-node__name_close)>.ck-inspector-tree-node__name__bracket:after{background:var(--ck-inspector-color-tree-node-name-active-bg);color:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__content,.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name_close{background:var(--ck-inspector-color-tree-node-active-bg)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__content{border-left-color:var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_active>.ck-inspector-tree-node__name{border-left:1px solid var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_disabled{opacity:.8}.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_disabled .ck-inspector-tree-node__name,.ck-inspector-tree .ck-inspector-tree-node.ck-inspector-tree-node_disabled .ck-inspector-tree-node__name *{color:var(--ck-inspector-color-tree-node-inactive)}.ck-inspector-tree .ck-inspector-tree-text{display:block;margin-bottom:1px}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-node__content{border:1px dotted var(--ck-inspector-color-tree-text-border);border-radius:2px;padding:0 1px;margin-right:1px;display:inline-block;word-break:break-all}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes:not(:empty){margin-right:.5em}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute{background:var(--ck-inspector-color-tree-node-attribute-name);border-radius:2px;padding:0 .5em}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute+.ck-inspector-tree-node__attribute{margin-left:.2em}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute>*{color:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-text .ck-inspector-tree-text__attributes .ck-inspector-tree-node__attribute:first-child{margin-left:0}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active .ck-inspector-tree-node__content{border-style:solid;border-color:var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active .ck-inspector-tree-node__attribute{background:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active .ck-inspector-tree-node__attribute>*{color:var(--ck-inspector-color-tree-node-name-active-bg)}.ck-inspector-tree .ck-inspector-tree-text.ck-inspector-tree-node_active>.ck-inspector-tree-node__content{background:var(--ck-inspector-color-tree-node-name-active-bg);color:var(--ck-inspector-color-white)}.ck-inspector-tree .ck-inspector-tree-text:not(.ck-inspector-tree-node_active) .ck-inspector-tree-node__content:hover{background:var(--ck-inspector-color-tree-node-hover);border-style:solid;border-color:var(--ck-inspector-color-tree-node-border-hover)}.ck-inspector-tree.ck-inspector-tree_text-direction_ltr .ck-inspector-tree-node__content{direction:ltr}.ck-inspector-tree.ck-inspector-tree_text-direction_rtl .ck-inspector-tree-node__content{direction:rtl}.ck-inspector-tree.ck-inspector-tree_text-direction_rtl .ck-inspector-tree-node__content .ck-inspector-tree-node__name{direction:ltr}.ck-inspector-tree.ck-inspector-tree_text-direction_rtl .ck-inspector-tree__position{transform:rotate(180deg)}.ck-inspector-tree .ck-inspector-tree-comment{color:var(--ck-inspector-color-comment);font-style:italic}.ck-inspector-tree .ck-inspector-tree-comment a{color:inherit;text-decoration:underline}.ck-inspector-tree_compact-text .ck-inspector-tree-text,.ck-inspector-tree_compact-text .ck-inspector-tree-text .ck-inspector-tree-node__content{display:inline}.ck-inspector .ck-inspector__tree__navigation{padding:.5em 1em;border-bottom:1px solid var(--ck-inspector-color-border)}.ck-inspector .ck-inspector__tree__navigation label{margin-right:.5em}.ck-inspector-tree .ck-inspector-tree__position{display:inline-block;position:relative;cursor:default;height:100%;pointer-events:none;vertical-align:top}.ck-inspector-tree .ck-inspector-tree__position:after{content:"";position:absolute;border:1px solid var(--ck-inspector-color-tree-position);width:0;top:0;bottom:0;margin-left:-1px}.ck-inspector-tree .ck-inspector-tree__position:before{margin-left:-1px}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_selection{z-index:2;--ck-inspector-color-tree-position:var(--ck-inspector-color-tree-selection)}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_selection:before{content:"";position:absolute;top:-1px;bottom:-1px;left:0;border-top:2px solid var(--ck-inspector-color-tree-position);border-bottom:2px solid var(--ck-inspector-color-tree-position);width:8px}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_selection.ck-inspector-tree__position_end:before{right:-1px;left:auto}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_marker{z-index:1}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_marker:before{content:"";display:block;position:absolute;left:0;top:-1px;cursor:default;width:0;height:0;border-left:0 solid transparent;border-bottom:0 solid transparent;border-right:7px solid transparent;border-top:7px solid var(--ck-inspector-color-tree-position)}.ck-inspector-tree .ck-inspector-tree__position.ck-inspector-tree__position_marker.ck-inspector-tree__position_end:before{border-width:0 7px 7px 0;border-left-color:transparent;border-bottom-color:transparent;border-right-color:var(--ck-inspector-color-tree-position);border-top-color:transparent;left:-5px}`,""])},function(t,n,r){var o=r(1),s=r(53);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,".ck-inspector .ck-inspector-checkbox{vertical-align:middle}",""])},function(t,n,r){var o=r(1),s=r(55);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,'.ck-inspector{--ck-inspector-color-property-list-property-name:#d0363f;--ck-inspector-color-property-list-property-value-true:green;--ck-inspector-color-property-list-property-value-false:red;--ck-inspector-color-property-list-property-value-unknown:#888;--ck-inspector-color-property-list-background:#f5f5f5;--ck-inspector-color-property-list-title-collapser:#727272}.ck-inspector .ck-inspector-property-list{display:grid;grid-template-columns:auto 1fr;background:var(--ck-inspector-color-white)}.ck-inspector .ck-inspector-property-list>:nth-of-type(odd){background:var(--ck-inspector-color-property-list-background)}.ck-inspector .ck-inspector-property-list>:nth-of-type(2n){background:var(--ck-inspector-color-white)}.ck-inspector .ck-inspector-property-list dt{padding:0 .7em 0 1.2em;min-width:15em}.ck-inspector .ck-inspector-property-list dt.ck-inspector-property-list__title_collapsible button{display:inline-block;overflow:hidden;vertical-align:middle;margin-left:-9px;margin-right:.3em;width:0;height:0;border-left:6px solid var(--ck-inspector-color-property-list-title-collapser);border-bottom:3.5px solid transparent;border-right:0 solid transparent;border-top:3.5px solid transparent;transition:transform .2s ease-in-out;transform:rotate(0deg)}.ck-inspector .ck-inspector-property-list dt.ck-inspector-property-list__title_expanded button{transform:rotate(90deg)}.ck-inspector .ck-inspector-property-list dt.ck-inspector-property-list__title_collapsed+dd+.ck-inspector-property-list{display:none}.ck-inspector .ck-inspector-property-list dt .ck-inspector-property-list__title__color-box{width:12px;height:12px;vertical-align:text-top;display:inline-block;margin-right:3px;border-radius:2px;border:1px solid #000}.ck-inspector .ck-inspector-property-list dt label{color:var(--ck-inspector-color-property-list-property-name)}.ck-inspector .ck-inspector-property-list dd{padding-right:.7em}.ck-inspector .ck-inspector-property-list dd input{width:100%}.ck-inspector .ck-inspector-property-list dd input[value=false]{color:var(--ck-inspector-color-property-list-property-value-false)}.ck-inspector .ck-inspector-property-list dd input[value=true]{color:var(--ck-inspector-color-property-list-property-value-true)}.ck-inspector .ck-inspector-property-list dd input[value="function() {\u2026}"],.ck-inspector .ck-inspector-property-list dd input[value=undefined]{color:var(--ck-inspector-color-property-list-property-value-unknown)}.ck-inspector .ck-inspector-property-list dd input[value="function() {\u2026}"]{font-style:italic}.ck-inspector .ck-inspector-property-list .ck-inspector-property-list{grid-column:1/-1;margin-left:1em;background:transparent}.ck-inspector .ck-inspector-property-list .ck-inspector-property-list>:nth-of-type(2n),.ck-inspector .ck-inspector-property-list .ck-inspector-property-list>:nth-of-type(odd){background:transparent}',""])},function(t,n,r){var o=r(1),s=r(57);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,`.ck-inspector .ck-inspector__object-inspector{width:100%;background:var(--ck-inspector-color-white);overflow:auto}.ck-inspector .ck-inspector__object-inspector h2,.ck-inspector .ck-inspector__object-inspector h3{display:flex;flex-direction:row;flex-wrap:nowrap}.ck-inspector .ck-inspector__object-inspector h2{display:flex;align-items:center;padding:1em;overflow:hidden;text-overflow:ellipsis}.ck-inspector .ck-inspector__object-inspector h2>span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;margin-right:auto}.ck-inspector .ck-inspector__object-inspector h2>.ck-inspector-button{margin-left:.5em}.ck-inspector .ck-inspector__object-inspector h2 a{font-weight:700;color:var(--ck-inspector-color-tree-node-name)}.ck-inspector .ck-inspector__object-inspector h2 em:after,.ck-inspector .ck-inspector__object-inspector h2 em:before{content:'"'}.ck-inspector .ck-inspector__object-inspector h3{display:flex;align-items:center;font-size:12px;padding:.4em .7em}.ck-inspector .ck-inspector__object-inspector h3 a{color:inherit;font-weight:700;margin-right:auto}.ck-inspector .ck-inspector__object-inspector h3 .ck-inspector-button{visibility:hidden}.ck-inspector .ck-inspector__object-inspector h3:hover .ck-inspector-button{visibility:visible}.ck-inspector .ck-inspector__object-inspector hr{border-top:1px solid var(--ck-inspector-color-border)}`,""])},function(t,n,r){var o=r(1),s=r(59);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,".ck-inspector-model-tree__hide-markers .ck-inspector-tree__position.ck-inspector-tree__position_marker{display:none}",""])},function(t,n,r){var o=r(1),s=r(61);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,".ck-inspector .ck-inspector-editor-quick-actions{display:flex;align-content:center;justify-content:center;align-items:center;flex-direction:row;flex-wrap:nowrap}.ck-inspector .ck-inspector-editor-quick-actions>.ck-inspector-button{margin-left:.3em}",""])},function(t,n,r){var o=r(1),s=r(63);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,`.ck-inspector{--ck-inspector-color-white:#fff;--ck-inspector-color-black:#000;--ck-inspector-color-background:#f3f3f3;--ck-inspector-color-link:#005cc6;--ck-inspector-code-font-size:11px;--ck-inspector-code-font-family:monaco,Consolas,Lucida Console,monospace;--ck-inspector-color-border:#d0d0d0}.ck-inspector,.ck-inspector :not(select){box-sizing:border-box;width:auto;height:auto;position:static;margin:0;padding:0;border:0;background:transparent;text-decoration:none;transition:none;word-wrap:break-word;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-size:12px;line-height:17px;font-weight:400;-webkit-font-smoothing:auto}.ck-inspector{overflow:hidden;border-collapse:collapse;color:var(--ck-inspector-color-black);text-align:left;white-space:normal;cursor:auto;float:none;background:var(--ck-inspector-color-background);border-top:1px solid var(--ck-inspector-color-border);z-index:9999}.ck-inspector.ck-inspector_collapsed>.ck-inspector-navbox>.ck-inspector-navbox__navigation .ck-inspector-horizontal-nav{display:none}.ck-inspector .ck-inspector-navbox__navigation__logo{background-size:contain;background-repeat:no-repeat;background-position:50%;display:block;overflow:hidden;text-indent:100px;align-self:center;white-space:nowrap;margin-right:1em;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='68' height='64' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M43.71 11.025a11.508 11.508 0 00-1.213 5.159c0 6.42 5.244 11.625 11.713 11.625.083 0 .167 0 .25-.002v16.282a5.464 5.464 0 01-2.756 4.739L30.986 60.7a5.548 5.548 0 01-5.512 0L4.756 48.828A5.464 5.464 0 012 44.089V20.344c0-1.955 1.05-3.76 2.756-4.738L25.474 3.733a5.548 5.548 0 015.512 0l12.724 7.292z' fill='%23FFF'/%3E%3Cpath d='M45.684 8.79a12.604 12.604 0 00-1.329 5.65c0 7.032 5.744 12.733 12.829 12.733.091 0 .183-.001.274-.003v17.834a5.987 5.987 0 01-3.019 5.19L31.747 63.196a6.076 6.076 0 01-6.037 0L3.02 50.193A5.984 5.984 0 010 45.003V18.997c0-2.14 1.15-4.119 3.019-5.19L25.71.804a6.076 6.076 0 016.037 0L45.684 8.79zm-29.44 11.89c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h25.489c.833 0 1.51-.67 1.51-1.498v-.715c0-.827-.677-1.498-1.51-1.498h-25.49zm0 9.227c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h18.479c.833 0 1.509-.67 1.509-1.498v-.715c0-.827-.676-1.498-1.51-1.498H16.244zm0 9.227c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h25.489c.833 0 1.51-.67 1.51-1.498v-.715c0-.827-.677-1.498-1.51-1.498h-25.49zm41.191-14.459c-5.835 0-10.565-4.695-10.565-10.486 0-5.792 4.73-10.487 10.565-10.487C63.27 3.703 68 8.398 68 14.19c0 5.791-4.73 10.486-10.565 10.486zm3.422-8.68c0-.467-.084-.875-.251-1.225a2.547 2.547 0 00-.686-.88 2.888 2.888 0 00-1.026-.531 4.418 4.418 0 00-1.259-.175c-.134 0-.283.006-.447.018a2.72 2.72 0 00-.446.07l.075-1.4h3.587v-1.8h-5.462l-.214 5.06c.319-.116.682-.21 1.089-.28.406-.071.77-.107 1.088-.107.218 0 .437.021.655.063.218.041.413.114.585.218s.313.244.422.419c.109.175.163.391.163.65 0 .424-.132.745-.396.961a1.434 1.434 0 01-.938.325c-.352 0-.656-.1-.912-.3-.256-.2-.43-.453-.523-.762l-1.925.588c.1.35.258.664.472.943.214.279.47.514.767.706.298.191.63.339.995.443.365.104.749.156 1.151.156.437 0 .86-.064 1.272-.193.41-.13.778-.323 1.1-.581a2.8 2.8 0 00.775-.981c.193-.396.29-.864.29-1.405z' fill='%231EBC61' fill-rule='nonzero'/%3E%3C/g%3E%3C/svg%3E");width:1.8em;height:1.8em;margin-left:1em}.ck-inspector .ck-inspector-navbox__navigation__toggle{margin-right:1em}.ck-inspector .ck-inspector-navbox__navigation__toggle.ck-inspector-navbox__navigation__toggle_up{transform:rotate(180deg)}.ck-inspector .ck-inspector-editor-selector{margin-left:auto;margin-right:.3em}.ck-inspector .ck-inspector-editor-selector select{margin-left:.5em}.ck-inspector .ck-inspector-code,.ck-inspector .ck-inspector-code *{font-size:var(--ck-inspector-code-font-size);font-family:var(--ck-inspector-code-font-family);cursor:default}.ck-inspector a{color:var(--ck-inspector-color-link);text-decoration:none}.ck-inspector a:hover{text-decoration:underline;cursor:pointer}.ck-inspector button{outline:0}.ck-inspector .ck-inspector-separator{border-right:1px solid var(--ck-inspector-color-border);display:inline-block;width:0;height:20px;margin:0 .5em;vertical-align:middle}`,""])},function(t,n,r){var o=r(1),s=r(65);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[t.i,s,""]]);var c={injectType:"singletonStyleTag",attributes:{"data-cke-inspector":!0},insert:"head",singleton:!0};o(s,c),t.exports=s.locals||{}},function(t,n,r){(t.exports=r(2)(!1)).push([t.i,"html body.ck-inspector-body-expanded{margin-bottom:var(--ck-inspector-height)}html body.ck-inspector-body-collapsed{margin-bottom:var(--ck-inspector-collapsed-height)}.ck-inspector-wrapper *{box-sizing:border-box}",""])},function(t,n,r){r.r(n),r.d(n,"default",function(){return Ye});var o=r(0),s=r.n(o),c=r(5),u=r.n(c);function h(k){return"Minified Redux error #"+k+"; visit https://redux.js.org/Errors?code="+k+" for the full message or use the non-minified dev environment for full errors. "}var f=typeof Symbol=="function"&&Symbol.observable||"@@observable",p=function(){return Math.random().toString(36).substring(7).split("").join(".")},y={INIT:"@@redux/INIT"+p(),REPLACE:"@@redux/REPLACE"+p(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+p()}};function T(k){if(typeof k!="object"||k===null)return!1;for(var g=k;Object.getPrototypeOf(g)!==null;)g=Object.getPrototypeOf(g);return Object.getPrototypeOf(k)===g}function A(k,g,w){var _;if(typeof g=="function"&&typeof w=="function"||typeof w=="function"&&typeof arguments[3]=="function")throw new Error(h(0));if(typeof g=="function"&&w===void 0&&(w=g,g=void 0),w!==void 0){if(typeof w!="function")throw new Error(h(1));return w(A)(k,g)}if(typeof k!="function")throw new Error(h(2));var I=k,P=g,N=[],Y=N,ne=!1;function ce(){Y===N&&(Y=N.slice())}function ge(){if(ne)throw new Error(h(3));return P}function Ee(Re){if(typeof Re!="function")throw new Error(h(4));if(ne)throw new Error(h(5));var Le=!0;return ce(),Y.push(Re),function(){if(Le){if(ne)throw new Error(h(6));Le=!1,ce();var ct=Y.indexOf(Re);Y.splice(ct,1),N=null}}}function Ie(Re){if(!T(Re))throw new Error(h(7));if(Re.type===void 0)throw new Error(h(8));if(ne)throw new Error(h(9));try{ne=!0,P=I(P,Re)}finally{ne=!1}for(var Le=N=Y,ct=0;ct<Le.length;ct++)(0,Le[ct])();return Re}function xe(Re){if(typeof Re!="function")throw new Error(h(10));I=Re,Ie({type:y.REPLACE})}function ze(){var Re,Le=Ee;return(Re={subscribe:function(ct){if(typeof ct!="object"||ct===null)throw new Error(h(11));function Ge(){ct.next&&ct.next(ge())}return Ge(),{unsubscribe:Le(Ge)}}})[f]=function(){return this},Re}return Ie({type:y.INIT}),(_={dispatch:Ie,subscribe:Ee,getState:ge,replaceReducer:xe})[f]=ze,_}r(8);var M=s.a.createContext(null),B=function(k){k()};function O(){var k=B,g=null,w=null;return{clear:function(){g=null,w=null},notify:function(){k(function(){for(var _=g;_;)_.callback(),_=_.next})},get:function(){for(var _=[],I=g;I;)_.push(I),I=I.next;return _},subscribe:function(_){var I=!0,P=w={callback:_,next:null,prev:w};return P.prev?P.prev.next=P:g=P,function(){I&&g!==null&&(I=!1,P.next?P.next.prev=P.prev:w=P.prev,P.prev?P.prev.next=P.next:g=P.next)}}}}var V={notify:function(){},get:function(){return[]}};function F(k,g){var w,_=V;function I(){N.onStateChange&&N.onStateChange()}function P(){w||(w=g?g.addNestedSub(I):k.subscribe(I),_=O())}var N={addNestedSub:function(Y){return P(),_.subscribe(Y)},notifyNestedSubs:function(){_.notify()},handleChangeWrapper:I,isSubscribed:function(){return Boolean(w)},trySubscribe:P,tryUnsubscribe:function(){w&&(w(),w=void 0,_.clear(),_=V)},getListeners:function(){return _}};return N}var Z=typeof window!="undefined"&&window.document!==void 0&&window.document.createElement!==void 0?o.useLayoutEffect:o.useEffect,ae=function(k){var g=k.store,w=k.context,_=k.children,I=Object(o.useMemo)(function(){var Y=F(g);return Y.onStateChange=Y.notifyNestedSubs,{store:g,subscription:Y}},[g]),P=Object(o.useMemo)(function(){return g.getState()},[g]);Z(function(){var Y=I.subscription;return Y.trySubscribe(),P!==g.getState()&&Y.notifyNestedSubs(),function(){Y.tryUnsubscribe(),Y.onStateChange=null}},[I,P]);var N=w||M;return s.a.createElement(N.Provider,{value:I},_)};function W(){return(W=Object.assign||function(k){for(var g=1;g<arguments.length;g++){var w=arguments[g];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(k[_]=w[_])}return k}).apply(this,arguments)}function se(k,g){if(k==null)return{};var w,_,I={},P=Object.keys(k);for(_=0;_<P.length;_++)w=P[_],g.indexOf(w)>=0||(I[w]=k[w]);return I}var te=r(11),ve=r.n(te),ee=r(16),Oe=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Ue=["reactReduxForwardedRef"],we=[],ke=[null,null];function Te(k,g){var w=k[1];return[g.payload,w+1]}function ie(k,g,w){Z(function(){return k.apply(void 0,g)},w)}function me(k,g,w,_,I,P,N){k.current=_,g.current=I,w.current=!1,P.current&&(P.current=null,N())}function D(k,g,w,_,I,P,N,Y,ne,ce){if(k){var ge=!1,Ee=null,Ie=function(){if(!ge){var xe,ze,Re=g.getState();try{xe=_(Re,I.current)}catch(Le){ze=Le,Ee=Le}ze||(Ee=null),xe===P.current?N.current||ne():(P.current=xe,Y.current=xe,N.current=!0,ce({type:"STORE_UPDATED",payload:{error:ze}}))}};return w.onStateChange=Ie,w.trySubscribe(),Ie(),function(){if(ge=!0,w.tryUnsubscribe(),w.onStateChange=null,Ee)throw Ee}}}var re=function(){return[null,0]};function pe(k,g){g===void 0&&(g={});var w=g,_=w.getDisplayName,I=_===void 0?function(Ke){return"ConnectAdvanced("+Ke+")"}:_,P=w.methodName,N=P===void 0?"connectAdvanced":P,Y=w.renderCountProp,ne=Y===void 0?void 0:Y,ce=w.shouldHandleStateChanges,ge=ce===void 0||ce,Ee=w.storeKey,Ie=Ee===void 0?"store":Ee,xe=(w.withRef,w.forwardRef),ze=xe!==void 0&&xe,Re=w.context,Le=Re===void 0?M:Re,ct=se(w,Oe),Ge=Le;return function(Ke){var Bt=Ke.displayName||Ke.name||"Component",zt=I(Bt),Sn=W({},ct,{getDisplayName:I,methodName:N,renderCountProp:ne,shouldHandleStateChanges:ge,storeKey:Ie,displayName:zt,wrappedComponentName:Bt,WrappedComponent:Ke}),on=ct.pure,sn=on?o.useMemo:function(ht){return ht()};function mn(ht){var Oi=Object(o.useMemo)(function(){var $r=ht.reactReduxForwardedRef,el=se(ht,Ue);return[ht.context,$r,el]},[ht]),xn=Oi[0],vo=Oi[1],Xt=Oi[2],Zo=Object(o.useMemo)(function(){return xn&&xn.Consumer&&Object(ee.isContextConsumer)(s.a.createElement(xn.Consumer,null))?xn:Ge},[xn,Ge]),vi=Object(o.useContext)(Zo),an=Boolean(ht.store)&&Boolean(ht.store.getState)&&Boolean(ht.store.dispatch);Boolean(vi)&&Boolean(vi.store);var Kn=an?ht.store:vi.store,yi=Object(o.useMemo)(function(){return function($r){return k($r.dispatch,Sn)}(Kn)},[Kn]),Pn=Object(o.useMemo)(function(){if(!ge)return ke;var $r=F(Kn,an?null:vi.subscription),el=$r.notifyNestedSubs.bind($r);return[$r,el]},[Kn,an,vi]),ni=Pn[0],Jl=Pn[1],Ql=Object(o.useMemo)(function(){return an?vi:W({},vi,{subscription:ni})},[an,vi,ni]),Xl=Object(o.useReducer)(Te,we,re),Hs=Xl[0][0],Us=Xl[1];if(Hs&&Hs.error)throw Hs.error;var Zl=Object(o.useRef)(),Qa=Object(o.useRef)(Xt),Ws=Object(o.useRef)(),ec=Object(o.useRef)(!1),Xa=sn(function(){return Ws.current&&Xt===Qa.current?Ws.current:yi(Kn.getState(),Xt)},[Kn,Hs,Xt]);ie(me,[Qa,Zl,ec,Xt,Xa,Ws,Jl]),ie(D,[ge,Kn,ni,yi,Qa,Zl,ec,Ws,Jl,Us],[Kn,ni,yi]);var Za=Object(o.useMemo)(function(){return s.a.createElement(Ke,W({},Xa,{ref:vo}))},[vo,Ke,Xa]);return Object(o.useMemo)(function(){return ge?s.a.createElement(Zo.Provider,{value:Ql},Za):Za},[Zo,Za,Ql])}var kt=on?s.a.memo(mn):mn;if(kt.WrappedComponent=Ke,kt.displayName=mn.displayName=zt,ze){var wi=s.a.forwardRef(function(ht,Oi){return s.a.createElement(kt,W({},ht,{reactReduxForwardedRef:Oi}))});return wi.displayName=zt,wi.WrappedComponent=Ke,ve()(wi,Ke)}return ve()(kt,Ke)}}function Be(k,g){return k===g?k!==0||g!==0||1/k==1/g:k!=k&&g!=g}function Pe(k,g){if(Be(k,g))return!0;if(typeof k!="object"||k===null||typeof g!="object"||g===null)return!1;var w=Object.keys(k),_=Object.keys(g);if(w.length!==_.length)return!1;for(var I=0;I<w.length;I++)if(!Object.prototype.hasOwnProperty.call(g,w[I])||!Be(k[w[I]],g[w[I]]))return!1;return!0}function Ve(k){return function(g,w){var _=k(g,w);function I(){return _}return I.dependsOnOwnProps=!1,I}}function Me(k){return k.dependsOnOwnProps!==null&&k.dependsOnOwnProps!==void 0?Boolean(k.dependsOnOwnProps):k.length!==1}function qe(k,g){return function(w,_){_.displayName;var I=function(P,N){return I.dependsOnOwnProps?I.mapToProps(P,N):I.mapToProps(P)};return I.dependsOnOwnProps=!0,I.mapToProps=function(P,N){I.mapToProps=k,I.dependsOnOwnProps=Me(k);var Y=I(P,N);return typeof Y=="function"&&(I.mapToProps=Y,I.dependsOnOwnProps=Me(Y),Y=I(P,N)),Y},I}}var lt=[function(k){return typeof k=="function"?qe(k):void 0},function(k){return k?void 0:Ve(function(g){return{dispatch:g}})},function(k){return k&&typeof k=="object"?Ve(function(g){return function(w,_){var I={},P=function(Y){var ne=w[Y];typeof ne=="function"&&(I[Y]=function(){return _(ne.apply(void 0,arguments))})};for(var N in w)P(N);return I}(k,g)}):void 0}],K=[function(k){return typeof k=="function"?qe(k):void 0},function(k){return k?void 0:Ve(function(){return{}})}];function j(k,g,w){return W({},w,k,g)}var de=[function(k){return typeof k=="function"?function(g){return function(w,_){_.displayName;var I,P=_.pure,N=_.areMergedPropsEqual,Y=!1;return function(ne,ce,ge){var Ee=g(ne,ce,ge);return Y?P&&N(Ee,I)||(I=Ee):(Y=!0,I=Ee),I}}}(k):void 0},function(k){return k?void 0:function(){return j}}],v=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function E(k,g,w,_){return function(I,P){return w(k(I,P),g(_,P),P)}}function x(k,g,w,_,I){var P,N,Y,ne,ce,ge=I.areStatesEqual,Ee=I.areOwnPropsEqual,Ie=I.areStatePropsEqual,xe=!1;function ze(Re,Le){var ct,Ge,Ke=!Ee(Le,N),Bt=!ge(Re,P);return P=Re,N=Le,Ke&&Bt?(Y=k(P,N),g.dependsOnOwnProps&&(ne=g(_,N)),ce=w(Y,ne,N)):Ke?(k.dependsOnOwnProps&&(Y=k(P,N)),g.dependsOnOwnProps&&(ne=g(_,N)),ce=w(Y,ne,N)):(Bt&&(ct=k(P,N),Ge=!Ie(ct,Y),Y=ct,Ge&&(ce=w(Y,ne,N))),ce)}return function(Re,Le){return xe?ze(Re,Le):(Y=k(P=Re,N=Le),ne=g(_,N),ce=w(Y,ne,N),xe=!0,ce)}}function L(k,g){var w=g.initMapStateToProps,_=g.initMapDispatchToProps,I=g.initMergeProps,P=se(g,v),N=w(k,P),Y=_(k,P),ne=I(k,P);return(P.pure?x:E)(N,Y,ne,k,P)}var z=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function U(k,g,w){for(var _=g.length-1;_>=0;_--){var I=g[_](k);if(I)return I}return function(P,N){throw new Error("Invalid value of type "+typeof k+" for "+w+" argument when connecting component "+N.wrappedComponentName+".")}}function ue(k,g){return k===g}function $e(k){var g=k===void 0?{}:k,w=g.connectHOC,_=w===void 0?pe:w,I=g.mapStateToPropsFactories,P=I===void 0?K:I,N=g.mapDispatchToPropsFactories,Y=N===void 0?lt:N,ne=g.mergePropsFactories,ce=ne===void 0?de:ne,ge=g.selectorFactory,Ee=ge===void 0?L:ge;return function(Ie,xe,ze,Re){Re===void 0&&(Re={});var Le=Re,ct=Le.pure,Ge=ct===void 0||ct,Ke=Le.areStatesEqual,Bt=Ke===void 0?ue:Ke,zt=Le.areOwnPropsEqual,Sn=zt===void 0?Pe:zt,on=Le.areStatePropsEqual,sn=on===void 0?Pe:on,mn=Le.areMergedPropsEqual,kt=mn===void 0?Pe:mn,wi=se(Le,z),ht=U(Ie,P,"mapStateToProps"),Oi=U(xe,Y,"mapDispatchToProps"),xn=U(ze,ce,"mergeProps");return _(Ee,W({methodName:"connect",getDisplayName:function(vo){return"Connect("+vo+")"},shouldHandleStateChanges:Boolean(Ie),initMapStateToProps:ht,initMapDispatchToProps:Oi,initMergeProps:xn,pure:Ge,areStatesEqual:Bt,areOwnPropsEqual:Sn,areStatePropsEqual:sn,areMergedPropsEqual:kt},wi))}}var We=$e(),it;it=c.unstable_batchedUpdates,B=it;function Ze(k){return{type:"SET_MODEL_ACTIVE_TAB",tabName:k}}function un(){return{type:"TOGGLE_IS_COLLAPSED"}}function qt(k){return{type:"SET_EDITORS",editors:k}}function zn(k){return{type:"SET_CURRENT_EDITOR_NAME",editorName:k}}function Jt(k){return k&&k.is("element")}function dn(k){return k&&k.is("rootElement")}function ci(k){return k.getPath?k.getPath():k.path}function ui(k){return{path:ci(k),stickiness:k.stickiness,index:k.index,isAtEnd:k.isAtEnd,isAtStart:k.isAtStart,offset:k.offset,textNode:k.textNode&&k.textNode.data}}class vt{static group(...g){console.group(...g)}static groupEnd(...g){console.groupEnd(...g)}static log(...g){console.log(...g)}static warn(...g){console.warn(...g)}}let ao=0;function lr(k){const g={editors:{},options:{}};if(typeof k[0]=="string")vt.warn(`[CKEditorInspector] The CKEditorInspector.attach( '${k[0]}', editor ) syntax has been deprecated and will be removed in the near future. To pass a name of an editor instance, use CKEditorInspector.attach( { '${k[0]}': editor } ) instead. Learn more in https://github.com/ckeditor/ckeditor5-inspector/blob/master/README.md.`),g.editors[k[0]]=k[1];else{if((w=k[0]).model&&w.editing)g.editors["editor-"+ ++ao]=k[0];else for(const _ in k[0])g.editors[_]=k[0][_];g.options=k[1]||g.options}var w;return g}function xi(k){return[...k][0][0]||""}function lo(k,g){const w=Math.min(k.length,g.length);for(let _=0;_<w;_++)if(k[_]!=g[_])return _;return k.length==g.length?"same":k.length<g.length?"prefix":"extension"}var Ho=r(17);function Mr(k,g=!0){if(k===void 0)return"undefined";if(typeof k=="function")return"function() {\u2026}";const w=Object(Ho.stringify)(k,co,null,{maxDepth:1});return g?w:w.replace(/(^"|"$)/g,"")}function Kt(k){const g={};for(const w in k)g[w]=k[w],g[w].value=Mr(g[w].value);return g}function Hn(k,g){return k.length>g?k.substr(0,g)+`\u2026 [${k.length-g} characters left]`:k}function co(k,g,w){return typeof k=="string"?`"${k.replace("'",'"')}"`:w(k)}const En="https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_",Pi=["#03a9f4","#fb8c00","#009688","#e91e63","#4caf50","#00bcd4","#607d8b","#cddc39","#9c27b0","#f44336","#6d4c41","#8bc34a","#3f51b5","#2196f3","#f4511e","#673ab7","#ffb300"];function Or(k){if(!k)return[];const g=[...k.model.document.roots];return g.filter(({rootName:w})=>w!=="$graveyard").concat(g.filter(({rootName:w})=>w==="$graveyard"))}function Xn(k,g){const w={editorNode:g,properties:{},attributes:{}};Jt(g)?(dn(g)?(w.type="RootElement",w.name=g.rootName,w.url=En+"rootelement-RootElement.html"):(w.type="Element",w.name=g.name,w.url=En+"element-Element.html"),w.properties={childCount:{value:g.childCount},startOffset:{value:g.startOffset},endOffset:{value:g.endOffset},maxOffset:{value:g.maxOffset}}):(w.name=g.data,w.type="Text",w.url=En+"text-Text.html",w.properties={startOffset:{value:g.startOffset},endOffset:{value:g.endOffset},offsetSize:{value:g.offsetSize}}),w.properties.path={value:ci(g)},ho(g).forEach(([_,I])=>{w.attributes[_]={value:I}}),w.properties=Kt(w.properties),w.attributes=Kt(w.attributes);for(const _ in w.attributes){const I={},P=k.model.schema.getAttributeProperties(_);for(const N in P)I[N]={value:P[N]};w.attributes[_].subProperties=Kt(I)}return w}function uo(k,g){const w={},{startOffset:_,endOffset:I}=k;return Object.assign(w,{startOffset:_,endOffset:I,node:k,path:k.getPath(),positionsBefore:[],positionsAfter:[]}),Jt(k)?function(P,N){const Y=P.node;Object.assign(P,{type:"element",name:Y.name,children:[],maxOffset:Y.maxOffset,positions:[]});for(const ne of Y.getChildren())P.children.push(uo(ne,N));(function(ne,ce){for(const ge of ce){const Ee=Uo(ne,ge);for(const Ie of Ee){const xe=Ie.offset;if(xe===0){const ze=ne.children[0];ze?ze.positionsBefore.push(Ie):ne.positions.push(Ie)}else if(xe===ne.maxOffset){const ze=ne.children[ne.children.length-1];ze?ze.positionsAfter.push(Ie):ne.positions.push(Ie)}else{let ze=Ie.isEnd?0:ne.children.length-1,Re=ne.children[ze];for(;Re;){if(Re.startOffset===xe){Re.positionsBefore.push(Ie);break}if(Re.endOffset===xe){const Le=ne.children[ze+1],ct=Re.type==="text"&&Le&&Le.type==="element",Ge=Re.type==="element"&&Le&&Le.type==="text",Ke=Re.type==="text"&&Le&&Le.type==="text";Ie.isEnd&&(ct||Ge||Ke)?Le.positionsBefore.push(Ie):Re.positionsAfter.push(Ie);break}if(Re.startOffset<xe&&Re.endOffset>xe){Re.positions.push(Ie);break}ze+=Ie.isEnd?1:-1,Re=ne.children[ze]}}}}})(P,N),P.attributes=di(Y)}(w,g):function(P){const N=P.node;Object.assign(P,{type:"text",text:N.data,positions:[],presentation:{dontRenderAttributeValue:!0}}),P.attributes=di(N)}(w),w}function di(k){const g=ho(k).map(([w,_])=>[w,Mr(_,!1)]);return new Map(g)}function ho(k){return[...k.getAttributes()].sort(([g],[w])=>g<w?-1:1)}function Uo(k,g){const w=k.path,_=g.start.path,I=g.end.path,P=[];return cr(w,_)&&P.push({offset:_[_.length-1],isEnd:!1,presentation:g.presentation||null,type:g.type,name:g.name||null}),cr(w,I)&&P.push({offset:I[I.length-1],isEnd:!0,presentation:g.presentation||null,type:g.type,name:g.name||null}),P}function cr(k,g){return k.length===g.length-1&&lo(k,g)==="prefix"}class Nr{constructor(g){this._config=g}startListening(g){g.model.document.on("change",this._config.onModelChange),g.editing.view.on("render",this._config.onViewRender),g.on("change:isReadOnly",this._config.onReadOnlyChange)}stopListening(g){g.model.document.off("change",this._config.onModelChange),g.editing.view.off("render",this._config.onViewRender),g.off("change:isReadOnly",this._config.onReadOnlyChange)}}function Zn(k){return k.editors.get(k.currentEditorName)}class St{static set(g,w){window.localStorage.setItem("ck5-inspector-"+g,w)}static get(g){return window.localStorage.getItem("ck5-inspector-"+g)}}function fo(k,g,w){const _=function(I,P,N){if(I.ui.activeTab!=="Model")return P;if(!P)return Ki(I,P);switch(N.type){case"SET_MODEL_CURRENT_ROOT_NAME":return function(Y,ne,ce){const ge=ce.currentRootName;return $t(Se(Se({},ne),Dr(Y,ne,{currentRootName:ge})),{currentNode:null,currentNodeDefinition:null,currentRootName:ge})}(I,P,N);case"SET_MODEL_CURRENT_NODE":return $t(Se({},P),{currentNode:N.currentNode,currentNodeDefinition:Xn(Zn(I),N.currentNode)});case"SET_ACTIVE_INSPECTOR_TAB":case"UPDATE_MODEL_STATE":return Se(Se({},P),Dr(I,P));case"SET_EDITORS":case"SET_CURRENT_EDITOR_NAME":return Ki(I,P);default:return P}}(k,g,w);return _&&(_.ui=function(I,P){if(!I)return{activeTab:St.get("active-model-tab-name")||"Inspect",showMarkers:St.get("model-show-markers")==="true",showCompactText:St.get("model-compact-text")==="true"};switch(P.type){case"SET_MODEL_ACTIVE_TAB":return function(N,Y){return St.set("active-model-tab-name",Y.tabName),$t(Se({},N),{activeTab:Y.tabName})}(I,P);case"TOGGLE_MODEL_SHOW_MARKERS":return function(N){const Y=!N.showMarkers;return St.set("model-show-markers",Y),$t(Se({},N),{showMarkers:Y})}(I);case"TOGGLE_MODEL_SHOW_COMPACT_TEXT":return function(N){const Y=!N.showCompactText;return St.set("model-compact-text",Y),$t(Se({},N),{showCompactText:Y})}(I);default:return I}}(_.ui,w)),_}function Ki(k,g={}){const w=Zn(k);if(!w)return{ui:g.ui};const _=Or(w)[0].rootName;return $t(Se(Se({},g),Dr(k,g,{currentRootName:_})),{currentRootName:_,currentNode:null,currentNodeDefinition:null})}function Dr(k,g,w){const _=Zn(k),I=Se(Se({},g),w),P=I.currentRootName,N=function(Ee,Ie){if(!Ee)return[];const xe=[],ze=Ee.model;for(const Re of ze.document.selection.getRanges())Re.root.rootName===Ie&&xe.push({type:"selection",start:ui(Re.start),end:ui(Re.end)});return xe}(_,P),Y=function(Ee,Ie){if(!Ee)return[];const xe=[],ze=Ee.model;let Re=0;for(const Le of ze.markers){const{name:ct,affectsData:Ge,managedUsingOperations:Ke}=Le,Bt=Le.getStart(),zt=Le.getEnd();Bt.root.rootName===Ie&&xe.push({type:"marker",marker:Le,name:ct,affectsData:Ge,managedUsingOperations:Ke,presentation:{color:Pi[Re++%(Pi.length-1)]},start:ui(Bt),end:ui(zt)})}return xe}(_,P),ne=function({currentEditor:Ee,currentRootName:Ie,ranges:xe,markers:ze}){return Ee?[uo(Ee.model.document.getRoot(Ie),[...xe,...ze])]:[]}({currentEditor:_,currentRootName:I.currentRootName,ranges:N,markers:Y});let ce=I.currentNode,ge=I.currentNodeDefinition;return ce?ce.root.rootName!==P||!dn(ce)&&!ce.parent?(ce=null,ge=null):ge=Xn(_,ce):ge=null,{treeDefinition:ne,currentNode:ce,currentNodeDefinition:ge,ranges:N,markers:Y}}function Wo(k){return{type:"SET_VIEW_ACTIVE_TAB",tabName:k}}function $(){return{type:"UPDATE_VIEW_STATE"}}function X(k){return k&&k.name}function ye(k){return k&&X(k)&&k.is("attributeElement")}function Ne(k){return k&&X(k)&&k.is("emptyElement")}function ft(k){return k&&X(k)&&k.is("uiElement")}function et(k){return k&&X(k)&&k.is("rawElement")}function mt(k){return k&&k.is("rootElement")}function yt(k){return{path:[...k.parent.getPath(),k.offset],offset:k.offset,isAtEnd:k.isAtEnd,isAtStart:k.isAtStart,parent:nn(k.parent)}}function nn(k){return X(k)?ye(k)?"attribute:"+k.name:mt(k)?"root:"+k.name:"container:"+k.name:k.data}const dt="https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view",Lt=`&lt;!--The View UI element content has been skipped. <a href="${dt}_uielement-UIElement.html" target="_blank">Find out why</a>. --&gt;`,Cn=`&lt;!--The View raw element content has been skipped. <a href="${dt}_rawelement-RawElement.html" target="_blank">Find out why</a>. --&gt;`;function Un(k){return k?[...k.editing.view.document.roots]:[]}function Qt(k){const g={editorNode:k,properties:{},attributes:{},customProperties:{}};if(X(k)){mt(k)?(g.type="RootEditableElement",g.name=k.rootName,g.url=dt+"_rooteditableelement-RootEditableElement.html"):(g.name=k.name,ye(k)?(g.type="AttributeElement",g.url=dt+"_attributeelement-AttributeElement.html"):Ne(k)?(g.type="EmptyElement",g.url=dt+"_emptyelement-EmptyElement.html"):ft(k)?(g.type="UIElement",g.url=dt+"_uielement-UIElement.html"):et(k)?(g.type="RawElement",g.url=dt+"_rawelement-RawElement.html"):function(w){return w&&X(w)&&w.is("editableElement")}(k)?(g.type="EditableElement",g.url=dt+"_editableelement-EditableElement.html"):(g.type="ContainerElement",g.url=dt+"_containerelement-ContainerElement.html")),Ii(k).forEach(([w,_])=>{g.attributes[w]={value:_}}),g.properties={index:{value:k.index},isEmpty:{value:k.isEmpty},childCount:{value:k.childCount}};for(let[w,_]of k.getCustomProperties())typeof w=="symbol"&&(w=w.toString()),g.customProperties[w]={value:_}}else g.name=k.data,g.type="Text",g.url=dt+"_text-Text.html",g.properties={index:{value:k.index}};return g.properties=Kt(g.properties),g.customProperties=Kt(g.customProperties),g.attributes=Kt(g.attributes),g}function Wn(k,g){const w={};return Object.assign(w,{index:k.index,path:k.getPath(),node:k,positionsBefore:[],positionsAfter:[]}),X(k)?function(_,I){const P=_.node;Object.assign(_,{type:"element",children:[],positions:[]}),_.name=P.name,ye(P)?_.elementType="attribute":mt(P)?_.elementType="root":Ne(P)?_.elementType="empty":ft(P)?_.elementType="ui":et(P)?_.elementType="raw":_.elementType="container",Ne(P)?_.presentation={isEmpty:!0}:ft(P)?_.children.push({type:"comment",text:Lt}):et(P)&&_.children.push({type:"comment",text:Cn});for(const N of P.getChildren())_.children.push(Wn(N,I));(function(N,Y){for(const ne of Y){const ce=Ai(N,ne);for(const ge of ce){const Ee=ge.offset;if(Ee===0){const Ie=N.children[0];Ie?Ie.positionsBefore.push(ge):N.positions.push(ge)}else if(Ee===N.children.length){const Ie=N.children[N.children.length-1];Ie?Ie.positionsAfter.push(ge):N.positions.push(ge)}else{let Ie=ge.isEnd?0:N.children.length-1,xe=N.children[Ie];for(;xe;){if(xe.index===Ee){xe.positionsBefore.push(ge);break}if(xe.index+1===Ee){xe.positionsAfter.push(ge);break}Ie+=ge.isEnd?1:-1,xe=N.children[Ie]}}}}})(_,I),_.attributes=function(N){const Y=Ii(N).map(([ne,ce])=>[ne,Mr(ce,!1)]);return new Map(Y)}(P)}(w,g):function(_,I){Object.assign(_,{type:"text",startOffset:0,text:_.node.data,positions:[]});for(const P of I){const N=Ai(_,P);_.positions.push(...N)}}(w,g),w}function Ai(k,g){const w=k.path,_=g.start.path,I=g.end.path,P=[];return hi(w,_)&&P.push({offset:_[_.length-1],isEnd:!1,presentation:g.presentation||null,type:g.type,name:g.name||null}),hi(w,I)&&P.push({offset:I[I.length-1],isEnd:!0,presentation:g.presentation||null,type:g.type,name:g.name||null}),P}function hi(k,g){return k.length===g.length-1&&lo(k,g)==="prefix"}function Ii(k){return[...k.getAttributes()].sort(([g],[w])=>g.toUpperCase()<w.toUpperCase()?-1:1)}function Gi(k,g,w){const _=function(I,P,N){if(I.ui.activeTab!=="View")return P;if(!P)return fi(I,P);switch(N.type){case"SET_VIEW_CURRENT_ROOT_NAME":return function(Y,ne,ce){const ge=ce.currentRootName;return $t(Se(Se({},ne),mo(Y,ne,{currentRootName:ge})),{currentNode:null,currentNodeDefinition:null,currentRootName:ge})}(I,P,N);case"SET_VIEW_CURRENT_NODE":return $t(Se({},P),{currentNode:N.currentNode,currentNodeDefinition:Qt(N.currentNode)});case"SET_ACTIVE_INSPECTOR_TAB":case"UPDATE_VIEW_STATE":return Se(Se({},P),mo(I,P));case"SET_EDITORS":case"SET_CURRENT_EDITOR_NAME":return fi(I,P);default:return P}}(k,g,w);return _&&(_.ui=function(I,P,N){if(!P)return{activeTab:St.get("active-view-tab-name")||"Inspect",showElementTypes:St.get("view-element-types")==="true"};switch(N.type){case"SET_VIEW_ACTIVE_TAB":return function(Y,ne){return St.set("active-view-tab-name",ne.tabName),$t(Se({},Y),{activeTab:ne.tabName})}(P,N);case"TOGGLE_VIEW_SHOW_ELEMENT_TYPES":return function(Y,ne){const ce=!ne.showElementTypes;return St.set("view-element-types",ce),$t(Se({},ne),{showElementTypes:ce})}(0,P);default:return P}}(0,_.ui,w)),_}function fi(k,g={}){const w=Un(Zn(k)),_=w[0]?w[0].rootName:null;return $t(Se(Se({},g),mo(k,g,{currentRootName:_})),{currentRootName:_,currentNode:null,currentNodeDefinition:null})}function mo(k,g,w){const _=Se(Se({},g),w),I=_.currentRootName,P=function(ce,ge){if(!ce)return[];const Ee=[],Ie=ce.editing.view.document.selection;for(const xe of Ie.getRanges())xe.root.rootName===ge&&Ee.push({type:"selection",start:yt(xe.start),end:yt(xe.end)});return Ee}(Zn(k),I),N=function({currentEditor:ce,currentRootName:ge,ranges:Ee}){return ce&&ge?[Wn(ce.editing.view.document.getRoot(ge),[...Ee])]:null}({currentEditor:Zn(k),currentRootName:I,ranges:P});let Y=_.currentNode,ne=_.currentNodeDefinition;return Y?Y.root.rootName!==I||!mt(Y)&&!Y.parent?(Y=null,ne=null):ne=Qt(Y):ne=null,{treeDefinition:N,currentNode:Y,currentNodeDefinition:ne,ranges:P}}function Ms(){return{type:"UPDATE_COMMANDS_STATE"}}function pt({editors:k,currentEditorName:g},w){if(!w)return null;const _=k.get(g).commands.get(w);return{currentCommandName:w,type:"Command",url:"https://ckeditor.com/docs/ckeditor5/latest/api/module_core_command-Command.html",properties:Kt({isEnabled:{value:_.isEnabled},value:{value:_.value}}),command:_}}function ot({editors:k,currentEditorName:g}){if(!k.get(g))return[];const w=[];for(const[_,I]of k.get(g).commands){const P=[];I.value!==void 0&&P.push(["value",Mr(I.value,!1)]),w.push({name:_,type:"element",children:[],node:_,attributes:P,presentation:{isEmpty:!0,cssClass:["ck-inspector-tree-node_tagless",I.isEnabled?"":"ck-inspector-tree-node_disabled"].join(" ")}})}return w.sort((_,I)=>_.name>I.name?1:-1)}function Yi(k,g={}){return $t(Se({},g),{currentCommandName:null,currentCommandDefinition:null,treeDefinition:ot(k)})}function Rn(k,g){const w=function(_,I){switch(I.type){case"SET_EDITORS":return function(P,N){const Y={editors:new Map(N.editors)};return N.editors.size?N.editors.has(P.currentEditorName)||(Y.currentEditorName=xi(N.editors)):Y.currentEditorName=null,Se(Se({},P),Y)}(_,I);case"SET_CURRENT_EDITOR_NAME":return function(P,N){return $t(Se({},P),{currentEditorName:N.editorName})}(_,I);default:return _}}(k,g);return w.currentEditorGlobals=function(_,I,P){switch(P.type){case"SET_EDITORS":case"SET_CURRENT_EDITOR_NAME":return Se({},po(_,{}));case"UPDATE_CURRENT_EDITOR_IS_READ_ONLY":return po(_,I);default:return I}}(w,w.currentEditorGlobals,g),w.ui=function(_,I){if(!_.activeTab){let P;return P=_.isCollapsed!==void 0?_.isCollapsed:St.get("is-collapsed")==="true",$t(Se({},_),{isCollapsed:P,activeTab:St.get("active-tab-name")||"Model",height:St.get("height")||"400px",sidePaneWidth:St.get("side-pane-width")||"500px"})}switch(I.type){case"TOGGLE_IS_COLLAPSED":return function(P){const N=!P.isCollapsed;return St.set("is-collapsed",N),$t(Se({},P),{isCollapsed:N})}(_);case"SET_HEIGHT":return function(P,N){return St.set("height",N.newHeight),$t(Se({},P),{height:N.newHeight})}(_,I);case"SET_SIDE_PANE_WIDTH":return function(P,N){return St.set("side-pane-width",N.newWidth),$t(Se({},P),{sidePaneWidth:N.newWidth})}(_,I);case"SET_ACTIVE_INSPECTOR_TAB":return function(P,N){return St.set("active-tab-name",N.tabName),$t(Se({},P),{activeTab:N.tabName})}(_,I);default:return _}}(w.ui,g),w.model=fo(w,w.model,g),w.view=Gi(w,w.view,g),w.commands=function(_,I,P){if(_.ui.activeTab!=="Commands")return I;if(!I)return Yi(_,I);switch(P.type){case"SET_COMMANDS_CURRENT_COMMAND_NAME":return $t(Se({},I),{currentCommandDefinition:pt(_,P.currentCommandName),currentCommandName:P.currentCommandName});case"SET_ACTIVE_INSPECTOR_TAB":case"UPDATE_COMMANDS_STATE":return $t(Se({},I),{currentCommandDefinition:pt(_,I.currentCommandName),treeDefinition:ot(_)});case"SET_EDITORS":case"SET_CURRENT_EDITOR_NAME":return Yi(_,I);default:return I}}(w,w.commands,g),Se(Se({},k),w)}function po(k,g){const w=Zn(k);return $t(Se({},g),{isReadOnly:!!w&&w.isReadOnly})}var hn=r(18),$n=r.n(hn),mi=function(){var k=function(g,w){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,I){_.__proto__=I}||function(_,I){for(var P in I)I.hasOwnProperty(P)&&(_[P]=I[P])})(g,w)};return function(g,w){function _(){this.constructor=g}k(g,w),g.prototype=w===null?Object.create(w):(_.prototype=w.prototype,new _)}}(),ei=function(){return(ei=Object.assign||function(k){for(var g,w=1,_=arguments.length;w<_;w++)for(var I in g=arguments[w])Object.prototype.hasOwnProperty.call(g,I)&&(k[I]=g[I]);return k}).apply(this,arguments)},Br={top:{width:"100%",height:"10px",top:"-5px",left:"0px",cursor:"row-resize"},right:{width:"10px",height:"100%",top:"0px",right:"-5px",cursor:"col-resize"},bottom:{width:"100%",height:"10px",bottom:"-5px",left:"0px",cursor:"row-resize"},left:{width:"10px",height:"100%",top:"0px",left:"-5px",cursor:"col-resize"},topRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",top:"-10px",cursor:"ne-resize"},bottomRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",bottom:"-10px",cursor:"se-resize"},bottomLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",bottom:"-10px",cursor:"sw-resize"},topLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",top:"-10px",cursor:"nw-resize"}},Ji=function(k){function g(){var w=k!==null&&k.apply(this,arguments)||this;return w.onMouseDown=function(_){w.props.onResizeStart(_,w.props.direction)},w.onTouchStart=function(_){w.props.onResizeStart(_,w.props.direction)},w}return mi(g,k),g.prototype.render=function(){return o.createElement("div",{className:this.props.className||"",style:ei(ei({position:"absolute",userSelect:"none"},Br[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},g}(o.PureComponent),pi=r(4),ti=r.n(pi),Vr=function(){var k=function(g,w){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,I){_.__proto__=I}||function(_,I){for(var P in I)I.hasOwnProperty(P)&&(_[P]=I[P])})(g,w)};return function(g,w){function _(){this.constructor=g}k(g,w),g.prototype=w===null?Object.create(w):(_.prototype=w.prototype,new _)}}(),Tn=function(){return(Tn=Object.assign||function(k){for(var g,w=1,_=arguments.length;w<_;w++)for(var I in g=arguments[w])Object.prototype.hasOwnProperty.call(g,I)&&(k[I]=g[I]);return k}).apply(this,arguments)},Lr={width:"auto",height:"auto"},gi=ti()(function(k,g,w){return Math.max(Math.min(k,w),g)}),Mn=ti()(function(k,g){return Math.round(k/g)*g}),rn=ti()(function(k,g){return new RegExp(k,"i").test(g)}),bn=function(k){return Boolean(k.touches&&k.touches.length)},Qi=ti()(function(k,g,w){w===void 0&&(w=0);var _=g.reduce(function(P,N,Y){return Math.abs(N-k)<Math.abs(g[P]-k)?Y:P},0),I=Math.abs(g[_]-k);return w===0||I<w?g[_]:k}),Ft=ti()(function(k,g){return k.substr(k.length-g.length,g.length)===g}),Fr=ti()(function(k){return(k=k.toString())==="auto"||Ft(k,"px")||Ft(k,"%")||Ft(k,"vh")||Ft(k,"vw")||Ft(k,"vmax")||Ft(k,"vmin")?k:k+"px"}),ur=function(k,g,w,_){if(k&&typeof k=="string"){if(Ft(k,"px"))return Number(k.replace("px",""));if(Ft(k,"%"))return g*(Number(k.replace("%",""))/100);if(Ft(k,"vw"))return w*(Number(k.replace("vw",""))/100);if(Ft(k,"vh"))return _*(Number(k.replace("vh",""))/100)}return k},Aa=ti()(function(k,g,w,_,I,P,N){return _=ur(_,k.width,g,w),I=ur(I,k.height,g,w),P=ur(P,k.width,g,w),N=ur(N,k.height,g,w),{maxWidth:_===void 0?void 0:Number(_),maxHeight:I===void 0?void 0:Number(I),minWidth:P===void 0?void 0:Number(P),minHeight:N===void 0?void 0:Number(N)}}),Fu=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Ia=function(k){function g(w){var _=k.call(this,w)||this;return _.ratio=1,_.resizable=null,_.parentLeft=0,_.parentTop=0,_.resizableLeft=0,_.resizableRight=0,_.resizableTop=0,_.resizableBottom=0,_.targetLeft=0,_.targetTop=0,_.appendBase=function(){if(!_.resizable||!_.window)return null;var I=_.parentNode;if(!I)return null;var P=_.window.document.createElement("div");return P.style.width="100%",P.style.height="100%",P.style.position="absolute",P.style.transform="scale(0, 0)",P.style.left="0",P.style.flex="0",P.classList?P.classList.add("__resizable_base__"):P.className+="__resizable_base__",I.appendChild(P),P},_.removeBase=function(I){var P=_.parentNode;P&&P.removeChild(I)},_.ref=function(I){I&&(_.resizable=I)},_.state={isResizing:!1,width:(_.propsSize&&_.propsSize.width)===void 0?"auto":_.propsSize&&_.propsSize.width,height:(_.propsSize&&_.propsSize.height)===void 0?"auto":_.propsSize&&_.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},_.onResizeStart=_.onResizeStart.bind(_),_.onMouseMove=_.onMouseMove.bind(_),_.onMouseUp=_.onMouseUp.bind(_),_}return Vr(g,k),Object.defineProperty(g.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Lr},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"size",{get:function(){var w=0,_=0;if(this.resizable&&this.window){var I=this.resizable.offsetWidth,P=this.resizable.offsetHeight,N=this.resizable.style.position;N!=="relative"&&(this.resizable.style.position="relative"),w=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:I,_=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:P,this.resizable.style.position=N}return{width:w,height:_}},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"sizeStyle",{get:function(){var w=this,_=this.props.size,I=function(P){if(w.state[P]===void 0||w.state[P]==="auto")return"auto";if(w.propsSize&&w.propsSize[P]&&Ft(w.propsSize[P].toString(),"%")){if(Ft(w.state[P].toString(),"%"))return w.state[P].toString();var N=w.getParentSize();return Number(w.state[P].toString().replace("px",""))/N[P]*100+"%"}return Fr(w.state[P])};return{width:_&&_.width!==void 0&&!this.state.isResizing?Fr(_.width):I("width"),height:_&&_.height!==void 0&&!this.state.isResizing?Fr(_.height):I("height")}},enumerable:!1,configurable:!0}),g.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var w=this.appendBase();if(!w)return{width:0,height:0};var _=!1,I=this.parentNode.style.flexWrap;I!=="wrap"&&(_=!0,this.parentNode.style.flexWrap="wrap"),w.style.position="relative",w.style.minWidth="100%";var P={width:w.offsetWidth,height:w.offsetHeight};return _&&(this.parentNode.style.flexWrap=I),this.removeBase(w),P},g.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},g.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},g.prototype.componentDidMount=function(){if(this.resizable&&this.window){var w=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:w.flexBasis!=="auto"?w.flexBasis:void 0})}},g.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},g.prototype.createSizeForCssProperty=function(w,_){var I=this.propsSize&&this.propsSize[_];return this.state[_]!=="auto"||this.state.original[_]!==w||I!==void 0&&I!=="auto"?w:"auto"},g.prototype.calculateNewMaxFromBoundary=function(w,_){var I,P,N=this.props.boundsByDirection,Y=this.state.direction,ne=N&&rn("left",Y),ce=N&&rn("top",Y);if(this.props.bounds==="parent"){var ge=this.parentNode;ge&&(I=ne?this.resizableRight-this.parentLeft:ge.offsetWidth+(this.parentLeft-this.resizableLeft),P=ce?this.resizableBottom-this.parentTop:ge.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(I=ne?this.resizableRight:this.window.innerWidth-this.resizableLeft,P=ce?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(I=ne?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),P=ce?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return I&&Number.isFinite(I)&&(w=w&&w<I?w:I),P&&Number.isFinite(P)&&(_=_&&_<P?_:P),{maxWidth:w,maxHeight:_}},g.prototype.calculateNewSizeFromDirection=function(w,_){var I=this.props.scale||1,P=this.props.resizeRatio||1,N=this.state,Y=N.direction,ne=N.original,ce=this.props,ge=ce.lockAspectRatio,Ee=ce.lockAspectRatioExtraHeight,Ie=ce.lockAspectRatioExtraWidth,xe=ne.width,ze=ne.height,Re=Ee||0,Le=Ie||0;return rn("right",Y)&&(xe=ne.width+(w-ne.x)*P/I,ge&&(ze=(xe-Le)/this.ratio+Re)),rn("left",Y)&&(xe=ne.width-(w-ne.x)*P/I,ge&&(ze=(xe-Le)/this.ratio+Re)),rn("bottom",Y)&&(ze=ne.height+(_-ne.y)*P/I,ge&&(xe=(ze-Re)*this.ratio+Le)),rn("top",Y)&&(ze=ne.height-(_-ne.y)*P/I,ge&&(xe=(ze-Re)*this.ratio+Le)),{newWidth:xe,newHeight:ze}},g.prototype.calculateNewSizeFromAspectRatio=function(w,_,I,P){var N=this.props,Y=N.lockAspectRatio,ne=N.lockAspectRatioExtraHeight,ce=N.lockAspectRatioExtraWidth,ge=P.width===void 0?10:P.width,Ee=I.width===void 0||I.width<0?w:I.width,Ie=P.height===void 0?10:P.height,xe=I.height===void 0||I.height<0?_:I.height,ze=ne||0,Re=ce||0;if(Y){var Le=(Ie-ze)*this.ratio+Re,ct=(xe-ze)*this.ratio+Re,Ge=(ge-Re)/this.ratio+ze,Ke=(Ee-Re)/this.ratio+ze,Bt=Math.max(ge,Le),zt=Math.min(Ee,ct),Sn=Math.max(Ie,Ge),on=Math.min(xe,Ke);w=gi(w,Bt,zt),_=gi(_,Sn,on)}else w=gi(w,ge,Ee),_=gi(_,Ie,xe);return{newWidth:w,newHeight:_}},g.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var w=this.parentNode;if(w){var _=w.getBoundingClientRect();this.parentLeft=_.left,this.parentTop=_.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var I=this.props.bounds.getBoundingClientRect();this.targetLeft=I.left,this.targetTop=I.top}if(this.resizable){var P=this.resizable.getBoundingClientRect(),N=P.left,Y=P.top,ne=P.right,ce=P.bottom;this.resizableLeft=N,this.resizableRight=ne,this.resizableTop=Y,this.resizableBottom=ce}},g.prototype.onResizeStart=function(w,_){if(this.resizable&&this.window){var I,P=0,N=0;if(w.nativeEvent&&function(Ee){return Boolean((Ee.clientX||Ee.clientX===0)&&(Ee.clientY||Ee.clientY===0))}(w.nativeEvent)){if(P=w.nativeEvent.clientX,N=w.nativeEvent.clientY,w.nativeEvent.which===3)return}else w.nativeEvent&&bn(w.nativeEvent)&&(P=w.nativeEvent.touches[0].clientX,N=w.nativeEvent.touches[0].clientY);if(this.props.onResizeStart&&this.resizable&&this.props.onResizeStart(w,_,this.resizable)===!1)return;this.props.size&&(this.props.size.height!==void 0&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),this.props.size.width!==void 0&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var Y=this.window.getComputedStyle(this.resizable);if(Y.flexBasis!=="auto"){var ne=this.parentNode;if(ne){var ce=this.window.getComputedStyle(ne).flexDirection;this.flexDir=ce.startsWith("row")?"row":"column",I=Y.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var ge={original:{x:P,y:N,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Tn(Tn({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(w.target).cursor||"auto"}),direction:_,flexBasis:I};this.setState(ge)}},g.prototype.onMouseMove=function(w){if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&bn(w))try{w.preventDefault(),w.stopPropagation()}catch{}var _=this.props,I=_.maxWidth,P=_.maxHeight,N=_.minWidth,Y=_.minHeight,ne=bn(w)?w.touches[0].clientX:w.clientX,ce=bn(w)?w.touches[0].clientY:w.clientY,ge=this.state,Ee=ge.direction,Ie=ge.original,xe=ge.width,ze=ge.height,Re=this.getParentSize(),Le=Aa(Re,this.window.innerWidth,this.window.innerHeight,I,P,N,Y);I=Le.maxWidth,P=Le.maxHeight,N=Le.minWidth,Y=Le.minHeight;var ct=this.calculateNewSizeFromDirection(ne,ce),Ge=ct.newHeight,Ke=ct.newWidth,Bt=this.calculateNewMaxFromBoundary(I,P),zt=this.calculateNewSizeFromAspectRatio(Ke,Ge,{width:Bt.maxWidth,height:Bt.maxHeight},{width:N,height:Y});if(Ke=zt.newWidth,Ge=zt.newHeight,this.props.grid){var Sn=Mn(Ke,this.props.grid[0]),on=Mn(Ge,this.props.grid[1]),sn=this.props.snapGap||0;Ke=sn===0||Math.abs(Sn-Ke)<=sn?Sn:Ke,Ge=sn===0||Math.abs(on-Ge)<=sn?on:Ge}this.props.snap&&this.props.snap.x&&(Ke=Qi(Ke,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(Ge=Qi(Ge,this.props.snap.y,this.props.snapGap));var mn={width:Ke-Ie.width,height:Ge-Ie.height};xe&&typeof xe=="string"&&(Ft(xe,"%")?Ke=Ke/Re.width*100+"%":Ft(xe,"vw")?Ke=Ke/this.window.innerWidth*100+"vw":Ft(xe,"vh")&&(Ke=Ke/this.window.innerHeight*100+"vh")),ze&&typeof ze=="string"&&(Ft(ze,"%")?Ge=Ge/Re.height*100+"%":Ft(ze,"vw")?Ge=Ge/this.window.innerWidth*100+"vw":Ft(ze,"vh")&&(Ge=Ge/this.window.innerHeight*100+"vh"));var kt={width:this.createSizeForCssProperty(Ke,"width"),height:this.createSizeForCssProperty(Ge,"height")};this.flexDir==="row"?kt.flexBasis=kt.width:this.flexDir==="column"&&(kt.flexBasis=kt.height),this.setState(kt),this.props.onResize&&this.props.onResize(w,Ee,this.resizable,mn)}},g.prototype.onMouseUp=function(w){var _=this.state,I=_.isResizing,P=_.direction,N=_.original;if(I&&this.resizable){var Y={width:this.size.width-N.width,height:this.size.height-N.height};this.props.onResizeStop&&this.props.onResizeStop(w,P,this.resizable,Y),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Tn(Tn({},this.state.backgroundStyle),{cursor:"auto"})})}},g.prototype.updateSize=function(w){this.setState({width:w.width,height:w.height})},g.prototype.renderResizer=function(){var w=this,_=this.props,I=_.enable,P=_.handleStyles,N=_.handleClasses,Y=_.handleWrapperStyle,ne=_.handleWrapperClass,ce=_.handleComponent;if(!I)return null;var ge=Object.keys(I).map(function(Ee){return I[Ee]!==!1?o.createElement(Ji,{key:Ee,direction:Ee,onResizeStart:w.onResizeStart,replaceStyles:P&&P[Ee],className:N&&N[Ee]},ce&&ce[Ee]?ce[Ee]:null):null});return o.createElement("div",{className:ne,style:Y},ge)},g.prototype.render=function(){var w=this,_=Object.keys(this.props).reduce(function(N,Y){return Fu.indexOf(Y)!==-1||(N[Y]=w.props[Y]),N},{}),I=Tn(Tn(Tn({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(I.flexBasis=this.state.flexBasis);var P=this.props.as||"div";return o.createElement(P,Tn({ref:this.ref,style:I,className:this.props.className},_),this.state.isResizing&&o.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},g.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},g}(o.PureComponent),Ra=function(k,g){return(Ra=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,_){w.__proto__=_}||function(w,_){for(var I in _)_.hasOwnProperty(I)&&(w[I]=_[I])})(k,g)},On=function(){return(On=Object.assign||function(k){for(var g,w=1,_=arguments.length;w<_;w++)for(var I in g=arguments[w])Object.prototype.hasOwnProperty.call(g,I)&&(k[I]=g[I]);return k}).apply(this,arguments)},zu=$n.a,Os={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},Ma=function(k){function g(w){var _=k.call(this,w)||this;return _.resizing=!1,_.resizingPosition={x:0,y:0},_.offsetFromParent={left:0,top:0},_.resizableElement={current:null},_.refDraggable=function(I){I&&(_.draggable=I)},_.refResizable=function(I){I&&(_.resizable=I,_.resizableElement.current=I.resizable)},_.state={original:{x:0,y:0},bounds:{top:0,right:0,bottom:0,left:0},maxWidth:w.maxWidth,maxHeight:w.maxHeight},_.onResizeStart=_.onResizeStart.bind(_),_.onResize=_.onResize.bind(_),_.onResizeStop=_.onResizeStop.bind(_),_.onDragStart=_.onDragStart.bind(_),_.onDrag=_.onDrag.bind(_),_.onDragStop=_.onDragStop.bind(_),_.getMaxSizesFromProps=_.getMaxSizesFromProps.bind(_),_}return function(w,_){function I(){this.constructor=w}Ra(w,_),w.prototype=_===null?Object.create(_):(I.prototype=_.prototype,new I)}(g,k),g.prototype.componentDidMount=function(){this.updateOffsetFromParent();var w=this.offsetFromParent,_=w.left,I=w.top,P=this.getDraggablePosition(),N=P.x,Y=P.y;this.draggable.setState({x:N-_,y:Y-I}),this.forceUpdate()},g.prototype.getDraggablePosition=function(){var w=this.draggable.state;return{x:w.x,y:w.y}},g.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},g.prototype.getParentSize=function(){return this.resizable.getParentSize()},g.prototype.getMaxSizesFromProps=function(){return{maxWidth:this.props.maxWidth===void 0?Number.MAX_SAFE_INTEGER:this.props.maxWidth,maxHeight:this.props.maxHeight===void 0?Number.MAX_SAFE_INTEGER:this.props.maxHeight}},g.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},g.prototype.getOffsetHeight=function(w){var _=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/_;case"body":return document.body.offsetHeight/_;default:return w.offsetHeight}},g.prototype.getOffsetWidth=function(w){var _=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/_;case"body":return document.body.offsetWidth/_;default:return w.offsetWidth}},g.prototype.onDragStart=function(w,_){if(this.props.onDragStart&&this.props.onDragStart(w,_),this.props.bounds){var I,P=this.getParent(),N=this.props.scale;if(this.props.bounds==="parent")I=P;else{if(this.props.bounds==="body"){var Y=P.getBoundingClientRect(),ne=Y.left,ce=Y.top,ge=document.body.getBoundingClientRect(),Ee=-(ne-P.offsetLeft*N-ge.left)/N,Ie=-(ce-P.offsetTop*N-ge.top)/N,xe=(document.body.offsetWidth-this.resizable.size.width*N)/N+Ee,ze=(document.body.offsetHeight-this.resizable.size.height*N)/N+Ie;return this.setState({bounds:{top:Ie,right:xe,bottom:ze,left:Ee}})}if(this.props.bounds==="window"){if(!this.resizable)return;var Re=P.getBoundingClientRect(),Le=Re.left,ct=Re.top,Ge=-(Le-P.offsetLeft*N)/N,Ke=-(ct-P.offsetTop*N)/N;return xe=(window.innerWidth-this.resizable.size.width*N)/N+Ge,ze=(window.innerHeight-this.resizable.size.height*N)/N+Ke,this.setState({bounds:{top:Ke,right:xe,bottom:ze,left:Ge}})}I=document.querySelector(this.props.bounds)}if(I instanceof HTMLElement&&P instanceof HTMLElement){var Bt=I.getBoundingClientRect(),zt=Bt.left,Sn=Bt.top,on=P.getBoundingClientRect(),sn=(zt-on.left)/N,mn=Sn-on.top;if(this.resizable){this.updateOffsetFromParent();var kt=this.offsetFromParent;this.setState({bounds:{top:mn-kt.top,right:sn+(I.offsetWidth-this.resizable.size.width)-kt.left/N,bottom:mn+(I.offsetHeight-this.resizable.size.height)-kt.top,left:sn-kt.left/N}})}}}},g.prototype.onDrag=function(w,_){if(this.props.onDrag){var I=this.offsetFromParent;return this.props.onDrag(w,On(On({},_),{x:_.x-I.left,y:_.y-I.top}))}},g.prototype.onDragStop=function(w,_){if(this.props.onDragStop){var I=this.offsetFromParent,P=I.left,N=I.top;return this.props.onDragStop(w,On(On({},_),{x:_.x+P,y:_.y+N}))}},g.prototype.onResizeStart=function(w,_,I){w.stopPropagation(),this.resizing=!0;var P=this.props.scale,N=this.offsetFromParent,Y=this.getDraggablePosition();if(this.resizingPosition={x:Y.x+N.left,y:Y.y+N.top},this.setState({original:Y}),this.props.bounds){var ne=this.getParent(),ce=void 0;ce=this.props.bounds==="parent"?ne:this.props.bounds==="body"?document.body:this.props.bounds==="window"?window:document.querySelector(this.props.bounds);var ge=this.getSelfElement();if(ge instanceof Element&&(ce instanceof HTMLElement||ce===window)&&ne instanceof HTMLElement){var Ee=this.getMaxSizesFromProps(),Ie=Ee.maxWidth,xe=Ee.maxHeight,ze=this.getParentSize();if(Ie&&typeof Ie=="string")if(Ie.endsWith("%")){var Re=Number(Ie.replace("%",""))/100;Ie=ze.width*Re}else Ie.endsWith("px")&&(Ie=Number(Ie.replace("px","")));xe&&typeof xe=="string"&&(xe.endsWith("%")?(Re=Number(xe.replace("%",""))/100,xe=ze.width*Re):xe.endsWith("px")&&(xe=Number(xe.replace("px",""))));var Le=ge.getBoundingClientRect(),ct=Le.left,Ge=Le.top,Ke=this.props.bounds==="window"?{left:0,top:0}:ce.getBoundingClientRect(),Bt=Ke.left,zt=Ke.top,Sn=this.getOffsetWidth(ce),on=this.getOffsetHeight(ce),sn=_.toLowerCase().endsWith("left"),mn=_.toLowerCase().endsWith("right"),kt=_.startsWith("top"),wi=_.startsWith("bottom");if(sn&&this.resizable){var ht=(ct-Bt)/P+this.resizable.size.width;this.setState({maxWidth:ht>Number(Ie)?Ie:ht})}(mn||this.props.lockAspectRatio&&!sn)&&(ht=Sn+(Bt-ct)/P,this.setState({maxWidth:ht>Number(Ie)?Ie:ht})),kt&&this.resizable&&(ht=(Ge-zt)/P+this.resizable.size.height,this.setState({maxHeight:ht>Number(xe)?xe:ht})),(wi||this.props.lockAspectRatio&&!kt)&&(ht=on+(zt-Ge)/P,this.setState({maxHeight:ht>Number(xe)?xe:ht}))}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(w,_,I)},g.prototype.onResize=function(w,_,I,P){var N={x:this.state.original.x,y:this.state.original.y},Y=-P.width,ne=-P.height;["top","left","topLeft","bottomLeft","topRight"].indexOf(_)!==-1&&(_==="bottomLeft"?N.x+=Y:(_==="topRight"||(N.x+=Y),N.y+=ne)),N.x===this.draggable.state.x&&N.y===this.draggable.state.y||this.draggable.setState(N),this.updateOffsetFromParent();var ce=this.offsetFromParent,ge=this.getDraggablePosition().x+ce.left,Ee=this.getDraggablePosition().y+ce.top;this.resizingPosition={x:ge,y:Ee},this.props.onResize&&this.props.onResize(w,_,I,P,{x:ge,y:Ee})},g.prototype.onResizeStop=function(w,_,I,P){this.resizing=!1;var N=this.getMaxSizesFromProps(),Y=N.maxWidth,ne=N.maxHeight;this.setState({maxWidth:Y,maxHeight:ne}),this.props.onResizeStop&&this.props.onResizeStop(w,_,I,P,this.resizingPosition)},g.prototype.updateSize=function(w){this.resizable&&this.resizable.updateSize({width:w.width,height:w.height})},g.prototype.updatePosition=function(w){this.draggable.setState(w)},g.prototype.updateOffsetFromParent=function(){var w=this.props.scale,_=this.getParent(),I=this.getSelfElement();if(!_||I===null)return{top:0,left:0};var P=_.getBoundingClientRect(),N=P.left,Y=P.top,ne=I.getBoundingClientRect(),ce=this.getDraggablePosition();this.offsetFromParent={left:ne.left-N-ce.x*w,top:ne.top-Y-ce.y*w}},g.prototype.render=function(){var w=this.props,_=w.disableDragging,I=w.style,P=w.dragHandleClassName,N=w.position,Y=w.onMouseDown,ne=w.onMouseUp,ce=w.dragAxis,ge=w.dragGrid,Ee=w.bounds,Ie=w.enableUserSelectHack,xe=w.cancel,ze=w.children,Re=(w.onResizeStart,w.onResize,w.onResizeStop,w.onDragStart,w.onDrag,w.onDragStop,w.resizeHandleStyles),Le=w.resizeHandleClasses,ct=w.resizeHandleComponent,Ge=w.enableResizing,Ke=w.resizeGrid,Bt=w.resizeHandleWrapperClass,zt=w.resizeHandleWrapperStyle,Sn=w.scale,on=w.allowAnyClick,sn=function(an,Kn){var yi={};for(var Pn in an)Object.prototype.hasOwnProperty.call(an,Pn)&&Kn.indexOf(Pn)<0&&(yi[Pn]=an[Pn]);if(an!=null&&typeof Object.getOwnPropertySymbols=="function"){var ni=0;for(Pn=Object.getOwnPropertySymbols(an);ni<Pn.length;ni++)Kn.indexOf(Pn[ni])<0&&Object.prototype.propertyIsEnumerable.call(an,Pn[ni])&&(yi[Pn[ni]]=an[Pn[ni]])}return yi}(w,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick"]),mn=this.props.default?On({},this.props.default):void 0;delete sn.default;var kt,wi=_||P?{cursor:"auto"}:{cursor:"move"},ht=On(On(On({},Os),wi),I),Oi=this.offsetFromParent,xn=Oi.left,vo=Oi.top;N&&(kt={x:N.x-xn,y:N.y-vo});var Xt,Zo=this.resizing?void 0:kt,vi=this.resizing?"both":ce;return Object(o.createElement)(zu,{ref:this.refDraggable,handle:P?"."+P:void 0,defaultPosition:mn,onMouseDown:Y,onMouseUp:ne,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:vi,disabled:_,grid:ge,bounds:Ee?this.state.bounds:void 0,position:Zo,enableUserSelectHack:Ie,cancel:xe,scale:Sn,allowAnyClick:on,nodeRef:this.resizableElement},Object(o.createElement)(Ia,On({},sn,{ref:this.refResizable,defaultSize:mn,size:this.props.size,enable:typeof Ge=="boolean"?(Xt=Ge,{bottom:Xt,bottomLeft:Xt,bottomRight:Xt,left:Xt,right:Xt,top:Xt,topLeft:Xt,topRight:Xt}):Ge,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:ht,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.resizing?this.state.maxHeight:this.props.maxHeight,grid:Ke,handleWrapperClass:Bt,handleWrapperStyle:zt,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:Re,handleClasses:Le,handleComponent:ct,scale:this.props.scale}),ze))},g.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},g}(o.PureComponent);r(39);class Hu extends o.Component{constructor(g){super(g),this.handleTabClick=this.handleTabClick.bind(this)}handleTabClick(g){this.setState({activeTab:g},()=>{this.props.onClick(g)})}render(){return s.a.createElement("div",{className:"ck-inspector-horizontal-nav"},this.props.definitions.map(g=>s.a.createElement($o,{key:g,label:g,isActive:this.props.activeTab===g,onClick:()=>this.handleTabClick(g)})))}}class $o extends o.Component{render(){return s.a.createElement("button",{className:["ck-inspector-horizontal-nav__item",this.props.isActive?" ck-inspector-horizontal-nav__item_active":""].join(" "),key:this.props.label,onClick:this.props.onClick,type:"button"},this.props.label)}}r(41);class jo extends o.Component{render(){const g=Array.isArray(this.props.children)?this.props.children:[this.props.children];return s.a.createElement("div",{className:"ck-inspector-navbox"},g.length>1?s.a.createElement("div",{className:"ck-inspector-navbox__navigation"},g[0]):"",s.a.createElement("div",{className:"ck-inspector-navbox__content"},g[g.length-1]))}}class qo extends o.Component{constructor(g){super(g),this.handleTabClick=this.handleTabClick.bind(this)}handleTabClick(g){this.props.onTabChange(g)}render(){const g=Array.isArray(this.props.children)?this.props.children:[this.props.children];return s.a.createElement(jo,null,[this.props.contentBefore,s.a.createElement(Hu,{key:"navigation",definitions:g.map(w=>w.props.label),activeTab:this.props.activeTab,onClick:this.handleTabClick}),this.props.contentAfter],g.filter(w=>w.props.label===this.props.activeTab))}}var Bl=r(3),dr=r.n(Bl);class Oa extends o.Component{render(){return[s.a.createElement("label",{htmlFor:this.props.id,key:"label"},this.props.label,":"),s.a.createElement("select",{id:this.props.id,value:this.props.value,onChange:this.props.onChange,key:"select"},this.props.options.map(g=>s.a.createElement("option",{value:g,key:g},g)))]}shouldComponentUpdate(g){return!dr()(this.props,g)}}r(44);class fn extends o.PureComponent{render(){const g=["ck-inspector-button",this.props.className||"",this.props.isOn?"ck-inspector-button_on":"",this.props.isEnabled===!1?"ck-inspector-button_disabled":""].filter(w=>w).join(" ");return s.a.createElement("button",{className:g,type:"button",onClick:this.props.isEnabled===!1?()=>{}:this.props.onClick,title:this.props.title||this.props.text},s.a.createElement("span",null,this.props.text),this.props.icon)}}r(46);class bi extends o.Component{render(){return s.a.createElement("div",{className:["ck-inspector-pane",this.props.splitVertically?"ck-inspector-pane_vsplit":"",this.props.isEmpty?"ck-inspector-pane_empty":""].join(" ")},this.props.children)}}r(48);const Na={position:"relative"};class Uu extends o.Component{get maxSidePaneWidth(){return Math.min(window.innerWidth-400,.8*window.innerWidth)}render(){return s.a.createElement("div",{className:"ck-inspector-side-pane"},s.a.createElement(Ma,{enableResizing:{left:!0},disableDragging:!0,minWidth:200,maxWidth:this.maxSidePaneWidth,style:Na,position:{x:"100%",y:"100%"},size:{width:this.props.sidePaneWidth,height:"100%"},onResizeStop:(g,w,_)=>this.props.setSidePaneWidth(_.style.width)},this.props.children))}}var Da=We(({ui:{sidePaneWidth:k}})=>({sidePaneWidth:k}),{setSidePaneWidth:function(k){return{type:"SET_SIDE_PANE_WIDTH",newWidth:k}}})(Uu);class Ko extends o.Component{constructor(g){super(g),this.handleClick=this.handleClick.bind(this)}handleClick(g){this.globalTreeProps.onClick(g,this.definition.node)}getChildren(){return this.definition.children.map((g,w)=>Ds(g,w,this.props.globalTreeProps))}get definition(){return this.props.definition}get globalTreeProps(){return this.props.globalTreeProps||{}}get isActive(){return this.definition.node===this.globalTreeProps.activeNode}shouldComponentUpdate(g){return!dr()(this.props,g)}}class Mt extends o.PureComponent{render(){let g;const w=Hn(this.props.value,500);return this.props.dontRenderValue||(g=s.a.createElement("span",{className:"ck-inspector-tree-node__attribute__value"},w)),s.a.createElement("span",{className:"ck-inspector-tree-node__attribute"},s.a.createElement("span",{className:"ck-inspector-tree-node__attribute__name",title:w},this.props.name),g)}}class Ri extends o.Component{render(){const g=this.props.definition,w={className:["ck-inspector-tree__position",g.type==="selection"?"ck-inspector-tree__position_selection":"",g.type==="marker"?"ck-inspector-tree__position_marker":"",g.isEnd?"ck-inspector-tree__position_end":""].join(" "),style:{}};return g.presentation&&g.presentation.color&&(w.style["--ck-inspector-color-tree-position"]=g.presentation.color),g.type==="marker"&&(w["data-marker-name"]=g.name),s.a.createElement("span",w,"\u200B")}shouldComponentUpdate(g){return!dr()(this.props,g)}}class Wu extends Ko{render(){const g=this.definition,w=g.presentation,_=w&&w.isEmpty,I=w&&w.cssClass,P=this.getChildren(),N=["ck-inspector-code","ck-inspector-tree-node",this.isActive?"ck-inspector-tree-node_active":"",_?"ck-inspector-tree-node_empty":"",I],Y=[],ne=[];g.positionsBefore&&g.positionsBefore.forEach((ge,Ee)=>{Y.push(s.a.createElement(Ri,{key:"position-before:"+Ee,definition:ge}))}),g.positionsAfter&&g.positionsAfter.forEach((ge,Ee)=>{ne.push(s.a.createElement(Ri,{key:"position-after:"+Ee,definition:ge}))}),g.positions&&g.positions.forEach((ge,Ee)=>{P.push(s.a.createElement(Ri,{key:"position"+Ee,definition:ge}))});let ce=g.name;return this.globalTreeProps.showElementTypes&&(ce=g.elementType+":"+ce),s.a.createElement("div",{className:N.join(" "),onClick:this.handleClick},Y,s.a.createElement("span",{className:"ck-inspector-tree-node__name"},s.a.createElement("span",{className:"ck-inspector-tree-node__name__bracket ck-inspector-tree-node__name__bracket_open"}),ce,this.getAttributes(),_?"":s.a.createElement("span",{className:"ck-inspector-tree-node__name__bracket ck-inspector-tree-node__name__bracket_close"})),s.a.createElement("div",{className:"ck-inspector-tree-node__content"},P),_?"":s.a.createElement("span",{className:"ck-inspector-tree-node__name ck-inspector-tree-node__name_close"},s.a.createElement("span",{className:"ck-inspector-tree-node__name__bracket ck-inspector-tree-node__name__bracket_open"}),"/",ce,s.a.createElement("span",{className:"ck-inspector-tree-node__name__bracket ck-inspector-tree-node__name__bracket_close"}),ne))}getAttributes(){const g=[],w=this.definition;for(const[_,I]of w.attributes)g.push(s.a.createElement(Mt,{key:_,name:_,value:I}));return g}shouldComponentUpdate(g){return!dr()(this.props,g)}}class $u extends Ko{render(){const g=this.definition,w=["ck-inspector-tree-text",this.isActive?"ck-inspector-tree-node_active":""].join(" ");let _=this.definition.text;g.positions&&g.positions.length&&(_=_.split(""),Array.from(g.positions).sort((P,N)=>P.offset<N.offset?-1:P.offset===N.offset?0:1).reverse().forEach((P,N)=>{_.splice(P.offset-g.startOffset,0,s.a.createElement(Ri,{key:"position"+N,definition:P}))}));const I=[_];return g.positionsBefore&&g.positionsBefore.length&&g.positionsBefore.forEach((P,N)=>{I.unshift(s.a.createElement(Ri,{key:"position-before:"+N,definition:P}))}),g.positionsAfter&&g.positionsAfter.length&&g.positionsAfter.forEach((P,N)=>{I.push(s.a.createElement(Ri,{key:"position-after:"+N,definition:P}))}),s.a.createElement("span",{className:w,onClick:this.handleClick},s.a.createElement("span",{className:"ck-inspector-tree-node__content"},this.globalTreeProps.showCompactText?"":this.getAttributes(),this.globalTreeProps.showCompactText?"":'"',I,this.globalTreeProps.showCompactText?"":'"'))}getAttributes(){const g=[],w=this.definition,_=w.presentation,I=_&&_.dontRenderAttributeValue;for(const[P,N]of w.attributes)g.push(s.a.createElement(Mt,{key:P,name:P,value:N,dontRenderValue:I}));return s.a.createElement("span",{className:"ck-inspector-tree-text__attributes"},g)}shouldComponentUpdate(g){return!dr()(this.props,g)}}class Ns extends o.Component{render(){return s.a.createElement("span",{className:"ck-inspector-tree-comment",dangerouslySetInnerHTML:{__html:this.props.definition.text}})}}function Ds(k,g,w){return k.type==="element"?s.a.createElement(Wu,{key:g,definition:k,globalTreeProps:w}):k.type==="text"?s.a.createElement($u,{key:g,definition:k,globalTreeProps:w}):k.type==="comment"?s.a.createElement(Ns,{key:g,definition:k}):void 0}r(50);class zr extends o.Component{render(){let g;return g=this.props.definition?this.props.definition.map((w,_)=>Ds(w,_,{onClick:this.props.onClick,showCompactText:this.props.showCompactText,showElementTypes:this.props.showElementTypes,activeNode:this.props.activeNode})):"Nothing to show.",s.a.createElement("div",{className:["ck-inspector-tree",...this.props.className||[],this.props.textDirection?"ck-inspector-tree_text-direction_"+this.props.textDirection:"",this.props.showCompactText?"ck-inspector-tree_compact-text":""].join(" ")},g)}}r(52);class Ba extends o.PureComponent{render(){return[s.a.createElement("input",{type:"checkbox",className:"ck-inspector-checkbox",id:this.props.id,key:"input",checked:this.props.isChecked,onChange:this.props.onChange}),s.a.createElement("label",{htmlFor:this.props.id,key:"label"},this.props.label)]}}class Vl extends o.Component{constructor(g){super(g),this.handleTreeClick=this.handleTreeClick.bind(this),this.handleRootChange=this.handleRootChange.bind(this)}handleTreeClick(g,w){g.persist(),g.stopPropagation(),this.props.setModelCurrentNode(w),g.detail===2&&this.props.setModelActiveTab("Inspect")}handleRootChange(g){this.props.setModelCurrentRootName(g.target.value)}render(){const g=this.props.editors.get(this.props.currentEditorName);return s.a.createElement(jo,null,[s.a.createElement("div",{className:"ck-inspector-tree__config",key:"root-cfg"},s.a.createElement(Oa,{id:"view-root-select",label:"Root",value:this.props.currentRootName,options:Or(g).map(w=>w.rootName),onChange:this.handleRootChange})),s.a.createElement("span",{className:"ck-inspector-separator",key:"separator"}),s.a.createElement("div",{className:"ck-inspector-tree__config",key:"text-cfg"},s.a.createElement(Ba,{label:"Compact text",id:"model-compact-text",isChecked:this.props.showCompactText,onChange:this.props.toggleModelShowCompactText}),s.a.createElement(Ba,{label:"Show markers",id:"model-show-markers",isChecked:this.props.showMarkers,onChange:this.props.toggleModelShowMarkers}))],s.a.createElement(zr,{className:[this.props.showMarkers?"":"ck-inspector-model-tree__hide-markers"],definition:this.props.treeDefinition,textDirection:g.locale.contentLanguageDirection,onClick:this.handleTreeClick,showCompactText:this.props.showCompactText,activeNode:this.props.currentNode}))}}var Ll=We(({editors:k,currentEditorName:g,model:{treeDefinition:w,currentRootName:_,currentNode:I,ui:{showMarkers:P,showCompactText:N}}})=>({treeDefinition:w,editors:k,currentEditorName:g,currentRootName:_,currentNode:I,showMarkers:P,showCompactText:N}),{toggleModelShowCompactText:function(){return{type:"TOGGLE_MODEL_SHOW_COMPACT_TEXT"}},setModelCurrentRootName:function(k){return{type:"SET_MODEL_CURRENT_ROOT_NAME",currentRootName:k}},toggleModelShowMarkers:function(){return{type:"TOGGLE_MODEL_SHOW_MARKERS"}},setModelCurrentNode:function(k){return{type:"SET_MODEL_CURRENT_NODE",currentNode:k}},setModelActiveTab:Ze})(Vl);r(54);class Va extends o.Component{render(){const g=this.props.presentation&&this.props.presentation.expandCollapsibles,w=[];for(const _ in this.props.itemDefinitions){const I=this.props.itemDefinitions[_],{subProperties:P,presentation:N={}}=I,Y=P&&Object.keys(P).length,ne=Hn(String(I.value),2e3),ce=[s.a.createElement(La,{key:`${this.props.name}-${_}-name`,name:_,listUid:this.props.name,canCollapse:Y,colorBox:N.colorBox,expandCollapsibles:g}),s.a.createElement("dd",{key:`${this.props.name}-${_}-value`},s.a.createElement("input",{id:`${this.props.name}-${_}-value-input`,type:"text",value:ne,readOnly:!0}))];Y&&ce.push(s.a.createElement(Va,{name:`${this.props.name}-${_}`,key:`${this.props.name}-${_}`,itemDefinitions:P,presentation:this.props.presentation})),w.push(ce)}return s.a.createElement("dl",{className:"ck-inspector-property-list ck-inspector-code"},w)}shouldComponentUpdate(g){return!dr()(this.props,g)}}class La extends o.PureComponent{constructor(g){super(g),this.state={isCollapsed:!this.props.expandCollapsibles},this.handleCollapsedChange=this.handleCollapsedChange.bind(this)}handleCollapsedChange(){this.setState({isCollapsed:!this.state.isCollapsed})}render(){const g=["ck-inspector-property-list__title"];let w,_;return this.props.canCollapse&&(g.push("ck-inspector-property-list__title_collapsible"),g.push("ck-inspector-property-list__title_"+(this.state.isCollapsed?"collapsed":"expanded")),w=s.a.createElement("button",{type:"button",onClick:this.handleCollapsedChange},"Toggle")),this.props.colorBox&&(_=s.a.createElement("span",{className:"ck-inspector-property-list__title__color-box",style:{background:this.props.colorBox}})),s.a.createElement("dt",{className:g.join(" ").trim()},w,_,s.a.createElement("label",{htmlFor:`${this.props.listUid}-${this.props.name}-value-input`},this.props.name),":")}}r(56);function Bs(){return(Bs=Object.assign||function(k){for(var g=1;g<arguments.length;g++){var w=arguments[g];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(k[_]=w[_])}return k}).apply(this,arguments)}class Hr extends o.PureComponent{render(){const g=[];for(const w of this.props.lists)Object.keys(w.itemDefinitions).length&&g.push(s.a.createElement("hr",{key:w.name+"-separator"}),s.a.createElement("h3",{key:w.name+"-header"},s.a.createElement("a",{href:w.url,target:"_blank",rel:"noopener noreferrer"},w.name),w.buttons&&w.buttons.map((_,I)=>s.a.createElement(fn,Bs({key:"button"+I},_)))),s.a.createElement(Va,{key:w.name+"-list",name:w.name,itemDefinitions:w.itemDefinitions,presentation:w.presentation}));return s.a.createElement("div",{className:"ck-inspector__object-inspector"},s.a.createElement("h2",{className:"ck-inspector-code"},this.props.header),g)}}function Mi(){return(Mi=Object.assign||function(k){for(var g=1;g<arguments.length;g++){var w=arguments[g];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(k[_]=w[_])}return k}).apply(this,arguments)}var jn=w=>{var _=w,{styles:k={}}=_,g=Io(_,["styles"]);return s.a.createElement("svg",Mi({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},g),s.a.createElement("path",{d:"M17 15.75a.75.75 0 01.102 1.493L17 17.25H9a.75.75 0 01-.102-1.493L9 15.75h8zM2.156 2.947l.095.058 7.58 5.401a.75.75 0 01.084 1.152l-.083.069-7.58 5.425a.75.75 0 01-.958-1.148l.086-.071 6.724-4.815-6.723-4.792a.75.75 0 01-.233-.95l.057-.096a.75.75 0 01.951-.233z"}))};class Fa extends o.Component{constructor(g){super(g),this.handleNodeLogButtonClick=this.handleNodeLogButtonClick.bind(this)}handleNodeLogButtonClick(){vt.log(this.props.currentNodeDefinition.editorNode)}render(){const g=this.props.currentNodeDefinition;return g?s.a.createElement(Hr,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:g.url,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,g.type),":"),g.type==="Text"?s.a.createElement("em",null,g.name):g.name),s.a.createElement(fn,{key:"log",icon:s.a.createElement(jn,null),text:"Log in console",onClick:this.handleNodeLogButtonClick})],lists:[{name:"Attributes",url:g.url,itemDefinitions:g.attributes},{name:"Properties",url:g.url,itemDefinitions:g.properties}]}):s.a.createElement(bi,{isEmpty:"true"},s.a.createElement("p",null,"Select a node in the tree to inspect"))}}var Fl=We(({model:{currentNodeDefinition:k}})=>({currentNodeDefinition:k}),{})(Fa);function za(){return(za=Object.assign||function(k){for(var g=1;g<arguments.length;g++){var w=arguments[g];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(k[_]=w[_])}return k}).apply(this,arguments)}var Ha=w=>{var _=w,{styles:k={}}=_,g=Io(_,["styles"]);return s.a.createElement("svg",za({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},g),s.a.createElement("path",{d:"M9.5 4.5c1.85 0 3.667.561 5.199 1.519C16.363 7.059 17.5 8.4 17.5 9.5s-1.137 2.441-2.801 3.481c-1.532.958-3.35 1.519-5.199 1.519-1.85 0-3.667-.561-5.199-1.519C2.637 11.941 1.5 10.6 1.5 9.5s1.137-2.441 2.801-3.481C5.833 5.06 7.651 4.5 9.5 4.5zm0 1a4 4 0 11-.2.005l.2-.005c-1.655 0-3.29.505-4.669 1.367C3.431 7.742 2.5 8.84 2.5 9.5c0 .66.931 1.758 2.331 2.633C6.21 12.995 7.845 13.5 9.5 13.5c1.655 0 3.29-.505 4.669-1.367 1.4-.875 2.331-1.974 2.331-2.633 0-.66-.931-1.758-2.331-2.633C12.79 6.005 11.155 5.5 9.5 5.5zM8 6.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}))};const hr="https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_selection-Selection.html";class Ua extends o.Component{constructor(g){super(g),this.handleSelectionLogButtonClick=this.handleSelectionLogButtonClick.bind(this),this.handleScrollToSelectionButtonClick=this.handleScrollToSelectionButtonClick.bind(this)}handleSelectionLogButtonClick(){const g=this.props.editor;vt.log(g.model.document.selection)}handleScrollToSelectionButtonClick(){const g=document.querySelector(".ck-inspector-tree__position.ck-inspector-tree__position_selection");g&&g.scrollIntoView({behavior:"smooth",block:"center"})}render(){const g=this.props.editor,w=this.props.info;return s.a.createElement(Hr,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:hr,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,"Selection"))),s.a.createElement(fn,{key:"log",icon:s.a.createElement(jn,null),text:"Log in console",onClick:this.handleSelectionLogButtonClick}),s.a.createElement(fn,{key:"scroll",icon:s.a.createElement(Ha,null),text:"Scroll to selection",onClick:this.handleScrollToSelectionButtonClick})],lists:[{name:"Attributes",url:hr+"#function-getAttributes",itemDefinitions:w.attributes},{name:"Properties",url:""+hr,itemDefinitions:w.properties},{name:"Anchor",url:hr+"#member-anchor",buttons:[{icon:s.a.createElement(jn,null),text:"Log in console",onClick:()=>vt.log(g.model.document.selection.anchor)}],itemDefinitions:w.anchor},{name:"Focus",url:hr+"#member-focus",buttons:[{icon:s.a.createElement(jn,null),text:"Log in console",onClick:()=>vt.log(g.model.document.selection.focus)}],itemDefinitions:w.focus},{name:"Ranges",url:hr+"#function-getRanges",buttons:[{icon:s.a.createElement(jn,null),text:"Log in console",onClick:()=>vt.log(...g.model.document.selection.getRanges())}],itemDefinitions:w.ranges,presentation:{expandCollapsibles:!0}}]})}}var Wa=We(({editors:k,currentEditorName:g,model:{ranges:w}})=>{const _=k.get(g);return{editor:_,currentEditorName:g,info:function(I,P){const N=I.model.document.selection,Y=N.anchor,ne=N.focus,ce={properties:{isCollapsed:{value:N.isCollapsed},isBackward:{value:N.isBackward},isGravityOverridden:{value:N.isGravityOverridden},rangeCount:{value:N.rangeCount}},attributes:{},anchor:Go(ui(Y)),focus:Go(ui(ne)),ranges:{}};for(const[ge,Ee]of N.getAttributes())ce.attributes[ge]={value:Ee};P.forEach((ge,Ee)=>{ce.ranges[Ee]={value:"",subProperties:{start:{value:"",subProperties:Kt(Go(ge.start))},end:{value:"",subProperties:Kt(Go(ge.end))}}}});for(const ge in ce)ge!=="ranges"&&(ce[ge]=Kt(ce[ge]));return ce}(_,w)}},{})(Ua);function Go({path:k,stickiness:g,index:w,isAtEnd:_,isAtStart:I,offset:P,textNode:N}){return{path:{value:k},stickiness:{value:g},index:{value:w},isAtEnd:{value:_},isAtStart:{value:I},offset:{value:P},textNode:{value:N}}}class $a extends o.Component{render(){const g=function(I){const P={};for(const N of I){const Y=N.name.split(":");let ne=P;for(const ce of Y){const ge=ce===Y[Y.length-1];ne=ne[ce]?ne[ce]:ne[ce]=ge?N:{}}}return P}(this.props.markers),w=function I(P){const N={};for(const Y in P){const ne=P[Y];if(ne.name){const ce=Kt(ju(ne));N[Y]={value:"",presentation:{colorBox:ne.presentation.color},subProperties:ce}}else{const ce=Object.keys(ne).length;N[Y]={value:ce+" marker"+(ce>1?"s":""),subProperties:I(ne)}}}return N}(g),_=this.props.editors.get(this.props.currentEditorName);return Object.keys(g).length?s.a.createElement(Hr,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:"https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_markercollection-Marker.html",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,"Markers"))),s.a.createElement(fn,{key:"log",icon:s.a.createElement(jn,null),text:"Log in console",onClick:()=>vt.log([..._.model.markers])})],lists:[{name:"Markers tree",itemDefinitions:w,presentation:{expandCollapsibles:!0}}]}):s.a.createElement(bi,{isEmpty:"true"},s.a.createElement("p",null,"No markers in the document."))}}var ja=We(({editors:k,currentEditorName:g,model:{markers:w}})=>({editors:k,currentEditorName:g,markers:w}),{})($a);function ju({name:k,start:g,end:w,affectsData:_,managedUsingOperations:I}){return{name:{value:k},start:{value:g.path},end:{value:w.path},affectsData:{value:_},managedUsingOperations:{value:I}}}r(58);class go extends o.Component{render(){return this.props.currentEditorName?s.a.createElement(bi,{splitVertically:"true"},s.a.createElement(Ll,null),s.a.createElement(Da,null,s.a.createElement(qo,{onTabChange:this.props.setModelActiveTab,activeTab:this.props.activeTab},s.a.createElement(Fl,{label:"Inspect"}),s.a.createElement(Wa,{label:"Selection"}),s.a.createElement(ja,{label:"Markers"})))):s.a.createElement(bi,{isEmpty:"true"},s.a.createElement("p",null,"Nothing to show. Attach another editor instance to start inspecting."))}}var zl=We(({currentEditorName:k,model:{ui:{activeTab:g}}})=>({currentEditorName:k,activeTab:g}),{setModelActiveTab:Ze})(go);class qa extends o.Component{constructor(g){super(g),this.handleTreeClick=this.handleTreeClick.bind(this),this.handleRootChange=this.handleRootChange.bind(this)}handleTreeClick(g,w){g.persist(),g.stopPropagation(),this.props.setViewCurrentNode(w),g.detail===2&&this.props.setViewActiveTab("Inspect")}handleRootChange(g){this.props.setViewCurrentRootName(g.target.value)}render(){const g=this.props.editors.get(this.props.currentEditorName);return s.a.createElement(jo,null,[s.a.createElement("div",{className:"ck-inspector-tree__config",key:"root-cfg"},s.a.createElement(Oa,{id:"view-root-select",label:"Root",value:this.props.currentRootName,options:Un(g).map(w=>w.rootName),onChange:this.handleRootChange})),s.a.createElement("span",{className:"ck-inspector-separator",key:"separator"}),s.a.createElement("div",{className:"ck-inspector-tree__config",key:"types-cfg"},s.a.createElement(Ba,{label:"Show element types",id:"view-show-types",isChecked:this.props.showElementTypes,onChange:this.props.toggleViewShowElementTypes}))],s.a.createElement(zr,{definition:this.props.treeDefinition,textDirection:g.locale.contentLanguageDirection,onClick:this.handleTreeClick,showCompactText:"true",showElementTypes:this.props.showElementTypes,activeNode:this.props.currentNode}))}}var fr=We(({editors:k,currentEditorName:g,view:{treeDefinition:w,currentRootName:_,currentNode:I,ui:{showElementTypes:P}}})=>({treeDefinition:w,editors:k,currentEditorName:g,currentRootName:_,currentNode:I,showElementTypes:P}),{setViewCurrentRootName:function(k){return{type:"SET_VIEW_CURRENT_ROOT_NAME",currentRootName:k}},toggleViewShowElementTypes:function(){return{type:"TOGGLE_VIEW_SHOW_ELEMENT_TYPES"}},setViewCurrentNode:function(k){return{type:"SET_VIEW_CURRENT_NODE",currentNode:k}},setViewActiveTab:Wo})(qa);class Vs extends o.Component{constructor(g){super(g),this.handleNodeLogButtonClick=this.handleNodeLogButtonClick.bind(this)}handleNodeLogButtonClick(){vt.log(this.props.currentNodeDefinition.editorNode)}render(){const g=this.props.currentNodeDefinition;return g?s.a.createElement(Hr,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:g.url,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,g.type),":"),g.type==="Text"?s.a.createElement("em",null,g.name):g.name),s.a.createElement(fn,{key:"log",icon:s.a.createElement(jn,null),text:"Log in console",onClick:this.handleNodeLogButtonClick})],lists:[{name:"Attributes",url:g.url,itemDefinitions:g.attributes},{name:"Properties",url:g.url,itemDefinitions:g.properties},{name:"Custom Properties",url:dt+"_element-Element.html#function-getCustomProperty",itemDefinitions:g.customProperties}]}):s.a.createElement(bi,{isEmpty:"true"},s.a.createElement("p",null,"Select a node in the tree to inspect"))}}var Yo=We(({view:{currentNodeDefinition:k}})=>({currentNodeDefinition:k}),{})(Vs);const Xi="https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view_selection-Selection.html";class Jo extends o.Component{constructor(g){super(g),this.handleSelectionLogButtonClick=this.handleSelectionLogButtonClick.bind(this),this.handleScrollToSelectionButtonClick=this.handleScrollToSelectionButtonClick.bind(this)}handleSelectionLogButtonClick(){const g=this.props.editor;vt.log(g.editing.view.document.selection)}handleScrollToSelectionButtonClick(){const g=document.querySelector(".ck-inspector-tree__position.ck-inspector-tree__position_selection");g&&g.scrollIntoView({behavior:"smooth",block:"center"})}render(){const g=this.props.editor,w=this.props.info;return s.a.createElement(Hr,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:Xi,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,"Selection"))),s.a.createElement(fn,{key:"log",icon:s.a.createElement(jn,null),text:"Log in console",onClick:this.handleSelectionLogButtonClick}),s.a.createElement(fn,{key:"scroll",icon:s.a.createElement(Ha,null),text:"Scroll to selection",onClick:this.handleScrollToSelectionButtonClick})],lists:[{name:"Properties",url:""+Xi,itemDefinitions:w.properties},{name:"Anchor",url:Xi+"#member-anchor",buttons:[{type:"log",text:"Log in console",onClick:()=>vt.log(g.editing.view.document.selection.anchor)}],itemDefinitions:w.anchor},{name:"Focus",url:Xi+"#member-focus",buttons:[{type:"log",text:"Log in console",onClick:()=>vt.log(g.editing.view.document.selection.focus)}],itemDefinitions:w.focus},{name:"Ranges",url:Xi+"#function-getRanges",buttons:[{type:"log",text:"Log in console",onClick:()=>vt.log(...g.editing.view.document.selection.getRanges())}],itemDefinitions:w.ranges,presentation:{expandCollapsibles:!0}}]})}}var Ur=We(({editors:k,currentEditorName:g,view:{ranges:w}})=>{const _=k.get(g);return{editor:_,currentEditorName:g,info:function(I,P){const N=I.editing.view.document.selection,Y={properties:{isCollapsed:{value:N.isCollapsed},isBackward:{value:N.isBackward},isFake:{value:N.isFake},rangeCount:{value:N.rangeCount}},anchor:bo(yt(N.anchor)),focus:bo(yt(N.focus)),ranges:{}};P.forEach((ne,ce)=>{Y.ranges[ce]={value:"",subProperties:{start:{value:"",subProperties:Kt(bo(ne.start))},end:{value:"",subProperties:Kt(bo(ne.end))}}}});for(const ne in Y)ne!=="ranges"&&(Y[ne]=Kt(Y[ne]));return Y}(_,w)}},{})(Jo);function bo({offset:k,isAtEnd:g,isAtStart:w,parent:_}){return{offset:{value:k},isAtEnd:{value:g},isAtStart:{value:w},parent:{value:_}}}class Zi extends o.Component{render(){return this.props.currentEditorName?s.a.createElement(bi,{splitVertically:"true"},s.a.createElement(fr,null),s.a.createElement(Da,null,s.a.createElement(qo,{onTabChange:this.props.setViewActiveTab,activeTab:this.props.activeTab},s.a.createElement(Yo,{label:"Inspect"}),s.a.createElement(Ur,{label:"Selection"})))):s.a.createElement(bi,{isEmpty:"true"},s.a.createElement("p",null,"Nothing to show. Attach another editor instance to start inspecting."))}}var Hl=We(({currentEditorName:k,view:{ui:{activeTab:g}}})=>({currentEditorName:k,activeTab:g}),{setViewActiveTab:Wo,updateViewState:$})(Zi);class Ul extends o.Component{constructor(g){super(g),this.handleTreeClick=this.handleTreeClick.bind(this)}handleTreeClick(g,w){g.persist(),g.stopPropagation(),this.props.setCommandsCurrentCommandName(w)}render(){return s.a.createElement(jo,null,s.a.createElement(zr,{definition:this.props.treeDefinition,onClick:this.handleTreeClick,activeNode:this.props.currentCommandName}))}}var qu=We(({commands:{treeDefinition:k,currentCommandName:g}})=>({treeDefinition:k,currentCommandName:g}),{setCommandsCurrentCommandName:function(k){return{type:"SET_COMMANDS_CURRENT_COMMAND_NAME",currentCommandName:k}}})(Ul);function Ls(){return(Ls=Object.assign||function(k){for(var g=1;g<arguments.length;g++){var w=arguments[g];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(k[_]=w[_])}return k}).apply(this,arguments)}var Ku=w=>{var _=w,{styles:k={}}=_,g=Io(_,["styles"]);return s.a.createElement("svg",Ls({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},g),s.a.createElement("path",{d:"M9.25 1.25a8 8 0 110 16 8 8 0 010-16zm0 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM7.344 6.485l4.98 2.765-4.98 3.018V6.485z"}))};class wo extends o.Component{constructor(g){super(g),this.handleCommandLogButtonClick=this.handleCommandLogButtonClick.bind(this),this.handleCommandExecuteButtonClick=this.handleCommandExecuteButtonClick.bind(this)}handleCommandLogButtonClick(){vt.log(this.props.currentCommandDefinition.command)}handleCommandExecuteButtonClick(){this.props.editors.get(this.props.currentEditorName).execute(this.props.currentCommandName)}render(){const g=this.props.currentCommandDefinition;return g?s.a.createElement(Hr,{header:[s.a.createElement("span",{key:"link"},s.a.createElement("a",{href:g.url,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("b",null,g.type)),":",this.props.currentCommandName),s.a.createElement(fn,{key:"exec",icon:s.a.createElement(Ku,null),text:"Execute command",onClick:this.handleCommandExecuteButtonClick}),s.a.createElement(fn,{key:"log",icon:s.a.createElement(jn,null),text:"Log in console",onClick:this.handleCommandLogButtonClick})],lists:[{name:"Properties",url:g.url,itemDefinitions:g.properties}]}):s.a.createElement(bi,{isEmpty:"true"},s.a.createElement("p",null,"Select a command to inspect"))}}var Wr=We(({editors:k,currentEditorName:g,commands:{currentCommandName:w,currentCommandDefinition:_}})=>({editors:k,currentEditorName:g,currentCommandName:w,currentCommandDefinition:_}),{})(wo);class Ka extends o.Component{render(){return this.props.currentEditorName?s.a.createElement(bi,{splitVertically:"true"},s.a.createElement(qu,null),s.a.createElement(Da,null,s.a.createElement(qo,{activeTab:"Inspect"},s.a.createElement(Wr,{label:"Inspect"})))):s.a.createElement(bi,{isEmpty:"true"},s.a.createElement("p",null,"Nothing to show. Attach another editor instance to start inspecting."))}}var Fs=We(({currentEditorName:k})=>({currentEditorName:k}),{updateCommandsState:Ms})(Ka);function Ga(){return(Ga=Object.assign||function(k){for(var g=1;g<arguments.length;g++){var w=arguments[g];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(k[_]=w[_])}return k}).apply(this,arguments)}var zs=w=>{var _=w,{styles:k={}}=_,g=Io(_,["styles"]);return s.a.createElement("svg",Ga({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},g),s.a.createElement("path",{d:"M12.936 0l5 4.5v14.003h-16V0h11zm-9.5 1.5v3.25l-1.497 1-.003 7 1.5 1v3.254L18.121 17l-.001 1.504h-.184v-1.502l-1.5 1.426-.004-13.22-4.222-3.692L3.436 1.5z"}),s.a.createElement("path",{d:"M4.496 6.64a.75.75 0 01.958 1.15l-.085.07-2.643 1.89 2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 01-.951.232L4.5 12.86 1 10.36V9.14l3.496-2.5zm4.194 6.22a.75.75 0 01-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 01-.232-.952l.058-.095a.75.75 0 01.95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5z"}))};function Qo(){return(Qo=Object.assign||function(k){for(var g=1;g<arguments.length;g++){var w=arguments[g];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(k[_]=w[_])}return k}).apply(this,arguments)}var qn=w=>{var _=w,{styles:k={}}=_,g=Io(_,["styles"]);return s.a.createElement("svg",Qo({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},g),s.a.createElement("path",{d:"M3.144 15.748l2.002 1.402-1.976.516-.026-1.918zM2.438 3.391l15.346 11.023-.875 1.218-5.202-3.736-2.877 4.286.006.005-3.055.797-2.646-1.852-.04-2.95-.006-.005.006-.008v-.025l.01.008L6.02 7.81l-4.457-3.2.876-1.22zM7.25 8.695l-2.13 3.198 3.277 2.294 2.104-3.158-3.25-2.334zM14.002 0l2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158l-2.416 3.599-1.214-.873 2.396-3.593.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349l-.006-.004-2.384 3.575-1.224-.879 2.376-3.539c.674-.932 1.706-1.155 3.096-.668l.046.018.85-1.216z"}))};function Wl(){return(Wl=Object.assign||function(k){for(var g=1;g<arguments.length;g++){var w=arguments[g];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(k[_]=w[_])}return k}).apply(this,arguments)}var Gu=w=>{var _=w,{styles:k={}}=_,g=Io(_,["styles"]);return s.a.createElement("svg",Wl({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},g),s.a.createElement("path",{d:"M11.28 1a1 1 0 01.948.684l.333 1 .018.066H16a.75.75 0 01.102 1.493L16 4.25h-.5V16a2 2 0 01-2 2h-8a2 2 0 01-2-2V4.25H3a.75.75 0 01-.102-1.493L3 2.75h3.42a1 1 0 01.019-.066l.333-1A1 1 0 017.721 1h3.558zM14 4.5H5V16a.5.5 0 00.41.492l.09.008h8a.5.5 0 00.492-.41L14 16V4.5zM7.527 6.06v8.951h-1V6.06h1zm5 0v8.951h-1V6.06h1zM10 6.06v8.951H9V6.06h1z"}))};r(60);class $l extends o.Component{render(){return s.a.createElement("div",{className:"ck-inspector-editor-quick-actions"},s.a.createElement(fn,{text:"Log editor",icon:s.a.createElement(jn,null),isEnabled:!!this.props.editor,onClick:()=>console.log(this.props.editor)}),s.a.createElement(fn,{text:"Log editor data",icon:s.a.createElement(zs,null),isEnabled:!!this.props.editor,onClick:()=>console.log(this.props.editor.getData())}),s.a.createElement(fn,{text:"Toggle read only",icon:s.a.createElement(qn,null),isOn:this.props.isReadOnly,isEnabled:!!this.props.editor,onClick:()=>{this.props.editor.isReadOnly=!this.props.editor.isReadOnly}}),s.a.createElement(fn,{text:"Destroy editor",icon:s.a.createElement(Gu,null),isEnabled:!!this.props.editor,onClick:()=>{this.props.editor.destroy()}}))}}var Yu=We(({editors:k,currentEditorName:g,currentEditorGlobals:{isReadOnly:w}})=>({editor:k.get(g),isReadOnly:w}),{})($l);function jl(){return(jl=Object.assign||function(k){for(var g=1;g<arguments.length;g++){var w=arguments[g];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(k[_]=w[_])}return k}).apply(this,arguments)}var Ju=w=>{var _=w,{styles:k={}}=_,g=Io(_,["styles"]);return s.a.createElement("svg",jl({viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},g),s.a.createElement("path",{d:"M17.03 6.47a.75.75 0 01.073.976l-.072.084-6.984 7a.75.75 0 01-.977.073l-.084-.072-7.016-7a.75.75 0 01.976-1.134l.084.072 6.485 6.47 6.454-6.469a.75.75 0 01.977-.073l.084.072z"}))};r(62);const Ya={position:"fixed",bottom:"0",left:"0",right:"0",top:"auto"};class Xo extends o.Component{constructor(g){super(g),Ja(this.props.height),document.body.style.setProperty("--ck-inspector-collapsed-height","30px"),this.handleInspectorResize=this.handleInspectorResize.bind(this)}handleInspectorResize(g,w,_){const I=_.style.height;this.props.setHeight(I),Ja(I)}render(){return this.props.isCollapsed?(document.body.classList.remove("ck-inspector-body-expanded"),document.body.classList.add("ck-inspector-body-collapsed")):(document.body.classList.remove("ck-inspector-body-collapsed"),document.body.classList.add("ck-inspector-body-expanded")),s.a.createElement(Ma,{bounds:"window",enableResizing:{top:!this.props.isCollapsed},disableDragging:!0,minHeight:"100",maxHeight:"100%",style:Ya,className:["ck-inspector",this.props.isCollapsed?"ck-inspector_collapsed":""].join(" "),position:{x:0,y:"100%"},size:{width:"100%",height:this.props.isCollapsed?30:this.props.height},onResizeStop:this.handleInspectorResize},s.a.createElement(qo,{onTabChange:this.props.setActiveTab,contentBefore:s.a.createElement(ql,{key:"docs"}),activeTab:this.props.activeTab,contentAfter:[s.a.createElement(Yl,{key:"selector"}),s.a.createElement("span",{className:"ck-inspector-separator",key:"separator-a"}),s.a.createElement(Yu,{key:"quick-actions"}),s.a.createElement("span",{className:"ck-inspector-separator",key:"separator-b"}),s.a.createElement(er,{key:"inspector-toggle"})]},s.a.createElement(zl,{label:"Model"}),s.a.createElement(Hl,{label:"View"}),s.a.createElement(Fs,{label:"Commands"})))}componentWillUnmount(){document.body.classList.remove("ck-inspector-body-expanded"),document.body.classList.remove("ck-inspector-body-collapsed")}}var Qu=We(({editors:k,currentEditorName:g,ui:{isCollapsed:w,height:_,activeTab:I}})=>({isCollapsed:w,height:_,editors:k,currentEditorName:g,activeTab:I}),{toggleIsCollapsed:un,setHeight:function(k){return{type:"SET_HEIGHT",newHeight:k}},setEditors:qt,setCurrentEditorName:zn,setActiveTab:function(k){return{type:"SET_ACTIVE_INSPECTOR_TAB",tabName:k}}})(Xo);class ql extends o.Component{render(){return s.a.createElement("a",{className:"ck-inspector-navbox__navigation__logo",title:"Go to the documentation",href:"https://ckeditor.com/docs/ckeditor5/latest/",target:"_blank",rel:"noopener noreferrer"},"CKEditor documentation")}}class Kl extends o.Component{constructor(g){super(g),this.handleShortcut=this.handleShortcut.bind(this)}render(){return s.a.createElement(fn,{text:"Toggle inspector",icon:s.a.createElement(Ju,null),onClick:this.props.toggleIsCollapsed,title:"Toggle inspector (Alt+F12)",className:["ck-inspector-navbox__navigation__toggle",this.props.isCollapsed?" ck-inspector-navbox__navigation__toggle_up":""].join(" ")})}componentDidMount(){window.addEventListener("keydown",this.handleShortcut)}componentWillUnmount(){window.removeEventListener("keydown",this.handleShortcut)}handleShortcut(g){(function(w){return w.altKey&&!w.shiftKey&&!w.ctrlKey&&w.key==="F12"})(g)&&this.props.toggleIsCollapsed()}}const er=We(({ui:{isCollapsed:k}})=>({isCollapsed:k}),{toggleIsCollapsed:un})(Kl);class Gl extends o.Component{render(){return s.a.createElement("div",{className:"ck-inspector-editor-selector",key:"editor-selector"},this.props.currentEditorName?s.a.createElement(Oa,{id:"inspector-editor-selector",label:"Instance",value:this.props.currentEditorName,options:[...this.props.editors].map(([g])=>g),onChange:g=>this.props.setCurrentEditorName(g.target.value)}):"")}}const Yl=We(({currentEditorName:k,editors:g})=>({currentEditorName:k,editors:g}),{setCurrentEditorName:zn})(Gl);function Ja(k){document.body.style.setProperty("--ck-inspector-height",k)}r(64),window.CKEDITOR_INSPECTOR_VERSION="2.3.0";class Ye{constructor(){vt.warn("[CKEditorInspector] Whoops! Looks like you tried to create an instance of the CKEditorInspector class. To attach the inspector, use the static CKEditorInspector.attach( editor ) method instead. For the latest API, please refer to https://github.com/ckeditor/ckeditor5-inspector/blob/master/README.md. ")}static attach(...g){const{editors:w,options:_}=lr(g);for(const I in w){const P=w[I];vt.group("%cAttached the inspector to a CKEditor 5 instance. To learn more, visit https://ckeditor.com/docs/ckeditor5.","font-weight: bold;"),vt.log(`Editor instance "${I}"`,P),vt.groupEnd(),Ye._editors.set(I,P),P.on("destroy",()=>{Ye.detach(I)}),Ye._mount(_),Ye._updateEditorsState()}return Object.keys(w)}static attachToAll(g){const w=document.querySelectorAll(".ck.ck-content.ck-editor__editable"),_=[];for(const I of w){const P=I.ckeditorInstance;P&&!Ye._isAttachedTo(P)&&_.push(...Ye.attach(P,g))}return _}static detach(g){Ye._wrapper&&(Ye._editors.delete(g),Ye._updateEditorsState())}static destroy(){if(!Ye._wrapper)return;u.a.unmountComponentAtNode(Ye._wrapper),Ye._editors.clear(),Ye._wrapper.remove();const g=Ye._store.getState(),w=g.editors.get(g.currentEditorName);w&&Ye._editorListener.stopListening(w),Ye._editorListener=null,Ye._wrapper=null,Ye._store=null}static _updateEditorsState(){Ye._store.dispatch(qt(Ye._editors))}static _mount(g){if(Ye._wrapper)return;const w=Ye._wrapper=document.createElement("div");let _,I;w.className="ck-inspector-wrapper",document.body.appendChild(w),Ye._editorListener=new Nr({onModelChange(){const P=Ye._store;P.getState().ui.isCollapsed||(P.dispatch({type:"UPDATE_MODEL_STATE"}),P.dispatch({type:"UPDATE_COMMANDS_STATE"}))},onViewRender(){const P=Ye._store;P.getState().ui.isCollapsed||P.dispatch({type:"UPDATE_VIEW_STATE"})},onReadOnlyChange(){Ye._store.dispatch({type:"UPDATE_CURRENT_EDITOR_IS_READ_ONLY"})}}),Ye._store=A(Rn,{editors:Ye._editors,currentEditorName:xi(Ye._editors),currentEditorGlobals:{},ui:{isCollapsed:g.isCollapsed}}),Ye._store.subscribe(()=>{const P=Ye._store.getState(),N=P.editors.get(P.currentEditorName);_!==N&&(_&&Ye._editorListener.stopListening(_),N&&Ye._editorListener.startListening(N),_=N)}),Ye._store.subscribe(()=>{const P=Ye._store,N=P.getState().ui.isCollapsed,Y=I&&!N;I=N,Y&&(P.dispatch({type:"UPDATE_MODEL_STATE"}),P.dispatch({type:"UPDATE_COMMANDS_STATE"}),P.dispatch({type:"UPDATE_VIEW_STATE"}))}),u.a.render(s.a.createElement(ae,{store:Ye._store},s.a.createElement(Qu,null)),w)}static _isAttachedTo(g){return[...Ye._editors.values()].includes(g)}}Ye._editors=new Map,Ye._wrapper=null}]).default})})(h_);var P7=$_(h_.exports),A7='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>';const Lu="imgPlugin",I7="\u56FE\u7247",f_="image";class R7 extends be{init(){this.createToolbarButton()}createToolbarButton(){const e=this.editor,t=e.commands.get(Lu);Hc.editorObj=e,window.dd=e.model,e.ui.componentFactory.add(Lu,n=>{const r=new Dt(n);return r.set({label:I7,tooltip:!0,icon:A7,class:"toolbar_button_img_extend"}),r.bind("isOn","isEnabled").to(t,"value","isEnabled"),this.listenTo(r,"execute",()=>{console.log("======execute image view click"),Hc.dialogObj.openDialog(5)}),r})}}class M7 extends at{constructor(e){super(e);this.attributeKey=f_}refresh(){const e=this.editor.model,t=e.document.selection;this.isEnabled=e.schema.checkAttributeInSelection(t,this.attributeKey)}}class O7 extends be{static get requires(){return[wa]}static get pluginName(){return"ImgEditing"}init(){const e=this.editor;this.defineSchema(),e.commands.add(Lu,new M7(e))}defineSchema(){this.editor.model.schema.extend("$text",{allowAttributes:f_})}}class m_ extends be{static get requires(){return[O7,R7]}static get pluginName(){return Lu}}function N7(i,e={}){console.log(i),!(!e||!e.src)&&i.change(t=>{const n=t.createElement("imageInline",e),r=ba(i.document.selection,i);i.insertContent(n,r)})}const D7={name:"ckeditorAttachDialog",setup(i,e){const t=j_({isShowDialog:!1,queryParams:{},showSearch:!0,max:1,limit:3,uploadUrl:"fastcms/api/admin/attachment/upload",headers:{Authorization:e1.get("token")},checkedObjs:[],tableData:{data:[],total:99,loading:!1,param:{pageNum:1,pageSize:10}}}),n=T=>{t.isShowDialog=!0,t.max=T},r=()=>{t.isShowDialog=!1,t.max=1},o=()=>{Z_(t.tableData.param).then(T=>{t.tableData.data=T.data.records,t.tableData.total=T.data.total})},s=()=>{o()},c=()=>{Np.error("\u4E0A\u4F20\u6587\u4EF6\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 "+t.limit+" \u4E2A!")},u=()=>{Np.error("\u4E0A\u4F20\u5931\u8D25")};return Mp(()=>{o()}),Se({openDialog:n,closeDialog:r,initTableData:o,onTableItemClick:T=>{console.log(T)},onHandleSizeChange:T=>{t.tableData.param.pageSize=T},onHandleCurrentChange:T=>{t.tableData.param.pageNum=T},onHandleExceed:c,onHandleUploadError:u,uploadSuccess:s,onSubmit:()=>{let T=[];t.checkedObjs.forEach(A=>T.push({src:A.path})),T.forEach(A=>N7(Hc.editorObj.model,A)),r()},confirm},q_(t))}},B7=$d("\u4E0A\u4F20\u9644\u4EF6"),V7={key:0},L7=["src"],F7={style:{padding:"14px"}},z7={class:"dialog-footer"},H7=$d("\u53D6 \u6D88"),U7=$d("\u786E \u5B9A");function W7(i,e,t,n,r,o){const s=nr("el-button"),c=nr("el-upload"),u=nr("el-checkbox"),h=nr("el-card"),f=nr("el-col"),p=nr("el-checkbox-group"),y=nr("el-row"),T=nr("el-empty"),A=nr("el-pagination"),M=nr("el-dialog");return hs(),zc(M,{title:"\u9009\u62E9\u9644\u4EF6",fullscreen:"",modelValue:i.isShowDialog,"onUpdate:modelValue":e[1]||(e[1]=B=>i.isShowDialog=B)},{footer:Fi(()=>[Zs("span",z7,[vr(s,{onClick:n.closeDialog,size:"small"},{default:Fi(()=>[H7]),_:1},8,["onClick"]),vr(s,{type:"primary",onClick:n.onSubmit,size:"small"},{default:Fi(()=>[U7]),_:1},8,["onClick"])])]),default:Fi(()=>[Zs("div",null,[vr(c,{class:"upload-btn",action:i.uploadUrl,name:"files",multiple:"",headers:i.headers,"show-file-list":!1,"on-success":n.uploadSuccess,"on-exceed":n.onHandleExceed,"on-error":n.onHandleUploadError,limit:i.limit},{default:Fi(()=>[vr(s,{size:"small",type:"primary"},{default:Fi(()=>[B7]),_:1})]),_:1},8,["action","headers","on-success","on-exceed","on-error","limit"]),vr(h,{shadow:"hover"},{default:Fi(()=>[i.tableData.data.length>0?(hs(),Wd("div",V7,[vr(y,{gutter:15},{default:Fi(()=>[vr(p,{max:i.max,modelValue:i.checkedObjs,"onUpdate:modelValue":e[0]||(e[0]=B=>i.checkedObjs=B)},{default:Fi(()=>[(hs(!0),Wd(Op,null,K_(i.tableData.data,(B,O)=>(hs(),zc(f,{xs:24,sm:12,md:8,lg:6,xl:4,class:"mb15",key:O,onClick:V=>n.onTableItemClick(B)},{default:Fi(()=>[vr(h,{"body-style":{padding:"0px"}},{default:Fi(()=>[Zs("img",{src:B.path,class:"image"},null,8,L7),Zs("div",F7,[vr(u,{label:B},{default:Fi(()=>[Zs("span",null,G_(B.fileName),1)]),_:2},1032,["label"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1},8,["max","modelValue"])]),_:1})])):(hs(),zc(T,{key:1,description:"\u6682\u65E0\u6570\u636E"})),i.tableData.data.length>0?(hs(),zc(A,{key:2,style:{"text-align":"right"},background:"",onSizeChange:n.onHandleSizeChange,onCurrentChange:n.onHandleCurrentChange,"page-sizes":[10,20,30],"current-page":i.tableData.param.pageNum,"page-size":i.tableData.param.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:i.tableData.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])):Y_("",!0)]),_:1})])]),_:1},8,["modelValue"])}var $7=Dp(D7,[["render",W7],["__scopeId","data-v-1c08d851"]]);const j7=J_({props:{modelValue:{type:String}},components:{imgResWin:$7},setup(i,{emit:e}){let t=Q_(),n=null,r=!1;return Mp(()=>{Hc.dialogObj=t.value,_f.create(document.querySelector("#imgEditor"),{plugins:[tM,lM,dM,pM,vM,EM,PM,x7,RM,LM,lO,fO,TO,SO,jO,QO,eN,AN,QN,dD,Nl,qD,w7,_7,U5,m_],toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","|","outdent","indent","|",m_.pluginName,"blockQuote","insertTable","mediaEmbed","undo","redo"],image:{toolbar:["imageStyle:inline","imageStyle:block","imageStyle:side","|","toggleImageCaption","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}}).then(o=>{n=o,o.setData(i.modelValue),o.model.document.on("change",function(){r=!0,e("update:modelValue",o.getData())}),P7.attach(o)}).catch(o=>{console.log(o)})}),X_(()=>i.modelValue,o=>{if(r)return r=!1;n&&n.setData(o)}),{attachDialog:t}}}),q7=Zs("div",{id:"imgEditor"},null,-1);function K7(i,e,t,n,r,o){const s=nr("imgResWin");return hs(),Wd(Op,null,[q7,vr(s,{ref:"attachDialog"},null,512)],64)}var X7=Dp(j7,[["render",K7]]);export{X7 as C};
