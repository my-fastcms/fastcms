import{q as h}from"./qs-c5b6dbf2.js";import{C as D}from"./index-a92321e6.js";import{A as O}from"./index-f26a851d.js";import{a as v}from"./element-plus-91d6d961.js";import{H as M,e as y,_ as E,i as I,ah as i,o as _,c as F,V as e,P as l,F as P,a8 as R,T as k,bh as N,bf as W,a as u,O as j}from"./@vue-6dabbe94.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import"./@intlify-ea47d1db.js";import"./source-map-7d7e1c08.js";import"./side-channel-394f276c.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-8fd4bade.js";import"./index-aa5b7dfa.js";import"./pinia-b6f74250.js";import"./vue-router-c1461dfc.js";import"./vue-i18n-b3581196.js";import"./vue-b1ba6f14.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-64e6e14a.js";import"./nprogress-08a53ce8.js";import"./axios-4a70c6fc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-ec2a62c3.js";import"./lodash-es-9851428c.js";import"./@vueuse-e129c873.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-f6fdf7b4.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-b8998962.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-880a26aa.js";import"./index-c9db26a7.js";import"./client-0f616fa7.js";const p=d=>(N("data-v-996a1273"),d=d(),W(),d),K={class:"personal"},L=p(()=>u("div",{class:"personal-edit-title mb15"},"文件服务器",-1)),G=p(()=>u("div",{class:"personal-edit-title mb15"},"文件大小限制",-1)),J=p(()=>u("div",{class:"sub-title"},"单位M，0表示不限制文件大小",-1)),Q=p(()=>u("div",{class:"sub-title"},"单位M，0表示不限制文件大小",-1)),X=p(()=>u("div",{class:"personal-edit-title mb15"},"水印设置",-1)),Y=p(()=>u("div",{class:"sub-title"},"上传水印图片请先关闭水印功能",-1)),Z=M({name:"attachSetManager"}),$=M({...Z,setup(d){const f=D(),g=y(),b=y(),t=E({fileType:"image",fit:"fill",posOptions:[{value:"leftup",label:"左上"},{value:"rightup",label:"右上"},{value:"middle",label:"中间"},{value:"leftdown",label:"左下"},{value:"rightdown",label:"右下"}],ruleForm:{file_domain:"",imageMaxSize:0,otherMaxSize:0,enableWatermark:!0,waterMarkPos:"middle",diaphaneity:0,waterMarkTxt:"",waterMarkFile:""},rules:{imageMaxSize:[{required:!0,message:"请输入允许上传图片大小最大值",trigger:"blur"}],otherMaxSize:[{required:!0,message:"请输入允许上传其他文件大小最大值",trigger:"blur"}],file_domain:[{required:!0,message:"请输入文件服务器域名",trigger:"blur"}]}}),V=()=>{b.value.validate(n=>{if(n){let a=h.stringify(t.ruleForm,{arrayFormat:"repeat"});f.saveConfig(a).then(()=>{v.success("保存成功")}).catch(m=>{v({showClose:!0,message:m.message?m.message:"系统错误",type:"error"})})}})},w=n=>{t.ruleForm.waterMarkFile=n[0].path},x=()=>{g.value.openDialog(1)};return I(()=>{let n=new Array;Object.keys(t.ruleForm).forEach(r=>{n.push(r)});let m=h.stringify({configKeys:n},{arrayFormat:"repeat"});f.getConfigList(m).then(r=>{r.data.forEach(s=>{t.ruleForm[s.key]=s.jsonValue})})}),(n,a)=>{const m=i("el-input"),r=i("el-form-item"),s=i("el-col"),c=i("el-row"),S=i("el-switch"),z=i("el-option"),C=i("el-select"),A=i("el-image"),T=i("el-link"),B=i("el-button"),U=i("el-form"),q=i("el-card");return _(),F("div",K,[e(c,null,{default:l(()=>[e(s,{span:24},{default:l(()=>[e(q,{shadow:"hover"},{default:l(()=>[e(U,{model:t.ruleForm,rules:t.rules,ref_key:"myRefForm",ref:b,"label-width":"150px",class:"mt35 mb35"},{default:l(()=>[L,e(c,{gutter:35},{default:l(()=>[e(s,{class:"mb20"},{default:l(()=>[e(r,{label:"域名设置",prop:"file_domain"},{default:l(()=>[e(m,{modelValue:t.ruleForm.file_domain,"onUpdate:modelValue":a[0]||(a[0]=o=>t.ruleForm.file_domain=o),placeholder:"请输入文件服务器域名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),G,e(c,{gutter:35},{default:l(()=>[e(s,{class:"mb20"},{default:l(()=>[e(r,{label:"图片大小设置",prop:"imageMaxSize"},{default:l(()=>[e(m,{modelValue:t.ruleForm.imageMaxSize,"onUpdate:modelValue":a[1]||(a[1]=o=>t.ruleForm.imageMaxSize=o),placeholder:"请输入允许上传图片的最大值，单位MB",onkeyup:"value=value.replace(/[^\\d]/g,'')",clearable:""},null,8,["modelValue"]),J]),_:1})]),_:1}),e(s,{class:"mb20"},{default:l(()=>[e(r,{label:"其他文件大小设置",prop:"otherMaxSize"},{default:l(()=>[e(m,{modelValue:t.ruleForm.otherMaxSize,"onUpdate:modelValue":a[2]||(a[2]=o=>t.ruleForm.otherMaxSize=o),placeholder:"请输入允许上传其他文件的最大值，单位MB",onkeyup:"value=value.replace(/[^\\d]/g,'')",clearable:""},null,8,["modelValue"]),Q]),_:1})]),_:1})]),_:1}),X,e(c,{gutter:35},{default:l(()=>[e(s,{class:"mb20"},{default:l(()=>[e(r,{label:"是否开启水印"},{default:l(()=>[e(S,{modelValue:t.ruleForm.enableWatermark,"onUpdate:modelValue":a[3]||(a[3]=o=>t.ruleForm.enableWatermark=o),"active-color":"#13ce66"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{class:"mb20"},{default:l(()=>[e(r,{label:"水印位置"},{default:l(()=>[e(C,{modelValue:t.ruleForm.waterMarkPos,"onUpdate:modelValue":a[4]||(a[4]=o=>t.ruleForm.waterMarkPos=o),placeholder:"请选择",class:"w100"},{default:l(()=>[(_(!0),F(P,null,R(t.posOptions,o=>(_(),j(z,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{class:"mb20"},{default:l(()=>[e(r,{label:"透明度"},{default:l(()=>[e(m,{modelValue:t.ruleForm.diaphaneity,"onUpdate:modelValue":a[5]||(a[5]=o=>t.ruleForm.diaphaneity=o),placeholder:"请输入透明度",onkeyup:"value=value.replace(/[^\\d]/g,'')",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{class:"mb20"},{default:l(()=>[e(r,{label:"水印图片"},{default:l(()=>[e(A,{style:{width:"100px",height:"100px"},src:t.ruleForm.waterMarkFile,fit:t.fit},null,8,["src","fit"])]),_:1}),e(r,null,{default:l(()=>[e(T,{type:"primary",onClick:x},{default:l(()=>[k("选择图片")]),_:1}),Y]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,null,{default:l(()=>[e(B,{type:"primary",size:"default",onClick:V},{default:l(()=>[k("保 存")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1}),e(O,{ref_key:"attachDialogRef",ref:g,onAttachHandler:w,fileType:t.fileType},null,8,["fileType"])])}}});const Pe=H($,[["__scopeId","data-v-996a1273"]]);export{Pe as default};
