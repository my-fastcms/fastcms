import{u as j,b as B}from"./vue-router-c1461dfc.js";import{u as L}from"./vue-i18n-b3581196.js";import{p as E,S as z}from"./index-b6a6dad6.js";import{a as D}from"./formatTime-29ac8c52.js";import{L as J}from"./index-98128703.js";import{q as V}from"./qs-c5b6dbf2.js";import{C as M}from"./index-cc181d37.js";import{a as f}from"./element-plus-91d6d961.js";import{H as F,e as O,_ as H,j as C,i as G,ah as l,o as Q,c as W,a as r,U as u,V as o,P as a,J as k,T as X}from"./@vue-6dabbe94.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import"./@intlify-ea47d1db.js";import"./source-map-7d7e1c08.js";import"./vue-b1ba6f14.js";import"./pinia-b6f74250.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-64e6e14a.js";import"./nprogress-08a53ce8.js";import"./axios-4a70c6fc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-ec2a62c3.js";import"./side-channel-394f276c.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-8fd4bade.js";import"./lodash-es-9851428c.js";import"./@vueuse-e129c873.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-f6fdf7b4.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-b8998962.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-880a26aa.js";const Z={class:"login-container"},ee={class:"login-logo"},oe={class:"login-content"},te={class:"login-content-main"},se={class:"login-content-title"},ae={class:"login-content-code"},re=["src"],ne={class:"mt10"},ie={class:"login-copyright"},le={class:"mb5 login-copyright-company"},ce={class:"login-copyright-msg"},me=F({name:"register"}),pe=F({...me,setup(ue){const y=J(),x=M(),h=O(),{t:S}=L(),w=E,d=j(),g=B(),e=H({isShowPassword:!1,public_website_title:w.state.value.themeConfig.globalTitle,captcha:"",captchaKey:"",myForm:{nickName:"",username:"",password:"",repeatPassword:"",code:""},rules:{username:{required:!0,message:"请输入账号",trigger:"blur"},nickName:{required:!0,message:"请输入用户昵称",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"},repeatPassword:{required:!0,message:"请输入确认密码",trigger:"blur"},code:{required:!0,message:"请输入验证码",trigger:"blur"}},loading:{registerIn:!1}}),$=C(()=>w.state.value.themeConfig),q=C(()=>D(new Date)),_=async()=>{y.getCaptcha().then(t=>{e.captcha=t.data.image,e.captchaKey=t.data.codeUuid,z.set("ClientId",e.captchaKey)}).catch(()=>{})};G(()=>{_();let t=new Array;t.push("public_website_title");let s=V.stringify({configKeys:t},{arrayFormat:"repeat"});x.getPublicConfigList(s).then(p=>{p.data.forEach(n=>{n.key=="public_website_title"&&n.jsonValue!=null&&(e.public_website_title=n.jsonValue)})})});const U=async()=>{new Promise(t=>{h.value.validate(s=>{s&&(t(s),I())})})},I=async()=>{y.register(V.stringify(e.myForm)).then(()=>{T()}).catch(t=>{_(),f({showClose:!0,message:t.message?t.message:"系统错误",type:"error"})})},T=()=>{var s,p,n,c;let t=q.value;(s=d.query)!=null&&s.redirect?g.push({path:(p=d.query)==null?void 0:p.redirect,query:Object.keys((n=d.query)==null?void 0:n.params).length>0?JSON.parse((c=d.query)==null?void 0:c.params):""}):g.push("/login"),setTimeout(()=>{e.loading.registerIn=!0;const m=S("message.registerInText");f.success(`${t}，${m}`)},300)},N=()=>{g.push("/login")},R=()=>{/[^a-z0-9_]/g.test(e.myForm.username)&&(e.myForm.username="",f({showClose:!0,message:"只能输入英文字母数字",type:"error"}))};return(t,s)=>{const p=l("ele-User"),n=l("el-icon"),c=l("el-input"),m=l("el-form-item"),b=l("ele-Unlock"),v=l("el-col"),A=l("el-row"),P=l("el-button"),K=l("el-form");return Q(),W("div",Z,[r("div",ee,[r("span",null,u($.value.globalViceTitle),1)]),r("div",oe,[r("div",te,[r("h4",se,u(e.public_website_title),1),r("div",null,[o(K,{class:"login-content-form",model:e.myForm,rules:e.rules,ref_key:"myRefForm",ref:h},{default:a(()=>[o(m,{prop:"username"},{default:a(()=>[o(c,{type:"text",placeholder:t.$t("message.account.accountPlaceholder1"),modelValue:e.myForm.username,"onUpdate:modelValue":s[0]||(s[0]=i=>e.myForm.username=i),clearable:"",autocomplete:"off",onChange:R},{prefix:a(()=>[o(n,{class:"el-input__icon"},{default:a(()=>[o(p)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),o(m,{prop:"nickName"},{default:a(()=>[o(c,{type:"text",placeholder:t.$t("message.account.accountPlaceholder6"),modelValue:e.myForm.nickName,"onUpdate:modelValue":s[1]||(s[1]=i=>e.myForm.nickName=i),clearable:"",autocomplete:"off"},{prefix:a(()=>[o(n,{class:"el-input__icon"},{default:a(()=>[o(p)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),o(m,{prop:"password"},{default:a(()=>[o(c,{type:e.isShowPassword?"text":"password",placeholder:t.$t("message.account.accountPlaceholder2"),modelValue:e.myForm.password,"onUpdate:modelValue":s[3]||(s[3]=i=>e.myForm.password=i),autocomplete:"off"},{prefix:a(()=>[o(n,{class:"el-input__icon"},{default:a(()=>[o(b)]),_:1})]),suffix:a(()=>[r("i",{class:k(["iconfont el-input__icon login-content-password",e.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:s[2]||(s[2]=i=>e.isShowPassword=!e.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),o(m,{prop:"repeatPassword"},{default:a(()=>[o(c,{type:e.isShowPassword?"text":"password",placeholder:t.$t("message.account.accountPlaceholder4"),modelValue:e.myForm.repeatPassword,"onUpdate:modelValue":s[5]||(s[5]=i=>e.myForm.repeatPassword=i),autocomplete:"off"},{prefix:a(()=>[o(n,{class:"el-input__icon"},{default:a(()=>[o(b)]),_:1})]),suffix:a(()=>[r("i",{class:k(["iconfont el-input__icon login-content-password",e.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:s[4]||(s[4]=i=>e.isShowPassword=!e.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),o(m,{prop:"code"},{default:a(()=>[o(A,{gutter:15},{default:a(()=>[o(v,{span:14},{default:a(()=>[o(c,{type:"text",maxlength:"5",placeholder:t.$t("message.account.accountPlaceholder3"),modelValue:e.myForm.code,"onUpdate:modelValue":s[6]||(s[6]=i=>e.myForm.code=i),clearable:"",autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),o(v,{span:10},{default:a(()=>[r("div",ae,[r("img",{class:"login-content-code-img",alt:"fastcms",onClick:_,src:e.captcha},null,8,re)])]),_:1})]),_:1})]),_:1}),o(m,null,{default:a(()=>[o(P,{type:"primary",class:"login-content-submit",round:"",onClick:U,loading:e.loading.registerIn},{default:a(()=>[r("span",null,u(t.$t("message.account.accountRegistBtnText")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),r("div",ne,[o(P,{link:"",type:"primary",onClick:N},{default:a(()=>[X(u(t.$t("message.link.two5")),1)]),_:1})])])])]),r("div",ie,[r("div",le,u(t.$t("message.copyright.one5")),1),r("div",ce,u(t.$t("message.copyright.two6")),1)])])}}});const Xe=Y(pe,[["__scopeId","data-v-682d9da2"]]);export{Xe as default};
