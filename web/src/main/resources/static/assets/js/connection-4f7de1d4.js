import{q as y}from"./qs-c5b6dbf2.js";import{C as S}from"./index-e533b5d9.js";import{a as u}from"./element-plus-91d6d961.js";import{H as g,e as x,_ as U,i as K,ah as i,o as q,c as E,V as e,P as l,T as b,bh as I,bf as M,a as V}from"./@vue-6dabbe94.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import"./@intlify-ea47d1db.js";import"./source-map-7d7e1c08.js";import"./side-channel-394f276c.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-8fd4bade.js";import"./index-b1371ca3.js";import"./pinia-b6f74250.js";import"./vue-router-c1461dfc.js";import"./vue-i18n-b3581196.js";import"./vue-b1ba6f14.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-64e6e14a.js";import"./nprogress-08a53ce8.js";import"./axios-4a70c6fc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-ec2a62c3.js";import"./lodash-es-9851428c.js";import"./@vueuse-e129c873.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-f6fdf7b4.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-b8998962.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-880a26aa.js";const F=n=>(I("data-v-5bc1afaa"),n=n(),M(),n),B={class:"personal"},N=F(()=>V("div",{class:"personal-edit-title mb15"},"阿里云短信",-1)),T=F(()=>V("div",{class:"personal-edit-title mb15"},"邮箱",-1)),j=g({name:"connectionSet"}),R=g({...j,setup(n){const c=x(),_=S(),a=U({fit:"fill",testing:!1,ruleForm:{aliyun_sms_app_key:"",aliyun_sms_app_secret:"",aliyun_sms_is_enable:!1,email_host:"smtp.163.com",email_port:25,email_username:"",email_password:""},rules:{aliyun_sms_app_key:[{required:!0,message:"请输入短信appKey",trigger:"blur"}],aliyun_sms_app_secret:[{required:!0,message:"请输入短信appSecret",trigger:"blur"}]}}),h=()=>{c.value.validate(p=>{if(p){let o=y.stringify(a.ruleForm,{arrayFormat:"repeat"});_.saveConfig(o).then(()=>{u.success("保存成功")}).catch(m=>{u({showClose:!0,message:m.message?m.message:"系统错误",type:"error"})})}})},w=()=>{a.testing=!0,_.testMailConfig().then(()=>{a.testing=!1,u.success("邮件配置成功")}).catch(p=>{a.testing=!1,u({showClose:!0,message:p.message?p.message:"系统错误",type:"error"})})};return K(()=>{let p=new Array;Object.keys(a.ruleForm).forEach(t=>{p.push(t)});let m=y.stringify({configKeys:p},{arrayFormat:"repeat"});_.getConfigList(m).then(t=>{t.data.forEach(r=>{a.ruleForm[r.key]=r.jsonValue})})}),(p,o)=>{const m=i("el-input"),t=i("el-form-item"),r=i("el-col"),k=i("el-switch"),d=i("el-row"),f=i("el-button"),v=i("el-form"),C=i("el-card");return q(),E("div",B,[e(d,null,{default:l(()=>[e(r,{span:24},{default:l(()=>[e(C,{shadow:"hover"},{default:l(()=>[e(v,{model:a.ruleForm,rules:a.rules,ref_key:"myRefForm",ref:c,"label-width":"150px",class:"mt35 mb35"},{default:l(()=>[N,e(d,{gutter:35},{default:l(()=>[e(r,{class:"mb20"},{default:l(()=>[e(t,{label:"短信appKey",prop:"aliyun_sms_app_key"},{default:l(()=>[e(m,{modelValue:a.ruleForm.aliyun_sms_app_key,"onUpdate:modelValue":o[0]||(o[0]=s=>a.ruleForm.aliyun_sms_app_key=s),placeholder:"请输入短信appKey",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{class:"mb20"},{default:l(()=>[e(t,{label:"短信appSecret",prop:"aliyun_sms_app_secret"},{default:l(()=>[e(m,{modelValue:a.ruleForm.aliyun_sms_app_secret,"onUpdate:modelValue":o[1]||(o[1]=s=>a.ruleForm.aliyun_sms_app_secret=s),placeholder:"请输入短信appSecret",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{class:"mb20"},{default:l(()=>[e(t,{label:"是否启用"},{default:l(()=>[e(k,{modelValue:a.ruleForm.aliyun_sms_is_enable,"onUpdate:modelValue":o[2]||(o[2]=s=>a.ruleForm.aliyun_sms_is_enable=s),"active-color":"#13ce66"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),T,e(d,{gutter:35},{default:l(()=>[e(r,{class:"mb20"},{default:l(()=>[e(t,{label:"邮箱地址",prop:"email_host"},{default:l(()=>[e(m,{modelValue:a.ruleForm.email_host,"onUpdate:modelValue":o[3]||(o[3]=s=>a.ruleForm.email_host=s),placeholder:"请输入邮箱地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{class:"mb20"},{default:l(()=>[e(t,{label:"邮箱端口",prop:"email_port"},{default:l(()=>[e(m,{modelValue:a.ruleForm.email_port,"onUpdate:modelValue":o[4]||(o[4]=s=>a.ruleForm.email_port=s),placeholder:"请输入邮箱端口",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{class:"mb20"},{default:l(()=>[e(t,{label:"邮箱用户名",prop:"email_username"},{default:l(()=>[e(m,{modelValue:a.ruleForm.email_username,"onUpdate:modelValue":o[5]||(o[5]=s=>a.ruleForm.email_username=s),placeholder:"请输入邮箱用户名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{class:"mb20"},{default:l(()=>[e(t,{label:"邮箱密码",prop:"email_password"},{default:l(()=>[e(m,{modelValue:a.ruleForm.email_password,"onUpdate:modelValue":o[6]||(o[6]=s=>a.ruleForm.email_password=s),placeholder:"请输入邮箱密码",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{class:"mb20"},{default:l(()=>[e(t,null,{default:l(()=>[e(f,{loading:a.testing,onClick:w},{default:l(()=>[b("测试邮件配置")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(t,null,{default:l(()=>[e(f,{type:"primary",onClick:h,size:"default"},{default:l(()=>[b("保 存")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})])}}});const we=A(R,[["__scopeId","data-v-5bc1afaa"]]);export{we as default};
