var v=Object.defineProperty;var h=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var _=(e,a,o)=>a in e?v(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,b=(e,a)=>{for(var o in a||(a={}))E.call(a,o)&&_(e,o,a[o]);if(h)for(var o of h(a))B.call(a,o)&&_(e,o,a[o]);return e};import{g as x,d as F}from"./index.b373240d.js";import{j as y,a0 as k,o as A,t as N,l as i,m as S,z as n,A as u,E as R,b as C,D as w,p as j,Q as H,L as M,x as p}from"./vendor.e5eb9059.js";import{_ as T}from"./index.a104479c.js";const U={name:"pageManager",setup(){const e=y({tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10}}}),a=k(),o=()=>{x(e.tableData.param).then(t=>{e.tableData.data=t.data.records,e.tableData.total=t.data.total}).catch(()=>{})},s=t=>{R.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u6587\u7AE0, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u5220\u9664",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{F(t.id).then(()=>{C.success("\u5220\u9664\u6210\u529F"),o()}).catch(d=>{C.error(d.message)})}).catch(()=>{})},m=t=>{a.push({path:"/page/write",query:{id:t.id}})},g=t=>{e.tableData.param.pageSize=t},r=t=>{e.tableData.param.pageNum=t},c=()=>{a.push({path:"/page/write"})};return A(()=>{o()}),b({addArticle:c,onRowUpdate:m,onRowDel:s,onHandleSizeChange:g,onHandleCurrentChange:r,initTableData:o},N(e))}},V={class:"mb15"},L=p("\u65B0\u5EFA\u9875\u9762"),$=p("\u67E5\u8BE2"),q=p("\u4FEE\u6539"),I=p("\u5220\u9664");function Q(e,a,o,s,m,g){const r=i("el-button"),c=i("el-input"),t=i("el-table-column"),d=i("el-table"),f=i("el-pagination"),D=i("el-card");return w(),S("div",null,[n(D,{shadow:"hover"},{default:u(()=>[j("div",V,[n(r,{class:"mt15",size:"small",onClick:a[0]||(a[0]=l=>s.addArticle()),type:"primary",icon:"iconfont icon-shuxingtu"},{default:u(()=>[L]),_:1}),n(c,{size:"small",placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898","prefix-icon":"el-icon-search",style:{"max-width":"180px"},class:"ml10"}),n(r,{size:"small",type:"primary",class:"ml10"},{default:u(()=>[$]),_:1})]),n(d,{data:e.tableData.data,stripe:"",style:{width:"100%"}},{default:u(()=>[n(t,{prop:"id",label:"ID","show-overflow-tooltip":""}),n(t,{prop:"title",label:"\u6807\u9898","show-overflow-tooltip":""}),n(t,{prop:"author",label:"\u4F5C\u8005","show-overflow-tooltip":""}),n(t,{prop:"status",label:"\u72B6\u6001","show-overflow-tooltip":""}),n(t,{prop:"viewCount",label:"\u6D4F\u89C8\u6B21\u6570","show-overflow-tooltip":""}),n(t,{prop:"created",label:"\u521B\u5EFA\u65F6\u95F4","show-overflow-tooltip":""}),n(t,{prop:"path",label:"\u64CD\u4F5C",width:"90"},{default:u(l=>[n(r,{size:"mini",type:"text",onClick:z=>s.onRowUpdate(l.row)},{default:u(()=>[q]),_:2},1032,["onClick"]),l.row.id!=1?(w(),H(r,{key:0,size:"mini",type:"text",onClick:z=>s.onRowDel(l.row)},{default:u(()=>[I]),_:2},1032,["onClick"])):M("",!0)]),_:1})]),_:1},8,["data"]),n(f,{onSizeChange:s.onHandleSizeChange,onCurrentChange:s.onHandleCurrentChange,class:"mt15","pager-count":5,"page-sizes":[10,20,30],"current-page":e.tableData.param.pageNum,"onUpdate:current-page":a[1]||(a[1]=l=>e.tableData.param.pageNum=l),background:"","page-size":e.tableData.param.pageSize,"onUpdate:page-size":a[2]||(a[2]=l=>e.tableData.param.pageSize=l),layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),_:1})])}var P=T(U,[["render",Q]]);export{P as default};
