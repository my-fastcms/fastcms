var j=Object.defineProperty;var y=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var A=(l,u,d)=>u in l?j(l,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[u]=d,C=(l,u)=>{for(var d in u||(u={}))q.call(u,d)&&A(l,d,u[d]);if(y)for(var d of y(u))N.call(u,d)&&A(l,d,u[d]);return l};import{r as D,M as R,j as H,o as L,t as O,l as n,m as h,z as e,A as o,b as w,D as E,Y as K,X as T,Q as z,G as I,x as v,p as M}from"./vendor.63450691.js";import{A as $}from"./index.38eef1ad.js";import{g as G,h as Q,i as W,j as X}from"./index.f3f1f000.js";import{l as Y}from"./index.1d1037f0.js";import{C as J}from"./index.f6a194ca.js";import{_ as P}from"./index.87135d6f.js";import"./index.1d2018a4.js";const Z={name:"articleWrite",components:{AttachDialog:$,ckeditor:J},setup(l,u){const d=D(),F=D(),_=R(),{proxy:B}=I(),r=H({fit:"fill",row:null,isShowDialog:!1,params:{},categories:[],tags:[],ruleForm:{title:"",commentEnable:1,contentHtml:"",status:"publish"},rules:{title:{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898",trigger:"blur"},contentHtml:{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u8BE6\u60C5",trigger:"blur"},thumbnail:{required:!0,message:"\u8BF7\u9009\u62E9\u7F29\u7565\u56FE",trigger:"blur"},summary:{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6458\u8981",trigger:"blur"},seoKeywords:{required:!0,message:"\u8BF7\u8F93\u5165SEO\u5173\u952E\u8BCD",trigger:"blur"},seoDescription:{required:!0,message:"\u8BF7\u8F93\u5165SEO\u63CF\u8FF0",trigger:"blur"},status:{required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u5E03\u72B6\u6001",trigger:"blur"}}}),a=()=>{G().then(s=>{r.categories=s.data}),Q().then(s=>{s.data.forEach(i=>{r.tags.push(i)})})},m=()=>{B.$refs.myRefForm.validate(s=>{if(s){console.log("========test:");let i=Y.stringify(r.ruleForm,{arrayFormat:"repeat"});W(i).then(p=>{r.ruleForm.id=p.data,w.success("\u4FDD\u5B58\u6210\u529F")}).catch(p=>{w({showClose:!0,message:p.message?p.message:"\u7CFB\u7EDF\u9519\u8BEF",type:"error"})})}})},c=s=>{X(s).then(i=>{r.ruleForm=i.data})},f=s=>{console.log(s)},g=()=>{d.value.openDialog(1)},b=s=>{r.ruleForm.thumbnail=s[0].path};return L(()=>{r.params=_,a();let s=r.params.query.id;s&&c(s)}),C({attachDialogRef:d,categoryCascaderRef:F,onSubmit:m,onAttachDialogOpen:g,getSelectAttach:b,getCategoryList:a,getArticleInfo:c,onEditorReady:f},O(r))}},ee={class:"container"},le=v("\u9009\u62E9\u56FE\u7247"),ue=M("div",{class:"sub-title"},"\u7ED3\u5408\u7F51\u7AD9\u6A21\u677F\u4F7F\u7528\uFF0C\u4E0D\u6B63\u786E\u586B\u5199\uFF0C\u8BBF\u95EE\u9875\u9762\u4F1A\u51FA\u73B0404",-1),oe=v("\u4FDD \u5B58");function te(l,u,d,F,_,B){const r=n("el-input"),a=n("el-form-item"),m=n("el-col"),c=n("ckeditor"),f=n("el-image"),g=n("el-link"),b=n("el-switch"),s=n("el-cascader"),i=n("el-option"),p=n("el-select"),V=n("el-row"),k=n("el-button"),U=n("el-form"),x=n("el-card"),S=n("AttachDialog");return E(),h("div",ee,[e(x,null,{default:o(()=>[e(U,{model:l.ruleForm,size:"small","label-width":"100px",rules:l.rules,ref:"myRefForm"},{default:o(()=>[e(V,{gutter:35},{default:o(()=>[e(m,{class:"mb20"},{default:o(()=>[e(a,{label:"\u6807\u9898",prop:"title"},{default:o(()=>[e(r,{modelValue:l.ruleForm.title,"onUpdate:modelValue":u[0]||(u[0]=t=>l.ruleForm.title=t),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{class:"mb20"},{default:o(()=>[e(a,{label:"\u6587\u7AE0\u8BE6\u60C5",prop:"contentHtml"},{default:o(()=>[e(c,{modelValue:l.ruleForm.contentHtml,"onUpdate:modelValue":u[1]||(u[1]=t=>l.ruleForm.contentHtml=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{class:"mb20"},{default:o(()=>[e(a,{label:"\u7F29\u7565\u56FE",prop:"thumbnail"},{default:o(()=>[e(f,{style:{width:"100px",height:"100px"},src:l.ruleForm.thumbnail,fit:l.fit},null,8,["src","fit"])]),_:1}),e(a,null,{default:o(()=>[e(g,{type:"primary",onClick:F.onAttachDialogOpen},{default:o(()=>[le]),_:1},8,["onClick"])]),_:1})]),_:1}),e(m,{class:"mb20"},{default:o(()=>[e(a,{label:"\u6587\u7AE0\u6458\u8981",prop:"summary"},{default:o(()=>[e(r,{modelValue:l.ruleForm.summary,"onUpdate:modelValue":u[2]||(u[2]=t=>l.ruleForm.summary=t),type:"textarea",rows:2,placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6458\u8981",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[e(a,{label:"SEO\u5173\u952E\u8BCD",prop:"seoKeywords"},{default:o(()=>[e(r,{type:"textarea",rows:2,modelValue:l.ruleForm.seoKeywords,"onUpdate:modelValue":u[3]||(u[3]=t=>l.ruleForm.seoKeywords=t),placeholder:"\u8BF7\u8F93\u5165seo\u5173\u952E\u8BCD",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[e(a,{label:"SEO\u63CF\u8FF0",prop:"seoDescription"},{default:o(()=>[e(r,{type:"textarea",rows:2,modelValue:l.ruleForm.seoDescription,"onUpdate:modelValue":u[4]||(u[4]=t=>l.ruleForm.seoDescription=t),placeholder:"\u8BF7\u8F93\u5165SEO\u63CF\u8FF0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[e(a,{label:"\u6392\u5E8F",prop:"sortNum"},{default:o(()=>[e(r,{modelValue:l.ruleForm.sortNum,"onUpdate:modelValue":u[5]||(u[5]=t=>l.ruleForm.sortNum=t),type:"number",placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F\u5E8F\u53F7",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[e(a,{label:"\u5916\u94FE",prop:"outLink"},{default:o(()=>[e(r,{modelValue:l.ruleForm.outLink,"onUpdate:modelValue":u[6]||(u[6]=t=>l.ruleForm.outLink=t),placeholder:"\u8BF7\u8F93\u5165\u5916\u94FE",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[e(a,{label:"\u6A21\u677F",prop:"suffix"},{default:o(()=>[e(r,{modelValue:l.ruleForm.suffix,"onUpdate:modelValue":u[7]||(u[7]=t=>l.ruleForm.suffix=t),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6A21\u677F\u540E\u7F00",clearable:""},null,8,["modelValue"]),ue]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[e(a,{label:"\u5141\u8BB8\u8BC4\u8BBA",prop:"commentEnable"},{default:o(()=>[e(b,{modelValue:l.ruleForm.commentEnable,"onUpdate:modelValue":u[8]||(u[8]=t=>l.ruleForm.commentEnable=t),"active-color":"#13ce66"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[e(a,{label:"\u5206\u7C7B",prop:"categories"},{default:o(()=>[e(s,{ref:"categoryCascader",modelValue:l.ruleForm.articleCategory,"onUpdate:modelValue":u[9]||(u[9]=t=>l.ruleForm.articleCategory=t),options:l.categories,props:{multiple:!0,label:"label",value:"id",children:"children"},"collapse-tags":"",clearable:""},null,8,["modelValue","options"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[e(a,{label:"\u6807\u7B7E",prop:"tags"},{default:o(()=>[e(p,{modelValue:l.ruleForm.articleTag,"onUpdate:modelValue":u[10]||(u[10]=t=>l.ruleForm.articleTag=t),class:"w100",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"\u53EF\u76F4\u63A5\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},{default:o(()=>[(E(!0),h(K,null,T(l.tags,t=>(E(),z(i,{key:t.id,label:t.tagName,value:t.tagName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{class:"mb20"},{default:o(()=>[e(a,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[e(p,{modelValue:l.ruleForm.status,"onUpdate:modelValue":u[11]||(u[11]=t=>l.ruleForm.status=t),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",class:"w100"},{default:o(()=>[e(i,{label:"\u53D1\u5E03",value:"publish"}),e(i,{label:"\u8349\u7A3F",value:"draft"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(V,null,{default:o(()=>[e(a,null,{default:o(()=>[e(k,{type:"primary",onClick:F.onSubmit,size:"small"},{default:o(()=>[oe]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(S,{ref:"attachDialogRef",onAttachHandler:F.getSelectAttach},null,8,["onAttachHandler"])])}var Fe=P(Z,[["render",te]]);export{Fe as default};
