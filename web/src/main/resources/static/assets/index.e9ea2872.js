var E=Object.defineProperty;var h=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var _=(t,e,o)=>e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,f=(t,e)=>{for(var o in e||(e={}))y.call(e,o)&&_(t,o,e[o]);if(h)for(var o of h(e))B.call(e,o)&&_(t,o,e[o]);return t};import{e as x,f as F}from"./index.889cc0bc.js";import{a0 as k,j as A,o as S,t as N,l as i,m as R,z as n,A as r,E as j,b,D as w,p as C,y as H,Q as M,L as T,x as p}from"./vendor.a9aef9fe.js";import{_ as U}from"./index.5eb239a7.js";const V={name:"articleManager",setup(){const t=k(),e=A({tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10}}}),o=()=>{x(e.tableData.param).then(a=>{e.tableData.data=a.data.records,e.tableData.total=a.data.total}).catch(()=>{})},s=a=>{j.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u6587\u7AE0, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u5220\u9664",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{F(a.id).then(()=>{b.success("\u5220\u9664\u6210\u529F"),o()}).catch(d=>{b.error(d.message)})}).catch(()=>{})},m=a=>{t.push({path:"/article/write",query:{id:a.id}})},g=a=>{e.tableData.param.pageSize=a},u=a=>{e.tableData.param.pageNum=a},c=()=>{t.push({path:"/article/write"})};return S(()=>{o()}),f({addArticle:c,onRowUpdate:m,onRowDel:s,onHandleSizeChange:g,onHandleCurrentChange:u,initTableData:o},N(e))}},L={class:"mb15"},$=p("\u65B0\u5EFA\u6587\u7AE0"),q=p("\u67E5\u8BE2"),I=["href"],Q=p("\u4FEE\u6539"),G=p("\u5220\u9664");function J(t,e,o,s,m,g){const u=i("el-button"),c=i("el-input"),a=i("el-table-column"),d=i("el-table"),D=i("el-pagination"),z=i("el-card");return w(),R("div",null,[n(z,{shadow:"hover"},{default:r(()=>[C("div",L,[n(u,{class:"mt15",size:"small",onClick:e[0]||(e[0]=l=>s.addArticle()),type:"primary",icon:"iconfont icon-shuxingtu"},{default:r(()=>[$]),_:1}),n(c,{size:"small",placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898","prefix-icon":"el-icon-search",style:{"max-width":"180px"},class:"ml10"}),n(u,{size:"small",type:"primary",class:"ml10"},{default:r(()=>[q]),_:1})]),n(d,{data:t.tableData.data,stripe:"",style:{width:"100%"}},{default:r(()=>[n(a,{prop:"id",label:"ID","show-overflow-tooltip":""}),n(a,{prop:"title",label:"\u6807\u9898","show-overflow-tooltip":""},{default:r(l=>[C("a",{href:l.row.url,target:"_blank"},H(l.row.title),9,I)]),_:1}),n(a,{prop:"author",label:"\u4F5C\u8005","show-overflow-tooltip":""}),n(a,{prop:"status",label:"\u72B6\u6001","show-overflow-tooltip":""}),n(a,{prop:"viewCount",label:"\u6D4F\u89C8\u6B21\u6570","show-overflow-tooltip":""}),n(a,{prop:"created",label:"\u521B\u5EFA\u65F6\u95F4","show-overflow-tooltip":""}),n(a,{prop:"path",label:"\u64CD\u4F5C",width:"90"},{default:r(l=>[n(u,{size:"mini",type:"text",onClick:v=>s.onRowUpdate(l.row)},{default:r(()=>[Q]),_:2},1032,["onClick"]),l.row.id!=1?(w(),M(u,{key:0,size:"mini",type:"text",onClick:v=>s.onRowDel(l.row)},{default:r(()=>[G]),_:2},1032,["onClick"])):T("",!0)]),_:1})]),_:1},8,["data"]),n(D,{onSizeChange:s.onHandleSizeChange,onCurrentChange:s.onHandleCurrentChange,class:"mt15","pager-count":5,"page-sizes":[10,20,30],"current-page":t.tableData.param.pageNum,"onUpdate:current-page":e[1]||(e[1]=l=>t.tableData.param.pageNum=l),background:"","page-size":t.tableData.param.pageSize,"onUpdate:page-size":e[2]||(e[2]=l=>t.tableData.param.pageSize=l),layout:"total, sizes, prev, pager, next, jumper",total:t.tableData.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),_:1})])}var X=U(V,[["render",J]]);export{X as default};
