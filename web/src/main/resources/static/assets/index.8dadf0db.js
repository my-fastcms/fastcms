var T=Object.defineProperty;var y=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var S=(e,o,a)=>o in e?T(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,E=(e,o)=>{for(var a in o||(o={}))A.call(o,a)&&S(e,a,o[a]);if(y)for(var a of y(o))F.call(o,a)&&S(e,a,o[a]);return e};import{g as V}from"./index.e3dc0aa7.js";import{_ as j,S as N}from"./index.84013ba5.js";import{j as U,o as B,t as I,l as s,D as c,Q as p,A as l,p as m,z as i,m as z,Y as O,X as L,y as M,L as q,b as x,x as f}from"./vendor.d2ed1f2c.js";const P={emits:["attachHandler"],name:"attachDialog",props:{fileType:String},setup(e,o){const a=U({isShowDialog:!1,queryParams:{},showSearch:!0,max:1,limit:3,uploadUrl:"fastcms/api/admin/attachment/upload",headers:{Authorization:N.get("token")},checkedObjs:[],tableData:{data:[],total:99,loading:!1,param:{pageNum:1,pageSize:10}}}),n=t=>{a.isShowDialog=!0,a.max=t},g=()=>{a.isShowDialog=!1,a.max=1},d=()=>{e.fileType&&(console.log("==>fileType:"+e.fileType),a.tableData.param.fileType=e.fileType),V(a.tableData.param).then(t=>{a.tableData.data=t.data.records,a.tableData.total=t.data.total})},u=()=>{d()},_=()=>{x.error("\u4E0A\u4F20\u6587\u4EF6\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 "+a.limit+" \u4E2A!")},h=()=>{x.error("\u4E0A\u4F20\u5931\u8D25")};return B(()=>{d()}),E({openDialog:n,closeDialog:g,initTableData:d,onTableItemClick:t=>{console.log(t)},onHandleSizeChange:t=>{a.tableData.param.pageSize=t,d()},onHandleCurrentChange:t=>{a.tableData.param.pageNum=t,d()},onHandleExceed:_,onHandleUploadError:h,uploadSuccess:u,onSubmit:()=>{o.emit("attachHandler",a.checkedObjs),g()}},I(a))}},Q=f("\u4E0A\u4F20\u9644\u4EF6"),R={key:0},X=["src"],Y={style:{padding:"14px"}},G={class:"dialog-footer"},J=f("\u53D6 \u6D88"),K=f("\u786E \u5B9A");function W(e,o,a,n,g,d){const u=s("el-button"),_=s("el-upload"),h=s("el-checkbox"),b=s("el-card"),D=s("el-col"),C=s("el-checkbox-group"),k=s("el-row"),t=s("el-empty"),H=s("el-pagination"),v=s("el-dialog");return c(),p(v,{title:"\u9009\u62E9\u9644\u4EF6",fullscreen:"",modelValue:e.isShowDialog,"onUpdate:modelValue":o[1]||(o[1]=r=>e.isShowDialog=r)},{footer:l(()=>[m("span",G,[i(u,{onClick:n.closeDialog,size:"small"},{default:l(()=>[J]),_:1},8,["onClick"]),i(u,{type:"primary",onClick:n.onSubmit,size:"small"},{default:l(()=>[K]),_:1},8,["onClick"])])]),default:l(()=>[m("div",null,[i(_,{class:"upload-btn",action:e.uploadUrl,name:"files",multiple:"",headers:e.headers,"show-file-list":!1,"on-success":n.uploadSuccess,"on-exceed":n.onHandleExceed,"on-error":n.onHandleUploadError,limit:e.limit},{default:l(()=>[i(u,{size:"small",type:"primary"},{default:l(()=>[Q]),_:1})]),_:1},8,["action","headers","on-success","on-exceed","on-error","limit"]),i(b,{shadow:"hover"},{default:l(()=>[e.tableData.data.length>0?(c(),z("div",R,[i(k,{gutter:15},{default:l(()=>[i(C,{max:e.max,modelValue:e.checkedObjs,"onUpdate:modelValue":o[0]||(o[0]=r=>e.checkedObjs=r)},{default:l(()=>[(c(!0),z(O,null,L(e.tableData.data,(r,w)=>(c(),p(D,{xs:24,sm:12,md:8,lg:6,xl:4,class:"mb15",key:w,onClick:Z=>n.onTableItemClick(r)},{default:l(()=>[i(b,{"body-style":{padding:"0px"}},{default:l(()=>[m("img",{src:r.path,class:"image"},null,8,X),m("div",Y,[i(h,{label:r},{default:l(()=>[m("span",null,M(r.fileName),1)]),_:2},1032,["label"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1},8,["max","modelValue"])]),_:1})])):(c(),p(t,{key:1,description:"\u6682\u65E0\u6570\u636E"})),e.tableData.data.length>0?(c(),p(H,{key:2,style:{"text-align":"right"},background:"",onSizeChange:n.onHandleSizeChange,onCurrentChange:n.onHandleCurrentChange,"page-sizes":[10,20,30],"current-page":e.tableData.param.pageNum,"page-size":e.tableData.param.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])):q("",!0)]),_:1})])]),_:1},8,["modelValue"])}var te=j(P,[["render",W],["__scopeId","data-v-397e2bf5"]]);export{te as A};
