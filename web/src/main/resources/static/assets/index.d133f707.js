var v=Object.defineProperty;var h=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var _=(t,e,o)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,b=(t,e)=>{for(var o in e||(e={}))E.call(e,o)&&_(t,o,e[o]);if(h)for(var o of h(e))B.call(e,o)&&_(t,o,e[o]);return t};import{g as x,d as F}from"./index.b373240d.js";import{a0 as y,j as A,o as k,t as N,l as i,m as S,z as n,A as s,E as R,b as C,D as w,p as j,Q as H,L as M,x as p}from"./vendor.e5eb9059.js";import{_ as T}from"./index.a104479c.js";const U={name:"articleManager",setup(){const t=y(),e=A({tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10}}}),o=()=>{x(e.tableData.param).then(a=>{e.tableData.data=a.data.records,e.tableData.total=a.data.total}).catch(()=>{})},r=a=>{R.confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u6587\u7AE0, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u5220\u9664",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{F(a.id).then(()=>{C.success("\u5220\u9664\u6210\u529F"),o()}).catch(d=>{C.error(d.message)})}).catch(()=>{})},m=a=>{t.push({path:"/article/write",query:{id:a.id}})},g=a=>{e.tableData.param.pageSize=a},u=a=>{e.tableData.param.pageNum=a},c=()=>{t.push({path:"/article/write"})};return k(()=>{o()}),b({addArticle:c,onRowUpdate:m,onRowDel:r,onHandleSizeChange:g,onHandleCurrentChange:u,initTableData:o},N(e))}},V={class:"mb15"},L=p("\u65B0\u5EFA\u6587\u7AE0"),$=p("\u67E5\u8BE2"),q=p("\u4FEE\u6539"),I=p("\u5220\u9664");function Q(t,e,o,r,m,g){const u=i("el-button"),c=i("el-input"),a=i("el-table-column"),d=i("el-table"),f=i("el-pagination"),D=i("el-card");return w(),S("div",null,[n(D,{shadow:"hover"},{default:s(()=>[j("div",V,[n(u,{class:"mt15",size:"small",onClick:e[0]||(e[0]=l=>r.addArticle()),type:"primary",icon:"iconfont icon-shuxingtu"},{default:s(()=>[L]),_:1}),n(c,{size:"small",placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898","prefix-icon":"el-icon-search",style:{"max-width":"180px"},class:"ml10"}),n(u,{size:"small",type:"primary",class:"ml10"},{default:s(()=>[$]),_:1})]),n(d,{data:t.tableData.data,stripe:"",style:{width:"100%"}},{default:s(()=>[n(a,{prop:"id",label:"ID","show-overflow-tooltip":""}),n(a,{prop:"title",label:"\u6807\u9898","show-overflow-tooltip":""}),n(a,{prop:"author",label:"\u4F5C\u8005","show-overflow-tooltip":""}),n(a,{prop:"status",label:"\u72B6\u6001","show-overflow-tooltip":""}),n(a,{prop:"viewCount",label:"\u6D4F\u89C8\u6B21\u6570","show-overflow-tooltip":""}),n(a,{prop:"created",label:"\u521B\u5EFA\u65F6\u95F4","show-overflow-tooltip":""}),n(a,{prop:"path",label:"\u64CD\u4F5C",width:"90"},{default:s(l=>[n(u,{size:"mini",type:"text",onClick:z=>r.onRowUpdate(l.row)},{default:s(()=>[q]),_:2},1032,["onClick"]),l.row.id!=1?(w(),H(u,{key:0,size:"mini",type:"text",onClick:z=>r.onRowDel(l.row)},{default:s(()=>[I]),_:2},1032,["onClick"])):M("",!0)]),_:1})]),_:1},8,["data"]),n(f,{onSizeChange:r.onHandleSizeChange,onCurrentChange:r.onHandleCurrentChange,class:"mt15","pager-count":5,"page-sizes":[10,20,30],"current-page":t.tableData.param.pageNum,"onUpdate:current-page":e[1]||(e[1]=l=>t.tableData.param.pageNum=l),background:"","page-size":t.tableData.param.pageSize,"onUpdate:page-size":e[2]||(e[2]=l=>t.tableData.param.pageSize=l),layout:"total, sizes, prev, pager, next, jumper",total:t.tableData.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),_:1})])}var P=T(U,[["render",Q]]);export{P as default};
